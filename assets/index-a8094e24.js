var Gg=Object.defineProperty;var zg=(r,t,e)=>t in r?Gg(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var N=(r,t,e)=>(zg(r,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();function es(){}function ix(r){return r()}function gf(){return Object.create(null)}function fu(r){r.forEach(ix)}function nx(r){return typeof r=="function"}function Vg(r,t){return r!=r?t==t:r!==t||r&&typeof r=="object"||typeof r=="function"}function Xg(r){return Object.keys(r).length===0}function Bn(r,t){r.appendChild(t)}function Wg(r,t,e){r.insertBefore(t,e||null)}function sx(r){r.parentNode&&r.parentNode.removeChild(r)}function $s(r){return document.createElement(r)}function Yg(r){return document.createTextNode(r)}function yf(){return Yg(" ")}function qg(r,t,e,i){return r.addEventListener(t,e,i),()=>r.removeEventListener(t,e,i)}function Mn(r,t,e){e==null?r.removeAttribute(t):r.getAttribute(t)!==e&&r.setAttribute(t,e)}function Kg(r){return Array.from(r.childNodes)}let na;function ra(r){na=r}function Zg(){if(!na)throw new Error("Function called outside component initialization");return na}function Qg(r){Zg().$$.on_mount.push(r)}const $n=[],vf=[];let rs=[];const Ef=[],Jg=Promise.resolve();let wc=!1;function ty(){wc||(wc=!0,Jg.then(ox))}function Nc(r){rs.push(r)}const Nh=new Set;let kn=0;function ox(){if(kn!==0)return;const r=na;do{try{for(;kn<$n.length;){const t=$n[kn];kn++,ra(t),ey(t.$$)}}catch(t){throw $n.length=0,kn=0,t}for(ra(null),$n.length=0,kn=0;vf.length;)vf.pop()();for(let t=0;t<rs.length;t+=1){const e=rs[t];Nh.has(e)||(Nh.add(e),e())}rs.length=0}while($n.length);for(;Ef.length;)Ef.pop()();wc=!1,Nh.clear(),ra(r)}function ey(r){if(r.fragment!==null){r.update(),fu(r.before_update);const t=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,t),r.after_update.forEach(Nc)}}function ry(r){const t=[],e=[];rs.forEach(i=>r.indexOf(i)===-1?t.push(i):e.push(i)),e.forEach(i=>i()),rs=t}const iy=new Set;function ny(r,t){r&&r.i&&(iy.delete(r),r.i(t))}function sy(r,t,e,i){const{fragment:n,after_update:s}=r.$$;n&&n.m(t,e),i||Nc(()=>{const o=r.$$.on_mount.map(ix).filter(nx);r.$$.on_destroy?r.$$.on_destroy.push(...o):fu(o),r.$$.on_mount=[]}),s.forEach(Nc)}function oy(r,t){const e=r.$$;e.fragment!==null&&(ry(e.after_update),fu(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function ay(r,t){r.$$.dirty[0]===-1&&($n.push(r),ty(),r.$$.dirty.fill(0)),r.$$.dirty[t/31|0]|=1<<t%31}function ly(r,t,e,i,n,s,o,a=[-1]){const l=na;ra(r);const u=r.$$={fragment:null,ctx:[],props:s,update:es,not_equal:n,bound:gf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:gf(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};o&&o(u.root);let h=!1;if(u.ctx=e?e(r,t.props||{},(c,d,...f)=>{const p=f.length?f[0]:d;return u.ctx&&n(u.ctx[c],u.ctx[c]=p)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](p),h&&ay(r,c)),d}):[],u.update(),h=!0,fu(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const c=Kg(t.target);u.fragment&&u.fragment.l(c),c.forEach(sx)}else u.fragment&&u.fragment.c();t.intro&&ny(r.$$.fragment),sy(r,t.target,t.anchor,t.customElement),ox()}ra(l)}class uy{$destroy(){oy(this,1),this.$destroy=es}$on(t,e){if(!nx(e))return es;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const n=i.indexOf(e);n!==-1&&i.splice(n,1)}}$set(t){this.$$set&&!Xg(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var Tn=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(Tn||{}),ax=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(ax||{}),Rc=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(Rc||{}),Et=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(Et||{}),gr=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(gr||{}),nt=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(nt||{}),is=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(is||{}),mt=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(mt||{}),Ic=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(Ic||{}),yr=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(yr||{}),Ei=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(Ei||{}),Sr=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(Sr||{}),sr=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(sr||{}),mr=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(mr||{}),_d=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(_d||{}),$e=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))($e||{}),Kt=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(Kt||{}),Ht=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(Ht||{}),Er=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(Er||{});const hy={createCanvas:(r,t)=>{const e=document.createElement("canvas");return e.width=r,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},ot={ADAPTER:hy,RESOLUTION:1,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,clearBeforeRender:!0,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,hello:!1},CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Rh=/iPhone/i,Tf=/iPod/i,Af=/iPad/i,Sf=/\biOS-universal(?:.+)Mac\b/i,Ih=/\bAndroid(?:.+)Mobile\b/i,bf=/Android/i,Un=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ll=/Silk/i,Hr=/Windows Phone/i,Cf=/\bWindows(?:.+)ARM\b/i,wf=/BlackBerry/i,Nf=/BB10/i,Rf=/Opera Mini/i,If=/\b(CriOS|Chrome)(?:.+)Mobile/i,Pf=/Mobile(?:.+)Firefox\b/i,Df=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function cy(r){return function(t){return t.test(r)}}function dy(r){var t={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?t.userAgent=r:r&&r.userAgent&&(t={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var e=t.userAgent,i=e.split("[FBAN");typeof i[1]<"u"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]<"u"&&(e=i[0]);var n=cy(e),s={apple:{phone:n(Rh)&&!n(Hr),ipod:n(Tf),tablet:!n(Rh)&&(n(Af)||Df(t))&&!n(Hr),universal:n(Sf),device:(n(Rh)||n(Tf)||n(Af)||n(Sf)||Df(t))&&!n(Hr)},amazon:{phone:n(Un),tablet:!n(Un)&&n(ll),device:n(Un)||n(ll)},android:{phone:!n(Hr)&&n(Un)||!n(Hr)&&n(Ih),tablet:!n(Hr)&&!n(Un)&&!n(Ih)&&(n(ll)||n(bf)),device:!n(Hr)&&(n(Un)||n(ll)||n(Ih)||n(bf))||n(/\bokhttp\b/i)},windows:{phone:n(Hr),tablet:n(Cf),device:n(Hr)||n(Cf)},other:{blackberry:n(wf),blackberry10:n(Nf),opera:n(Rf),firefox:n(Pf),chrome:n(If),device:n(wf)||n(Nf)||n(Rf)||n(Pf)||n(If)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Gr=dy(globalThis.navigator);ot.RETINA_PREFIX=/@([0-9\.]+)x/;ot.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lx(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function i(){if(this instanceof i){var n=[null];n.push.apply(n,arguments);var s=Function.bind.apply(t,n);return new s}return t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}),e}var en={},fy={get exports(){return en},set exports(r){en=r}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function n(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,c,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new n(h,c||l,d),p=e?e+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,c;if(this._eventsCount===0)return u;for(c in h=this._events)t.call(h,c)&&u.push(e?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=e?e+u:u,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,f=c.length,p=new Array(f);d<f;d++)p[d]=c[d].fn;return p},a.prototype.listenerCount=function(u){var h=e?e+u:u,c=this._events[h];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,h,c,d,f,p){var _=e?e+u:u;if(!this._events[_])return!1;var x=this._events[_],g=arguments.length,v,m;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),g){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,c),!0;case 4:return x.fn.call(x.context,h,c,d),!0;case 5:return x.fn.call(x.context,h,c,d,f),!0;case 6:return x.fn.call(x.context,h,c,d,f,p),!0}for(m=1,v=new Array(g-1);m<g;m++)v[m-1]=arguments[m];x.fn.apply(x.context,v)}else{var y=x.length,S;for(m=0;m<y;m++)switch(x[m].once&&this.removeListener(u,x[m].fn,void 0,!0),g){case 1:x[m].fn.call(x[m].context);break;case 2:x[m].fn.call(x[m].context,h);break;case 3:x[m].fn.call(x[m].context,h,c);break;case 4:x[m].fn.call(x[m].context,h,c,d);break;default:if(!v)for(S=1,v=new Array(g-1);S<g;S++)v[S-1]=arguments[S];x[m].fn.apply(x[m].context,v)}}return!0},a.prototype.on=function(u,h,c){return s(this,u,h,c,!1)},a.prototype.once=function(u,h,c){return s(this,u,h,c,!0)},a.prototype.removeListener=function(u,h,c,d){var f=e?e+u:u;if(!this._events[f])return this;if(!h)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===h&&(!d||p.once)&&(!c||p.context===c)&&o(this,f);else{for(var _=0,x=[],g=p.length;_<g;_++)(p[_].fn!==h||d&&!p[_].once||c&&p[_].context!==c)&&x.push(p[_]);x.length?this._events[f]=x.length===1?x[0]:x:o(this,f)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=e?e+u:u,this._events[h]&&o(this,h)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(fy);var Wl={},py={get exports(){return Wl},set exports(r){Wl=r}};py.exports=pu;Wl.default=pu;function pu(r,t,e){e=e||2;var i=t&&t.length,n=i?t[0]*e:r.length,s=ux(r,0,n,e,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,h,c,d,f;if(i&&(s=yy(r,t,s,e)),r.length>80*e){a=u=r[0],l=h=r[1];for(var p=e;p<n;p+=e)c=r[p],d=r[p+1],c<a&&(a=c),d<l&&(l=d),c>u&&(u=c),d>h&&(h=d);f=Math.max(u-a,h-l),f=f!==0?32767/f:0}return sa(s,o,e,a,l,f,0),o}function ux(r,t,e,i,n){var s,o;if(n===Oc(r,t,e,i)>0)for(s=t;s<e;s+=i)o=Of(s,r[s],r[s+1],o);else for(s=e-i;s>=t;s-=i)o=Of(s,r[s],r[s+1],o);return o&&xu(o,o.next)&&(aa(o),o=o.next),o}function rn(r,t){if(!r)return r;t||(t=r);var e=r,i;do if(i=!1,!e.steiner&&(xu(e,e.next)||kt(e.prev,e,e.next)===0)){if(aa(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function sa(r,t,e,i,n,s,o){if(r){!o&&s&&Sy(r,i,n,s);for(var a=r,l,u;r.prev!==r.next;){if(l=r.prev,u=r.next,s?my(r,i,n,s):xy(r)){t.push(l.i/e|0),t.push(r.i/e|0),t.push(u.i/e|0),aa(r),r=u.next,a=u.next;continue}if(r=u,r===a){o?o===1?(r=_y(rn(r),t,e),sa(r,t,e,i,n,s,2)):o===2&&gy(r,t,e,i,n,s):sa(rn(r),t,e,i,n,s,1);break}}}}function xy(r){var t=r.prev,e=r,i=r.next;if(kt(t,e,i)>=0)return!1;for(var n=t.x,s=e.x,o=i.x,a=t.y,l=e.y,u=i.y,h=n<s?n<o?n:o:s<o?s:o,c=a<l?a<u?a:u:l<u?l:u,d=n>s?n>o?n:o:s>o?s:o,f=a>l?a>u?a:u:l>u?l:u,p=i.next;p!==t;){if(p.x>=h&&p.x<=d&&p.y>=c&&p.y<=f&&Yn(n,a,s,l,o,u,p.x,p.y)&&kt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function my(r,t,e,i){var n=r.prev,s=r,o=r.next;if(kt(n,s,o)>=0)return!1;for(var a=n.x,l=s.x,u=o.x,h=n.y,c=s.y,d=o.y,f=a<l?a<u?a:u:l<u?l:u,p=h<c?h<d?h:d:c<d?c:d,_=a>l?a>u?a:u:l>u?l:u,x=h>c?h>d?h:d:c>d?c:d,g=Pc(f,p,t,e,i),v=Pc(_,x,t,e,i),m=r.prevZ,y=r.nextZ;m&&m.z>=g&&y&&y.z<=v;){if(m.x>=f&&m.x<=_&&m.y>=p&&m.y<=x&&m!==n&&m!==o&&Yn(a,h,l,c,u,d,m.x,m.y)&&kt(m.prev,m,m.next)>=0||(m=m.prevZ,y.x>=f&&y.x<=_&&y.y>=p&&y.y<=x&&y!==n&&y!==o&&Yn(a,h,l,c,u,d,y.x,y.y)&&kt(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;m&&m.z>=g;){if(m.x>=f&&m.x<=_&&m.y>=p&&m.y<=x&&m!==n&&m!==o&&Yn(a,h,l,c,u,d,m.x,m.y)&&kt(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;y&&y.z<=v;){if(y.x>=f&&y.x<=_&&y.y>=p&&y.y<=x&&y!==n&&y!==o&&Yn(a,h,l,c,u,d,y.x,y.y)&&kt(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function _y(r,t,e){var i=r;do{var n=i.prev,s=i.next.next;!xu(n,s)&&hx(n,i,i.next,s)&&oa(n,s)&&oa(s,n)&&(t.push(n.i/e|0),t.push(i.i/e|0),t.push(s.i/e|0),aa(i),aa(i.next),i=r=s),i=i.next}while(i!==r);return rn(i)}function gy(r,t,e,i,n,s){var o=r;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&wy(o,a)){var l=cx(o,a);o=rn(o,o.next),l=rn(l,l.next),sa(o,t,e,i,n,s,0),sa(l,t,e,i,n,s,0);return}a=a.next}o=o.next}while(o!==r)}function yy(r,t,e,i){var n=[],s,o,a,l,u;for(s=0,o=t.length;s<o;s++)a=t[s]*i,l=s<o-1?t[s+1]*i:r.length,u=ux(r,a,l,i,!1),u===u.next&&(u.steiner=!0),n.push(Cy(u));for(n.sort(vy),s=0;s<n.length;s++)e=Ey(n[s],e);return e}function vy(r,t){return r.x-t.x}function Ey(r,t){var e=Ty(r,t);if(!e)return t;var i=cx(e,r);return rn(i,i.next),rn(e,e.next)}function Ty(r,t){var e=t,i=r.x,n=r.y,s=-1/0,o;do{if(n<=e.y&&n>=e.next.y&&e.next.y!==e.y){var a=e.x+(n-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=i&&a>s&&(s=a,o=e.x<e.next.x?e:e.next,a===i))return o}e=e.next}while(e!==t);if(!o)return null;var l=o,u=o.x,h=o.y,c=1/0,d;e=o;do i>=e.x&&e.x>=u&&i!==e.x&&Yn(n<h?i:s,n,u,h,n<h?s:i,n,e.x,e.y)&&(d=Math.abs(n-e.y)/(i-e.x),oa(e,r)&&(d<c||d===c&&(e.x>o.x||e.x===o.x&&Ay(o,e)))&&(o=e,c=d)),e=e.next;while(e!==l);return o}function Ay(r,t){return kt(r.prev,r,t.prev)<0&&kt(t.next,r,r.next)<0}function Sy(r,t,e,i){var n=r;do n.z===0&&(n.z=Pc(n.x,n.y,t,e,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==r);n.prevZ.nextZ=null,n.prevZ=null,by(n)}function by(r){var t,e,i,n,s,o,a,l,u=1;do{for(e=r,r=null,s=null,o=0;e;){for(o++,i=e,a=0,t=0;t<u&&(a++,i=i.nextZ,!!i);t++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||e.z<=i.z)?(n=e,e=e.nextZ,a--):(n=i,i=i.nextZ,l--),s?s.nextZ=n:r=n,n.prevZ=s,s=n;e=i}s.nextZ=null,u*=2}while(o>1);return r}function Pc(r,t,e,i,n){return r=(r-e)*n|0,t=(t-i)*n|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function Cy(r){var t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function Yn(r,t,e,i,n,s,o,a){return(n-o)*(t-a)>=(r-o)*(s-a)&&(r-o)*(i-a)>=(e-o)*(t-a)&&(e-o)*(s-a)>=(n-o)*(i-a)}function wy(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!Ny(r,t)&&(oa(r,t)&&oa(t,r)&&Ry(r,t)&&(kt(r.prev,r,t.prev)||kt(r,t.prev,t))||xu(r,t)&&kt(r.prev,r,r.next)>0&&kt(t.prev,t,t.next)>0)}function kt(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function xu(r,t){return r.x===t.x&&r.y===t.y}function hx(r,t,e,i){var n=hl(kt(r,t,e)),s=hl(kt(r,t,i)),o=hl(kt(e,i,r)),a=hl(kt(e,i,t));return!!(n!==s&&o!==a||n===0&&ul(r,e,t)||s===0&&ul(r,i,t)||o===0&&ul(e,r,i)||a===0&&ul(e,t,i))}function ul(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function hl(r){return r>0?1:r<0?-1:0}function Ny(r,t){var e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&hx(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function oa(r,t){return kt(r.prev,r,r.next)<0?kt(r,t,r.next)>=0&&kt(r,r.prev,t)>=0:kt(r,t,r.prev)<0||kt(r,r.next,t)<0}function Ry(r,t){var e=r,i=!1,n=(r.x+t.x)/2,s=(r.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&n<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==r);return i}function cx(r,t){var e=new Dc(r.i,r.x,r.y),i=new Dc(t.i,t.x,t.y),n=r.next,s=t.prev;return r.next=t,t.prev=r,e.next=n,n.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function Of(r,t,e,i){var n=new Dc(r,t,e);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function aa(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Dc(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}pu.deviation=function(r,t,e,i){var n=t&&t.length,s=n?t[0]*e:r.length,o=Math.abs(Oc(r,0,s,e));if(n)for(var a=0,l=t.length;a<l;a++){var u=t[a]*e,h=a<l-1?t[a+1]*e:r.length;o-=Math.abs(Oc(r,u,h,e))}var c=0;for(a=0;a<i.length;a+=3){var d=i[a]*e,f=i[a+1]*e,p=i[a+2]*e;c+=Math.abs((r[d]-r[p])*(r[f+1]-r[d+1])-(r[d]-r[f])*(r[p+1]-r[d+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function Oc(r,t,e,i){for(var n=0,s=t,o=e-i;s<e;s+=i)n+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return n}pu.flatten=function(r){for(var t=r[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,n=0;n<r.length;n++){for(var s=0;s<r[n].length;s++)for(var o=0;o<t;o++)e.vertices.push(r[n][s][o]);n>0&&(i+=r[n-1].length,e.holes.push(i))}return e};/*! https://mths.be/punycode v1.4.1 by @mathias */var Ph=2147483647,ia=36,dx=1,Fc=26,Iy=38,Py=700,Dy=72,Oy=128,Fy="-",Ly=/[^\x20-\x7E]/,By=/[\x2E\u3002\uFF0E\uFF61]/g,My={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Dh=ia-dx,qn=Math.floor,Oh=String.fromCharCode;function Ff(r){throw new RangeError(My[r])}function ky(r,t){for(var e=r.length,i=[];e--;)i[e]=t(r[e]);return i}function Uy(r,t){var e=r.split("@"),i="";e.length>1&&(i=e[0]+"@",r=e[1]),r=r.replace(By,".");var n=r.split("."),s=ky(n,t).join(".");return i+s}function Hy(r){for(var t=[],e=0,i=r.length,n,s;e<i;)n=r.charCodeAt(e++),n>=55296&&n<=56319&&e<i?(s=r.charCodeAt(e++),(s&64512)==56320?t.push(((n&1023)<<10)+(s&1023)+65536):(t.push(n),e--)):t.push(n);return t}function Lf(r,t){return r+22+75*(r<26)-((t!=0)<<5)}function jy(r,t,e){var i=0;for(r=e?qn(r/Py):r>>1,r+=qn(r/t);r>Dh*Fc>>1;i+=ia)r=qn(r/Dh);return qn(i+(Dh+1)*r/(r+Iy))}function $y(r){var t,e,i,n,s,o,a,l,u,h,c,d=[],f,p,_,x;for(r=Hy(r),f=r.length,t=Oy,e=0,s=Dy,o=0;o<f;++o)c=r[o],c<128&&d.push(Oh(c));for(i=n=d.length,n&&d.push(Fy);i<f;){for(a=Ph,o=0;o<f;++o)c=r[o],c>=t&&c<a&&(a=c);for(p=i+1,a-t>qn((Ph-e)/p)&&Ff("overflow"),e+=(a-t)*p,t=a,o=0;o<f;++o)if(c=r[o],c<t&&++e>Ph&&Ff("overflow"),c==t){for(l=e,u=ia;h=u<=s?dx:u>=s+Fc?Fc:u-s,!(l<h);u+=ia)x=l-h,_=ia-h,d.push(Oh(Lf(h+x%_,0))),l=qn(x/_);d.push(Oh(Lf(l,0))),s=jy(e,p,i==n),e=0,++i}++e,++t}return d.join("")}function Gy(r){return Uy(r,function(t){return Ly.test(t)?"xn--"+$y(t):t})}const nn=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};var _r=[],je=[],zy=typeof Uint8Array<"u"?Uint8Array:Array,gd=!1;function fx(){gd=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,e=r.length;t<e;++t)_r[t]=r[t],je[r.charCodeAt(t)]=t;je["-".charCodeAt(0)]=62,je["_".charCodeAt(0)]=63}function Vy(r){gd||fx();var t,e,i,n,s,o,a=r.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=r[a-2]==="="?2:r[a-1]==="="?1:0,o=new zy(a*3/4-s),i=s>0?a-4:a;var l=0;for(t=0,e=0;t<i;t+=4,e+=3)n=je[r.charCodeAt(t)]<<18|je[r.charCodeAt(t+1)]<<12|je[r.charCodeAt(t+2)]<<6|je[r.charCodeAt(t+3)],o[l++]=n>>16&255,o[l++]=n>>8&255,o[l++]=n&255;return s===2?(n=je[r.charCodeAt(t)]<<2|je[r.charCodeAt(t+1)]>>4,o[l++]=n&255):s===1&&(n=je[r.charCodeAt(t)]<<10|je[r.charCodeAt(t+1)]<<4|je[r.charCodeAt(t+2)]>>2,o[l++]=n>>8&255,o[l++]=n&255),o}function Xy(r){return _r[r>>18&63]+_r[r>>12&63]+_r[r>>6&63]+_r[r&63]}function Wy(r,t,e){for(var i,n=[],s=t;s<e;s+=3)i=(r[s]<<16)+(r[s+1]<<8)+r[s+2],n.push(Xy(i));return n.join("")}function Bf(r){gd||fx();for(var t,e=r.length,i=e%3,n="",s=[],o=16383,a=0,l=e-i;a<l;a+=o)s.push(Wy(r,a,a+o>l?l:a+o));return i===1?(t=r[e-1],n+=_r[t>>2],n+=_r[t<<4&63],n+="=="):i===2&&(t=(r[e-2]<<8)+r[e-1],n+=_r[t>>10],n+=_r[t>>4&63],n+=_r[t<<2&63],n+="="),s.push(n),s.join("")}function mu(r,t,e,i,n){var s,o,a=n*8-i-1,l=(1<<a)-1,u=l>>1,h=-7,c=e?n-1:0,d=e?-1:1,f=r[t+c];for(c+=d,s=f&(1<<-h)-1,f>>=-h,h+=a;h>0;s=s*256+r[t+c],c+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=i;h>0;o=o*256+r[t+c],c+=d,h-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,i),s=s-u}return(f?-1:1)*o*Math.pow(2,s-i)}function px(r,t,e,i,n,s){var o,a,l,u=s*8-n-1,h=(1<<u)-1,c=h>>1,d=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,p=i?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+c>=1?t+=d/l:t+=d*Math.pow(2,1-c),t*l>=2&&(o++,l/=2),o+c>=h?(a=0,o=h):o+c>=1?(a=(t*l-1)*Math.pow(2,n),o=o+c):(a=t*Math.pow(2,c-1)*Math.pow(2,n),o=0));n>=8;r[e+f]=a&255,f+=p,a/=256,n-=8);for(o=o<<n|a,u+=n;u>0;r[e+f]=o&255,f+=p,o/=256,u-=8);r[e+f-p]|=_*128}var Yy={}.toString,xx=Array.isArray||function(r){return Yy.call(r)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var qy=50;Y.TYPED_ARRAY_SUPPORT=nn.TYPED_ARRAY_SUPPORT!==void 0?nn.TYPED_ARRAY_SUPPORT:!0;Yl();function Yl(){return Y.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function zr(r,t){if(Yl()<t)throw new RangeError("Invalid typed array length");return Y.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(t),r.__proto__=Y.prototype):(r===null&&(r=new Y(t)),r.length=t),r}function Y(r,t,e){if(!Y.TYPED_ARRAY_SUPPORT&&!(this instanceof Y))return new Y(r,t,e);if(typeof r=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return yd(this,r)}return mx(this,r,t,e)}Y.poolSize=8192;Y._augment=function(r){return r.__proto__=Y.prototype,r};function mx(r,t,e,i){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?Qy(r,t,e,i):typeof t=="string"?Zy(r,t,e):Jy(r,t)}Y.from=function(r,t,e){return mx(null,r,t,e)};Y.TYPED_ARRAY_SUPPORT&&(Y.prototype.__proto__=Uint8Array.prototype,Y.__proto__=Uint8Array);function _x(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function Ky(r,t,e,i){return _x(t),t<=0?zr(r,t):e!==void 0?typeof i=="string"?zr(r,t).fill(e,i):zr(r,t).fill(e):zr(r,t)}Y.alloc=function(r,t,e){return Ky(null,r,t,e)};function yd(r,t){if(_x(t),r=zr(r,t<0?0:vd(t)|0),!Y.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)r[e]=0;return r}Y.allocUnsafe=function(r){return yd(null,r)};Y.allocUnsafeSlow=function(r){return yd(null,r)};function Zy(r,t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Y.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var i=gx(t,e)|0;r=zr(r,i);var n=r.write(t,e);return n!==i&&(r=r.slice(0,n)),r}function Lc(r,t){var e=t.length<0?0:vd(t.length)|0;r=zr(r,e);for(var i=0;i<e;i+=1)r[i]=t[i]&255;return r}function Qy(r,t,e,i){if(t.byteLength,e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(i||0))throw new RangeError("'length' is out of bounds");return e===void 0&&i===void 0?t=new Uint8Array(t):i===void 0?t=new Uint8Array(t,e):t=new Uint8Array(t,e,i),Y.TYPED_ARRAY_SUPPORT?(r=t,r.__proto__=Y.prototype):r=Lc(r,t),r}function Jy(r,t){if(br(t)){var e=vd(t.length)|0;return r=zr(r,e),r.length===0||t.copy(r,0,0,e),r}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||gv(t.length)?zr(r,0):Lc(r,t);if(t.type==="Buffer"&&xx(t.data))return Lc(r,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function vd(r){if(r>=Yl())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Yl().toString(16)+" bytes");return r|0}Y.isBuffer=Kn;function br(r){return!!(r!=null&&r._isBuffer)}Y.compare=function(t,e){if(!br(t)||!br(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,s=0,o=Math.min(i,n);s<o;++s)if(t[s]!==e[s]){i=t[s],n=e[s];break}return i<n?-1:n<i?1:0};Y.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Y.concat=function(t,e){if(!xx(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return Y.alloc(0);var i;if(e===void 0)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=Y.allocUnsafe(e),s=0;for(i=0;i<t.length;++i){var o=t[i];if(!br(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,s),s+=o.length}return n};function gx(r,t){if(br(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var e=r.length;if(e===0)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return ql(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return bx(r).length;default:if(i)return ql(r).length;t=(""+t).toLowerCase(),i=!0}}Y.byteLength=gx;function tv(r,t,e){var i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(r||(r="utf8");;)switch(r){case"hex":return hv(this,t,e);case"utf8":case"utf-8":return Ex(this,t,e);case"ascii":return lv(this,t,e);case"latin1":case"binary":return uv(this,t,e);case"base64":return ov(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return cv(this,t,e);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),i=!0}}Y.prototype._isBuffer=!0;function qi(r,t,e){var i=r[t];r[t]=r[e],r[e]=i}Y.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)qi(this,e,e+1);return this};Y.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)qi(this,e,e+3),qi(this,e+1,e+2);return this};Y.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)qi(this,e,e+7),qi(this,e+1,e+6),qi(this,e+2,e+5),qi(this,e+3,e+4);return this};Y.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?Ex(this,0,t):tv.apply(this,arguments)};Y.prototype.equals=function(t){if(!br(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:Y.compare(this,t)===0};Y.prototype.inspect=function(){var t="",e=qy;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"};Y.prototype.compare=function(t,e,i,n,s){if(!br(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),i===void 0&&(i=t?t.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),e<0||i>t.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&e>=i)return 0;if(n>=s)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,n>>>=0,s>>>=0,this===t)return 0;for(var o=s-n,a=i-e,l=Math.min(o,a),u=this.slice(n,s),h=t.slice(e,i),c=0;c<l;++c)if(u[c]!==h[c]){o=u[c],a=h[c];break}return o<a?-1:a<o?1:0};function yx(r,t,e,i,n){if(r.length===0)return-1;if(typeof e=="string"?(i=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=n?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(n)return-1;e=r.length-1}else if(e<0)if(n)e=0;else return-1;if(typeof t=="string"&&(t=Y.from(t,i)),br(t))return t.length===0?-1:Mf(r,t,e,i,n);if(typeof t=="number")return t=t&255,Y.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):Mf(r,[t],e,i,n);throw new TypeError("val must be string, number or Buffer")}function Mf(r,t,e,i,n){var s=1,o=r.length,a=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(r.length<2||t.length<2)return-1;s=2,o/=2,a/=2,e/=2}function l(f,p){return s===1?f[p]:f.readUInt16BE(p*s)}var u;if(n){var h=-1;for(u=e;u<o;u++)if(l(r,u)===l(t,h===-1?0:u-h)){if(h===-1&&(h=u),u-h+1===a)return h*s}else h!==-1&&(u-=u-h),h=-1}else for(e+a>o&&(e=o-a),u=e;u>=0;u--){for(var c=!0,d=0;d<a;d++)if(l(r,u+d)!==l(t,d)){c=!1;break}if(c)return u}return-1}Y.prototype.includes=function(t,e,i){return this.indexOf(t,e,i)!==-1};Y.prototype.indexOf=function(t,e,i){return yx(this,t,e,i,!0)};Y.prototype.lastIndexOf=function(t,e,i){return yx(this,t,e,i,!1)};function ev(r,t,e,i){e=Number(e)||0;var n=r.length-e;i?(i=Number(i),i>n&&(i=n)):i=n;var s=t.length;if(s%2!==0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(t.substr(o*2,2),16);if(isNaN(a))return o;r[e+o]=a}return o}function rv(r,t,e,i){return yu(ql(t,r.length-e),r,e,i)}function vx(r,t,e,i){return yu(mv(t),r,e,i)}function iv(r,t,e,i){return vx(r,t,e,i)}function nv(r,t,e,i){return yu(bx(t),r,e,i)}function sv(r,t,e,i){return yu(_v(t,r.length-e),r,e,i)}Y.prototype.write=function(t,e,i,n){if(e===void 0)n="utf8",i=this.length,e=0;else if(i===void 0&&typeof e=="string")n=e,i=this.length,e=0;else if(isFinite(e))e=e|0,isFinite(i)?(i=i|0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-e;if((i===void 0||i>s)&&(i=s),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return ev(this,t,e,i);case"utf8":case"utf-8":return rv(this,t,e,i);case"ascii":return vx(this,t,e,i);case"latin1":case"binary":return iv(this,t,e,i);case"base64":return nv(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return sv(this,t,e,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}};Y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ov(r,t,e){return t===0&&e===r.length?Bf(r):Bf(r.slice(t,e))}function Ex(r,t,e){e=Math.min(r.length,e);for(var i=[],n=t;n<e;){var s=r[n],o=null,a=s>239?4:s>223?3:s>191?2:1;if(n+a<=e){var l,u,h,c;switch(a){case 1:s<128&&(o=s);break;case 2:l=r[n+1],(l&192)===128&&(c=(s&31)<<6|l&63,c>127&&(o=c));break;case 3:l=r[n+1],u=r[n+2],(l&192)===128&&(u&192)===128&&(c=(s&15)<<12|(l&63)<<6|u&63,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:l=r[n+1],u=r[n+2],h=r[n+3],(l&192)===128&&(u&192)===128&&(h&192)===128&&(c=(s&15)<<18|(l&63)<<12|(u&63)<<6|h&63,c>65535&&c<1114112&&(o=c))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|o&1023),i.push(o),n+=a}return av(i)}var kf=4096;function av(r){var t=r.length;if(t<=kf)return String.fromCharCode.apply(String,r);for(var e="",i=0;i<t;)e+=String.fromCharCode.apply(String,r.slice(i,i+=kf));return e}function lv(r,t,e){var i="";e=Math.min(r.length,e);for(var n=t;n<e;++n)i+=String.fromCharCode(r[n]&127);return i}function uv(r,t,e){var i="";e=Math.min(r.length,e);for(var n=t;n<e;++n)i+=String.fromCharCode(r[n]);return i}function hv(r,t,e){var i=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>i)&&(e=i);for(var n="",s=t;s<e;++s)n+=xv(r[s]);return n}function cv(r,t,e){for(var i=r.slice(t,e),n="",s=0;s<i.length;s+=2)n+=String.fromCharCode(i[s]+i[s+1]*256);return n}Y.prototype.slice=function(t,e){var i=this.length;t=~~t,e=e===void 0?i:~~e,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),e<t&&(e=t);var n;if(Y.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=Y.prototype;else{var s=e-t;n=new Y(s,void 0);for(var o=0;o<s;++o)n[o]=this[o+t]}return n};function ee(r,t,e){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}Y.prototype.readUIntLE=function(t,e,i){t=t|0,e=e|0,i||ee(t,e,this.length);for(var n=this[t],s=1,o=0;++o<e&&(s*=256);)n+=this[t+o]*s;return n};Y.prototype.readUIntBE=function(t,e,i){t=t|0,e=e|0,i||ee(t,e,this.length);for(var n=this[t+--e],s=1;e>0&&(s*=256);)n+=this[t+--e]*s;return n};Y.prototype.readUInt8=function(t,e){return e||ee(t,1,this.length),this[t]};Y.prototype.readUInt16LE=function(t,e){return e||ee(t,2,this.length),this[t]|this[t+1]<<8};Y.prototype.readUInt16BE=function(t,e){return e||ee(t,2,this.length),this[t]<<8|this[t+1]};Y.prototype.readUInt32LE=function(t,e){return e||ee(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Y.prototype.readUInt32BE=function(t,e){return e||ee(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Y.prototype.readIntLE=function(t,e,i){t=t|0,e=e|0,i||ee(t,e,this.length);for(var n=this[t],s=1,o=0;++o<e&&(s*=256);)n+=this[t+o]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*e)),n};Y.prototype.readIntBE=function(t,e,i){t=t|0,e=e|0,i||ee(t,e,this.length);for(var n=e,s=1,o=this[t+--n];n>0&&(s*=256);)o+=this[t+--n]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*e)),o};Y.prototype.readInt8=function(t,e){return e||ee(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};Y.prototype.readInt16LE=function(t,e){e||ee(t,2,this.length);var i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};Y.prototype.readInt16BE=function(t,e){e||ee(t,2,this.length);var i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};Y.prototype.readInt32LE=function(t,e){return e||ee(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Y.prototype.readInt32BE=function(t,e){return e||ee(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Y.prototype.readFloatLE=function(t,e){return e||ee(t,4,this.length),mu(this,t,!0,23,4)};Y.prototype.readFloatBE=function(t,e){return e||ee(t,4,this.length),mu(this,t,!1,23,4)};Y.prototype.readDoubleLE=function(t,e){return e||ee(t,8,this.length),mu(this,t,!0,52,8)};Y.prototype.readDoubleBE=function(t,e){return e||ee(t,8,this.length),mu(this,t,!1,52,8)};function be(r,t,e,i,n,s){if(!br(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw new RangeError('"value" argument is out of bounds');if(e+i>r.length)throw new RangeError("Index out of range")}Y.prototype.writeUIntLE=function(t,e,i,n){if(t=+t,e=e|0,i=i|0,!n){var s=Math.pow(2,8*i)-1;be(this,t,e,i,s,0)}var o=1,a=0;for(this[e]=t&255;++a<i&&(o*=256);)this[e+a]=t/o&255;return e+i};Y.prototype.writeUIntBE=function(t,e,i,n){if(t=+t,e=e|0,i=i|0,!n){var s=Math.pow(2,8*i)-1;be(this,t,e,i,s,0)}var o=i-1,a=1;for(this[e+o]=t&255;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+i};Y.prototype.writeUInt8=function(t,e,i){return t=+t,e=e|0,i||be(this,t,e,1,255,0),Y.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t&255,e+1};function _u(r,t,e,i){t<0&&(t=65535+t+1);for(var n=0,s=Math.min(r.length-e,2);n<s;++n)r[e+n]=(t&255<<8*(i?n:1-n))>>>(i?n:1-n)*8}Y.prototype.writeUInt16LE=function(t,e,i){return t=+t,e=e|0,i||be(this,t,e,2,65535,0),Y.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):_u(this,t,e,!0),e+2};Y.prototype.writeUInt16BE=function(t,e,i){return t=+t,e=e|0,i||be(this,t,e,2,65535,0),Y.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):_u(this,t,e,!1),e+2};function gu(r,t,e,i){t<0&&(t=4294967295+t+1);for(var n=0,s=Math.min(r.length-e,4);n<s;++n)r[e+n]=t>>>(i?n:3-n)*8&255}Y.prototype.writeUInt32LE=function(t,e,i){return t=+t,e=e|0,i||be(this,t,e,4,4294967295,0),Y.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255):gu(this,t,e,!0),e+4};Y.prototype.writeUInt32BE=function(t,e,i){return t=+t,e=e|0,i||be(this,t,e,4,4294967295,0),Y.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):gu(this,t,e,!1),e+4};Y.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e=e|0,!n){var s=Math.pow(2,8*i-1);be(this,t,e,i,s-1,-s)}var o=0,a=1,l=0;for(this[e]=t&255;++o<i&&(a*=256);)t<0&&l===0&&this[e+o-1]!==0&&(l=1),this[e+o]=(t/a>>0)-l&255;return e+i};Y.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e=e|0,!n){var s=Math.pow(2,8*i-1);be(this,t,e,i,s-1,-s)}var o=i-1,a=1,l=0;for(this[e+o]=t&255;--o>=0&&(a*=256);)t<0&&l===0&&this[e+o+1]!==0&&(l=1),this[e+o]=(t/a>>0)-l&255;return e+i};Y.prototype.writeInt8=function(t,e,i){return t=+t,e=e|0,i||be(this,t,e,1,127,-128),Y.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t&255,e+1};Y.prototype.writeInt16LE=function(t,e,i){return t=+t,e=e|0,i||be(this,t,e,2,32767,-32768),Y.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8):_u(this,t,e,!0),e+2};Y.prototype.writeInt16BE=function(t,e,i){return t=+t,e=e|0,i||be(this,t,e,2,32767,-32768),Y.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t&255):_u(this,t,e,!1),e+2};Y.prototype.writeInt32LE=function(t,e,i){return t=+t,e=e|0,i||be(this,t,e,4,2147483647,-2147483648),Y.TYPED_ARRAY_SUPPORT?(this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):gu(this,t,e,!0),e+4};Y.prototype.writeInt32BE=function(t,e,i){return t=+t,e=e|0,i||be(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Y.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255):gu(this,t,e,!1),e+4};function Tx(r,t,e,i,n,s){if(e+i>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Ax(r,t,e,i,n){return n||Tx(r,t,e,4),px(r,t,e,i,23,4),e+4}Y.prototype.writeFloatLE=function(t,e,i){return Ax(this,t,e,!0,i)};Y.prototype.writeFloatBE=function(t,e,i){return Ax(this,t,e,!1,i)};function Sx(r,t,e,i,n){return n||Tx(r,t,e,8),px(r,t,e,i,52,8),e+8}Y.prototype.writeDoubleLE=function(t,e,i){return Sx(this,t,e,!0,i)};Y.prototype.writeDoubleBE=function(t,e,i){return Sx(this,t,e,!1,i)};Y.prototype.copy=function(t,e,i,n){if(i||(i=0),!n&&n!==0&&(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var s=n-i,o;if(this===t&&i<e&&e<n)for(o=s-1;o>=0;--o)t[o+e]=this[o+i];else if(s<1e3||!Y.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)t[o+e]=this[o+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),e);return s};Y.prototype.fill=function(t,e,i,n){if(typeof t=="string"){if(typeof e=="string"?(n=e,e=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),t.length===1){var s=t.charCodeAt(0);s<256&&(t=s)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!Y.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof t=="number"&&(t=t&255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;e=e>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);var o;if(typeof t=="number")for(o=e;o<i;++o)this[o]=t;else{var a=br(t)?t:ql(new Y(t,n).toString()),l=a.length;for(o=0;o<i-e;++o)this[o+e]=a[o%l]}return this};var dv=/[^+\/0-9A-Za-z-_]/g;function fv(r){if(r=pv(r).replace(dv,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function pv(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function xv(r){return r<16?"0"+r.toString(16):r.toString(16)}function ql(r,t){t=t||1/0;for(var e,i=r.length,n=null,s=[],o=0;o<i;++o){if(e=r.charCodeAt(o),e>55295&&e<57344){if(!n){if(e>56319){(t-=3)>-1&&s.push(239,191,189);continue}else if(o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}n=e;continue}if(e<56320){(t-=3)>-1&&s.push(239,191,189),n=e;continue}e=(n-55296<<10|e-56320)+65536}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,e<128){if((t-=1)<0)break;s.push(e)}else if(e<2048){if((t-=2)<0)break;s.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;s.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;s.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return s}function mv(r){for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e)&255);return t}function _v(r,t){for(var e,i,n,s=[],o=0;o<r.length&&!((t-=2)<0);++o)e=r.charCodeAt(o),i=e>>8,n=e%256,s.push(n),s.push(i);return s}function bx(r){return Vy(fv(r))}function yu(r,t,e,i){for(var n=0;n<i&&!(n+e>=t.length||n>=r.length);++n)t[n+e]=r[n];return n}function gv(r){return r!==r}function Kn(r){return r!=null&&(!!r._isBuffer||Cx(r)||yv(r))}function Cx(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function yv(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&Cx(r.slice(0,0))}function wx(){throw new Error("setTimeout has not been defined")}function Nx(){throw new Error("clearTimeout has not been defined")}var pi=wx,xi=Nx;typeof nn.setTimeout=="function"&&(pi=setTimeout);typeof nn.clearTimeout=="function"&&(xi=clearTimeout);function Rx(r){if(pi===setTimeout)return setTimeout(r,0);if((pi===wx||!pi)&&setTimeout)return pi=setTimeout,setTimeout(r,0);try{return pi(r,0)}catch{try{return pi.call(null,r,0)}catch{return pi.call(this,r,0)}}}function vv(r){if(xi===clearTimeout)return clearTimeout(r);if((xi===Nx||!xi)&&clearTimeout)return xi=clearTimeout,clearTimeout(r);try{return xi(r)}catch{try{return xi.call(null,r)}catch{return xi.call(this,r)}}}var Vr=[],ns=!1,Ki,Ml=-1;function Ev(){!ns||!Ki||(ns=!1,Ki.length?Vr=Ki.concat(Vr):Ml=-1,Vr.length&&Ix())}function Ix(){if(!ns){var r=Rx(Ev);ns=!0;for(var t=Vr.length;t;){for(Ki=Vr,Vr=[];++Ml<t;)Ki&&Ki[Ml].run();Ml=-1,t=Vr.length}Ki=null,ns=!1,vv(r)}}function Tv(r){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];Vr.push(new Px(r,t)),Vr.length===1&&!ns&&Rx(Ix)}function Px(r,t){this.fun=r,this.array=t}Px.prototype.run=function(){this.fun.apply(null,this.array)};var Av="browser",Sv="browser",bv=!0,Cv={},wv=[],Nv="",Rv={},Iv={},Pv={};function An(){}var Dv=An,Ov=An,Fv=An,Lv=An,Bv=An,Mv=An,kv=An;function Uv(r){throw new Error("process.binding is not supported")}function Hv(){return"/"}function jv(r){throw new Error("process.chdir is not supported")}function $v(){return 0}var Gn=nn.performance||{},Gv=Gn.now||Gn.mozNow||Gn.msNow||Gn.oNow||Gn.webkitNow||function(){return new Date().getTime()};function zv(r){var t=Gv.call(Gn)*.001,e=Math.floor(t),i=Math.floor(t%1*1e9);return r&&(e=e-r[0],i=i-r[1],i<0&&(e--,i+=1e9)),[e,i]}var Vv=new Date;function Xv(){var r=new Date,t=r-Vv;return t/1e3}var ss={nextTick:Tv,title:Av,browser:bv,env:Cv,argv:wv,version:Nv,versions:Rv,on:Dv,addListener:Ov,once:Fv,off:Lv,removeListener:Bv,removeAllListeners:Mv,emit:kv,binding:Uv,cwd:Hv,chdir:jv,umask:$v,hrtime:zv,platform:Sv,release:Iv,config:Pv,uptime:Xv},Bc;typeof Object.create=="function"?Bc=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:Bc=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t};const Ed=Bc;var Wv=/%[sdj%]/g;function vu(r){if(!Ni(r)){for(var t=[],e=0;e<arguments.length;e++)t.push(er(arguments[e]));return t.join(" ")}for(var e=1,i=arguments,n=i.length,s=String(r).replace(Wv,function(a){if(a==="%%")return"%";if(e>=n)return a;switch(a){case"%s":return String(i[e++]);case"%d":return Number(i[e++]);case"%j":try{return JSON.stringify(i[e++])}catch{return"[Circular]"}default:return a}}),o=i[e];e<n;o=i[++e])Xr(o)||!ri(o)?s+=" "+o:s+=" "+er(o);return s}function Td(r,t){if(vr(nn.process))return function(){return Td(r,t).apply(this,arguments)};if(ss.noDeprecation===!0)return r;var e=!1;function i(){if(!e){if(ss.throwDeprecation)throw new Error(t);ss.traceDeprecation?console.trace(t):console.error(t),e=!0}return r.apply(this,arguments)}return i}var cl={},Fh;function Dx(r){if(vr(Fh)&&(Fh={}.NODE_DEBUG||""),r=r.toUpperCase(),!cl[r])if(new RegExp("\\b"+r+"\\b","i").test(Fh)){var t=0;cl[r]=function(){var e=vu.apply(null,arguments);console.error("%s %d: %s",r,t,e)}}else cl[r]=function(){};return cl[r]}function er(r,t){var e={seen:[],stylize:qv};return arguments.length>=3&&(e.depth=arguments[2]),arguments.length>=4&&(e.colors=arguments[3]),Eu(t)?e.showHidden=t:t&&wd(e,t),vr(e.showHidden)&&(e.showHidden=!1),vr(e.depth)&&(e.depth=2),vr(e.colors)&&(e.colors=!1),vr(e.customInspect)&&(e.customInspect=!0),e.colors&&(e.stylize=Yv),Kl(e,r,e.depth)}er.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};er.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Yv(r,t){var e=er.styles[t];return e?"\x1B["+er.colors[e][0]+"m"+r+"\x1B["+er.colors[e][1]+"m":r}function qv(r,t){return r}function Kv(r){var t={};return r.forEach(function(e,i){t[e]=!0}),t}function Kl(r,t,e){if(r.customInspect&&t&&Ji(t.inspect)&&t.inspect!==er&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(e,r);return Ni(i)||(i=Kl(r,i,e)),i}var n=Zv(r,t);if(n)return n;var s=Object.keys(t),o=Kv(s);if(r.showHidden&&(s=Object.getOwnPropertyNames(t)),os(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return Lh(t);if(s.length===0){if(Ji(t)){var a=t.name?": "+t.name:"";return r.stylize("[Function"+a+"]","special")}if(Qi(t))return r.stylize(RegExp.prototype.toString.call(t),"regexp");if(ds(t))return r.stylize(Date.prototype.toString.call(t),"date");if(os(t))return Lh(t)}var l="",u=!1,h=["{","}"];if(Ad(t)&&(u=!0,h=["[","]"]),Ji(t)){var c=t.name?": "+t.name:"";l=" [Function"+c+"]"}if(Qi(t)&&(l=" "+RegExp.prototype.toString.call(t)),ds(t)&&(l=" "+Date.prototype.toUTCString.call(t)),os(t)&&(l=" "+Lh(t)),s.length===0&&(!u||t.length==0))return h[0]+l+h[1];if(e<0)return Qi(t)?r.stylize(RegExp.prototype.toString.call(t),"regexp"):r.stylize("[Object]","special");r.seen.push(t);var d;return u?d=Qv(r,t,e,o,s):d=s.map(function(f){return Mc(r,t,e,o,f,u)}),r.seen.pop(),Jv(d,l,h)}function Zv(r,t){if(vr(t))return r.stylize("undefined","undefined");if(Ni(t)){var e="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(e,"string")}if(bd(t))return r.stylize(""+t,"number");if(Eu(t))return r.stylize(""+t,"boolean");if(Xr(t))return r.stylize("null","null")}function Lh(r){return"["+Error.prototype.toString.call(r)+"]"}function Qv(r,t,e,i,n){for(var s=[],o=0,a=t.length;o<a;++o)Bx(t,String(o))?s.push(Mc(r,t,e,i,String(o),!0)):s.push("");return n.forEach(function(l){l.match(/^\d+$/)||s.push(Mc(r,t,e,i,l,!0))}),s}function Mc(r,t,e,i,n,s){var o,a,l;if(l=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},l.get?l.set?a=r.stylize("[Getter/Setter]","special"):a=r.stylize("[Getter]","special"):l.set&&(a=r.stylize("[Setter]","special")),Bx(i,n)||(o="["+n+"]"),a||(r.seen.indexOf(l.value)<0?(Xr(e)?a=Kl(r,l.value,null):a=Kl(r,l.value,e-1),a.indexOf(`
`)>-1&&(s?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=r.stylize("[Circular]","special")),vr(o)){if(s&&n.match(/^\d+$/))return a;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=r.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=r.stylize(o,"string"))}return o+": "+a}function Jv(r,t,e){var i=r.reduce(function(n,s){return s.indexOf(`
`)>=0,n+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?e[0]+(t===""?"":t+`
 `)+" "+r.join(`,
  `)+" "+e[1]:e[0]+t+" "+r.join(", ")+" "+e[1]}function Ad(r){return Array.isArray(r)}function Eu(r){return typeof r=="boolean"}function Xr(r){return r===null}function Sd(r){return r==null}function bd(r){return typeof r=="number"}function Ni(r){return typeof r=="string"}function Ox(r){return typeof r=="symbol"}function vr(r){return r===void 0}function Qi(r){return ri(r)&&Cd(r)==="[object RegExp]"}function ri(r){return typeof r=="object"&&r!==null}function ds(r){return ri(r)&&Cd(r)==="[object Date]"}function os(r){return ri(r)&&(Cd(r)==="[object Error]"||r instanceof Error)}function Ji(r){return typeof r=="function"}function Zl(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}function Fx(r){return Y.isBuffer(r)}function Cd(r){return Object.prototype.toString.call(r)}function Bh(r){return r<10?"0"+r.toString(10):r.toString(10)}var t1=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function e1(){var r=new Date,t=[Bh(r.getHours()),Bh(r.getMinutes()),Bh(r.getSeconds())].join(":");return[r.getDate(),t1[r.getMonth()],t].join(" ")}function Lx(){console.log("%s - %s",e1(),vu.apply(null,arguments))}function wd(r,t){if(!t||!ri(t))return r;for(var e=Object.keys(t),i=e.length;i--;)r[e[i]]=t[e[i]];return r}function Bx(r,t){return Object.prototype.hasOwnProperty.call(r,t)}const r1={inherits:Ed,_extend:wd,log:Lx,isBuffer:Fx,isPrimitive:Zl,isFunction:Ji,isError:os,isDate:ds,isObject:ri,isRegExp:Qi,isUndefined:vr,isSymbol:Ox,isString:Ni,isNumber:bd,isNullOrUndefined:Sd,isNull:Xr,isBoolean:Eu,isArray:Ad,inspect:er,deprecate:Td,format:vu,debuglog:Dx},i1=Object.freeze(Object.defineProperty({__proto__:null,_extend:wd,debuglog:Dx,default:r1,deprecate:Td,format:vu,inherits:Ed,inspect:er,isArray:Ad,isBoolean:Eu,isBuffer:Fx,isDate:ds,isError:os,isFunction:Ji,isNull:Xr,isNullOrUndefined:Sd,isNumber:bd,isObject:ri,isPrimitive:Zl,isRegExp:Qi,isString:Ni,isSymbol:Ox,isUndefined:vr,log:Lx},Symbol.toStringTag,{value:"Module"}));function n1(r,t){return Object.prototype.hasOwnProperty.call(r,t)}var Mx=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function Gs(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}}function s1(r,t,e,i){return t=t||"&",e=e||"=",r===null&&(r=void 0),typeof r=="object"?Uf(o1(r),function(n){var s=encodeURIComponent(Gs(n))+e;return Mx(r[n])?Uf(r[n],function(o){return s+encodeURIComponent(Gs(o))}).join(t):s+encodeURIComponent(Gs(r[n]))}).join(t):i?encodeURIComponent(Gs(i))+e+encodeURIComponent(Gs(r)):""}function Uf(r,t){if(r.map)return r.map(t);for(var e=[],i=0;i<r.length;i++)e.push(t(r[i],i));return e}var o1=Object.keys||function(r){var t=[];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t.push(e);return t};function Hf(r,t,e,i){t=t||"&",e=e||"=";var n={};if(typeof r!="string"||r.length===0)return n;var s=/\+/g;r=r.split(t);var o=1e3;i&&typeof i.maxKeys=="number"&&(o=i.maxKeys);var a=r.length;o>0&&a>o&&(a=o);for(var l=0;l<a;++l){var u=r[l].replace(s,"%20"),h=u.indexOf(e),c,d,f,p;h>=0?(c=u.substr(0,h),d=u.substr(h+1)):(c=u,d=""),f=decodeURIComponent(c),p=decodeURIComponent(d),n1(n,f)?Mx(n[f])?n[f].push(p):n[f]=[n[f],p]:n[f]=p}return n}function Wr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var a1=/^([a-z0-9.+-]+:)/i,l1=/:[0-9]*$/,u1=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h1=["<",">",'"',"`"," ","\r",`
`,"	"],c1=["{","}","|","\\","^","`"].concat(h1),kc=["'"].concat(c1),jf=["%","/","?",";","#"].concat(kc),$f=["/","?","#"],d1=255,Gf=/^[+a-z0-9A-Z_-]{0,63}$/,f1=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p1={javascript:!0,"javascript:":!0},Uc={javascript:!0,"javascript:":!0},as={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Nd(r,t,e){if(r&&ri(r)&&r instanceof Wr)return r;var i=new Wr;return i.parse(r,t,e),i}Wr.prototype.parse=function(r,t,e){return kx(this,r,t,e)};function kx(r,t,e,i){if(!Ni(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),s=n!==-1&&n<t.indexOf("#")?"?":"#",o=t.split(s),a=/\\/g;o[0]=o[0].replace(a,"/"),t=o.join(s);var l=t;if(l=l.trim(),!i&&t.split("#").length===1){var u=u1.exec(l);if(u)return r.path=l,r.href=l,r.pathname=u[1],u[2]?(r.search=u[2],e?r.query=Hf(r.search.substr(1)):r.query=r.search.substr(1)):e&&(r.search="",r.query={}),r}var h=a1.exec(l);if(h){h=h[0];var c=h.toLowerCase();r.protocol=c,l=l.substr(h.length)}if(i||h||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var d=l.substr(0,2)==="//";d&&!(h&&Uc[h])&&(l=l.substr(2),r.slashes=!0)}var f,p,_,x;if(!Uc[h]&&(d||h&&!as[h])){var g=-1;for(f=0;f<$f.length;f++)p=l.indexOf($f[f]),p!==-1&&(g===-1||p<g)&&(g=p);var v,m;for(g===-1?m=l.lastIndexOf("@"):m=l.lastIndexOf("@",g),m!==-1&&(v=l.slice(0,m),l=l.slice(m+1),r.auth=decodeURIComponent(v)),g=-1,f=0;f<jf.length;f++)p=l.indexOf(jf[f]),p!==-1&&(g===-1||p<g)&&(g=p);g===-1&&(g=l.length),r.host=l.slice(0,g),l=l.slice(g),Ux(r),r.hostname=r.hostname||"";var y=r.hostname[0]==="["&&r.hostname[r.hostname.length-1]==="]";if(!y){var S=r.hostname.split(/\./);for(f=0,_=S.length;f<_;f++){var E=S[f];if(E&&!E.match(Gf)){for(var b="",T=0,C=E.length;T<C;T++)E.charCodeAt(T)>127?b+="x":b+=E[T];if(!b.match(Gf)){var D=S.slice(0,f),I=S.slice(f+1),L=E.match(f1);L&&(D.push(L[1]),I.unshift(L[2])),I.length&&(l="/"+I.join(".")+l),r.hostname=D.join(".");break}}}}r.hostname.length>d1?r.hostname="":r.hostname=r.hostname.toLowerCase(),y||(r.hostname=Gy(r.hostname)),x=r.port?":"+r.port:"";var M=r.hostname||"";r.host=M+x,r.href+=r.host,y&&(r.hostname=r.hostname.substr(1,r.hostname.length-2),l[0]!=="/"&&(l="/"+l))}if(!p1[c])for(f=0,_=kc.length;f<_;f++){var k=kc[f];if(l.indexOf(k)!==-1){var q=encodeURIComponent(k);q===k&&(q=escape(k)),l=l.split(k).join(q)}}var ht=l.indexOf("#");ht!==-1&&(r.hash=l.substr(ht),l=l.slice(0,ht));var it=l.indexOf("?");if(it!==-1?(r.search=l.substr(it),r.query=l.substr(it+1),e&&(r.query=Hf(r.query)),l=l.slice(0,it)):e&&(r.search="",r.query={}),l&&(r.pathname=l),as[c]&&r.hostname&&!r.pathname&&(r.pathname="/"),r.pathname||r.search){x=r.pathname||"";var at=r.search||"";r.path=x+at}return r.href=Rd(r),r}function x1(r){return Ni(r)&&(r=kx({},r)),Rd(r)}function Rd(r){var t=r.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=r.protocol||"",i=r.pathname||"",n=r.hash||"",s=!1,o="";r.host?s=t+r.host:r.hostname&&(s=t+(r.hostname.indexOf(":")===-1?r.hostname:"["+this.hostname+"]"),r.port&&(s+=":"+r.port)),r.query&&ri(r.query)&&Object.keys(r.query).length&&(o=s1(r.query));var a=r.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),r.slashes||(!e||as[e])&&s!==!1?(s="//"+(s||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):s||(s=""),n&&n.charAt(0)!=="#"&&(n="#"+n),a&&a.charAt(0)!=="?"&&(a="?"+a),i=i.replace(/[?#]/g,function(l){return encodeURIComponent(l)}),a=a.replace("#","%23"),e+s+i+a+n}Wr.prototype.format=function(){return Rd(this)};function m1(r,t){return Nd(r,!1,!0).resolve(t)}Wr.prototype.resolve=function(r){return this.resolveObject(Nd(r,!1,!0)).format()};Wr.prototype.resolveObject=function(r){if(Ni(r)){var t=new Wr;t.parse(r,!1,!0),r=t}for(var e=new Wr,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];e[s]=this[s]}if(e.hash=r.hash,r.href==="")return e.href=e.format(),e;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(e[l]=r[l])}return as[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}var u;if(r.protocol&&r.protocol!==e.protocol){if(!as[r.protocol]){for(var h=Object.keys(r),c=0;c<h.length;c++){var d=h[c];e[d]=r[d]}return e.href=e.format(),e}if(e.protocol=r.protocol,!r.host&&!Uc[r.protocol]){for(u=(r.pathname||"").split("/");u.length&&!(r.host=u.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),u[0]!==""&&u.unshift(""),u.length<2&&u.unshift(""),e.pathname=u.join("/")}else e.pathname=r.pathname;if(e.search=r.search,e.query=r.query,e.host=r.host||"",e.auth=r.auth,e.hostname=r.hostname||r.host,e.port=r.port,e.pathname||e.search){var f=e.pathname||"",p=e.search||"";e.path=f+p}return e.slashes=e.slashes||r.slashes,e.href=e.format(),e}var _=e.pathname&&e.pathname.charAt(0)==="/",x=r.host||r.pathname&&r.pathname.charAt(0)==="/",g=x||_||e.host&&r.pathname,v=g,m=e.pathname&&e.pathname.split("/")||[],y=e.protocol&&!as[e.protocol];u=r.pathname&&r.pathname.split("/")||[],y&&(e.hostname="",e.port=null,e.host&&(m[0]===""?m[0]=e.host:m.unshift(e.host)),e.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(u[0]===""?u[0]=r.host:u.unshift(r.host)),r.host=null),g=g&&(u[0]===""||m[0]===""));var S;if(x)e.host=r.host||r.host===""?r.host:e.host,e.hostname=r.hostname||r.hostname===""?r.hostname:e.hostname,e.search=r.search,e.query=r.query,m=u;else if(u.length)m||(m=[]),m.pop(),m=m.concat(u),e.search=r.search,e.query=r.query;else if(!Sd(r.search))return y&&(e.hostname=e.host=m.shift(),S=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1,S&&(e.auth=S.shift(),e.host=e.hostname=S.shift())),e.search=r.search,e.query=r.query,(!Xr(e.pathname)||!Xr(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e;if(!m.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var E=m.slice(-1)[0],b=(e.host||r.host||m.length>1)&&(E==="."||E==="..")||E==="",T=0,C=m.length;C>=0;C--)E=m[C],E==="."?m.splice(C,1):E===".."?(m.splice(C,1),T++):T&&(m.splice(C,1),T--);if(!g&&!v)for(;T--;T)m.unshift("..");g&&m[0]!==""&&(!m[0]||m[0].charAt(0)!=="/")&&m.unshift(""),b&&m.join("/").substr(-1)!=="/"&&m.push("");var D=m[0]===""||m[0]&&m[0].charAt(0)==="/";return y&&(e.hostname=e.host=D?"":m.length?m.shift():"",S=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1,S&&(e.auth=S.shift(),e.host=e.hostname=S.shift())),g=g||e.host&&m.length,g&&!D&&m.unshift(""),m.length?e.pathname=m.join("/"):(e.pathname=null,e.path=null),(!Xr(e.pathname)||!Xr(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=r.auth||e.auth,e.slashes=e.slashes||r.slashes,e.href=e.format(),e};Wr.prototype.parseHost=function(){return Ux(this)};function Ux(r){var t=r.host,e=l1.exec(t);e&&(e=e[0],e!==":"&&(r.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(r.hostname=t)}const _1={parse:Nd,format:x1,resolve:m1};function Xe(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function zs(r){return r.split("?")[0].split("#")[0]}function g1(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y1(r,t,e){return r.replace(new RegExp(g1(t),"g"),e)}function v1(r,t){let e="",i=0,n=-1,s=0,o=-1;for(let a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(n===a-1||s===1))if(n!==a-1&&s===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",i=0):(e=e.slice(0,l),i=e.length-1-e.lastIndexOf("/")),n=a,s=0;continue}}else if(e.length===2||e.length===1){e="",i=0,n=a,s=0;continue}}t&&(e.length>0?e+="/..":e="..",i=2)}else e.length>0?e+=`/${r.slice(n+1,a)}`:e=r.slice(n+1,a),i=a-n-1;n=a,s=0}else o===46&&s!==-1?++s:s=-1}return e}const ue={toPosix(r){return y1(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},hasProtocol(r){return/^[^/:]+:\//.test(this.toPosix(r))},getProtocol(r){Xe(r),r=this.toPosix(r);let t="";const e=/^file:\/\/\//.exec(r),i=/^[^/:]+:\/\//.exec(r),n=/^[^/:]+:\//.exec(r);if(e||i||n){const s=(e==null?void 0:e[0])||(i==null?void 0:i[0])||(n==null?void 0:n[0]);t=s,r=r.slice(s.length)}return t},toAbsolute(r,t,e){if(this.isDataUrl(r))return r;const i=zs(this.toPosix(t??ot.ADAPTER.getBaseUrl())),n=zs(this.toPosix(e??this.rootname(i)));return Xe(r),r=this.toPosix(r),r.startsWith("/")?ue.join(n,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(r=this.toPosix(r),Xe(r),r.length===0)return".";let t="";const e=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));const i=r.endsWith("/");return r=v1(r,!1),r.length>0&&i&&(r+="/"),e?`/${r}`:t+r},isAbsolute(r){return Xe(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let t;for(let e=0;e<r.length;++e){const i=r[e];if(Xe(i),i.length>0)if(t===void 0)t=i;else{const n=r[e-1]??"";this.extname(n)?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(Xe(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0);const e=t===47;let i=-1,n=!0;const s=this.getProtocol(r),o=r;r=r.slice(s.length);for(let a=r.length-1;a>=1;--a)if(t=r.charCodeAt(a),t===47){if(!n){i=a;break}}else n=!1;return i===-1?e?"/":this.isUrl(o)?s+r:s:e&&i===1?"//":s+r.slice(0,i)},rootname(r){Xe(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){const e=r.indexOf("/",t.length);e!==-1?t=r.slice(0,e):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){Xe(r),t&&Xe(t),r=zs(this.toPosix(r));let e=0,i=-1,n=!0,s;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let o=t.length-1,a=-1;for(s=r.length-1;s>=0;--s){const l=r.charCodeAt(s);if(l===47){if(!n){e=s+1;break}}else a===-1&&(n=!1,a=s+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return e===i?i=a:i===-1&&(i=r.length),r.slice(e,i)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!n){e=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":r.slice(e,i)},extname(r){Xe(r),r=zs(this.toPosix(r));let t=-1,e=0,i=-1,n=!0,s=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===47){if(!n){e=o+1;break}continue}i===-1&&(n=!1,i=o+1),a===46?t===-1?t=o:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===e+1?"":r.slice(t,i)},parse(r){Xe(r);const t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=zs(this.toPosix(r));let e=r.charCodeAt(0);const i=this.isAbsolute(r);let n;t.root=this.rootname(r),i||this.hasProtocol(r)?n=1:n=0;let s=-1,o=0,a=-1,l=!0,u=r.length-1,h=0;for(;u>=n;--u){if(e=r.charCodeAt(u),e===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),e===46?s===-1?s=u:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&i?t.base=t.name=r.slice(1,a):t.base=t.name=r.slice(o,a)):(o===0&&i?(t.name=r.slice(1,s),t.base=r.slice(1,a)):(t.name=r.slice(o,s),t.base=r.slice(o,a)),t.ext=r.slice(s,a)),t.dir=this.dirname(r),t},sep:"/",delimiter:":"},zf={};function Pt(r,t,e=3){if(zf[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`),console.warn(i))),zf[t]=!0}let Mh;function E1(){return typeof Mh>"u"&&(Mh=function(){var e;const t={stencil:!0,failIfMajorPerformanceCaveat:ot.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ot.ADAPTER.getWebGLRenderingContext())return!1;const i=ot.ADAPTER.createCanvas();let n=i.getContext("webgl",t)||i.getContext("experimental-webgl",t);const s=!!((e=n==null?void 0:n.getContextAttributes())!=null&&e.stencil);if(n){const o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,s}catch{return!1}}()),Mh}var T1="#f0f8ff",A1="#faebd7",S1="#00ffff",b1="#7fffd4",C1="#f0ffff",w1="#f5f5dc",N1="#ffe4c4",R1="#000000",I1="#ffebcd",P1="#0000ff",D1="#8a2be2",O1="#a52a2a",F1="#deb887",L1="#5f9ea0",B1="#7fff00",M1="#d2691e",k1="#ff7f50",U1="#6495ed",H1="#fff8dc",j1="#dc143c",$1="#00ffff",G1="#00008b",z1="#008b8b",V1="#b8860b",X1="#a9a9a9",W1="#006400",Y1="#a9a9a9",q1="#bdb76b",K1="#8b008b",Z1="#556b2f",Q1="#ff8c00",J1="#9932cc",tE="#8b0000",eE="#e9967a",rE="#8fbc8f",iE="#483d8b",nE="#2f4f4f",sE="#2f4f4f",oE="#00ced1",aE="#9400d3",lE="#ff1493",uE="#00bfff",hE="#696969",cE="#696969",dE="#1e90ff",fE="#b22222",pE="#fffaf0",xE="#228b22",mE="#ff00ff",_E="#dcdcdc",gE="#f8f8ff",yE="#daa520",vE="#ffd700",EE="#808080",TE="#008000",AE="#adff2f",SE="#808080",bE="#f0fff0",CE="#ff69b4",wE="#cd5c5c",NE="#4b0082",RE="#fffff0",IE="#f0e68c",PE="#fff0f5",DE="#e6e6fa",OE="#7cfc00",FE="#fffacd",LE="#add8e6",BE="#f08080",ME="#e0ffff",kE="#fafad2",UE="#d3d3d3",HE="#90ee90",jE="#d3d3d3",$E="#ffb6c1",GE="#ffa07a",zE="#20b2aa",VE="#87cefa",XE="#778899",WE="#778899",YE="#b0c4de",qE="#ffffe0",KE="#00ff00",ZE="#32cd32",QE="#faf0e6",JE="#ff00ff",tT="#800000",eT="#66cdaa",rT="#0000cd",iT="#ba55d3",nT="#9370db",sT="#3cb371",oT="#7b68ee",aT="#00fa9a",lT="#48d1cc",uT="#c71585",hT="#191970",cT="#f5fffa",dT="#ffe4e1",fT="#ffe4b5",pT="#ffdead",xT="#000080",mT="#fdf5e6",_T="#808000",gT="#6b8e23",yT="#ffa500",vT="#ff4500",ET="#da70d6",TT="#eee8aa",AT="#98fb98",ST="#afeeee",bT="#db7093",CT="#ffefd5",wT="#ffdab9",NT="#cd853f",RT="#ffc0cb",IT="#dda0dd",PT="#b0e0e6",DT="#800080",OT="#663399",FT="#ff0000",LT="#bc8f8f",BT="#4169e1",MT="#8b4513",kT="#fa8072",UT="#f4a460",HT="#2e8b57",jT="#fff5ee",$T="#a0522d",GT="#c0c0c0",zT="#87ceeb",VT="#6a5acd",XT="#708090",WT="#708090",YT="#fffafa",qT="#00ff7f",KT="#4682b4",ZT="#d2b48c",QT="#008080",JT="#d8bfd8",tA="#ff6347",eA="#40e0d0",rA="#ee82ee",iA="#f5deb3",nA="#ffffff",sA="#f5f5f5",oA="#ffff00",aA="#9acd32",lA={aliceblue:T1,antiquewhite:A1,aqua:S1,aquamarine:b1,azure:C1,beige:w1,bisque:N1,black:R1,blanchedalmond:I1,blue:P1,blueviolet:D1,brown:O1,burlywood:F1,cadetblue:L1,chartreuse:B1,chocolate:M1,coral:k1,cornflowerblue:U1,cornsilk:H1,crimson:j1,cyan:$1,darkblue:G1,darkcyan:z1,darkgoldenrod:V1,darkgray:X1,darkgreen:W1,darkgrey:Y1,darkkhaki:q1,darkmagenta:K1,darkolivegreen:Z1,darkorange:Q1,darkorchid:J1,darkred:tE,darksalmon:eE,darkseagreen:rE,darkslateblue:iE,darkslategray:nE,darkslategrey:sE,darkturquoise:oE,darkviolet:aE,deeppink:lE,deepskyblue:uE,dimgray:hE,dimgrey:cE,dodgerblue:dE,firebrick:fE,floralwhite:pE,forestgreen:xE,fuchsia:mE,gainsboro:_E,ghostwhite:gE,goldenrod:yE,gold:vE,gray:EE,green:TE,greenyellow:AE,grey:SE,honeydew:bE,hotpink:CE,indianred:wE,indigo:NE,ivory:RE,khaki:IE,lavenderblush:PE,lavender:DE,lawngreen:OE,lemonchiffon:FE,lightblue:LE,lightcoral:BE,lightcyan:ME,lightgoldenrodyellow:kE,lightgray:UE,lightgreen:HE,lightgrey:jE,lightpink:$E,lightsalmon:GE,lightseagreen:zE,lightskyblue:VE,lightslategray:XE,lightslategrey:WE,lightsteelblue:YE,lightyellow:qE,lime:KE,limegreen:ZE,linen:QE,magenta:JE,maroon:tT,mediumaquamarine:eT,mediumblue:rT,mediumorchid:iT,mediumpurple:nT,mediumseagreen:sT,mediumslateblue:oT,mediumspringgreen:aT,mediumturquoise:lT,mediumvioletred:uT,midnightblue:hT,mintcream:cT,mistyrose:dT,moccasin:fT,navajowhite:pT,navy:xT,oldlace:mT,olive:_T,olivedrab:gT,orange:yT,orangered:vT,orchid:ET,palegoldenrod:TT,palegreen:AT,paleturquoise:ST,palevioletred:bT,papayawhip:CT,peachpuff:wT,peru:NT,pink:RT,plum:IT,powderblue:PT,purple:DT,rebeccapurple:OT,red:FT,rosybrown:LT,royalblue:BT,saddlebrown:MT,salmon:kT,sandybrown:UT,seagreen:HT,seashell:jT,sienna:$T,silver:GT,skyblue:zT,slateblue:VT,slategray:XT,slategrey:WT,snow:YT,springgreen:qT,steelblue:KT,tan:ZT,teal:QT,thistle:JT,tomato:tA,turquoise:eA,violet:rA,wheat:iA,white:nA,whitesmoke:sA,yellow:oA,yellowgreen:aA};function la(r,t=[]){return t[0]=(r>>16&255)/255,t[1]=(r>>8&255)/255,t[2]=(r&255)/255,t}function Hx(r){let t=r.toString(16);return t="000000".substring(0,6-t.length)+t,`#${t}`}function Id(r){if(typeof r=="string"&&(r=lA[r.toLowerCase()]||r,r[0]==="#"&&(r=r.slice(1)),r.length===3)){const[t,e,i]=r;r=t+t+e+e+i+i}return parseInt(r,16)}function uA(){const r=[],t=[];for(let i=0;i<32;i++)r[i]=i,t[i]=i;r[Et.NORMAL_NPM]=Et.NORMAL,r[Et.ADD_NPM]=Et.ADD,r[Et.SCREEN_NPM]=Et.SCREEN,t[Et.NORMAL]=Et.NORMAL_NPM,t[Et.ADD]=Et.ADD_NPM,t[Et.SCREEN]=Et.SCREEN_NPM;const e=[];return e.push(t),e.push(r),e}const jx=uA();function $x(r,t){return jx[t?1:0][r]}function hA(r,t,e,i){return e=e||new Float32Array(4),i||i===void 0?(e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t):(e[0]=r[0],e[1]=r[1],e[2]=r[2]),e[3]=t,e}function Pd(r,t){if(t===1)return(t*255<<24)+r;if(t===0)return 0;let e=r>>16&255,i=r>>8&255,n=r&255;return e=e*t+.5|0,i=i*t+.5|0,n=n*t+.5|0,(t*255<<24)+(e<<16)+(i<<8)+n}function Gx(r,t,e,i){return e=e||new Float32Array(4),e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255,(i||i===void 0)&&(e[0]*=t,e[1]*=t,e[2]*=t),e[3]=t,e}function cA(r,t=null){const e=r*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let i=0,n=0;i<e;i+=6,n+=4)t[i+0]=n+0,t[i+1]=n+1,t[i+2]=n+2,t[i+3]=n+0,t[i+4]=n+2,t[i+5]=n+3;return t}function zx(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function Ql(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function Vf(r){return!(r&r-1)&&!!r}function Xf(r){let t=(r>65535?1:0)<<4;r>>>=t;let e=(r>255?1:0)<<3;return r>>>=e,t|=e,e=(r>15?1:0)<<2,r>>>=e,t|=e,e=(r>3?1:0)<<1,r>>>=e,t|=e,t|r>>1}function ls(r,t,e){const i=r.length;let n;if(t>=i||e===0)return;e=t+e>i?i-t:e;const s=i-e;for(n=t;n<s;++n)r[n]=r[n+e];r.length=s}function Zn(r){return r===0?0:r<0?-1:1}let dA=0;function sn(){return++dA}const Vx=class{constructor(r,t,e,i){this.left=r,this.top=t,this.right=e,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let Hc=Vx;Hc.EMPTY=new Vx(0,0,0,0);const Wf={},xr=Object.create(null),di=Object.create(null);class Yf{constructor(t,e,i){this._canvas=ot.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||ot.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function qf(r,t,e){for(let i=0,n=4*e*t;i<t;++i,n+=4)if(r[n+3]!==0)return!1;return!0}function Kf(r,t,e,i,n){const s=4*t;for(let o=i,a=i*s+4*e;o<=n;++o,a+=s)if(r[a+3]!==0)return!1;return!0}function fA(r){const{width:t,height:e}=r,i=r.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const s=i.getImageData(0,0,t,e).data;let o=0,a=0,l=t-1,u=e-1;for(;a<e&&qf(s,t,a);)++a;if(a===e)return Hc.EMPTY;for(;qf(s,t,u);)--u;for(;Kf(s,t,o,a,u);)++o;for(;Kf(s,t,l,a,u);)--l;return++l,++u,new Hc(o,a,l,u)}function pA(r){const t=fA(r),{width:e,height:i}=t;let n=null;if(!t.isEmpty()){const s=r.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");n=s.getImageData(t.left,t.top,e,i)}return{width:e,height:i,data:n}}let dl;function xA(r,t=globalThis.location){if(r.startsWith("data:"))return"";t=t||globalThis.location,dl||(dl=document.createElement("a")),dl.href=r;const e=_1.parse(dl.href),i=!e.port&&t.port===""||e.port===t.port;return e.hostname!==t.hostname||!i||e.protocol!==t.protocol?"anonymous":""}function Ai(r,t=1){var i;const e=(i=ot.RETINA_PREFIX)==null?void 0:i.exec(r);return e?parseFloat(e[1]):t}var st=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(st||{});const jc=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},Zf=(r,t)=>jc(r).priority??t,xt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(jc).forEach(t=>{t.type.forEach(e=>{var i,n;return(n=(i=this._removeHandlers)[e])==null?void 0:n.call(i,t)})}),this},add(...r){return r.map(jc).forEach(t=>{t.type.forEach(e=>{const i=this._addHandlers,n=this._queue;i[e]?i[e](t):(n[e]=n[e]||[],n[e].push(t))})}),this},handle(r,t,e){const i=this._addHandlers,n=this._removeHandlers;if(i[r]||n[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=t,n[r]=e;const s=this._queue;return s[r]&&(s[r].forEach(o=>t(o)),delete s[r]),this},handleByMap(r,t){return this.handle(r,e=>{t[e.name]=e.ref},e=>{delete t[e.name]})},handleByList(r,t,e=-1){return this.handle(r,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((n,s)=>Zf(s,e)-Zf(n,e)))},i=>{const n=t.indexOf(i.ref);n!==-1&&t.splice(n,1)})}};class $c{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const mA=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function _A(r){let t="";for(let e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+=`if(test == ${e}.0){}`);return t}function gA(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const i=mA.replace(/%forloop%/gi,_A(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}const kh=0,Uh=1,Hh=2,jh=3,$h=4,Gh=5;class ii{constructor(){this.data=0,this.blendMode=Et.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<kh)}set blend(t){!!(this.data&1<<kh)!==t&&(this.data^=1<<kh)}get offsets(){return!!(this.data&1<<Uh)}set offsets(t){!!(this.data&1<<Uh)!==t&&(this.data^=1<<Uh)}get culling(){return!!(this.data&1<<Hh)}set culling(t){!!(this.data&1<<Hh)!==t&&(this.data^=1<<Hh)}get depthTest(){return!!(this.data&1<<jh)}set depthTest(t){!!(this.data&1<<jh)!==t&&(this.data^=1<<jh)}get depthMask(){return!!(this.data&1<<Gh)}set depthMask(t){!!(this.data&1<<Gh)!==t&&(this.data^=1<<Gh)}get clockwiseFrontFace(){return!!(this.data&1<<$h)}set clockwiseFrontFace(t){!!(this.data&1<<$h)!==t&&(this.data^=1<<$h)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==Et.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new ii;return t.depthTest=!1,t.blend=!0,t}}const Gc=[];function Xx(r,t){if(!r)return null;let e="";if(typeof r=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(let i=Gc.length-1;i>=0;--i){const n=Gc[i];if(n.test&&n.test(r,e))return new n(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class rr{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,i,n,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:h}=this;this._aliasCount++;for(let c=0,d=h.length;c<d;c++)h[c][u](t,e,i,n,s,o,a,l);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(rr.prototype,{dispatch:{value:rr.prototype.emit},run:{value:rr.prototype.emit}});class ua{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new rr("setRealSize"),this.onUpdate=new rr("update"),this.onError=new rr("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class Ta extends ua{constructor(t,e){const{width:i,height:n}=e||{};if(!i||!n)throw new Error("BufferResource width or height invalid");super(i,n),this.data=t}upload(t,e,i){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===sr.UNPACK);const s=e.realWidth,o=e.realHeight;return i.width===s&&i.height===o?n.texSubImage2D(e.target,0,0,0,s,o,e.format,i.type,this.data):(i.width=s,i.height=o,n.texImage2D(e.target,0,i.internalFormat,s,o,0,e.format,i.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const yA={scaleMode:yr.NEAREST,format:nt.RGBA,alphaMode:sr.NPM},zn=class extends en{constructor(r=null,t=null){super(),t=Object.assign({},zn.defaultOptions,t);const{alphaMode:e,mipmap:i,anisotropicLevel:n,scaleMode:s,width:o,height:a,wrapMode:l,format:u,type:h,target:c,resolution:d,resourceOptions:f}=t;r&&!(r instanceof ua)&&(r=Xx(r,f),r.internal=!0),this.resolution=d||ot.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=n,this._wrapMode=l,this._scaleMode=s,this.format=u,this.type=h,this.target=c,this.alphaMode=e,this.uid=sn(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(r)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)}setStyle(r,t){let e;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,e=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,e=!0),e&&this.dirtyStyleId++,this}setSize(r,t,e){return e=e||this.resolution,this.setRealSize(r*e,t*e,e)}setRealSize(r,t,e){return this.resolution=e||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Vf(this.realWidth)&&Vf(this.realHeight)}setResolution(r){const t=this.resolution;return t===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*t)/r,this.height=Math.round(this.height*t)/r,this.emit("update",this)),this._refreshPOT(),this)}setResource(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(r){this.emit("error",this,r)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete di[this.cacheId],delete xr[this.cacheId],this.cacheId=null),this.dispose(),zn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(r,t,e=ot.STRICT_TEXTURE_CACHE){const i=typeof r=="string";let n=null;if(i)n=r;else{if(!r._pixiId){const o=(t==null?void 0:t.pixiIdPrefix)||"pixiid";r._pixiId=`${o}_${sn()}`}n=r._pixiId}let s=di[n];if(i&&e&&!s)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return s||(s=new zn(r,t),s.cacheId=n,zn.addToCache(s,n)),s}static fromBuffer(r,t,e,i){r=r||new Float32Array(t*e*4);const n=new Ta(r,{width:t,height:e}),s=r instanceof Float32Array?mt.FLOAT:mt.UNSIGNED_BYTE;return new zn(n,Object.assign({},yA,i||{width:t,height:e,type:s}))}static addToCache(r,t){t&&(r.textureCacheIds.includes(t)||r.textureCacheIds.push(t),di[t]&&di[t]!==r&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),di[t]=r)}static removeFromCache(r){if(typeof r=="string"){const t=di[r];if(t){const e=t.textureCacheIds.indexOf(r);return e>-1&&t.textureCacheIds.splice(e,1),delete di[r],t}}else if(r!=null&&r.textureCacheIds){for(let t=0;t<r.textureCacheIds.length;++t)delete di[r.textureCacheIds[t]];return r.textureCacheIds.length=0,r}return null}};let At=zn;At.defaultOptions={mipmap:Sr.POW2,anisotropicLevel:0,scaleMode:yr.LINEAR,wrapMode:Ei.CLAMP,alphaMode:sr.UNPACK,target:is.TEXTURE_2D,format:nt.RGBA,type:mt.UNSIGNED_BYTE};At._globalBatch=0;class zc{constructor(){this.texArray=null,this.blend=0,this.type=gr.TRIANGLES,this.start=0,this.size=0,this.data=null}}let vA=0;class zt{constructor(t,e=!0,i=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=vA++,this.disposeRunner=new rr("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?Er.ELEMENT_ARRAY_BUFFER:Er.ARRAY_BUFFER}get index(){return this.type===Er.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new zt(t)}}class Jl{constructor(t,e=0,i=!1,n=mt.FLOAT,s,o,a,l=1){this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,e,i,n,s){return new Jl(t,e,i,n,s)}}const EA={Float32Array,Uint32Array,Int32Array,Uint8Array};function TA(r,t){let e=0,i=0;const n={};for(let l=0;l<r.length;l++)i+=t[l],e+=r[l].length;const s=new ArrayBuffer(e*4);let o=null,a=0;for(let l=0;l<r.length;l++){const u=t[l],h=r[l],c=zx(h);n[c]||(n[c]=new EA[c](s)),o=n[c];for(let d=0;d<h.length;d++){const f=(d/u|0)*i+a,p=d%u;o[f+p]=h[d]}a+=u}return new Float32Array(s)}const Qf={5126:4,5123:2,5121:1};let AA=0;const SA={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Si{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=AA++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new rr("disposeGeometry"),this.refCount=0}addAttribute(t,e,i=0,n=!1,s,o,a,l=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof zt||(e instanceof Array&&(e=new Float32Array(e)),e=new zt(e));const u=t.split("|");if(u.length>1){for(let c=0;c<u.length;c++)this.addAttribute(u[c],e,i,n,s);return this}let h=this.buffers.indexOf(e);return h===-1&&(this.buffers.push(e),h=this.buffers.length-1),this.attributes[t]=new Jl(h,i,n,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof zt||(t instanceof Array&&(t=new Uint16Array(t)),t=new zt(t)),t.type=Er.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],i=new zt;let n;for(n in this.attributes){const s=this.attributes[n],o=this.buffers[s.buffer];t.push(o.data),e.push(s.size*Qf[s.type]/4),s.buffer=0}for(i.data=TA(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new Si;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new zt(this.buffers[e].data.slice(0));for(const e in this.attributes){const i=this.attributes[e];t.attributes[e]=new Jl(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Er.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new Si,i=[],n=[],s=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)n[l]=n[l]||0,n[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new SA[zx(o.buffers[a].data)](n[a]),e.buffers[a]=new zt(i[a]);for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=Er.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,h=0;for(let c=0;c<o.buffers.length;c++)if(o.buffers[c]!==o.indexBuffer){h=c;break}for(const c in o.attributes){const d=o.attributes[c];(d.buffer|0)===h&&(l+=d.size*Qf[d.type]/4)}for(let c=0;c<t.length;c++){const d=t[c].indexBuffer.data;for(let f=0;f<d.length;f++)e.indexBuffer.data[f+u]+=a;a+=t[c].buffers[h].data.length/l,u+=d.length}}return e}}class Wx extends Si{constructor(t=!1){super(),this._buffer=new zt(null,t,!1),this._indexBuffer=new zt(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,mt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,mt.FLOAT).addAttribute("aColor",this._buffer,4,!0,mt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,mt.FLOAT).addIndex(this._indexBuffer)}}const tu=Math.PI*2,bA=180/Math.PI,CA=Math.PI/180;var oe=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(oe||{});class Rt{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new Rt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const fl=[new Rt,new Rt,new Rt,new Rt];class Nt{constructor(t=0,e=0,i=0,n=0){this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=oe.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Nt(0,0,0,0)}clone(){return new Nt(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const T=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=T)return!1;const D=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>D}const i=this.left,n=this.right,s=this.top,o=this.bottom;if(n<=i||o<=s)return!1;const a=fl[0].set(t.left,t.top),l=fl[1].set(t.left,t.bottom),u=fl[2].set(t.right,t.top),h=fl[3].set(t.right,t.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const c=Math.sign(e.a*e.d-e.b*e.c);if(c===0||(e.apply(a,a),e.apply(l,l),e.apply(u,u),e.apply(h,h),Math.max(a.x,l.x,u.x,h.x)<=i||Math.min(a.x,l.x,u.x,h.x)>=n||Math.max(a.y,l.y,u.y,h.y)<=s||Math.min(a.y,l.y,u.y,h.y)>=o))return!1;const d=c*(l.y-a.y),f=c*(a.x-l.x),p=d*i+f*s,_=d*n+f*s,x=d*i+f*o,g=d*n+f*o;if(Math.max(p,_,x,g)<=d*a.x+f*a.y||Math.min(p,_,x,g)>=d*h.x+f*h.y)return!1;const v=c*(a.y-u.y),m=c*(u.x-a.x),y=v*i+m*s,S=v*n+m*s,E=v*i+m*o,b=v*n+m*o;return!(Math.max(y,S,E,b)<=v*a.x+m*a.y||Math.min(y,S,E,b)>=v*h.x+m*h.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Dd{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.radius=i,this.type=oe.CIRC}clone(){return new Dd(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let n=this.x-t,s=this.y-e;return n*=n,s*=s,n+s<=i}getBounds(){return new Nt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Od{constructor(t=0,e=0,i=0,n=0){this.x=t,this.y=e,this.width=i,this.height=n,this.type=oe.ELIP}clone(){return new Od(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1}getBounds(){return new Nt(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class us{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let n=0,s=e.length;n<s;n++)i.push(e[n].x,e[n].y);e=i}this.points=e,this.type=oe.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new us(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let i=!1;const n=this.points.length/2;for(let s=0,o=n-1;s<n;o=s++){const a=this.points[s*2],l=this.points[s*2+1],u=this.points[o*2],h=this.points[o*2+1];l>e!=h>e&&t<(u-a)*((e-l)/(h-l))+a&&(i=!i)}return i}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}}class Fd{constructor(t=0,e=0,i=0,n=0,s=20){this.x=t,this.y=e,this.width=i,this.height=n,this.radius=s,this.type=oe.RREC}clone(){return new Fd(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let n=t-(this.x+i),s=e-(this.y+i);const o=i*i;if(n*n+s*s<=o||(n=t-(this.x+this.width-i),n*n+s*s<=o)||(s=e-(this.y+this.height-i),n*n+s*s<=o)||(n=t-(this.x+i),n*n+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class Bt{constructor(t=1,e=0,i=0,n=1,s=0,o=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,n,s,o){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new Rt;const i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e}applyInverse(t,e){e=e||new Rt;const i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,o=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this}append(t){const e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this}setTransform(t,e,i,n,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,n=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-n,s),l=Math.atan2(i,e),u=Math.abs(a+l);return u<1e-5||Math.abs(tu-u)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*i+o.y*s),t}invert(){const t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,o=t*n-e*i;return this.a=n/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*s)/o,this.ty=-(t*this.ty-e*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Bt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Bt}static get TEMP_MATRIX(){return new Bt}}const $i=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Gi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],zi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Vi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Vc=[],Yx=[],pl=Math.sign;function wA(){for(let r=0;r<16;r++){const t=[];Vc.push(t);for(let e=0;e<16;e++){const i=pl($i[r]*$i[e]+zi[r]*Gi[e]),n=pl(Gi[r]*$i[e]+Vi[r]*Gi[e]),s=pl($i[r]*zi[e]+zi[r]*Vi[e]),o=pl(Gi[r]*zi[e]+Vi[r]*Vi[e]);for(let a=0;a<16;a++)if($i[a]===i&&Gi[a]===n&&zi[a]===s&&Vi[a]===o){t.push(a);break}}}for(let r=0;r<16;r++){const t=new Bt;t.set($i[r],Gi[r],zi[r],Vi[r],0,0),Yx.push(t)}}wA();const Mt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>$i[r],uY:r=>Gi[r],vX:r=>zi[r],vY:r=>Vi[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>Vc[r][t],sub:(r,t)=>Vc[r][Mt.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?Mt.S:Mt.N:Math.abs(t)*2<=Math.abs(r)?r>0?Mt.E:Mt.W:t>0?r>0?Mt.SE:Mt.SW:r>0?Mt.NE:Mt.NW,matrixAppendRotationInv:(r,t,e=0,i=0)=>{const n=Yx[Mt.inv(t)];n.tx=e,n.ty=i,r.append(n)}};class yi{constructor(t,e,i=0,n=0){this._x=i,this._y=n,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new yi(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=${0} y=${0} scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const qx=class{constructor(){this.worldTransform=new Bt,this.localTransform=new Bt,this.position=new yi(this.onChange,this,0,0),this.scale=new yi(this.onChange,this,1,1),this.pivot=new yi(this.onChange,this,0,0),this.skew=new yi(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const e=r.worldTransform,i=this.worldTransform;i.a=t.a*e.a+t.b*e.c,i.b=t.a*e.b+t.b*e.d,i.c=t.c*e.a+t.d*e.c,i.d=t.c*e.b+t.d*e.d,i.tx=t.tx*e.a+t.ty*e.c+e.tx,i.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};let Ld=qx;Ld.IDENTITY=new qx;var NA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,RA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Jf(r,t,e){const i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function zh(r){const t=new Array(r);for(let e=0;e<t.length;e++)t[e]=!1;return t}function Kx(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return zh(2*t);case"bvec3":return zh(3*t);case"bvec4":return zh(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const hs=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,t)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(t==null||t.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,t)=>r.type==="mat3"&&r.size===1&&!r.isArray&&t.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,t)=>r.type==="vec2"&&r.size===1&&!r.isArray&&t.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],IA={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},PA={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function DA(r,t){var i;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in r.uniforms){const s=t[n];if(!s){(i=r.uniforms[n])!=null&&i.group&&(r.uniforms[n].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=r.uniforms[n];let a=!1;for(let l=0;l<hs.length;l++)if(hs[l].test(s,o)){e.push(hs[l].code(n,o)),a=!0;break}if(!a){const u=(s.size===1&&!s.isArray?IA:PA)[s.type].replace("location",`ud["${n}"].location`);e.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${u};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const Zx={};let Hn=Zx;function OA(){if(Hn===Zx||Hn!=null&&Hn.isContextLost()){const r=ot.ADAPTER.createCanvas();let t;ot.PREFER_ENV>=Tn.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Hn=t}return Hn}let xl;function FA(){if(!xl){xl=$e.MEDIUM;const r=OA();r&&r.getShaderPrecisionFormat&&(xl=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?$e.HIGH:$e.MEDIUM)}return xl}function tp(r,t){const e=r.getShaderSource(t).split(`
`).map((u,h)=>`${h}: ${u}`),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},o=n.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!s[u]?(s[u]=!0,!0):!1),a=[""];o.forEach(u=>{e[u-1]=`%c${e[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=e.join(`
`);a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function LA(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||tp(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||tp(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}const BA={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Qx(r){return BA[r]}let ml=null;const ep={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Jx(r,t){if(!ml){const e=Object.keys(ep);ml={};for(let i=0;i<e.length;++i){const n=e[i];ml[r[n]]=ep[n]}}return ml[t]}function rp(r,t,e){if(r.substring(0,9)!=="precision"){let i=t;return t===$e.HIGH&&e!==$e.HIGH&&(i=$e.MEDIUM),`precision ${i} float;
${r}`}else if(e!==$e.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let Vs;function MA(){if(typeof Vs=="boolean")return Vs;try{Vs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Vs=!1}return Vs}let kA=0;const _l={},Vn=class{constructor(r,t,e="pixi-shader",i={}){this.extra={},this.id=kA++,this.vertexSrc=r||Vn.defaultVertexSrc,this.fragmentSrc=t||Vn.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(e=e.replace(/\s+/g,"-"),_l[e]?(_l[e]++,e+=`-${_l[e]}`):_l[e]=1,this.vertexSrc=`#define SHADER_NAME ${e}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${e}
${this.fragmentSrc}`,this.vertexSrc=rp(this.vertexSrc,Vn.defaultVertexPrecision,$e.HIGH),this.fragmentSrc=rp(this.fragmentSrc,Vn.defaultFragmentPrecision,FA())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return RA}static get defaultFragmentSrc(){return NA}static from(r,t,e){const i=r+t;let n=Wf[i];return n||(Wf[i]=n=new Vn(r,t,e)),n}};let tr=Vn;tr.defaultVertexPrecision=$e.HIGH;tr.defaultFragmentPrecision=Gr.apple.device?$e.HIGH:$e.MEDIUM;let UA=0;class ir{constructor(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UA++,this.static=!!e,this.ubo=!!i,t instanceof zt?(this.buffer=t,this.buffer.type=Er.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new zt(new Float32Array(1)),this.buffer.type=Er.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,i){if(!this.ubo)this.uniforms[t]=new ir(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,i){return new ir(t,e,i)}static uboFrom(t,e){return new ir(t,e??!0,!0)}}class Tr{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof ir?this.uniformGroup=e:this.uniformGroup=new ir(e):this.uniformGroup=new ir({}),this.disposeRunner=new rr("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const i in e.uniforms){const n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,i){const n=tr.from(t,e);return new Tr(n,i)}}class HA{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const i=new Int32Array(t);for(let s=0;s<t;s++)i[s]=s;this.defaultGroupCache[t]=ir.from({uSamplers:i},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${t}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new tr(this.vertexSrc,n)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new Bt,default:this.defaultGroupCache[t]};return new Tr(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+=`if(vTextureId < ${i}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}}class Xc{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function jA(){return!Gr.apple.device}function $A(r){let t=!0;const e=ot.ADAPTER.getNavigator();if(Gr.tablet||Gr.phone){if(Gr.apple.device){const i=e.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(t=!1)}if(Gr.android.device){const i=e.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?r:4}class Tu{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var GA=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,zA=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Ye=class extends Tu{constructor(r){super(r),this.setShaderGenerator(),this.geometryClass=Wx,this.vertexSize=6,this.state=ii.for2d(),this.size=Ye.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),r.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??$A(32),this._defaultMaxTextures}static set defaultMaxTextures(r){this._defaultMaxTextures=r}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??jA(),this._canUploadSameBuffer}static set canUploadSameBuffer(r){this._canUploadSameBuffer=r}get MAX_TEXTURES(){return Pt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return zA}static get defaultFragmentTemplate(){return GA}setShaderGenerator({vertex:r=Ye.defaultVertexSrc,fragment:t=Ye.defaultFragmentTemplate}={}){this.shaderGenerator=new HA(r,t)}contextChange(){const r=this.renderer.gl;ot.PREFER_ENV===Tn.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),Ye.defaultMaxTextures),this.maxTextures=gA(this.maxTextures,r)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:r,_textureArrayPool:t}=Ye,e=this.size/4,i=Math.floor(e/this.maxTextures)+1;for(;r.length<e;)r.push(new zc);for(;t.length<i;)t.push(new Xc);for(let n=0;n<this.maxTextures;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(r){r._texture.valid&&(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)}buildTexturesAndDrawCalls(){const{_bufferedTextures:r,maxTextures:t}=this,e=Ye._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++At._globalBatch,a=0,l=e[0],u=0;i.copyBoundTextures(n,t);for(let h=0;h<this._bufferSize;++h){const c=r[h];r[h]=null,c._batchEnabled!==o&&(l.count>=t&&(i.boundArray(l,n,o,t),this.buildDrawCalls(l,u,h),u=h,l=e[++a],++o),c._batchEnabled=o,c.touched=s,l.elements[l.count++]=c)}l.count>0&&(i.boundArray(l,n,o,t),this.buildDrawCalls(l,u,this._bufferSize),++a,++o);for(let h=0;h<n.length;h++)n[h]=null;At._globalBatch=o}buildDrawCalls(r,t,e){const{_bufferedElements:i,_attributeBuffer:n,_indexBuffer:s,vertexSize:o}=this,a=Ye._drawCallPool;let l=this._dcIndex,u=this._aIndex,h=this._iIndex,c=a[l];c.start=this._iIndex,c.texArray=r;for(let d=t;d<e;++d){const f=i[d],p=f._texture.baseTexture,_=jx[p.alphaMode?1:0][f.blendMode];i[d]=null,t<d&&c.blend!==_&&(c.size=h-c.start,t=d,c=a[++l],c.texArray=r,c.start=h),this.packInterleavedGeometry(f,n,s,u,h),u+=f.vertexData.length/2*o,h+=f.indices.length,c.blend=_}t<e&&(c.size=h-c.start,++l),this._dcIndex=l,this._aIndex=u,this._iIndex=h}bindAndClearTexArray(r){const t=this.renderer.texture;for(let e=0;e<r.count;e++)t.bind(r.elements[e],r.ids[e]),r.elements[e]=null;r.count=0}updateGeometry(){const{_packedGeometries:r,_attributeBuffer:t,_indexBuffer:e}=this;Ye.canUploadSameBuffer?(r[this._flushId]._buffer.update(t.rawBinaryData),r[this._flushId]._indexBuffer.update(e),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,r[this._flushId]=new this.geometryClass),r[this._flushId]._buffer.update(t.rawBinaryData),r[this._flushId]._indexBuffer.update(e),this.renderer.geometry.bind(r[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const r=this._dcIndex,{gl:t,state:e}=this.renderer,i=Ye._drawCallPool;let n=null;for(let s=0;s<r;s++){const{texArray:o,type:a,size:l,start:u,blend:h}=i[s];n!==o&&(n=o,this.bindAndClearTexArray(o)),this.state.blendMode=h,e.set(this.state),t.drawElements(a,l,t.UNSIGNED_SHORT,u*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Ye.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(r){const t=Ql(Math.ceil(r/8)),e=Xf(t),i=t*8;this._aBuffers.length<=e&&(this._iBuffers.length=e+1);let n=this._aBuffers[i];return n||(this._aBuffers[i]=n=new $c(i*this.vertexSize*4)),n}getIndexBuffer(r){const t=Ql(Math.ceil(r/12)),e=Xf(t),i=t*12;this._iBuffers.length<=e&&(this._iBuffers.length=e+1);let n=this._iBuffers[e];return n||(this._iBuffers[e]=n=new Uint16Array(i)),n}packInterleavedGeometry(r,t,e,i,n){const{uint32View:s,float32View:o}=t,a=i/this.vertexSize,l=r.uvs,u=r.indices,h=r.vertexData,c=r._texture.baseTexture._batchLocation,d=Math.min(r.worldAlpha,1),f=d<1&&r._texture.baseTexture.alphaMode?Pd(r._tintRGB,d):r._tintRGB+(d*255<<24);for(let p=0;p<h.length;p+=2)o[i++]=h[p],o[i++]=h[p+1],o[i++]=l[p],o[i++]=l[p+1],s[i++]=f,o[i++]=c;for(let p=0;p<u.length;p++)e[n++]=a+u[p]}};let Qe=Ye;Qe.defaultBatchSize=4096;Qe.extension={name:"batch",type:st.RendererPlugin};Qe._drawCallPool=[];Qe._textureArrayPool=[];xt.add(Qe);var VA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,XA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Wo=class extends Tr{constructor(r,t,e){const i=tr.from(r||Wo.defaultVertexSrc,t||Wo.defaultFragmentSrc);super(i,e),this.padding=0,this.resolution=Wo.defaultResolution,this.multisample=Wo.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new ii}apply(r,t,e,i,n){r.applyFilter(this,t,e,i)}get blendMode(){return this.state.blendMode}set blendMode(r){this.state.blendMode=r}get resolution(){return this._resolution}set resolution(r){this._resolution=r}static get defaultVertexSrc(){return XA}static get defaultFragmentSrc(){return VA}};let ae=Wo;ae.defaultResolution=1;ae.defaultMultisample=Ht.NONE;class tm{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender,t.color&&(this.color=typeof t.color=="string"?Id(t.color):t.color),this.alpha=t.alpha}get color(){return this._backgroundColor}set color(t){this._backgroundColor=t,this._backgroundColorString=Hx(t),la(t,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(t){this._backgroundColorRgba[3]=t}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}tm.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"background"};xt.add(tm);class em{constructor(t){this.renderer=t,this.emptyRenderer=new Tu(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:i}=this.renderer.texture;for(let n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,e,i,n){const{elements:s,ids:o,count:a}=t;let l=0;for(let u=0;u<a;u++){const h=s[u],c=h._batchLocation;if(c>=0&&c<n&&e[c]===h){o[u]=c;continue}for(;l<n;){const d=e[l];if(d&&d._batchEnabled===i&&d._batchLocation===l){l++;continue}o[u]=l,h._batchLocation=l,e[l]=h;break}}}destroy(){this.renderer=null}}em.extension={type:st.RendererSystem,name:"batch"};xt.add(em);let ip=0;class rm{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=ip++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,i=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:i,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=ip++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let i;if(ot.PREFER_ENV>=Tn.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}rm.extension={type:st.RendererSystem,name:"context"};xt.add(rm);class WA extends Ta{upload(t,e,i){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===sr.UNPACK);const s=e.realWidth,o=e.realHeight;return i.width===s&&i.height===o?n.texSubImage2D(e.target,0,0,0,s,o,e.format,i.type,this.data):(i.width=s,i.height=o,n.texImage2D(e.target,0,i.internalFormat,s,o,0,e.format,i.type,this.data)),!0}}class Wc{constructor(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new rr("disposeFramebuffer"),this.multisample=Ht.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new At(null,{scaleMode:yr.NEAREST,resolution:1,mipmap:Sr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new At(new WA(null,{width:this.width,height:this.height}),{scaleMode:yr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Sr.OFF,format:nt.DEPTH_COMPONENT,type:mt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class im extends At{constructor(t={}){if(typeof t=="number"){const e=arguments[0],i=arguments[1],n=arguments[2],s=arguments[3];t={width:e,height:i,scaleMode:n,resolution:s}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=Ht.NONE),super(null,t),this.mipmap=Sr.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new Wc(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class bi extends ua{constructor(t){const e=t,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;super(i,n),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,i){i===void 0&&!e.startsWith("data:")?t.crossOrigin=xA(e):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}upload(t,e,i,n){const s=t.gl,o=e.realWidth,a=e.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1&&n.buffered.length===0)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===sr.UNPACK),!this.noSubImage&&e.target===s.TEXTURE_2D&&i.width===o&&i.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,e.format,i.type,n):(i.width=o,i.height=a,s.texImage2D(e.target,0,i.internalFormat,e.format,i.type,n)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(e,i),super.update()}dispose(){this.source=null}}class nm extends bi{constructor(t,e){if(e=e||{},typeof t=="string"){const i=new Image;bi.crossOrigin(i,t,e.crossorigin),i.src=t,t=i}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??ot.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,i)=>{const n=this.source;this.url=n.src;const s=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.resize(n.width,n.height),this._load=null,this.createBitmap?e(this.process()):e(this))};n.complete&&n.src?s():(n.onload=s,n.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,i=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then(n=>n.blob()).then(n=>e(n,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===sr.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,i){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,i,this.bitmap),!this.preserveBitmap){let n=!0;const s=e._glTextures;for(const o in s){const a=s[o];if(a!==i&&a.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class sm{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,i){const n=e.width,s=e.height;if(i){const o=t.width/2/n,a=t.height/2/s,l=t.x/n+o,u=t.y/s+a;i=Mt.add(i,Mt.NW),this.x0=l+o*Mt.uX(i),this.y0=u+a*Mt.uY(i),i=Mt.add(i,2),this.x1=l+o*Mt.uX(i),this.y1=u+a*Mt.uY(i),i=Mt.add(i,2),this.x2=l+o*Mt.uX(i),this.y2=u+a*Mt.uY(i),i=Mt.add(i,2),this.x3=l+o*Mt.uX(i),this.y3=u+a*Mt.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const np=new sm;function gl(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}class pt extends en{constructor(t,e,i,n,s,o){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new Nt(0,0,1,1)),t instanceof pt&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this._uvs=np,this.uvMatrix=null,this.orig=i||e,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Rt(o.x,o.y):new Rt(0,0),this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&xr[e.url]&&pt.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,pt.removeFromCache(this),this.textureCacheIds=null}clone(){var n;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),i=new pt(this.baseTexture,!this.noFrame&&t,e,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=t),i}updateUvs(){this._uvs===np&&(this._uvs=new sm),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},i=ot.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let s=null;if(n)s=t;else if(t instanceof At){if(!t.cacheId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${sn()}`,At.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${sn()}`}s=t._pixiId}let o=xr[s];if(n&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(t instanceof At)?(e.resolution||(e.resolution=Ai(t)),o=new pt(new At(t,e)),o.baseTexture.cacheId=s,At.addToCache(o.baseTexture,s),pt.addToCache(o,s)):!o&&t instanceof At&&(o=new pt(t),pt.addToCache(o,s)),o}static fromURL(t,e){const i=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),n=pt.from(t,Object.assign({resourceOptions:i},e),!1),s=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):s.load().then(()=>Promise.resolve(n))}static fromBuffer(t,e,i,n){return new pt(At.fromBuffer(t,e,i,n))}static fromLoader(t,e,i,n){const s=new At(t,Object.assign({scaleMode:At.defaultOptions.scaleMode,resolution:Ai(e)},n)),{resource:o}=s;o instanceof nm&&(o.url=e);const a=new pt(s);return i||(i=e),At.addToCache(a.baseTexture,i),pt.addToCache(a,i),i!==e&&(At.addToCache(a.baseTexture,e),pt.addToCache(a,e)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),xr[e]&&xr[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),xr[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=xr[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete xr[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)xr[t.textureCacheIds[e]]===t&&delete xr[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:i,width:n,height:s}=t,o=e+n>this.baseTexture.width,a=i+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",u=`X: ${e} + ${n} = ${e+n} > ${this.baseTexture.width}`,h=`Y: ${i} + ${s} = ${i+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${h}`)}this.valid=n&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return pt._EMPTY||(pt._EMPTY=new pt(new At),gl(pt._EMPTY),gl(pt._EMPTY.baseTexture)),pt._EMPTY}static get WHITE(){if(!pt._WHITE){const t=ot.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),pt._WHITE=new pt(At.from(t)),gl(pt._WHITE),gl(pt._WHITE.baseTexture)}return pt._WHITE}}class Ci extends pt{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,i=!0){const n=this.baseTexture.resolution,s=Math.round(t*n)/n,o=Math.round(e*n)/n;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new Ci(new im(t))}}class om{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,i=Ht.NONE){const n=new im(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new Ci(n)}getOptimalTexture(t,e,i=1,n=Ht.NONE){let s;t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=Ql(t),e=Ql(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(t,e,n)),o.filterPoolKey=s,o.setResolution(i),o}getFilterTexture(t,e,i){const n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||Ht.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const i=this.texturePool[e];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const i=this.texturePool[e];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}om.SCREEN_KEY=-1;class YA extends Si{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class am extends Si{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new zt(this.vertices),this.uvBuffer=new zt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class qA{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Ht.NONE,this.sourceFrame=new Nt,this.destinationFrame=new Nt,this.bindingSourceFrame=new Nt,this.bindingDestinationFrame=new Nt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const yl=[new Rt,new Rt,new Rt,new Rt],Vh=new Bt;class lm{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new om,this.statePool=[],this.quad=new YA,this.quadUv=new am,this.tempRect=new Nt,this.activeState={},this.globalUniforms=new ir({outputFrame:new Nt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new qA,o=this.renderer.renderTexture;let a=e[0].resolution,l=e[0].multisample,u=e[0].padding,h=e[0].autoFit,c=e[0].legacy??!0;for(let p=1;p<e.length;p++){const _=e[p];a=Math.min(a,_.resolution),l=Math.min(l,_.multisample),u=this.useMaxPadding?Math.max(u,_.padding):u+_.padding,h=h&&_.autoFit,c=c||(_.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),n.push(s),s.resolution=a,s.multisample=l,s.legacy=c,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u);const d=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(Vh.copyFrom(i.projection.transform).invert(),d),h?(s.sourceFrame.fit(d),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(d)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,l),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const f=this.tempRect;f.x=0,f.y=0,f.width=s.sourceFrame.width,f.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,f),i.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;const n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;const s=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*e.resolution),o[1]=Math.round(s[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*s[2]-.5*o[2],a[3]=e.sourceFrame.height*s[3]-.5*o[3],e.legacy){const u=n.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,l.renderTexture,mr.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let u=e.renderTexture,h=this.getOptimalFilterTexture(u.width,u.height,e.resolution);h.filterFrame=u.filterFrame;let c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(h=this.getOptimalFilterTexture(u.width,u.height,e.resolution),h.filterFrame=u.filterFrame),i[c].apply(this,u,h,mr.CLEAR,e);const d=u;u=h,h=d}i[c].apply(this,u,l.renderTexture,mr.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=mr.CLEAR){const{renderTexture:i,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t!=null&&t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,i.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=n.stateId&1||this.forceClear;(e===mr.CLEAR||e===mr.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,i,n){const s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(gr.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(gr.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:i,destinationFrame:n}=this.activeState,{orig:s}=e._texture,o=t.set(n.width,0,0,n.height,i.x,i.y),a=e.worldTransform.copyTo(Bt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(e.anchor.x,e.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,i=1,n=Ht.NONE){return this.texturePool.getOptimalTexture(t,e,i,n)}getFilterTexture(t,e,i){if(typeof t=="number"){const s=t;t=e,e=s}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||Ht.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const i=yl[0],n=yl[1],s=yl[2],o=yl[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(o,o);const a=Math.min(i.x,n.x,s.x,o.x),l=Math.min(i.y,n.y,s.y,o.y),u=Math.max(i.x,n.x,s.x,o.x),h=Math.max(i.y,n.y,s.y,o.y);e.x=a,e.y=l,e.width=u-a,e.height=h-l}roundFrame(t,e,i,n,s){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(s){const{a:o,b:a,c:l,d:u}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}s=s?Vh.copyFrom(s):Vh.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)}}}lm.extension={type:st.RendererSystem,name:"filter"};xt.add(lm);class KA{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Ht.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const ZA=new Nt;class um{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Wc(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Nt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;ot.PREFER_ENV===Tn.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=n=>e.drawBuffersWEBGL(n):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,i=0){const{gl:n}=this;if(t){const s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const o=e.width>>i,a=e.height>>i,l=o/e.width;this.setViewport(e.x*l,e.y*l,o,a)}else{const o=t.width>>i,a=t.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,i,n){const s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,i,n,s=Rc.COLOR|Rc.DEPTH){const{gl:o}=this;o.clearColor(t,e,i,n),o.clear(s)}initFramebuffer(t){const{gl:e}=this,i=new KA(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i}resizeFramebuffer(t){const{gl:e}=this,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));const n=t.colorTextures;let s=n.length;e.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=n[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:i}=this,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures;let o=s.length;i.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer():n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=s[l],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),l===0&&n.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,u.target,h._glTextures[this.CONTEXT_UID].texture,e),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const u=t.depthTexture;this.renderer.texture.bind(u,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,e)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let i=Ht.NONE;if(t<=1||e===null)return i;for(let n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=Ht.NONE),i}blit(t,e,i){const{current:n,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!n)return;const l=n.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;const h=n.colorTextures[0];if(!h)return;l.blitFramebuffer||(l.blitFramebuffer=new Wc(n.width,n.height),l.blitFramebuffer.addColorTexture(0,h)),t=l.blitFramebuffer,t.colorTextures[0]!==h&&(t.colorTextures[0]=h,t.dirtyId++,t.dirtyFormat++),(t.width!==n.width||t.height!==n.height)&&(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}e||(e=ZA,e.width=n.width,e.height=n.height),i||(i=e);const u=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR)}disposeFramebuffer(t,e){const i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!i)return;delete t.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil)return;t.stencil=!0;const i=t.width,n=t.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Nt}destroy(){this.renderer=null}}um.extension={type:st.RendererSystem,name:"framebuffer"};xt.add(um);const Xh={5126:4,5123:2,5121:1};class hm{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;ot.PREFER_ENV===Tn.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=()=>i.createVertexArrayOES(),t.bindVertexArray=n=>i.bindVertexArrayOES(n),t.deleteVertexArray=n=>i.deleteVertexArrayOES(n)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=(n,s)=>i.vertexAttribDivisorANGLE(n,s),t.drawElementsInstanced=(n,s,o,a,l)=>i.drawElementsInstancedANGLE(n,s,o,a,l),t.drawArraysInstanced=(n,s,o,a)=>i.drawArraysInstancedANGLE(n,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:i}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);const o=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let i=0;i<t.buffers.length;i++){const n=t.buffers[i];e.update(n)}}checkCompatibility(t,e){const i=t.attributes,n=e.attributeData;for(const s in n)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(t,e){const i=t.attributes,n=e.attributeData,s=["g",t.id];for(const o in i)n[o]&&s.push(o,n[o].location);return s.join("-")}initGeometryVao(t,e,i=!0){const n=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);const l=this.getSignature(t,a),u=t.glVertexArrayObjects[this.CONTEXT_UID];let h=u[l];if(h)return u[a.id]=h,h;const c=t.buffers,d=t.attributes,f={},p={};for(const _ in c)f[_]=0,p[_]=0;for(const _ in d)!d[_].size&&a.attributeData[_]?d[_].size=a.attributeData[_].size:d[_].size||console.warn(`PIXI Geometry attribute '${_}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[_].buffer]+=d[_].size*Xh[d[_].type];for(const _ in d){const x=d[_],g=x.size;x.stride===void 0&&(f[x.buffer]===g*Xh[x.type]?x.stride=0:x.stride=f[x.buffer]),x.start===void 0&&(x.start=p[x.buffer],p[x.buffer]+=g*Xh[x.type])}h=n.createVertexArray(),n.bindVertexArray(h);for(let _=0;_<c.length;_++){const x=c[_];o.bind(x),i&&x._glBuffers[s].refCount++}return this.activateVao(t,a),u[a.id]=h,u[l]=h,n.bindVertexArray(null),o.unbind(Er.ARRAY_BUFFER),h}disposeGeometry(t,e){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const i=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,s=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!i){if(o)for(let l=0;l<s.length;l++){const u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(s[l],e))}if(!e){for(const l in i)if(l[0]==="g"){const u=i[l];this._activeVao===u&&this.unbind(),n.deleteVertexArray(u)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)}activateVao(t,e){const i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);let l=null;for(const u in a){const h=a[u],c=o[h.buffer],d=c._glBuffers[n];if(e.attributeData[u]){l!==d&&(s.bind(c),l=d);const f=e.attributeData[u].location;if(i.enableVertexAttribArray(f),i.vertexAttribPointer(f,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)i.vertexAttribDivisor(f,h.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,i,n){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(t,e||o.indexBuffer.data.length,l,(i||0)*a,n||1):s.drawElements(t,e||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(t,i,e||o.getSize(),n||1):s.drawArrays(t,i,e||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}hm.extension={type:st.RendererSystem,name:"geometry"};xt.add(hm);const sp=new Bt;class cm{constructor(t,e){this._texture=t,this.mapCoord=new Bt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let n=0;n<t.length;n+=2){const s=t[n],o=t[n+1];e[n]=s*i.a+o*i.c+i.tx,e[n+1]=s*i.b+o*i.d+i.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const n=e.orig,s=e.trim;s&&(sp.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(sp));const o=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+l+u)/o.width,a[1]=(e._frame.y+l+u)/o.height,a[2]=(e._frame.x+e._frame.width-l+u)/o.width,a[3]=(e._frame.y+e._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0}}var QA=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,JA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class tS extends ae{constructor(t,e,i){let n=null;typeof t!="string"&&e===void 0&&i===void 0&&(n=t,t=void 0,e=void 0,i=void 0),super(t||JA,e||QA,i),this.maskSprite=n,this.maskMatrix=new Bt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,i,n){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new cm(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,i,n))}}class eS{constructor(t=null){this.type=Kt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=ae.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Kt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class dm{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let i=e;if(!i.isMaskData){const s=this.maskDataPool.pop()||new eS;s.pooled=!0,s.maskObject=e,i=s}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(n),i._colorMask=n?n._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==Kt.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Kt.SCISSOR:this.renderer.scissor.push(i);break;case Kt.STENCIL:this.renderer.stencil.push(i);break;case Kt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Kt.COLOR:this.pushColorMask(i);break}i.type===Kt.SPRITE&&this.maskStack.push(i)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case Kt.SCISSOR:this.renderer.scissor.pop(e);break;case Kt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Kt.SPRITE:this.popSpriteMask(e);break;case Kt.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===Kt.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=Kt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Kt.SCISSOR:t.type=Kt.STENCIL:t.type=Kt.COLOR}pushSpriteMask(t){const{maskObject:e}=t,i=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new tS]));const s=this.renderer,o=s.renderTexture;let a,l;if(o.current){const h=o.current;a=t.resolution||h.resolution,l=t.multisample??h.multisample}else a=t.resolution||s.resolution,l=t.multisample??s.multisample;n[0].resolution=a,n[0].multisample=l,n[0].maskSprite=e;const u=i.filterArea;i.filterArea=e.getBounds(!0),s.filter.push(i,n),i.filterArea=u,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,i=t._colorMask=e&t.colorMask;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(t){const e=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}dm.extension={type:st.RendererSystem,name:"mask"};xt.add(dm);class fm{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,i=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const op=new Bt,ap=[],kl=class extends fm{constructor(r){super(r),this.glConst=ot.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0}calcScissorRect(r){if(r._scissorRectLocal)return;const t=r._scissorRect,{maskObject:e}=r,{renderer:i}=this,n=i.renderTexture,s=e.getBounds(!0,ap.pop()??new Nt);this.roundFrameToPixels(s,n.current?n.current.resolution:i.resolution,n.sourceFrame,n.destinationFrame,i.projection.transform),t&&s.fit(t),r._scissorRectLocal=s}static isMatrixRotated(r){if(!r)return!1;const{a:t,b:e,c:i,d:n}=r;return(Math.abs(e)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(n)>1e-4)}testScissor(r){const{maskObject:t}=r;if(!t.isFastRect||!t.isFastRect()||kl.isMatrixRotated(t.worldTransform)||kl.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(r);const e=r._scissorRectLocal;return e.width>0&&e.height>0}roundFrameToPixels(r,t,e,i,n){kl.isMatrixRotated(n)||(n=n?op.copyFrom(n):op.identity(),n.translate(-e.x,-e.y).scale(i.width/e.width,i.height/e.height).translate(i.x,i.y),this.renderer.filter.transformAABB(n,r),r.fit(i),r.x=Math.round(r.x*t),r.y=Math.round(r.y*t),r.width=Math.round(r.width*t),r.height=Math.round(r.height*t))}push(r){r._scissorRectLocal||this.calcScissorRect(r);const{gl:t}=this.renderer;r._scissorRect||t.enable(t.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=r._scissorRectLocal,this._useCurrent()}pop(r){const{gl:t}=this.renderer;r&&ap.push(r._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const r=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=r.y:t=this.renderer.height-r.height-r.y,this.renderer.gl.scissor(r.x,t,r.width,r.height)}};let pm=kl;pm.extension={type:st.RendererSystem,name:"scissor"};xt.add(pm);class xm extends fm{constructor(t){super(t),this.glConst=ot.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:i}=this.renderer,n=t._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;const s=t._colorMask;s!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,n,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(t._colorMask=s,i.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=i?i._colorMask:15;n!==0&&(i._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,n!==0&&(i._colorMask=n,e.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}xm.extension={type:st.RendererSystem,name:"stencil"};xt.add(xm);class mm{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Pt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return Pt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return Pt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(t){for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}mm.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"_plugin"};xt.add(mm);class _m{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Bt,this.transform=null}update(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(t,e,i,n){const s=this.projectionMatrix,o=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=o*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-o-e.y*s.d}setTransform(t){}destroy(){this.renderer=null}}_m.extension={type:st.RendererSystem,name:"projection"};xt.add(_m);const rS=new Ld;class gm{constructor(t){this.renderer=t,this._tempMatrix=new Bt}generateTexture(t,e){const{region:i,...n}=e||{},s=i||t.getLocalBounds(null,!0);s.width===0&&(s.width=1),s.height===0&&(s.height=1);const o=Ci.create({width:s.width,height:s.height,...n});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=t.transform;return t.transform=rS,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,o}destroy(){}}gm.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"textureGenerator"};xt.add(gm);const Ui=new Nt,Xs=new Nt;class ym{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Nt,this.destinationFrame=new Nt,this.viewportFrame=new Nt}bind(t=null,e,i){const n=this.renderer;this.current=t;let s,o,a;t?(s=t.baseTexture,a=s.resolution,e||(Ui.width=t.frame.width,Ui.height=t.frame.height,e=Ui),i||(Xs.x=t.frame.x,Xs.y=t.frame.y,Xs.width=e.width,Xs.height=e.height,i=Xs),o=s.framebuffer):(a=n.resolution,e||(Ui.width=n._view.screen.width,Ui.height=n._view.screen.height,e=Ui),i||(i=Ui,i.width=e.width,i.height=e.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,t||(l.y=n.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,e,a,!o),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)}clear(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.renderer.background.colorRgba;const i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer._view.screen,s=i.width!==n.width||i.height!==n.height;if(s){let{x:o,y:a,width:l,height:u}=this.viewportFrame;o=Math.round(o),a=Math.round(a),l=Math.round(l),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,a,l,u)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}ym.extension={type:st.RendererSystem,name:"renderTexture"};xt.add(ym);class iS{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function nS(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES);for(let n=0;n<i;n++){const s=t.getActiveAttrib(r,n);if(s.name.startsWith("gl_"))continue;const o=Jx(t,s.type),a={type:o,name:s.name,size:Qx(o),location:t.getAttribLocation(r,s.name)};e[s.name]=a}return e}function sS(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let n=0;n<i;n++){const s=t.getActiveUniform(r,n),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=Jx(t,s.type);e[o]={name:o,index:n,type:l,size:s.size,isArray:a,value:Kx(l,s.size)}}return e}function oS(r,t){var l;const e=Jf(r,r.VERTEX_SHADER,t.vertexSrc),i=Jf(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i);const s=(l=t.extra)==null?void 0:l.transformFeedbackVaryings;if(s&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(n,s.names,s.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||LA(r,n,e,i),t.attributeData=nS(n,r),t.uniformData=sS(n,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const u=Object.keys(t.attributeData);u.sort((h,c)=>h>c?1:-1);for(let h=0;h<u.length;h++)t.attributeData[u[h]].location=h,r.bindAttribLocation(n,h,u[h]);r.linkProgram(n)}r.deleteShader(e),r.deleteShader(i);const o={};for(const u in t.uniformData){const h=t.uniformData[u];o[u]={location:r.getUniformLocation(n,u),value:Kx(h.type,h.size)}}return new iS(n,o)}function aS(r,t,e,i,n){e.buffer.update(n)}const lS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},vm={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function uS(r){const t=r.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let e=0,i=0,n=0;for(let s=0;s<t.length;s++){const o=t[s];if(e=vm[o.data.type],o.data.size>1&&(e=Math.max(e,16)*o.data.size),o.dataLen=e,i%e!==0&&i<16){const a=i%e%16;i+=a,n+=a}i+e>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=e,i=e):(o.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function hS(r,t){const e=[];for(const i in r)t[i]&&e.push(t[i]);return e.sort((i,n)=>i.index-n.index),e}function cS(r,t){if(!r.autoManage)return{size:0,syncFunc:aS};const e=hS(r.uniforms,t),{uboElements:i,size:n}=uS(e),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],l=r.uniforms[a.data.name],u=a.data.name;let h=!1;for(let c=0;c<hs.length;c++){const d=hs[c];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,hs[c].codeUbo(a.data.name,l)),h=!0;break}}if(!h)if(a.data.size>1){const c=Qx(a.data.type),d=Math.max(vm[a.data.type]/16,1),f=c/d,p=(4-f%4)%4;s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const c=lS[a.data.type];s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${c};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let dS=0;const vl={textureCount:0,uboCount:0};class Em{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=dS++}systemCheck(){if(!MA())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(vl.textureCount=0,vl.uboCount=0,this.syncUniformGroup(t.uniformGroup,vl)),n}setUniforms(t){const e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)}syncUniformGroup(t,e){const i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))}syncUniforms(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=DA(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;const n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,vl,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])}createSyncBufferGroup(t,e,i){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=cS(t,this.shader.program.uniformData)),t.autoManage){const l=new Float32Array(a.size/4);t.buffer.update(l)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,i){const n=t.uniforms,s=[`${i}-`];for(const o in n)s.push(o),e[o]&&s.push(e[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,i=t.program,n=oS(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Em.extension={type:st.RendererSystem,name:"shader"};xt.add(Em);class Tm{constructor(t){this.renderer=t}run(t){const e=this.renderer;e.emitWithCustomOptions(e.runners.init,t),t.hello&&console.log(`PixiJS 7.1.4 - ${e.rendererLogId} - https://pixijs.com`),e.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}Tm.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"startup"};xt.add(Tm);function fS(r,t=[]){return t[Et.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.ADD]=[r.ONE,r.ONE],t[Et.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.NONE]=[0,0],t[Et.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[Et.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Et.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[Et.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[Et.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[Et.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[Et.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[Et.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[Et.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[Et.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[Et.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}const pS=0,xS=1,mS=2,_S=3,gS=4,yS=5,Yc=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Et.NONE,this._blendEq=!1,this.map=[],this.map[pS]=this.setBlend,this.map[xS]=this.setOffset,this.map[mS]=this.setCullFace,this.map[_S]=this.setDepthTest,this.map[gS]=this.setFrontFace,this.map[yS]=this.setDepthMask,this.checks=[],this.defaultState=new ii,this.defaultState.blend=!0}contextChange(r){this.gl=r,this.blendModes=fS(r),this.set(this.defaultState),this.reset()}set(r){if(r=r||this.defaultState,this.stateId!==r.data){let t=this.stateId^r.data,e=0;for(;t;)t&1&&this.map[e].call(this,!!(r.data&1<<e)),t=t>>1,e++;this.stateId=r.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,r)}forceState(r){r=r||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(r.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,r);this.stateId=r.data}setBlend(r){this.updateCheck(Yc.checkBlendMode,r),this.gl[r?"enable":"disable"](this.gl.BLEND)}setOffset(r){this.updateCheck(Yc.checkPolygonOffset,r),this.gl[r?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(r){this.gl[r?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(r){this.gl.depthMask(r)}setCullFace(r){this.gl[r?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(r){this.gl.frontFace(this.gl[r?"CW":"CCW"])}setBlendMode(r){if(r===this.blendMode)return;this.blendMode=r;const t=this.blendModes[r],e=this.gl;t.length===2?e.blendFunc(t[0],t[1]):e.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,e.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD))}setPolygonOffset(r,t){this.gl.polygonOffset(r,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(r,t){const e=this.checks.indexOf(r);t&&e===-1?this.checks.push(r):!t&&e!==-1&&this.checks.splice(e,1)}static checkBlendMode(r,t){r.setBlendMode(t.blendMode)}static checkPolygonOffset(r,t){r.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let Am=Yc;Am.extension={type:st.RendererSystem,name:"state"};xt.add(Am);class vS extends en{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(n=>t.systems[n]),i=[...e,...Object.keys(t.systems).filter(n=>!e.includes(n))];for(const n of i)this.addSystem(t.systems[n],n)}addRunners(...t){t.forEach(e=>{this.runners[e]=new rr(e)})}addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const n in this.runners)this.runners[n].add(i);return this}emitWithCustomOptions(t,e){const i=Object.keys(this._systemsHash);t.items.forEach(n=>{const s=i.find(o=>this._systemsHash[o]===n);n[t.name](e[s])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const Ul=class{constructor(r){this.renderer=r,this.count=0,this.checkCount=0,this.maxIdle=Ul.defaultMaxIdle,this.checkCountMax=Ul.defaultCheckCountMax,this.mode=Ul.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==_d.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const r=this.renderer.texture,t=r.managedTextures;let e=!1;for(let i=0;i<t.length;i++){const n=t[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(r.destroyTexture(n,!0),t[i]=null,e=!0)}if(e){let i=0;for(let n=0;n<t.length;n++)t[n]!==null&&(t[i++]=t[n]);t.length=i}}unload(r){const t=this.renderer.texture,e=r._texture;e&&!e.framebuffer&&t.destroyTexture(e);for(let i=r.children.length-1;i>=0;i--)this.unload(r.children[i])}destroy(){this.renderer=null}};let Je=Ul;Je.defaultMode=_d.AUTO;Je.defaultMaxIdle=60*60;Je.defaultCheckCountMax=60*10;Je.extension={type:st.RendererSystem,name:"textureGC"};xt.add(Je);class Wh{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=mt.UNSIGNED_BYTE,this.internalFormat=nt.RGBA,this.samplerType=0}}function ES(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[mt.UNSIGNED_BYTE]:{[nt.RGBA]:r.RGBA8,[nt.RGB]:r.RGB8,[nt.RG]:r.RG8,[nt.RED]:r.R8,[nt.RGBA_INTEGER]:r.RGBA8UI,[nt.RGB_INTEGER]:r.RGB8UI,[nt.RG_INTEGER]:r.RG8UI,[nt.RED_INTEGER]:r.R8UI,[nt.ALPHA]:r.ALPHA,[nt.LUMINANCE]:r.LUMINANCE,[nt.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[mt.BYTE]:{[nt.RGBA]:r.RGBA8_SNORM,[nt.RGB]:r.RGB8_SNORM,[nt.RG]:r.RG8_SNORM,[nt.RED]:r.R8_SNORM,[nt.RGBA_INTEGER]:r.RGBA8I,[nt.RGB_INTEGER]:r.RGB8I,[nt.RG_INTEGER]:r.RG8I,[nt.RED_INTEGER]:r.R8I},[mt.UNSIGNED_SHORT]:{[nt.RGBA_INTEGER]:r.RGBA16UI,[nt.RGB_INTEGER]:r.RGB16UI,[nt.RG_INTEGER]:r.RG16UI,[nt.RED_INTEGER]:r.R16UI,[nt.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[mt.SHORT]:{[nt.RGBA_INTEGER]:r.RGBA16I,[nt.RGB_INTEGER]:r.RGB16I,[nt.RG_INTEGER]:r.RG16I,[nt.RED_INTEGER]:r.R16I},[mt.UNSIGNED_INT]:{[nt.RGBA_INTEGER]:r.RGBA32UI,[nt.RGB_INTEGER]:r.RGB32UI,[nt.RG_INTEGER]:r.RG32UI,[nt.RED_INTEGER]:r.R32UI,[nt.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[mt.INT]:{[nt.RGBA_INTEGER]:r.RGBA32I,[nt.RGB_INTEGER]:r.RGB32I,[nt.RG_INTEGER]:r.RG32I,[nt.RED_INTEGER]:r.R32I},[mt.FLOAT]:{[nt.RGBA]:r.RGBA32F,[nt.RGB]:r.RGB32F,[nt.RG]:r.RG32F,[nt.RED]:r.R32F,[nt.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[mt.HALF_FLOAT]:{[nt.RGBA]:r.RGBA16F,[nt.RGB]:r.RGB16F,[nt.RG]:r.RG16F,[nt.RED]:r.R16F},[mt.UNSIGNED_SHORT_5_6_5]:{[nt.RGB]:r.RGB565},[mt.UNSIGNED_SHORT_4_4_4_4]:{[nt.RGBA]:r.RGBA4},[mt.UNSIGNED_SHORT_5_5_5_1]:{[nt.RGBA]:r.RGB5_A1},[mt.UNSIGNED_INT_2_10_10_10_REV]:{[nt.RGBA]:r.RGB10_A2,[nt.RGBA_INTEGER]:r.RGB10_A2UI},[mt.UNSIGNED_INT_10F_11F_11F_REV]:{[nt.RGB]:r.R11F_G11F_B10F},[mt.UNSIGNED_INT_5_9_9_9_REV]:{[nt.RGB]:r.RGB9_E5},[mt.UNSIGNED_INT_24_8]:{[nt.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[mt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[nt.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:t={[mt.UNSIGNED_BYTE]:{[nt.RGBA]:r.RGBA,[nt.RGB]:r.RGB,[nt.ALPHA]:r.ALPHA,[nt.LUMINANCE]:r.LUMINANCE,[nt.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[mt.UNSIGNED_SHORT_5_6_5]:{[nt.RGB]:r.RGB},[mt.UNSIGNED_SHORT_4_4_4_4]:{[nt.RGBA]:r.RGBA},[mt.UNSIGNED_SHORT_5_5_5_1]:{[nt.RGBA]:r.RGBA}},t}class Sm{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new At,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=ES(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};const i=new Wh(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Wh(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(t,e=0){const{gl:i}=this;if(t=t==null?void 0:t.castToBaseTexture(),t!=null&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<i.length;n++)i[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[n]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:i,CONTEXT_UID:n}=this;if(i)for(let s=t-1;s>=0;--s){const o=e[s];o&&o._glTextures[n].samplerType!==Ic.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const e=new Wh(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var i;e.internalFormat=((i=this.internalFormats[t.type])==null?void 0:i[t.format])??t.format,this.webGLVersion===2&&t.type===mt.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var n;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const i=this.renderer;if(this.initTextureType(t,e),(n=t.resource)!=null&&n.upload(i,t,e))e.samplerType!==Ic.FLOAT&&(this.hasIntegerTextures=!0);else{const s=t.realWidth,o=t.realHeight,a=i.gl;(e.width!==s||e.height!==o||e.dirtyId<0)&&(e.width=s,e.height=o,a.texImage2D(t.target,0,e.internalFormat,s,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:i}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const n=this.managedTextures.indexOf(t);n!==-1&&ls(this.managedTextures,n,1)}}updateTextureStyle(t){var i;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Sr.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=Ei.CLAMP:e.wrapMode=t.wrapMode,(i=t.resource)!=null&&i.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const i=this.gl;if(e.mipmap&&t.mipmap!==Sr.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===yr.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===yr.LINEAR){const s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===yr.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===yr.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}Sm.extension={type:st.RendererSystem,name:"texture"};xt.add(Sm);class bm{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glTransformFeedbacks[i]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:i,renderer:n}=this;e&&n.shader.bind(e),i.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:i,CONTEXT_UID:n}=this,s=e.createTransformFeedback();t._glTransformFeedbacks[n]=s,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,s);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(i.buffer.update(a),a._glBuffers[n].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[n].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),s}disposeTransformFeedback(t,e){const i=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!e&&s.dispose(a,e))}i&&(e||n.deleteTransformFeedback(i),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}bm.extension={type:st.RendererSystem,name:"transformFeedback"};xt.add(bm);class Cm{constructor(t){this.renderer=t}init(t){this.screen=new Nt(0,0,t.width,t.height),this.element=t.view||ot.ADAPTER.createCanvas(),this.resolution=t.resolution||ot.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const i=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=i,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",i,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Cm.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"_view"};xt.add(Cm);ot.PREFER_ENV=Tn.WEBGL2;ot.STRICT_TEXTURE_CACHE=!1;Object.defineProperties(ot,{WRAP_MODE:{get(){return At.defaultOptions.wrapMode},set(r){Pt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),At.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return At.defaultOptions.scaleMode},set(r){Pt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),At.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return At.defaultOptions.mipmap},set(r){Pt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),At.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return At.defaultOptions.anisotropicLevel},set(r){Pt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),At.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return Pt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),ae.defaultResolution},set(r){ae.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return Pt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),ae.defaultMultisample},set(r){ae.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return Qe.defaultMaxTextures},set(r){Pt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Qe.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return Qe.defaultBatchSize},set(r){Pt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Qe.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return Qe.canUploadSameBuffer},set(r){Pt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Qe.canUploadSameBuffer=r}},GC_MODE:{get(){return Je.defaultMode},set(r){Pt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Je.defaultMode=r}},GC_MAX_IDLE:{get(){return Je.defaultMaxIdle},set(r){Pt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Je.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return Je.defaultCheckCountMax},set(r){Pt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Je.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return tr.defaultVertexPrecision},set(r){Pt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),tr.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return tr.defaultFragmentPrecision},set(r){Pt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),tr.defaultFragmentPrecision=r}}});var on=(r=>(r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(on||{});class Yh{constructor(t,e=null,i=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Re=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Yh(null,null,1/0),this.deltaMS=1/Re.targetFPMS,this.elapsedMS=1/Re.targetFPMS,this._tick=r=>{this._requestId=null,this.started&&(this.update(r),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(r,t,e=on.NORMAL){return this._addListener(new Yh(r,t,e))}addOnce(r,t,e=on.NORMAL){return this._addListener(new Yh(r,t,e,!0))}_addListener(r){let t=this._head.next,e=this._head;if(!t)r.connect(e);else{for(;t;){if(r.priority>t.priority){r.connect(e);break}e=t,t=t.next}r.previous||r.connect(e)}return this._startIfPossible(),this}remove(r,t){let e=this._head.next;for(;e;)e.match(r,t)?e=e.destroy():e=e.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let r=0,t=this._head;for(;t=t.next;)r++;return r}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let r=this._head.next;for(;r;)r=r.destroy(!0);this._head.destroy(),this._head=null}}update(r=performance.now()){let t;if(r>this.lastTime){if(t=this.elapsedMS=r-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const n=r-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=r-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Re.targetFPMS;const e=this._head;let i=e.next;for(;i;)i=i.emit(this.deltaTime);e.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=r}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(r){const t=Math.min(this.maxFPS,r),e=Math.min(Math.max(0,t)/1e3,Re.targetFPMS);this._maxElapsedMS=1/e}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(r){if(r===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,r);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Re._shared){const r=Re._shared=new Re;r.autoStart=!0,r._protected=!0}return Re._shared}static get system(){if(!Re._system){const r=Re._system=new Re;r.autoStart=!0,r._protected=!0}return Re._system}};let Se=Re;Se.targetFPMS=.06;Object.defineProperties(ot,{TARGET_FPMS:{get(){return Se.targetFPMS},set(r){Pt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Se.targetFPMS=r}}});class wm{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,on.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Se.shared:new Se,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}wm.extension=st.Application;xt.add(wm);const Nm=[];xt.handleByList(st.Renderer,Nm);function TS(r){for(const t of Nm)if(t.test(r))return new t(r);throw new Error("Unable to auto-detect a suitable renderer.")}var AS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,SS=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const bS=AS,Rm=SS;class Im{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{const i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}e>=Ht.HIGH?this.multisample=Ht.HIGH:e>=Ht.MEDIUM?this.multisample=Ht.MEDIUM:e>=Ht.LOW?this.multisample=Ht.LOW:this.multisample=Ht.NONE}destroy(){}}Im.extension={type:st.RendererSystem,name:"_multisample"};xt.add(Im);class CS{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Pm{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:i,CONTEXT_UID:n}=this;if(this.boundBufferBases[e]!==t){const s=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,s.buffer)}}bindBufferRange(t,e,i){const{gl:n,CONTEXT_UID:s}=this;i=i||0;const o=t._glBuffers[s]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)}update(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glBuffers[i]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,e.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const s=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,s)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:i}=this;return t._glBuffers[e]=new CS(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}Pm.extension={type:st.RendererSystem,name:"buffer"};xt.add(Pm);class Dm{constructor(t){this.renderer=t}render(t,e){const i=this.renderer;let n,s,o,a;if(e&&(n=e.renderTexture,s=e.clear,o=e.transform,a=e.skipUpdateTransform),this.renderingToScreen=!n,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(n||(this.lastObjectRendered=t),!a){const l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}i.renderTexture.bind(n),i.batch.currentRenderer.start(),(s??i.background.clearBeforeRender)&&i.renderTexture.clear(),t.render(i),i.batch.currentRenderer.flush(),n&&(e.blit&&i.framebuffer.blit(),n.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Dm.extension={type:st.RendererSystem,name:"objectRenderer"};xt.add(Dm);const qc=class extends vS{constructor(r){super(),this.type=ax.WEBGL,r=Object.assign({},ot.RENDER_OPTIONS,r),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new ir({projectionMatrix:new Bt},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:qc.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in r&&(Pt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),r.premultipliedAlpha=r.useContextAlpha&&r.useContextAlpha!=="notMultiplied",r.backgroundAlpha=r.useContextAlpha===!1?1:r.backgroundAlpha);const e={hello:r.hello,_plugin:qc.__plugins,background:{alpha:r.backgroundAlpha,color:r.background??r.backgroundColor,clearBeforeRender:r.clearBeforeRender},_view:{height:r.height,width:r.width,autoDensity:r.autoDensity,resolution:r.resolution,view:r.view},context:{antialias:r.antialias,context:r.context,powerPreference:r.powerPreference,premultipliedAlpha:r.premultipliedAlpha,preserveDrawingBuffer:r.preserveDrawingBuffer}};this.options=r,this.startup.run(e)}static test(r){return r!=null&&r.forceCanvas?!1:E1()}render(r,t){this.objectRenderer.render(r,t)}resize(r,t){this._view.resizeView(r,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(r=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:r}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(r){this._view.resolution=r,this.runners.resolutionChange.emit(r)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Pt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Pt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Pt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Pt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(r){Pt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=r}get backgroundAlpha(){return Pt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.color}set backgroundAlpha(r){Pt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=r}get powerPreference(){return Pt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(r,t){return this.textureGenerator.generateTexture(r,t)}};let bs=qc;bs.extension={type:st.Renderer,priority:1};bs.__plugins={};bs.__systems={};xt.handleByMap(st.RendererPlugin,bs.__plugins);xt.handleByMap(st.RendererSystem,bs.__systems);xt.add(bs);class Om extends ua{constructor(t,e){const{width:i,height:n}=e||{};super(i,n),this.items=[],this.itemDirtyIds=[];for(let s=0;s<t;s++){const o=new At;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof ua?this.addResourceAt(t[i],i):this.addResourceAt(Xx(t[i],e),i))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const e=this.items.map(i=>i.resource).filter(i=>i).map(i=>i.load());return this._load=Promise.all(e).then(()=>{const{realWidth:i,realHeight:n}=this.items[0];return this.resize(i,n),Promise.resolve(this)}),this._load}}class wS extends Om{constructor(t,e){const{width:i,height:n}=e||{};let s,o;Array.isArray(t)?(s=t,o=t.length):o=t,super(o,{width:i,height:n}),s&&this.initFromArray(s,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=is.TEXTURE_2D_ARRAY}upload(t,e,i){const{length:n,itemDirtyIds:s,items:o}=this,{gl:a}=t;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,n,0,e.format,i.type,null);for(let l=0;l<n;l++){const u=o[l];s[l]<u.dirtyId&&(s[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,e.format,i.type,u.resource.source))}return!0}}class NS extends bi{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const Yo=class extends Om{constructor(r,t){const{width:e,height:i,autoLoad:n,linkBaseTexture:s}=t||{};if(r&&r.length!==Yo.SIDES)throw new Error(`Invalid length. Got ${r.length}, expected 6`);super(6,{width:e,height:i});for(let o=0;o<Yo.SIDES;o++)this.items[o].target=is.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=s!==!1,r&&this.initFromArray(r,t),n!==!1&&this.load()}bind(r){super.bind(r),r.target=is.TEXTURE_CUBE_MAP}addBaseTextureAt(r,t,e){if(e===void 0&&(e=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=is.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.parentTextureArray=this.baseTexture,this.items[t]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[t]=r,this}upload(r,t,e){const i=this.itemDirtyIds;for(let n=0;n<Yo.SIDES;n++){const s=this.items[n];(i[n]<s.dirtyId||e.dirtyId<t.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(r,s,e),i[n]=s.dirtyId):i[n]<-1&&(r.gl.texImage2D(s.target,0,e.internalFormat,t.realWidth,t.realHeight,0,t.format,e.type,null),i[n]=-1))}return!0}static test(r){return Array.isArray(r)&&r.length===Yo.SIDES}};let Fm=Yo;Fm.SIDES=6;class Qn extends bi{constructor(t,e){e=e||{};let i,n;typeof t=="string"?(i=Qn.EMPTY,n=t):(i=t,n=null),super(i),this.url=n,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const i=await ot.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await i.blob();if(this.destroyed)return;const s=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===sr.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=s,this.update(),t(this)}catch(i){if(this.destroyed)return;e(i),this.onError.emit(i)}}),this._load)}upload(t,e,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,i)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return Qn._EMPTY=Qn._EMPTY??ot.ADAPTER.createCanvas(0,0),Qn._EMPTY}}const Hl=class extends bi{constructor(r,t){t=t||{},super(ot.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=r,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(r=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),r(this)},Hl.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const r=new Image;bi.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=t=>{this._resolve&&(r.onerror=null,this.onError.emit(t))},r.onload=()=>{if(!this._resolve)return;const t=r.width,e=r.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=t*this.scale,n=e*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/e*t,n=this._overrideHeight||this._overrideWidth/t*e),i=Math.round(i),n=Math.round(n);const s=this.source;s.width=i,s.height=n,s._pixiId=`canvas_${sn()}`,s.getContext("2d").drawImage(r,0,0,t,e,0,0,i,n),this._resolve(),this._resolve=null}}static getSize(r){const t=Hl.SVG_SIZE.exec(r),e={};return t&&(e[t[1]]=Math.round(parseFloat(t[3])),e[t[5]]=Math.round(parseFloat(t[7]))),e}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(r,t){return t==="svg"||typeof r=="string"&&r.startsWith("data:image/svg+xml")||typeof r=="string"&&Hl.SVG_XML.test(r)}};let ha=Hl;ha.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;ha.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const Kc=class extends bi{constructor(r,t){if(t=t||{},!(r instanceof HTMLVideoElement)){const e=document.createElement("video");e.setAttribute("preload","auto"),e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);const i=r[0].src||r[0];bi.crossOrigin(e,i,t.crossorigin);for(let n=0;n<r.length;++n){const s=document.createElement("source");let{src:o,mime:a}=r[n];o=o||r[n];const l=o.split("?").shift().toLowerCase(),u=l.slice(l.lastIndexOf(".")+1);a=a||Kc.MIME_TYPES[u]||`video/${u}`,s.src=o,s.type=a,e.appendChild(s)}r=e}super(r),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(r=0){if(!this.destroyed){const t=Se.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,r.load())}),this._load}_onError(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)}_isSourcePlaying(){const r=this.source;return!r.paused&&!r.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Se.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Se.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(r.videoWidth,r.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()}dispose(){this._isConnectedToTicker&&(Se.shared.remove(this.update,this),this._isConnectedToTicker=!1);const r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(Se.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Se.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(r){r!==this._updateFPS&&(this._updateFPS=r)}static test(r,t){return globalThis.HTMLVideoElement&&r instanceof HTMLVideoElement||Kc.TYPES.includes(t)}};let Bd=Kc;Bd.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];Bd.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};Gc.push(Qn,nm,NS,Bd,ha,Ta,Fm,wS);class eu{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Nt.EMPTY:(t=t||new Nt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:i,b:n,c:s,d:o,tx:a,ty:l}=t,u=i*e.x+s*e.y+a,h=n*e.x+o*e.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(t){let e=this.minX,i=this.minY,n=this.maxX,s=this.maxY,o=t[0],a=t[1];e=o<e?o:e,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=t[2],a=t[3],e=o<e?o:e,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=t[4],a=t[5],e=o<e?o:e,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=t[6],a=t[7],e=o<e?o:e,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,this.minX=e,this.minY=i,this.maxX=n,this.maxY=s}addFrame(t,e,i,n,s){this.addFrameMatrix(t.worldTransform,e,i,n,s)}addFrameMatrix(t,e,i,n,s){const o=t.a,a=t.b,l=t.c,u=t.d,h=t.tx,c=t.ty;let d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,x=o*e+l*i+h,g=a*e+u*i+c;d=x<d?x:d,f=g<f?g:f,p=x>p?x:p,_=g>_?g:_,x=o*n+l*i+h,g=a*n+u*i+c,d=x<d?x:d,f=g<f?g:f,p=x>p?x:p,_=g>_?g:_,x=o*e+l*s+h,g=a*e+u*s+c,d=x<d?x:d,f=g<f?g:f,p=x>p?x:p,_=g>_?g:_,x=o*n+l*s+h,g=a*n+u*s+c,d=x<d?x:d,f=g<f?g:f,p=x>p?x:p,_=g>_?g:_,this.minX=d,this.minY=f,this.maxX=p,this.maxY=_}addVertexData(t,e,i){let n=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=e;l<i;l+=2){const u=t[l],h=t[l+1];n=u<n?u:n,s=h<s?h:s,o=u>o?u:o,a=h>a?h:a}this.minX=n,this.minY=s,this.maxX=o,this.maxY=a}addVertices(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)}addVerticesMatrix(t,e,i,n,s=0,o=s){const a=t.a,l=t.b,u=t.c,h=t.d,c=t.tx,d=t.ty;let f=this.minX,p=this.minY,_=this.maxX,x=this.maxY;for(let g=i;g<n;g+=2){const v=e[g],m=e[g+1],y=a*v+u*m+c,S=h*m+l*v+d;f=Math.min(f,y-s),_=Math.max(_,y+s),p=Math.min(p,S-o),x=Math.max(x,S+o)}this.minX=f,this.minY=p,this.maxX=_,this.maxY=x}addBounds(t){const e=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s}addBoundsMask(t,e){const i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=s&&n<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=s&&n<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,i,n,s,o){t-=s,e-=o,i+=s,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n}}class Ut extends en{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Ld,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new eu,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let i=0;i<e.length;++i){const n=e[i];Object.defineProperty(Ut.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Nt),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Nt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new eu);const e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-s,o}toGlobal(t,e,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,i=1,n=1,s=0,o=0,a=0,l=0,u=0){return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new RS),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*bA}set angle(t){this.transform.rotation=t*CA}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class RS extends Ut{constructor(){super(...arguments),this.sortDirty=null}}Ut.prototype.displayObjectUpdateTransform=Ut.prototype.updateTransform;const IS=new Bt;function PS(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}const Zc=class extends Ut{constructor(){super(),this.children=[],this.sortableChildren=Zc.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(r){}addChild(...r){if(r.length>1)for(let t=0;t<r.length;t++)this.addChild(r[t]);else{const t=r[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return r[0]}addChildAt(r,t){if(t<0||t>this.children.length)throw new Error(`${r}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(t,0,r),this._boundsID++,this.onChildrenChange(t),r.emit("added",this),this.emit("childAdded",r,this,t),r}swapChildren(r,t){if(r===t)return;const e=this.getChildIndex(r),i=this.getChildIndex(t);this.children[e]=t,this.children[i]=r,this.onChildrenChange(e<i?e:i)}getChildIndex(r){const t=this.children.indexOf(r);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(r,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const e=this.getChildIndex(r);ls(this.children,e,1),this.children.splice(t,0,r),this.onChildrenChange(t)}getChildAt(r){if(r<0||r>=this.children.length)throw new Error(`getChildAt: Index (${r}) does not exist.`);return this.children[r]}removeChild(...r){if(r.length>1)for(let t=0;t<r.length;t++)this.removeChild(r[t]);else{const t=r[0],e=this.children.indexOf(t);if(e===-1)return null;t.parent=null,t.transform._parentID=-1,ls(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e)}return r[0]}removeChildAt(r){const t=this.getChildAt(r);return t.parent=null,t.transform._parentID=-1,ls(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r),t}removeChildren(r=0,t=this.children.length){const e=r,i=t,n=i-e;let s;if(n>0&&n<=i){s=this.children.splice(e,n);for(let o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(let o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}else if(n===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let r=!1;for(let t=0,e=this.children.length;t<e;++t){const i=this.children[t];i._lastSortedIndex=t,!r&&i.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(PS),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let r=0,t=this.children.length;r<t;++r){const e=this.children[r];e.visible&&e.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let r=0;r<this.children.length;r++){const t=this.children[r];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const e=t._mask.isMaskData?t._mask.maskObject:t._mask;e?(e.calculateBounds(),this._bounds.addBoundsMask(t._bounds,e._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(r,t=!1){const e=super.getLocalBounds(r);if(!t)for(let i=0,n=this.children.length;i<n;++i){const s=this.children[i];s.visible&&s.updateTransform()}return e}_calculateBounds(){}_renderWithCulling(r){const t=r.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let e,i;this.cullArea?(e=this.cullArea,i=this.worldTransform):this._render!==Zc.prototype._render&&(e=this.getBounds(!0));const n=r.projection.transform;if(n&&(i?(i=IS.copyFrom(i),i.prepend(n)):i=n),e&&t.intersects(e,i))this._render(r);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const a=this.children[s],l=a.cullable;a.cullable=l||!this.cullArea,a.render(r),a.cullable=l}}render(r){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(let e=0,i=this.children.length;e<i;++e)this.children[e].render(r)}}renderAdvanced(r){var n,s,o;const t=this.filters,e=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<t.length;a++)t[a].enabled&&this._enabledFilters.push(t[a])}const i=t&&((n=this._enabledFilters)==null?void 0:n.length)||e&&(!e.isMaskData||e.enabled&&(e.autoDetect||e.type!==Kt.NONE));if(i&&r.batch.flush(),t&&((s=this._enabledFilters)!=null&&s.length)&&r.filter.push(this,this._enabledFilters),e&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(let a=0,l=this.children.length;a<l;++a)this.children[a].render(r)}i&&r.batch.flush(),e&&r.mask.pop(this),t&&((o=this._enabledFilters)!=null&&o.length)&&r.filter.pop()}_render(r){}destroy(r){super.destroy(),this.sortDirty=!1;const t=typeof r=="boolean"?r:r==null?void 0:r.children,e=this.removeChildren(0,this.children.length);if(t)for(let i=0;i<e.length;++i)e[i].destroy(r)}get width(){return this.scale.x*this.getLocalBounds().width}set width(r){const t=this.getLocalBounds().width;t!==0?this.scale.x=r/t:this.scale.x=1,this._width=r}get height(){return this.scale.y*this.getLocalBounds().height}set height(r){const t=this.getLocalBounds().height;t!==0?this.scale.y=r/t:this.scale.y=1,this._height=r}};let ze=Zc;ze.defaultSortableChildren=!1;ze.prototype.containerUpdateTransform=ze.prototype.updateTransform;Object.defineProperties(ot,{SORTABLE_CHILDREN:{get(){return ze.defaultSortableChildren},set(r){Pt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),ze.defaultSortableChildren=r}}});const Ws=new Rt,DS=new Uint16Array([0,1,2,0,2,3]);class Cs extends ze{constructor(t){super(),this._anchor=new yi(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=Et.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||pt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=DS,this.pluginName="batch",this.isSprite=!0,this._roundPixels=ot.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Zn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Zn(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,i=e.a,n=e.b,s=e.c,o=e.d,a=e.tx,l=e.ty,u=this.vertexData,h=t.trim,c=t.orig,d=this._anchor;let f=0,p=0,_=0,x=0;if(h?(p=h.x-d._x*c.width,f=p+h.width,x=h.y-d._y*c.height,_=x+h.height):(p=-d._x*c.width,f=p+c.width,x=-d._y*c.height,_=x+c.height),u[0]=i*p+s*x+a,u[1]=o*x+n*p+l,u[2]=i*f+s*x+a,u[3]=o*x+n*f+l,u[4]=i*f+s*_+a,u[5]=o*_+n*f+l,u[6]=i*p+s*_+a,u[7]=o*_+n*p+l,this._roundPixels){const g=ot.RESOLUTION;for(let v=0;v<u.length;++v)u[v]=Math.round(u[v]*g)/g}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,u=s.d,h=s.tx,c=s.ty,d=-n._x*i.width,f=d+i.width,p=-n._y*i.height,_=p+i.height;e[0]=o*d+l*p+h,e[1]=u*p+a*d+c,e[2]=o*f+l*p+h,e[3]=u*p+a*f+c,e[4]=o*f+l*_+h,e[5]=u*_+a*f+c,e[6]=o*d+l*_+h,e[7]=u*_+a*d+c}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new eu),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Nt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Ws);const e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x;let s=0;return Ws.x>=n&&Ws.x<n+e&&(s=-i*this.anchor.y,Ws.y>=s&&Ws.y<s+i)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!i)}this._texture=null}static from(t,e){const i=t instanceof pt?t:pt.from(t,e);return new Cs(i)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=Zn(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=Zn(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tint}set tint(t){this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16)}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||pt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Lm=new Bt;Ut.prototype._cacheAsBitmap=!1;Ut.prototype._cacheData=null;Ut.prototype._cacheAsBitmapResolution=null;Ut.prototype._cacheAsBitmapMultisample=null;class OS{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Ut.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let t;r?(this._cacheData||(this._cacheData=new OS),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});Ut.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};Ut.prototype._initCachedDisplayObject=function(t){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const i=this.getLocalBounds(null,!0).clone();if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;i.pad(p)}i.ceil(ot.RESOLUTION);const n=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=Ci.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),u=`cacheAsBitmap_${sn()}`;this._cacheData.textureCacheId=u,At.addToCache(l.baseTexture,u),pt.addToCache(l,u);const h=this.transform.localTransform.copyTo(Lm).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:h,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(n,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const c=new Cs(l);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(i.x/i.width),c.anchor.y=-(i.y/i.height),c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)};Ut.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Ut.prototype._initCachedDisplayObjectCanvas=function(t){var h;if((h=this._cacheData)!=null&&h.sprite)return;const e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,s=t._projTransform;e.ceil(ot.RESOLUTION);const o=Ci.create({width:e.width,height:e.height}),a=`cacheAsBitmap_${sn()}`;this._cacheData.textureCacheId=a,At.addToCache(o.baseTexture,a),pt.addToCache(o,a);const l=Lm;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const u=new Cs(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=i,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};Ut.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Ut.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Ut.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,At.removeFromCache(this._cacheData.textureCacheId),pt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Ut.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};Ut.prototype.name=null;ze.prototype.getChildByName=function(t,e){for(let i=0,n=this.children.length;i<n;i++)if(this.children[i].name===t)return this.children[i];if(e)for(let i=0,n=this.children.length;i<n;i++){const s=this.children[i];if(!s.getChildByName)continue;const o=s.getChildByName(t,!0);if(o)return o}return null};Ut.prototype.getGlobalPosition=function(t=new Rt,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var FS=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class LS extends ae{constructor(t=1){super(bS,FS,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const BS={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},MS=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function kS(r){const t=BS[r],e=t.length;let i=MS,n="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<r;a++){let l=s.replace("%index%",a.toString());o=a,a>=e&&(o=r-a-1),l=l.replace("%value%",t[o].toString()),n+=l,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}const US=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function HS(r,t){const e=Math.ceil(r/2);let i=US,n="",s;t?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<r;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(e-1)}.0`),n+=a,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}class Qc extends ae{constructor(t,e=8,i=4,n=ae.defaultResolution,s=5){const o=HS(s,t),a=kS(s);super(o,a),this.horizontal=t,this.resolution=n,this._quality=0,this.quality=i,this.blur=e}apply(t,e,i,n){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,i,n);else{const s=t.getFilterTexture(),o=t.renderer;let a=e,l=s;this.state.blend=!1,t.applyFilter(this,a,l,mr.CLEAR);for(let u=1;u<this.passes-1;u++){t.bindAndClear(a,mr.BLIT),this.uniforms.uSampler=l;const h=l;l=a,a=h,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,i,n),t.returnFilterTexture(s)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class jS extends ae{constructor(t=8,e=4,i=ae.defaultResolution,n=5){super(),this.blurXFilter=new Qc(!0,t,e,i,n),this.blurYFilter=new Qc(!1,t,e,i,n),this.resolution=i,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,i,n){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,mr.CLEAR),this.blurYFilter.apply(t,a,i,n),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,e,i,n):this.blurXFilter.apply(t,e,i,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var $S=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Jc extends ae{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Rm,$S,t),this.alpha=1}_loadMatrix(t,e=!1){let i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}tint(t,e){const i=t>>16&255,n=t>>8&255,s=t&255,o=[i/255,0,0,0,0,0,n/255,0,0,0,0,0,s/255,0,0,0,0,0,1,0];this._loadMatrix(o,e)}greyscale(t,e){const i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const i=Math.cos(t),n=Math.sin(t),s=Math.sqrt,o=1/3,a=s(o),l=i+(1-i)*o,u=o*(1-i)-a*n,h=o*(1-i)+a*n,c=o*(1-i)+a*n,d=i+o*(1-i),f=o*(1-i)-a*n,p=o*(1-i)-a*n,_=o*(1-i)+a*n,x=i+o*(1-i),g=[l,u,h,0,0,c,d,f,0,0,p,_,x,0,0,0,0,0,1,0];this._loadMatrix(g,e)}contrast(t,e){const i=(t||0)+1,n=-.5*(i-1),s=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(s,e)}saturate(t=0,e){const i=t*2/3+1,n=(i-1)*-.5,s=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(s,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,i,n,s){t=t||.2,e=e||.15,i=i||16770432,n=n||3375104;const o=(i>>16&255)/255,a=(i>>8&255)/255,l=(i&255)/255,u=(n>>16&255)/255,h=(n>>8&255)/255,c=(n&255)/255,d=[.3,.59,.11,0,0,o,a,l,t,0,u,h,c,e,0,o-u,a-h,l-c,0,0];this._loadMatrix(d,s)}night(t,e){t=t||.1;const i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,e)}predator(t,e){const i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}Jc.prototype.grayscale=Jc.prototype.greyscale;var GS=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,zS=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class VS extends ae{constructor(t,e){const i=new Bt;t.renderable=!1,super(zS,GS,{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=i,e==null&&(e=20),this.scale=new Rt(e,e)}apply(t,e,i,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),t.applyFilter(this,e,i,n)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var XS=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,WS=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class YS extends ae{constructor(){super(WS,XS)}}var qS=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class KS extends ae{constructor(t=.5,e=Math.random()){super(Rm,qS,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const lp={AlphaFilter:LS,BlurFilter:jS,BlurFilterPass:Qc,ColorMatrixFilter:Jc,DisplacementFilter:VS,FXAAFilter:YS,NoiseFilter:KS};Object.entries(lp).forEach(([r,t])=>{Object.defineProperty(lp,r,{get(){return Pt("7.1.0",`filters.${r} has moved to ${r}`),t}})});class Aa{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Aa.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Rt,this.page=new Rt,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,i,n,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class ru extends Aa{constructor(){super(...arguments),this.client=new Rt,this.movement=new Rt,this.offset=new Rt,this.global=new Rt,this.screen=new Rt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,n,s,o,a,l,u,h,c,d,f,p,_){throw new Error("Method not implemented.")}}class qe extends ru{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class fs extends ru{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}fs.DOM_DELTA_PIXEL=0;fs.DOM_DELTA_LINE=1;fs.DOM_DELTA_PAGE=2;const ZS=2048,QS=new Rt,qh=new Rt;class JS{constructor(t){this.dispatch=new en,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((i,n)=>i.priority-n.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let i=0,n=e.length;i<n;i++)e[i].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){const i=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,QS.set(t,e),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(t,e){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,s=i.length-1;n<s;n++)if(t.currentTarget=i[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let n=i.length-2;n>=0;n--)if(t.currentTarget=i[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,i=this.rootTarget){t.eventPhase=t.BUBBLING_PHASE;const n=i.children;if(n)for(let s=0;s<n.length;s++)this.all(t,e,n[s]);t.currentTarget=i,this.notifyTarget(t,e)}propagationPath(t){const e=[t];for(let i=0;i<ZS&&t!==this.rootTarget;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestRecursive(t,e,i,n,s){if(!t||!t.visible||s(t,i))return null;if(t.interactiveChildren&&t.children){const o=t.children;for(let a=o.length-1;a>=0;a--){const l=o[a],u=this.hitTestRecursive(l,e||l.interactive,i,n,s);if(u){if(u.length>0&&!u[u.length-1].parent)continue;return(u.length>0||t.interactive)&&u.push(t),u}}}return e&&n(t,i)?t.interactive?[t]:[]:null}hitPruneFn(t,e){var i;if(t.hitArea&&(t.worldTransform.applyInverse(e,qh),!t.hitArea.contains(qh.x,qh.y)))return!0;if(t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;if(n&&!((i=n.containsPoint)!=null&&i.call(n,e)))return!0}return!1}hitTestFn(t,e){return t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var s,o;e=e??t.type;const i=`on${e}`;(o=(s=t.currentTarget)[i])==null||o.call(s,t);const n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof qe)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const n=e.button===2;this.dispatchEvent(e,n?"rightdown":"mousedown")}const i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var a,l;if(!(t instanceof qe)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t),i=e.pointerType==="mouse"||e.pointerType==="pen",n=this.trackingData(t.pointerId),s=this.findMountedTarget(n.overTargets);if(((a=n.overTargets)==null?void 0:a.length)>0&&s!==e.target){const u=t.type==="mousemove"?"mouseout":"pointerout",h=this.createPointerEvent(t,u,s);if(this.dispatchEvent(h,"pointerout"),i&&this.dispatchEvent(h,"mouseout"),!e.composedPath().includes(s)){const c=this.createPointerEvent(t,"pointerleave",s);for(c.eventPhase=c.AT_TARGET;c.target&&!e.composedPath().includes(c.target);)c.currentTarget=c.target,this.notifyTarget(c),i&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;this.freeEvent(c)}this.freeEvent(h)}if(s!==e.target){const u=t.type==="mousemove"?"mouseover":"pointerover",h=this.clonePointerEvent(e,u);this.dispatchEvent(h,"pointerover"),i&&this.dispatchEvent(h,"mouseover");let c=s==null?void 0:s.parent;for(;c&&c!==this.rootTarget.parent&&c!==e.target;)c=c.parent;if(!c||c===this.rootTarget.parent){const f=this.clonePointerEvent(e,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==s&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(h)}const o=this.moveOnAll?"all":"dispatchEvent";this[o](e,"pointermove"),this.all(e,"globalpointermove"),e.pointerType==="touch"&&(this[o](e,"touchmove"),this.all(e,"globaltouchmove")),i&&(this[o](e,"mousemove"),this.all(e,"globalmousemove"),this.cursor=(l=e.target)==null?void 0:l.cursor),n.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var o;if(!(t instanceof qe)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.createPointerEvent(t),n=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),n&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),n&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;e.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(t){if(!(t instanceof qe)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const i=t.pointerType==="mouse"||t.pointerType==="pen",n=this.findMountedTarget(e.overTargets),s=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(t,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;e.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof qe)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const n=this.trackingData(t.pointerId),s=this.findMountedTarget(n.pressTargetsByButton[t.button]);let o=s;if(s&&!i.composedPath().includes(s)){let a=s;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete n.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:e});const l=n.clicksByButton[t.button];if(l.target===a.target&&e-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=e,a.detail=l.clickCount,a.pointerType==="mouse"){const u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof qe)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.findMountedTarget(e.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(i){let s=i;for(;s;)n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof fs)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){const n=this.allocateEvent(qe);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=i??this.hitTest(n.global.x,n.global.y),typeof e=="string"&&(n.type=e),n}createWheelEvent(t){const e=this.allocateEvent(fs);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const i=this.allocateEvent(qe);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof qe&&e instanceof qe&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof ru&&e instanceof ru&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const i=t.currentTarget._events[e];if(i)if("fn"in i)i.once&&t.currentTarget.removeListener(e,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let n=0,s=i.length;n<s&&!t.propagationImmediatelyStopped;n++)i[n].once&&t.currentTarget.removeListener(e,i[n].fn,void 0,!0),i[n].fn.call(i[n].context,t)}}const t2=1,e2={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class Bm{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new JS(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new qe(null),this.rootWheelEvent=new fs(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:t,resolution:e}=this.renderer;this.setTargetElement(t),this.resolution=e}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.domElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.domElement.style,i);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}onPointerDown(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch")return;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let i=0,n=e.length;i<n;i++){const s=e[i],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch")return;const e=this.normalizeToPointerData(t);for(let i=0,n=e.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch")return;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const i=e!==this.domElement?"outside":"",n=this.normalizeToPointerData(t);for(let s=0,o=n.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,n[s]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch")return;const e=this.normalizeToPointerData(t);for(let i=0,n=e.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,i){let n;this.domElement.parentElement?n=this.domElement.getBoundingClientRect():n={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const s=1/this.resolution;t.x=(e-n.left)*(this.domElement.width/n.width)*s,t.y=(i-n.top)*(this.domElement.height/n.height)*s}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let i=0,n=t.changedTouches.length;i<n;i++){const s=t.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=t.type,e.push(s)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const i=t;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=t2),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=e2[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}}Bm.extension={name:"events",type:[st.RendererSystem,st.CanvasRendererSystem]};xt.add(Bm);const r2={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(r,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,n=typeof t=="function"?void 0:t;r=i?`${r}capture`:r,t=typeof t=="function"?t:t.handleEvent,this.on(r,t,n)},removeEventListener(r,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,n=typeof t=="function"?void 0:t;r=i?`${r}capture`:r,t=typeof t=="function"?t:t.handleEvent,this.off(r,t,n)},dispatchEvent(r){if(!(r instanceof Aa))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};Ut.mixin(r2);const i2={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ut.mixin(i2);const n2=9,El=100,s2=0,o2=0,up=2,hp=1,a2=-1e3,l2=-1e3,u2=2;class Mm{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Gr.tablet||Gr.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${El}px`,e.style.height=`${El}px`,e.style.position="absolute",e.style.top=`${s2}px`,e.style.left=`${o2}px`,e.style.zIndex=up.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${hp}px`,t.style.height=`${hp}px`,t.style.position="absolute",t.style.top=`${a2}px`,t.style.left=`${l2}px`,t.style.zIndex=u2.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}update(){const t=performance.now();if(Gr.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:i,width:n,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=n/o*l,h=s/a*l;let c=this.div;c.style.left=`${e}px`,c.style.top=`${i}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,ls(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{c=f._accessibleDiv;let p=f.hitArea;const _=f.worldTransform;f.hitArea?(c.style.left=`${(_.tx+p.x*_.a)*u}px`,c.style.top=`${(_.ty+p.y*_.d)*h}px`,c.style.width=`${p.width*_.a*u}px`,c.style.height=`${p.height*_.d*h}px`):(p=f.getBounds(),this.capHitArea(p),c.style.left=`${p.x*u}px`,c.style.top=`${p.y*h}px`,c.style.width=`${p.width*u}px`,c.style.height=`${p.height*h}px`,c.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(c.title=f.accessibleTitle),c.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&c.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==c.title||f.tabIndex!==c.tabIndex)&&(c.title=f.accessibleTitle,c.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:i}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>i&&(t.height=i-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${El}px`,e.style.height=`${El}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=up.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:i}=t.target,n=this.renderer.events.rootBoundary,s=Object.assign(new Aa(n),{target:i});n.rootTarget=this.renderer.lastObjectRendered,e.forEach(o=>n.dispatchEvent(s,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===n2&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Mm.extension={name:"accessibility",type:[st.RendererPlugin,st.CanvasRendererPlugin]};xt.add(Mm);const td=class{constructor(r){this.stage=new ze,r=Object.assign({forceCanvas:!1},r),this.renderer=TS(r),td._plugins.forEach(t=>{t.init.call(this,r)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(r,t){const e=td._plugins.slice(0);e.reverse(),e.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(r),this.renderer=null}};let Md=td;Md._plugins=[];xt.handleByList(st.Application,Md._plugins);class km{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,i;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:s}=this._resizeTo;e=n,i=s}this.renderer.resize(e,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}km.extension=st.Application;xt.add(km);const cp={loader:st.LoadParser,resolver:st.ResolveParser,cache:st.CacheParser,detection:st.DetectionParser};xt.handle(st.Asset,r=>{const t=r.ref;Object.entries(cp).filter(([e])=>!!t[e]).forEach(([e,i])=>xt.add(Object.assign(t[e],{extension:t[e].extension??i})))},r=>{const t=r.ref;Object.keys(cp).filter(e=>!!t[e]).forEach(e=>xt.remove(t[e]))});class h2{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Um(r,t){if(Array.isArray(t)){for(const e of t)if(r.startsWith(`data:${e}`))return!0;return!1}return r.startsWith(`data:${t}`)}function Au(r,t){const e=r.split("?")[0],i=ue.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const Yr=(r,t)=>(Array.isArray(r)||(r=[r]),t?r.map(e=>typeof e=="string"?t(e):e):r),ed=(r,t)=>{const e=t.split("?")[1];return e&&(r+=`?${e}`),r};function Hm(r,t,e,i,n){const s=t[e];for(let o=0;o<s.length;o++){const a=s[o];e<t.length-1?Hm(r.replace(i[e],a),t,e+1,i,n):n.push(r.replace(i[e],a))}}function c2(r){const t=/\{(.*?)\}/g,e=r.match(t),i=[];if(e){const n=[];e.forEach(s=>{const o=s.substring(1,s.length-1).split(",");n.push(o)}),Hm(r,n,0,e,i)}else i.push(r);return i}const iu=r=>!Array.isArray(r);class d2{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=Yr(t);let n;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(e)){n=l.getCacheableAssets(i,e);break}}n||(n={},i.forEach(a=>{n[a]=e}));const s=Object.keys(n),o={cacheKeys:s,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==e&&console.warn("[Cache] already has key:",a),this._cache.set(a,n[a])}),e instanceof pt){const a=e;i.forEach(l=>{a.baseTexture!==pt.EMPTY.baseTexture&&At.addToCache(a.baseTexture,l),pt.addToCache(a,l)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(n=>{this._cache.delete(n)}),e.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const Ys=new d2;class f2{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{var s,o;let n=null;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.load&&((s=l.test)!=null&&s.call(l,t,e,this))){n=await l.load(t,e,this),i.parser=l;break}}if(!i.parser)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has being added`),null;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];l.parse&&l.parse&&await((o=l.testParse)==null?void 0:o.call(l,n,e,this))&&(n=await l.parse(n,e,this)||n,i.parser=l)}return n})(),i}async load(t,e){let i=0;const n={},s=iu(t),o=Yr(t,u=>({src:u})),a=o.length,l=o.map(async u=>{const h=ue.toAbsolute(u.src);if(!n[u.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,u)),n[u.src]=await this.promiseCache[h].promise,e&&e(++i/a)}catch(c){throw delete this.promiseCache[h],delete n[u.src],new Error(`[Loader.load] Failed to load ${h}.
${c}`)}});return await Promise.all(l),s?n[o[0].src]:n}async unload(t){const i=Yr(t,n=>({src:n})).map(async n=>{var a,l;const s=ue.toAbsolute(n.src),o=this.promiseCache[s];if(o){const u=await o.promise;(l=(a=o.parser)==null?void 0:a.unload)==null||l.call(a,u,n,this),delete this.promiseCache[s]}});await Promise.all(i)}get parsers(){return this._parsers}}var wr=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(wr||{});const p2={extension:{type:st.LoadParser,priority:wr.Low},test(r){return ue.extname(r).toLowerCase()===".json"},async load(r){return await(await ot.ADAPTER.fetch(r)).json()}};xt.add(p2);const x2={extension:{type:st.LoadParser,priority:wr.Low},test(r){return ue.extname(r).toLowerCase()===".txt"},async load(r){return await(await ot.ADAPTER.fetch(r)).text()}};xt.add(x2);const m2=["normal","bold","100","200","300","400","500","600","700","800","900"],_2=[".ttf",".otf",".woff",".woff2"],g2=["font/ttf","font/otf","font/woff","font/woff2"];function y2(r){const t=ue.extname(r);return ue.basename(r,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")}const v2={extension:{type:st.LoadParser,priority:wr.Low},test(r){return Um(r,g2)||Au(r,_2)},async load(r,t){var i,n,s;const e=ot.ADAPTER.getFontFaceSet();if(e){const o=[],a=((i=t.data)==null?void 0:i.family)??y2(r),l=((s=(n=t.data)==null?void 0:n.weights)==null?void 0:s.filter(h=>m2.includes(h)))??["normal"],u=t.data??{};for(let h=0;h<l.length;h++){const c=l[h],d=new FontFace(a,`url(${encodeURI(r)})`,{...u,weight:c});await d.load(),e.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(t=>ot.ADAPTER.getFontFaceSet().delete(t))}};xt.add(v2);let dp=0,Kh;const E2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",T2={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${E2}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},A2={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let Zh;class S2{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const e=URL.createObjectURL(new Blob([T2.code],{type:"application/javascript"})),i=new Worker(e);i.addEventListener("message",n=>{i.terminate(),URL.revokeObjectURL(e),t(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Kh===void 0&&(Kh=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<Kh&&(Zh||(Zh=URL.createObjectURL(new Blob([A2.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(Zh),t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise((n,s)=>{this.queue.push({id:t,arguments:e,resolve:n,reject:s})});return this.next(),i}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),i=e.id;this.resolveHash[dp]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:dp++,id:i})}}const fp=new S2;function Su(r,t,e){const i=new pt(r);return i.baseTexture.on("dispose",()=>{delete t.promiseCache[e]}),i}const b2=[".jpeg",".jpg",".png",".webp",".avif"],C2=["image/jpeg","image/png","image/webp","image/avif"];async function w2(r){const t=await ot.ADAPTER.fetch(r);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const ca={extension:{type:st.LoadParser,priority:wr.High},config:{preferWorkers:!0},test(r){return Um(r,C2)||Au(r,b2)},async load(r,t,e){let i=null;globalThis.createImageBitmap?this.config.preferWorkers&&await fp.isImageBitmapSupported()?i=await fp.loadImageBitmap(r):i=await w2(r):i=await new Promise(s=>{i=new Image,i.crossOrigin="anonymous",i.src=r,i.complete?s(i):i.onload=()=>{s(i)}});const n=new At(i,{resolution:Ai(r),...t.data});return n.resource.src=r,Su(n,e,r)},unload(r){r.destroy(!0)}};xt.add(ca);const N2={extension:{type:st.LoadParser,priority:wr.High},test(r){return ue.extname(r).toLowerCase()===".svg"},async testParse(r){return ha.test(r)},async parse(r,t,e){var o,a,l;const i=new ha(r,(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions),n=new At(i,{resolution:Ai(r),...t==null?void 0:t.data});n.resource.src=r;const s=Su(n,e,r);return(l=(a=t==null?void 0:t.data)==null?void 0:a.resourceOptions)!=null&&l.autoLoad||await i.load(),s},async load(r,t){return(await ot.ADAPTER.fetch(r)).text()},unload:ca.unload};xt.add(N2);class R2{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];Array.isArray(e)?e.forEach(n=>{if(typeof n.name=="string"){const s=this._createBundleAssetId(t,n.name);i.push(s),this.add([n.name,s],n.srcs,n.data)}else{const s=n.name.map(o=>this._createBundleAssetId(t,o));s.forEach(o=>{i.push(o)}),this.add([...n.name,...s],n.srcs)}}):Object.keys(e).forEach(n=>{i.push(this._createBundleAssetId(t,n)),this.add([n,this._createBundleAssetId(t,n)],e[n])}),this._bundles[t]=i}add(t,e,i){const n=Yr(t);n.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(e)||(typeof e=="string"?e=c2(e):e=[e]);const s=e.map(o=>{let a=o;if(typeof o=="string"){let l=!1;for(let u=0;u<this._parsers.length;u++){const h=this._parsers[u];if(h.test(o)){a=h.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=n),(this._basePath||this._rootPath)&&(a.src=ue.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??i,a});n.forEach(o=>{this._assetMap[o]=s})}resolveBundle(t){const e=iu(t);t=Yr(t);const i={};return t.forEach(n=>{const s=this._bundles[n];if(s){const o=this.resolve(s),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(n,l)]=u}i[n]=a}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const n in e)i[n]=e[n].src;return i}return e.src}resolve(t){const e=iu(t);t=Yr(t);const i={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let s=this._assetMap[n];const o=this._getPreferredOrder(s),a=s[0];o==null||o.priority.forEach(l=>{o.params[l].forEach(u=>{const h=s.filter(c=>c[l]?c[l]===u:!1);h.length&&(s=h)})}),this._resolverHash[n]=s[0]??a}else{let s=n;(this._basePath||this._rootPath)&&(s=ue.toAbsolute(s,this._basePath,this._rootPath)),s=this._appendDefaultSearchParams(s),this._resolverHash[n]={src:s}}i[n]=this._resolverHash[n]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[0],n=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}}class I2{constructor(){this._detections=[],this._initialized=!1,this.resolver=new R2,this.loader=new f2,this.cache=Ys,this._backgroundLoader=new h2(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var s,o,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const e=((s=t.texturePreference)==null?void 0:s.resolution)??1,i=typeof e=="number"?[e]:e;let n=[];if((o=t.texturePreference)!=null&&o.format){const l=(a=t.texturePreference)==null?void 0:a.format;n=typeof l=="string"?[l]:l;for(const u of this._detections)await u.test()||(n=await u.remove(n))}else for(const l of this._detections)await l.test()&&(n=await l.add(n));this.resolver.prefer({params:{format:n,resolution:i}})}add(t,e,i){this.resolver.add(t,e,i)}async load(t,e){this._initialized||await this.init();const i=iu(t),n=Yr(t).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),s=this.resolver.resolve(n),o=await this._mapLoadToResolve(s,e);return i?o[n[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const n=this.resolver.resolveBundle(t),s={},o=Object.keys(n);let a=0,l=0;const u=()=>{e==null||e(++a/l)},h=o.map(c=>{const d=n[c];return l+=Object.keys(d).length,this._mapLoadToResolve(d,u).then(f=>{s[c]=f})});return await Promise.all(h),i?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Ys.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=Ys.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const s=await this.loader.load(i,e);this._backgroundLoader.active=!0;const o={};return i.forEach((a,l)=>{const u=s[a.src],h=[a.src];a.alias&&h.push(...a.alias),o[n[l]]=u,Ys.set(h,u)}),o}async unload(t){this._initialized||await this.init();const e=Yr(t).map(n=>typeof n!="string"?n.src:n),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=Yr(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(n=>this._unloadFromResolved(e[n]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(i=>{Ys.remove(i.src)}),await this.loader.unload(e)}get detections(){return this._detections}get preferWorkers(){return ca.config.preferWorkers}set preferWorkers(t){ca.config.preferWorkers=t}}const Tl=new I2;xt.handleByList(st.LoadParser,Tl.loader.parsers).handleByList(st.ResolveParser,Tl.resolver.parsers).handleByList(st.CacheParser,Tl.cache.parsers).handleByList(st.DetectionParser,Tl.detections);const P2={extension:st.CacheParser,test:r=>Array.isArray(r)&&r.every(t=>t instanceof pt),getCacheableAssets:(r,t)=>{const e={};return r.forEach(i=>{t.forEach((n,s)=>{e[i+(s===0?"":s+1)]=n})}),e}};xt.add(P2);const D2={extension:{type:st.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const r="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await ot.ADAPTER.fetch(r).then(e=>e.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async r=>[...r,"avif"],remove:async r=>r.filter(t=>t!=="avif")};xt.add(D2);const O2={extension:{type:st.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const r="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await ot.ADAPTER.fetch(r).then(e=>e.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async r=>[...r,"webp"],remove:async r=>r.filter(t=>t!=="webp")};xt.add(O2);const pp=["png","jpg","jpeg"],F2={extension:{type:st.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...pp],remove:async r=>r.filter(t=>!pp.includes(t))};xt.add(F2);const L2={extension:st.ResolveParser,test:ca.test,parse:r=>{var t;return{resolution:parseFloat(((t=ot.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:r.split(".").pop(),src:r}}};xt.add(L2);var De=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r))(De||{});const nu={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let $r,Xn;function xp(){Xn={s3tc:$r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:$r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:$r.getExtension("WEBGL_compressed_texture_etc"),etc1:$r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:$r.getExtension("WEBGL_compressed_texture_pvrtc")||$r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:$r.getExtension("WEBGL_compressed_texture_atc"),astc:$r.getExtension("WEBGL_compressed_texture_astc")}}const B2={extension:{type:st.DetectionParser,priority:2},test:async()=>{const t=ot.ADAPTER.createCanvas().getContext("webgl");return t?($r=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{Xn||xp();const t=[];for(const e in Xn)Xn[e]&&t.push(e);return[...t,...r]},remove:async r=>(Xn||xp(),r.filter(t=>!(t in Xn)))};xt.add(B2);class M2 extends Ta{constructor(t,e={width:1,height:1,autoLoad:!0}){let i,n;typeof t=="string"?(i=t,n=new Uint8Array):(i=null,n=t),super(n,e),this.origin=i,this.buffer=n?new $c(n):null,this.origin&&e.autoLoad!==!1&&this.load(),n!=null&&n.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}async load(){const i=await(await(await fetch(this.origin)).blob()).arrayBuffer();return this.data=new Uint32Array(i),this.buffer=new $c(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),this}}class tn extends M2{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=tn._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||tn._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,i){const n=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:u,levelHeight:h,levelBuffer:c}=this._levelBuffers[o];n.compressedTexImage2D(n.TEXTURE_2D,l,this.format,u,h,0,c)}return!0}onBlobLoaded(){this._levelBuffers=tn._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,e,i,n,s,o,a){const l=new Array(i);let u=t.byteOffset,h=o,c=a,d=h+n-1&~(n-1),f=c+s-1&~(s-1),p=d*f*nu[e];for(let _=0;_<i;_++)l[_]={levelID:_,levelWidth:i>1?h:d,levelHeight:i>1?c:f,levelBuffer:new Uint8Array(t.buffer,u,p)},u+=p,h=h>>1||1,c=c>>1||1,d=h+n-1&~(n-1),f=c+s-1&~(s-1),p=d*f*nu[e];return l}}const Qh=4,Al=124,k2=32,mp=20,U2=542327876,Sl={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},H2={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},bl={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},j2=1,$2=2,G2=4,z2=64,V2=512,X2=131072,W2=827611204,Y2=861165636,q2=894720068,K2=808540228,Z2=4,Q2={[W2]:De.COMPRESSED_RGBA_S3TC_DXT1_EXT,[Y2]:De.COMPRESSED_RGBA_S3TC_DXT3_EXT,[q2]:De.COMPRESSED_RGBA_S3TC_DXT5_EXT},J2={[70]:De.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:De.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:De.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:De.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:De.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:De.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:De.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:De.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:De.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function tb(r){const t=new Uint32Array(r);if(t[0]!==U2)throw new Error("Invalid DDS file magic word");const i=new Uint32Array(r,0,Al/Uint32Array.BYTES_PER_ELEMENT),n=i[Sl.HEIGHT],s=i[Sl.WIDTH],o=i[Sl.MIPMAP_COUNT],a=new Uint32Array(r,Sl.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,k2/Uint32Array.BYTES_PER_ELEMENT),l=a[j2];if(l&G2){const u=a[H2.FOURCC];if(u!==K2){const m=Q2[u],y=Qh+Al,S=new Uint8Array(r,y);return[new tn(S,{format:m,width:s,height:n,levels:o})]}const h=Qh+Al,c=new Uint32Array(t.buffer,h,mp/Uint32Array.BYTES_PER_ELEMENT),d=c[bl.DXGI_FORMAT],f=c[bl.RESOURCE_DIMENSION],p=c[bl.MISC_FLAG],_=c[bl.ARRAY_SIZE],x=J2[d];if(x===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(p===Z2)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const g=new Array,v=Qh+Al+mp;if(_===1)g.push(new Uint8Array(r,v));else{const m=nu[x];let y=0,S=s,E=n;for(let T=0;T<o;T++){const C=Math.max(1,S+3&-4),D=Math.max(1,E+3&-4),I=C*D*m;y+=I,S=S>>>1,E=E>>>1}let b=v;for(let T=0;T<_;T++)g.push(new Uint8Array(r,b,y)),b+=y}return g.map(m=>new tn(m,{format:x,width:s,height:n,levels:o}))}throw l&z2?new Error("DDSParser does not support uncompressed texture data."):l&V2?new Error("DDSParser does not supported YUV uncompressed texture data."):l&X2?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&$2?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const _p=[171,75,84,88,32,49,49,187,13,10,26,10],eb=67305985,We={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},rd=64,gp={[mt.UNSIGNED_BYTE]:1,[mt.UNSIGNED_SHORT]:2,[mt.INT]:4,[mt.UNSIGNED_INT]:4,[mt.FLOAT]:4,[mt.HALF_FLOAT]:8},rb={[nt.RGBA]:4,[nt.RGB]:3,[nt.RG]:2,[nt.RED]:1,[nt.LUMINANCE]:1,[nt.LUMINANCE_ALPHA]:2,[nt.ALPHA]:1},ib={[mt.UNSIGNED_SHORT_4_4_4_4]:2,[mt.UNSIGNED_SHORT_5_5_5_1]:2,[mt.UNSIGNED_SHORT_5_6_5]:2};function nb(r,t,e=!1){const i=new DataView(t);if(!sb(r,i))return null;const n=i.getUint32(We.ENDIANNESS,!0)===eb,s=i.getUint32(We.GL_TYPE,n),o=i.getUint32(We.GL_FORMAT,n),a=i.getUint32(We.GL_INTERNAL_FORMAT,n),l=i.getUint32(We.PIXEL_WIDTH,n),u=i.getUint32(We.PIXEL_HEIGHT,n)||1,h=i.getUint32(We.PIXEL_DEPTH,n)||1,c=i.getUint32(We.NUMBER_OF_ARRAY_ELEMENTS,n)||1,d=i.getUint32(We.NUMBER_OF_FACES,n),f=i.getUint32(We.NUMBER_OF_MIPMAP_LEVELS,n),p=i.getUint32(We.BYTES_OF_KEY_VALUE_DATA,n);if(u===0||h!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");const _=4,x=4,g=l+3&-4,v=u+3&-4,m=new Array(c);let y=l*u;s===0&&(y=g*v);let S;if(s!==0?gp[s]?S=gp[s]*rb[o]:S=ib[s]:S=nu[a],S===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const E=e?ab(i,p,n):null;let T=y*S,C=l,D=u,I=g,L=v,M=rd+p;for(let k=0;k<f;k++){const q=i.getUint32(M,n);let ht=M+4;for(let it=0;it<c;it++){let at=m[it];at||(at=m[it]=new Array(f)),at[k]={levelID:k,levelWidth:f>1||s!==0?C:I,levelHeight:f>1||s!==0?D:L,levelBuffer:new Uint8Array(t,ht,T)},ht+=T}M+=q+4,M=M%4!==0?M+4-M%4:M,C=C>>1||1,D=D>>1||1,I=C+_-1&~(_-1),L=D+x-1&~(x-1),T=I*L*S}return s!==0?{uncompressed:m.map(k=>{let q=k[0].levelBuffer,ht=!1;return s===mt.FLOAT?q=new Float32Array(k[0].levelBuffer.buffer,k[0].levelBuffer.byteOffset,k[0].levelBuffer.byteLength/4):s===mt.UNSIGNED_INT?(ht=!0,q=new Uint32Array(k[0].levelBuffer.buffer,k[0].levelBuffer.byteOffset,k[0].levelBuffer.byteLength/4)):s===mt.INT&&(ht=!0,q=new Int32Array(k[0].levelBuffer.buffer,k[0].levelBuffer.byteOffset,k[0].levelBuffer.byteLength/4)),{resource:new Ta(q,{width:k[0].levelWidth,height:k[0].levelHeight}),type:s,format:ht?ob(o):o}}),kvData:E}:{compressed:m.map(k=>new tn(null,{format:a,width:l,height:u,levels:f,levelBuffers:k})),kvData:E}}function sb(r,t){for(let e=0;e<_p.length;e++)if(t.getUint8(e)!==_p[e])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function ob(r){switch(r){case nt.RGBA:return nt.RGBA_INTEGER;case nt.RGB:return nt.RGB_INTEGER;case nt.RG:return nt.RG_INTEGER;case nt.RED:return nt.RED_INTEGER;default:return r}}function ab(r,t,e){const i=new Map;let n=0;for(;n<t;){const s=r.getUint32(rd+n,e),o=rd+n+4,a=3-(s+3)%4;if(s===0||s>t-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&r.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(r.buffer,o,l)),h=new DataView(r.buffer,o+l+1,s-l-1);i.set(u,h),n+=4+s+a}return i}const lb={extension:{type:st.LoadParser,priority:wr.High},test(r){return Au(r,".dds")},async load(r,t,e){const n=await(await ot.ADAPTER.fetch(r)).arrayBuffer(),o=tb(n).map(a=>{const l=new At(a,{mipmap:Sr.OFF,alphaMode:sr.NO_PREMULTIPLIED_ALPHA,resolution:Ai(r),...t.data});return Su(l,e,r)});return o.length===1?o[0]:o},unload(r){Array.isArray(r)?r.forEach(t=>t.destroy(!0)):r.destroy(!0)}};xt.add(lb);const ub={extension:{type:st.LoadParser,priority:wr.High},test(r){return Au(r,".ktx")},async load(r,t,e){const n=await(await ot.ADAPTER.fetch(r)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=nb(r,n),l=s??o,u={mipmap:Sr.OFF,alphaMode:sr.NO_PREMULTIPLIED_ALPHA,resolution:Ai(r),...t.data},h=l.map(c=>{l===o&&Object.assign(u,{type:c.type,format:c.format});const d=new At(c,u);return d.ktxKeyValueData=a,Su(d,e,r)});return h.length===1?h[0]:h},unload(r){Array.isArray(r)?r.forEach(t=>t.destroy(!0)):r.destroy(!0)}};xt.add(ub);const hb={extension:st.ResolveParser,test:r=>{const e=r.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(e)},parse:r=>{var i,n;if(r.split("?")[0].split(".").pop()==="ktx"){const s=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(s.some(o=>r.endsWith(o)))return{resolution:parseFloat(((i=ot.RETINA_PREFIX.exec(r))==null?void 0:i[1])??"1"),format:s.find(o=>r.endsWith(o)),src:r}}return{resolution:parseFloat(((n=ot.RETINA_PREFIX.exec(r))==null?void 0:n[1])??"1"),format:r.split(".").pop(),src:r}}};xt.add(hb);const cb=new Nt,db=4,id=class{constructor(r){this.renderer=r}async image(r,t,e){const i=new Image;return i.src=await this.base64(r,t,e),i}async base64(r,t,e){const i=this.canvas(r);if(i.toDataURL!==void 0)return i.toDataURL(t,e);if(i.convertToBlob!==void 0){const n=await i.convertToBlob({type:t,quality:e});return await new Promise(s=>{const o=new FileReader;o.onload=()=>s(o.result),o.readAsDataURL(n)})}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")}canvas(r,t){const{pixels:e,width:i,height:n,flipY:s}=this._rawPixels(r,t);let o=new Yf(i,n,1);const a=o.context.getImageData(0,0,i,n);if(id.arrayPostDivide(e,a.data),o.context.putImageData(a,0,0),s){const l=new Yf(o.width,o.height,1);l.context.scale(1,-1),l.context.drawImage(o.canvas,0,-n),o.destroy(),o=l}return o.canvas}pixels(r,t){const{pixels:e}=this._rawPixels(r,t);return id.arrayPostDivide(e,e),e}_rawPixels(r,t){const e=this.renderer;let i,n=!1,s,o=!1;if(r)if(r instanceof Ci)s=r;else{const c=e.context.webGLVersion>=2?e.multisample:Ht.NONE;if(s=this.renderer.generateTexture(r,{multisample:c}),c!==Ht.NONE){const d=Ci.create({width:s.width,height:s.height});e.framebuffer.bind(s.framebuffer),e.framebuffer.blit(d.framebuffer),e.framebuffer.bind(null),s.destroy(!0),s=d}o=!0}s?(i=s.baseTexture.resolution,t=t??s.frame,n=!1,e.renderTexture.bind(s)):(i=e.resolution,t||(t=cb,t.width=e.width,t.height=e.height),n=!0,e.renderTexture.bind(null));const a=Math.round(t.width*i),l=Math.round(t.height*i),u=new Uint8Array(db*a*l),h=e.gl;return h.readPixels(Math.round(t.x*i),Math.round(t.y*i),a,l,h.RGBA,h.UNSIGNED_BYTE,u),o&&s.destroy(!0),{pixels:u,width:a,height:l,flipY:n}}destroy(){this.renderer=null}static arrayPostDivide(r,t){for(let e=0;e<r.length;e+=4){const i=t[e+3]=r[e+3];i!==0?(t[e]=Math.round(Math.min(r[e]*255/i,255)),t[e+1]=Math.round(Math.min(r[e+1]*255/i,255)),t[e+2]=Math.round(Math.min(r[e+2]*255/i,255))):(t[e]=r[e],t[e+1]=r[e+1],t[e+2]=r[e+2])}}};let jm=id;jm.extension={name:"extract",type:st.RendererSystem};xt.add(jm);const su={build(r){const t=r.points;let e,i,n,s,o,a;if(r.type===oe.CIRC){const p=r.shape;e=p.x,i=p.y,o=a=p.radius,n=s=0}else if(r.type===oe.ELIP){const p=r.shape;e=p.x,i=p.y,o=p.width,a=p.height,n=s=0}else{const p=r.shape,_=p.width/2,x=p.height/2;e=p.x+_,i=p.y+x,o=a=Math.max(0,Math.min(p.radius,Math.min(_,x))),n=_-o,s=x-a}if(!(o>=0&&a>=0&&n>=0&&s>=0)){t.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(n?4:0)+(s?4:0);if(t.length=u,u===0)return;if(l===0){t.length=8,t[0]=t[6]=e+n,t[1]=t[3]=i+s,t[2]=t[4]=e-n,t[5]=t[7]=i-s;return}let h=0,c=l*4+(n?2:0)+2,d=c,f=u;{const p=n+o,_=s,x=e+p,g=e-p,v=i+_;if(t[h++]=x,t[h++]=v,t[--c]=v,t[--c]=g,s){const m=i-_;t[d++]=g,t[d++]=m,t[--f]=m,t[--f]=x}}for(let p=1;p<l;p++){const _=Math.PI/2*(p/l),x=n+Math.cos(_)*o,g=s+Math.sin(_)*a,v=e+x,m=e-x,y=i+g,S=i-g;t[h++]=v,t[h++]=y,t[--c]=y,t[--c]=m,t[d++]=m,t[d++]=S,t[--f]=S,t[--f]=v}{const p=n,_=s+a,x=e+p,g=e-p,v=i+_,m=i-_;t[h++]=x,t[h++]=v,t[--f]=m,t[--f]=x,n&&(t[h++]=g,t[h++]=v,t[--f]=m,t[--f]=g)}},triangulate(r,t){const e=r.points,i=t.points,n=t.indices;if(e.length===0)return;let s=i.length/2;const o=s;let a,l;if(r.type!==oe.RREC){const h=r.shape;a=h.x,l=h.y}else{const h=r.shape;a=h.x+h.width/2,l=h.y+h.height/2}const u=r.matrix;i.push(r.matrix?u.a*a+u.c*l+u.tx:a,r.matrix?u.b*a+u.d*l+u.ty:l),s++,i.push(e[0],e[1]);for(let h=2;h<e.length;h+=2)i.push(e[h],e[h+1]),n.push(s++,o,s);n.push(o+1,o,s)}};function yp(r,t=!1){const e=r.length;if(e<6)return;let i=0;for(let n=0,s=r[e-2],o=r[e-1];n<e;n+=2){const a=r[n],l=r[n+1];i+=(a-s)*(l+o),s=a,o=l}if(!t&&i>0||t&&i<=0){const n=e/2;for(let s=n+n%2;s<e;s+=2){const o=e-s-2,a=e-s-1,l=s,u=s+1;[r[o],r[l]]=[r[l],r[o]],[r[a],r[u]]=[r[u],r[a]]}}}const $m={build(r){r.points=r.shape.points.slice()},triangulate(r,t){let e=r.points;const i=r.holes,n=t.points,s=t.indices;if(e.length>=6){yp(e,!1);const o=[];for(let u=0;u<i.length;u++){const h=i[u];yp(h.points,!0),o.push(e.length/2),e=e.concat(h.points)}const a=Wl(e,o,2);if(!a)return;const l=n.length/2;for(let u=0;u<a.length;u+=3)s.push(a[u]+l),s.push(a[u+1]+l),s.push(a[u+2]+l);for(let u=0;u<e.length;u++)n.push(e[u])}}},fb={build(r){const t=r.shape,e=t.x,i=t.y,n=t.width,s=t.height,o=r.points;o.length=0,n>=0&&s>=0&&o.push(e,i,e+n,i,e+n,i+s,e,i+s)},triangulate(r,t){const e=r.points,i=t.points;if(e.length===0)return;const n=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},pb={build(r){su.build(r)},triangulate(r,t){su.triangulate(r,t)}};var Ze=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(Ze||{}),Zi=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(Zi||{});const ps={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,t=20){if(!this.adaptive||!r||isNaN(r))return t;let e=Math.ceil(r/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};class vp{static curveTo(t,e,i,n,s,o){const a=o[o.length-2],u=o[o.length-1]-e,h=a-t,c=n-e,d=i-t,f=Math.abs(u*d-h*c);if(f<1e-8||s===0)return(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e),null;const p=u*u+h*h,_=c*c+d*d,x=u*c+h*d,g=s*Math.sqrt(p)/f,v=s*Math.sqrt(_)/f,m=g*x/p,y=v*x/_,S=g*d+v*h,E=g*c+v*u,b=h*(v+m),T=u*(v+m),C=d*(g+y),D=c*(g+y),I=Math.atan2(T-E,b-S),L=Math.atan2(D-E,C-S);return{cx:S+t,cy:E+e,radius:s,startAngle:I,endAngle:L,anticlockwise:h*c>d*u}}static arc(t,e,i,n,s,o,a,l,u){const h=a-o,c=ps._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/tu)*40),d=h/(c*2),f=d*2,p=Math.cos(d),_=Math.sin(d),x=c-1,g=x%1/x;for(let v=0;v<=x;++v){const m=v+g*v,y=d+o+f*m,S=Math.cos(y),E=-Math.sin(y);u.push((p*S+_*E)*s+i,(p*-E+_*S)*s+n)}}}class xb{constructor(){this.reset()}begin(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class kd{static curveLength(t,e,i,n,s,o,a,l){let h=0,c=0,d=0,f=0,p=0,_=0,x=0,g=0,v=0,m=0,y=0,S=t,E=e;for(let b=1;b<=10;++b)c=b/10,d=c*c,f=d*c,p=1-c,_=p*p,x=_*p,g=x*t+3*_*c*i+3*p*d*s+f*a,v=x*e+3*_*c*n+3*p*d*o+f*l,m=S-g,y=E-v,S=g,E=v,h+=Math.sqrt(m*m+y*y);return h}static curveTo(t,e,i,n,s,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const h=ps._segmentsCount(kd.curveLength(l,u,t,e,i,n,s,o));let c=0,d=0,f=0,p=0,_=0;a.push(l,u);for(let x=1,g=0;x<=h;++x)g=x/h,c=1-g,d=c*c,f=d*c,p=g*g,_=p*g,a.push(f*l+3*d*g*t+3*c*p*i+_*s,f*u+3*d*g*e+3*c*p*n+_*o)}}function Ep(r,t,e,i,n,s,o,a){const l=r-e*n,u=t-i*n,h=r+e*s,c=t+i*s;let d,f;o?(d=i,f=-e):(d=-i,f=e);const p=l+d,_=u+f,x=h+d,g=c+f;return a.push(p,_,x,g),2}function Hi(r,t,e,i,n,s,o,a){const l=e-r,u=i-t;let h=Math.atan2(l,u),c=Math.atan2(n-r,s-t);a&&h<c?h+=Math.PI*2:!a&&h>c&&(c+=Math.PI*2);let d=h;const f=c-h,p=Math.abs(f),_=Math.sqrt(l*l+u*u),x=(15*p*Math.sqrt(_)/Math.PI>>0)+1,g=f/x;if(d+=g,a){o.push(r,t,e,i);for(let v=1,m=d;v<x;v++,m+=g)o.push(r,t,r+Math.sin(m)*_,t+Math.cos(m)*_);o.push(r,t,n,s)}else{o.push(e,i,r,t);for(let v=1,m=d;v<x;v++,m+=g)o.push(r+Math.sin(m)*_,t+Math.cos(m)*_,r,t);o.push(n,s,r,t)}return x*2}function mb(r,t){const e=r.shape;let i=r.points||e.points.slice();const n=t.closePointEps;if(i.length===0)return;const s=r.lineStyle,o=new Rt(i[0],i[1]),a=new Rt(i[i.length-2],i[i.length-1]),l=e.type!==oe.POLY||e.closeStroke,u=Math.abs(o.x-a.x)<n&&Math.abs(o.y-a.y)<n;if(l){i=i.slice(),u&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const it=(o.x+a.x)*.5,at=(a.y+o.y)*.5;i.unshift(it,at),i.push(it,at)}const h=t.points,c=i.length/2;let d=i.length;const f=h.length/2,p=s.width/2,_=p*p,x=s.miterLimit*s.miterLimit;let g=i[0],v=i[1],m=i[2],y=i[3],S=0,E=0,b=-(v-y),T=g-m,C=0,D=0,I=Math.sqrt(b*b+T*T);b/=I,T/=I,b*=p,T*=p;const L=s.alignment,M=(1-L)*2,k=L*2;l||(s.cap===Zi.ROUND?d+=Hi(g-b*(M-k)*.5,v-T*(M-k)*.5,g-b*M,v-T*M,g+b*k,v+T*k,h,!0)+2:s.cap===Zi.SQUARE&&(d+=Ep(g,v,b,T,M,k,!0,h))),h.push(g-b*M,v-T*M,g+b*k,v+T*k);for(let it=1;it<c-1;++it){g=i[(it-1)*2],v=i[(it-1)*2+1],m=i[it*2],y=i[it*2+1],S=i[(it+1)*2],E=i[(it+1)*2+1],b=-(v-y),T=g-m,I=Math.sqrt(b*b+T*T),b/=I,T/=I,b*=p,T*=p,C=-(y-E),D=m-S,I=Math.sqrt(C*C+D*D),C/=I,D/=I,C*=p,D*=p;const at=m-g,Dt=v-y,Tt=m-S,ft=E-y,fe=at*Tt+Dt*ft,w=Dt*Tt-ft*at,R=w<0;if(Math.abs(w)<.001*Math.abs(fe)){h.push(m-b*M,y-T*M,m+b*k,y+T*k),fe>=0&&(s.join===Ze.ROUND?d+=Hi(m,y,m-b*M,y-T*M,m-C*M,y-D*M,h,!1)+4:d+=2,h.push(m-C*k,y-D*k,m+C*M,y+D*M));continue}const P=(-b+g)*(-T+y)-(-b+m)*(-T+v),H=(-C+S)*(-D+y)-(-C+m)*(-D+E),j=(at*H-Tt*P)/w,B=(ft*P-Dt*H)/w,z=(j-m)*(j-m)+(B-y)*(B-y),et=m+(j-m)*M,rt=y+(B-y)*M,Q=m-(j-m)*k,F=y-(B-y)*k,O=Math.min(at*at+Dt*Dt,Tt*Tt+ft*ft),$=R?M:k,X=O+$*$*_,Z=z<=X;let tt=s.join;if(tt===Ze.MITER&&z/_>x&&(tt=Ze.BEVEL),Z)switch(tt){case Ze.MITER:{h.push(et,rt,Q,F);break}case Ze.BEVEL:{R?h.push(et,rt,m+b*k,y+T*k,et,rt,m+C*k,y+D*k):h.push(m-b*M,y-T*M,Q,F,m-C*M,y-D*M,Q,F),d+=2;break}case Ze.ROUND:{R?(h.push(et,rt,m+b*k,y+T*k),d+=Hi(m,y,m+b*k,y+T*k,m+C*k,y+D*k,h,!0)+4,h.push(et,rt,m+C*k,y+D*k)):(h.push(m-b*M,y-T*M,Q,F),d+=Hi(m,y,m-b*M,y-T*M,m-C*M,y-D*M,h,!1)+4,h.push(m-C*M,y-D*M,Q,F));break}}else{switch(h.push(m-b*M,y-T*M,m+b*k,y+T*k),tt){case Ze.MITER:{R?h.push(Q,F,Q,F):h.push(et,rt,et,rt),d+=2;break}case Ze.ROUND:{R?d+=Hi(m,y,m+b*k,y+T*k,m+C*k,y+D*k,h,!0)+2:d+=Hi(m,y,m-b*M,y-T*M,m-C*M,y-D*M,h,!1)+2;break}}h.push(m-C*M,y-D*M,m+C*k,y+D*k),d+=2}}g=i[(c-2)*2],v=i[(c-2)*2+1],m=i[(c-1)*2],y=i[(c-1)*2+1],b=-(v-y),T=g-m,I=Math.sqrt(b*b+T*T),b/=I,T/=I,b*=p,T*=p,h.push(m-b*M,y-T*M,m+b*k,y+T*k),l||(s.cap===Zi.ROUND?d+=Hi(m-b*(M-k)*.5,y-T*(M-k)*.5,m-b*M,y-T*M,m+b*k,y+T*k,h,!1)+2:s.cap===Zi.SQUARE&&(d+=Ep(m,y,b,T,M,k,!1,h)));const q=t.indices,ht=ps.epsilon*ps.epsilon;for(let it=f;it<d+f-2;++it)g=h[it*2],v=h[it*2+1],m=h[(it+1)*2],y=h[(it+1)*2+1],S=h[(it+2)*2],E=h[(it+2)*2+1],!(Math.abs(g*(y-E)+m*(E-v)+S*(v-y))<ht)&&q.push(it,it+1,it+2)}function _b(r,t){let e=0;const i=r.shape,n=r.points||i.points,s=i.type!==oe.POLY||i.closeStroke;if(n.length===0)return;const o=t.points,a=t.indices,l=n.length/2,u=o.length/2;let h=u;for(o.push(n[0],n[1]),e=1;e<l;e++)o.push(n[e*2],n[e*2+1]),a.push(h,h+1),h++;s&&a.push(h,u)}function Tp(r,t){r.lineStyle.native?_b(r,t):mb(r,t)}class Ud{static curveLength(t,e,i,n,s,o){const a=t-2*i+s,l=e-2*n+o,u=2*i-2*t,h=2*n-2*e,c=4*(a*a+l*l),d=4*(a*u+l*h),f=u*u+h*h,p=2*Math.sqrt(c+d+f),_=Math.sqrt(c),x=2*c*_,g=2*Math.sqrt(f),v=d/_;return(x*p+_*d*(p-g)+(4*f*c-d*d)*Math.log((2*_+v+p)/(v+g)))/(4*x)}static curveTo(t,e,i,n,s){const o=s[s.length-2],a=s[s.length-1],l=ps._segmentsCount(Ud.curveLength(o,a,t,e,i,n));let u=0,h=0;for(let c=1;c<=l;++c){const d=c/l;u=o+(t-o)*d,h=a+(e-a)*d,s.push(u+(t+(i-t)*d-u)*d,h+(e+(n-e)*d-h)*d)}}}const Jh={[oe.POLY]:$m,[oe.CIRC]:su,[oe.ELIP]:su,[oe.RECT]:fb,[oe.RREC]:pb},Ap=[],Cl=[];class ou{constructor(t,e=null,i=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type}clone(){return new ou(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const jn=new Rt,Gm=class extends Wx{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new eu,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Cl.push(this.drawCalls[r]);this.drawCalls.length=0;for(let r=0;r<this.batches.length;r++){const t=this.batches[r];t.reset(),Ap.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(r,t=null,e=null,i=null){const n=new ou(r,t,e,i);return this.graphicsData.push(n),this.dirty++,this}drawHole(r,t=null){if(!this.graphicsData.length)return null;const e=new ou(r,null,null,t),i=this.graphicsData[this.graphicsData.length-1];return e.lineStyle=i.lineStyle,i.holes.push(e),this.dirty++,this}destroy(){super.destroy();for(let r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(r){const t=this.graphicsData;for(let e=0;e<t.length;++e){const i=t[e];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(r,jn):jn.copyFrom(r),i.shape.contains(jn.x,jn.y))){let n=!1;if(i.holes){for(let s=0;s<i.holes.length;s++)if(i.holes[s].shape.contains(jn.x,jn.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const r=this.uvs,t=this.graphicsData;let e=null,i=null;this.batches.length>0&&(e=this.batches[this.batches.length-1],i=e.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const l=t[a],u=l.fillStyle,h=l.lineStyle;Jh[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(u.visible||h.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const f=d===0?u:h;if(!f.visible)continue;const p=f.texture.baseTexture,_=this.indices.length,x=this.points.length/2;p.wrapMode=Ei.REPEAT,d===0?this.processFill(l):this.processLine(l);const g=this.points.length/2-x;g!==0&&(e&&!this._compareStyles(i,f)&&(e.end(_,x),e=null),e||(e=Ap.pop()||new xb,e.begin(f,_,x),this.batches.push(e),i=f),this.addUvs(this.points,r,f.texture,x,g,f.matrix))}}const n=this.indices.length,s=this.points.length/2;if(e&&e.end(n,s),this.batches.length===0){this.batchable=!0;return}const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(r,t){return!(!r||!t||r.texture.baseTexture!==t.texture.baseTexture||r.color+r.alpha!==t.color+t.alpha||!!r.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let r=0,t=this.graphicsData.length;r<t;r++){const e=this.graphicsData[r],i=e.fillStyle,n=e.lineStyle;if(i&&!i.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const r=this.batches;for(let t=0,e=r.length;t<e;t++){const i=r[t];for(let n=0;n<i.size;n++){const s=i.start+n;this.indicesUint16[s]=this.indicesUint16[s]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const r=this.batches;for(let t=0;t<r.length;t++)if(r[t].style.native)return!1;return this.points.length<Gm.BATCHABLE_SIZE*2}buildDrawCalls(){let r=++At._globalBatch;for(let h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),Cl.push(this.drawCalls[h]);this.drawCalls.length=0;const t=this.colors,e=this.textureIds;let i=Cl.pop();i||(i=new zc,i.texArray=new Xc),i.texArray.count=0,i.start=0,i.size=0,i.type=gr.TRIANGLES;let n=0,s=null,o=0,a=!1,l=gr.TRIANGLES,u=0;this.drawCalls.push(i);for(let h=0;h<this.batches.length;h++){const c=this.batches[h],d=8,f=c.style,p=f.texture.baseTexture;a!==!!f.native&&(a=!!f.native,l=a?gr.LINES:gr.TRIANGLES,s=null,n=d,r++),s!==p&&(s=p,p._batchEnabled!==r&&(n===d&&(r++,n=0,i.size>0&&(i=Cl.pop(),i||(i=new zc,i.texArray=new Xc),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=l),p.touched=1,p._batchEnabled=r,p._batchLocation=n,p.wrapMode=Ei.REPEAT,i.texArray.elements[i.texArray.count++]=p,n++)),i.size+=c.size,u+=c.size,o=p._batchLocation,this.addColors(t,f.color,f.alpha,c.attribSize,c.attribStart),this.addTextureIds(e,o,c.attribSize,c.attribStart)}At._globalBatch=r,this.packAttributes()}packAttributes(){const r=this.points,t=this.uvs,e=this.colors,i=this.textureIds,n=new ArrayBuffer(r.length*3*4),s=new Float32Array(n),o=new Uint32Array(n);let a=0;for(let l=0;l<r.length/2;l++)s[a++]=r[l*2],s[a++]=r[l*2+1],s[a++]=t[l*2],s[a++]=t[l*2+1],o[a++]=e[l],s[a++]=i[l];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(r){r.holes.length?$m.triangulate(r,this):Jh[r.type].triangulate(r,this)}processLine(r){Tp(r,this);for(let t=0;t<r.holes.length;t++)Tp(r.holes[t],this)}processHoles(r){for(let t=0;t<r.length;t++){const e=r[t];Jh[e.type].build(e),e.matrix&&this.transformPoints(e.points,e.matrix)}}calculateBounds(){const r=this._bounds;r.clear(),r.addVertexData(this.points,0,this.points.length),r.pad(this.boundsPadding,this.boundsPadding)}transformPoints(r,t){for(let e=0;e<r.length/2;e++){const i=r[e*2],n=r[e*2+1];r[e*2]=t.a*i+t.c*n+t.tx,r[e*2+1]=t.b*i+t.d*n+t.ty}}addColors(r,t,e,i,n=0){const s=(t>>16)+(t&65280)+((t&255)<<16),o=Pd(s,e);r.length=Math.max(r.length,n+i);for(let a=0;a<i;a++)r[n+a]=o}addTextureIds(r,t,e,i=0){r.length=Math.max(r.length,i+e);for(let n=0;n<e;n++)r[i+n]=t}addUvs(r,t,e,i,n,s=null){let o=0;const a=t.length,l=e.frame;for(;o<n;){let h=r[(i+o)*2],c=r[(i+o)*2+1];if(s){const d=s.a*h+s.c*c+s.tx;c=s.b*h+s.d*c+s.ty,h=d}o++,t.push(h/l.width,c/l.height)}const u=e.baseTexture;(l.width<u.width||l.height<u.height)&&this.adjustUvs(t,e,a,n)}adjustUvs(r,t,e,i){const n=t.baseTexture,s=1e-6,o=e+i*2,a=t.frame,l=a.width/n.width,u=a.height/n.height;let h=a.x/a.width,c=a.y/a.height,d=Math.floor(r[e]+s),f=Math.floor(r[e+1]+s);for(let p=e+2;p<o;p+=2)d=Math.min(d,Math.floor(r[p]+s)),f=Math.min(f,Math.floor(r[p+1]+s));h-=d,c-=f;for(let p=e;p<o;p+=2)r[p]=(r[p]+h)*l,r[p+1]=(r[p+1]+c)*u}};let zm=Gm;zm.BATCHABLE_SIZE=100;class bu{constructor(){this.color=16777215,this.alpha=1,this.texture=pt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new bu;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=pt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Hd extends bu{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Zi.BUTT,this.join=Ze.MITER,this.miterLimit=10}clone(){const t=new Hd;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const gb=new Float32Array(3),tc={},jl=class extends ze{constructor(r=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new bu,this._lineStyle=new Hd,this._matrix=null,this._holeMode=!1,this.state=ii.for2d(),this._geometry=r||new zm,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=Et.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new jl(this._geometry)}set blendMode(r){this.state.blendMode=r}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(r){this._tint=r}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(r=null,t=0,e=1,i=.5,n=!1){return typeof r=="number"&&(r={width:r,color:t,alpha:e,alignment:i,native:n}),this.lineTextureStyle(r)}lineTextureStyle(r){r=Object.assign({width:0,texture:pt.WHITE,color:r!=null&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Zi.BUTT,join:Ze.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();const t=r.width>0&&r.alpha>0;return t?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:t},r)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const r=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new us,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[t-2],r[t-1]))}else this.currentPath=new us,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(r,t){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=t,this}lineTo(r,t){this.currentPath||this.moveTo(0,0);const e=this.currentPath.points,i=e[e.length-2],n=e[e.length-1];return(i!==r||n!==t)&&e.push(r,t),this}_initCurve(r=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[r,t]):this.moveTo(r,t)}quadraticCurveTo(r,t,e,i){this._initCurve();const n=this.currentPath.points;return n.length===0&&this.moveTo(0,0),Ud.curveTo(r,t,e,i,n),this}bezierCurveTo(r,t,e,i,n,s){return this._initCurve(),kd.curveTo(r,t,e,i,n,s,this.currentPath.points),this}arcTo(r,t,e,i,n){this._initCurve(r,t);const s=this.currentPath.points,o=vp.curveTo(r,t,e,i,n,s);if(o){const{cx:a,cy:l,radius:u,startAngle:h,endAngle:c,anticlockwise:d}=o;this.arc(a,l,u,h,c,d)}return this}arc(r,t,e,i,n,s=!1){if(i===n)return this;if(!s&&n<=i?n+=tu:s&&i<=n&&(i+=tu),n-i===0)return this;const a=r+Math.cos(i)*e,l=t+Math.sin(i)*e,u=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const c=Math.abs(h[h.length-2]-a),d=Math.abs(h[h.length-1]-l);c<u&&d<u||h.push(a,l)}else this.moveTo(a,l),h=this.currentPath.points;return vp.arc(a,l,r,t,e,i,n,s,h),this}beginFill(r=0,t=1){return this.beginTextureFill({texture:pt.WHITE,color:r,alpha:t})}beginTextureFill(r){r=Object.assign({texture:pt.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();const t=r.alpha>0;return t?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:t},r)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(r,t,e,i){return this.drawShape(new Nt(r,t,e,i))}drawRoundedRect(r,t,e,i,n){return this.drawShape(new Fd(r,t,e,i,n))}drawCircle(r,t,e){return this.drawShape(new Dd(r,t,e))}drawEllipse(r,t,e,i){return this.drawShape(new Od(r,t,e,i))}drawPolygon(...r){let t,e=!0;const i=r[0];i.points?(e=i.closeStroke,t=i.points):Array.isArray(r[0])?t=r[0]:t=r;const n=new us(t);return n.closeStroke=e,this.drawShape(n),this}drawShape(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const r=this._geometry.graphicsData;return r.length===1&&r[0].shape.type===oe.RECT&&!r[0].matrix&&!r[0].holes.length&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)}_render(r){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))}_populateBatches(){const r=this._geometry,t=this.blendMode,e=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=e,this.vertexData=new Float32Array(r.points);for(let i=0;i<e;i++){const n=r.batches[i],s=n.style.color,o=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2),a=new Float32Array(r.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2),l=new Uint16Array(r.indicesUint16.buffer,n.start*2,n.size),u={vertexData:o,blendMode:t,indices:l,uvs:a,_batchRGB:la(s),_tintRGB:s,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[i]=u}}_renderBatched(r){if(this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,e=this.batches.length;t<e;t++){const i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha,r.plugins[this.pluginName].render(i)}}}_renderDirect(r){const t=this._resolveDirectShader(r),e=this._geometry,i=this.tint,n=this.worldAlpha,s=t.uniforms,o=e.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(i>>16&255)/255*n,s.tint[1]=(i>>8&255)/255*n,s.tint[2]=(i&255)/255*n,s.tint[3]=n,r.shader.bind(t),r.geometry.bind(e,t),r.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(r,e.drawCalls[a])}_renderDrawCallDirect(r,t){const{texArray:e,type:i,size:n,start:s}=t,o=e.count;for(let a=0;a<o;a++)r.texture.bind(e.elements[a],a);r.geometry.draw(i,n,s)}_resolveDirectShader(r){let t=this.shader;const e=this.pluginName;if(!t){if(!tc[e]){const{maxTextures:i}=r.plugins[e],n=new Int32Array(i);for(let a=0;a<i;a++)n[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Bt,default:ir.from({uSamplers:n},!0)},o=r.plugins[e]._shader.program;tc[e]=new Tr(o,s)}t=tc[e]}return t}_calculateBounds(){this.finishPoly();const r=this._geometry;if(!r.graphicsData.length)return;const{minX:t,minY:e,maxX:i,maxY:n}=r.bounds;this._bounds.addFrame(this.transform,t,e,i,n)}containsPoint(r){return this.worldTransform.applyInverse(r,jl._TEMP_POINT),this._geometry.containsPoint(jl._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const r=la(this.tint,gb);for(let t=0;t<this.batches.length;t++){const e=this.batches[t],i=e._batchRGB,n=r[0]*i[0]*255,s=r[1]*i[1]*255,o=r[2]*i[2]*255,a=(n<<16)+(s<<8)+(o|0);e._tintRGB=(a>>16)+(a&65280)+((a&255)<<16)}}}calculateVertices(){const r=this.transform._worldID;if(this._transformID===r)return;this._transformID=r;const t=this.transform.worldTransform,e=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,a=t.ty,l=this._geometry.points,u=this.vertexData;let h=0;for(let c=0;c<l.length;c+=2){const d=l[c],f=l[c+1];u[h++]=e*d+n*f+o,u[h++]=s*f+i*d+a}}closePath(){const r=this.currentPath;return r&&(r.closeStroke=!0,this.finishPoly()),this}setMatrix(r){return this._matrix=r,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(r){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(r)}};let Cu=jl;Cu.curves=ps;Cu._TEMP_POINT=new Rt;class yb{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const ec=new Rt,Sp=new us,Vm=class extends ze{constructor(r,t,e,i=gr.TRIANGLES){super(),this.geometry=r,this.shader=t,this.state=e||ii.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=ot.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(r){this._geometry!==r&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=r,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(r){this.shader=r}get material(){return this.shader}set blendMode(r){this.state.blendMode=r}get blendMode(){return this.state.blendMode}set roundPixels(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(r){this.shader.tint=r}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(r){this.shader.texture=r}_render(r){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===gr.TRIANGLES&&t.length<Vm.BATCHABLE_SIZE*2?this._renderToBatch(r):this._renderDefault(r)}_renderDefault(r){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),r.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),r.shader.bind(t),r.state.set(this.state),r.geometry.bind(this.geometry,t),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(r){const t=this.geometry,e=this.shader;e.uvMatrix&&(e.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=e._tintRGB,this._texture=e.texture;const i=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[i]),r.plugins[i].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,l=n.d,u=n.tx,h=n.ty,c=this.vertexData;for(let d=0;d<c.length/2;d++){const f=e[d*2],p=e[d*2+1];c[d*2]=s*f+a*p+u,c[d*2+1]=o*f+l*p+h}if(this._roundPixels){const d=ot.RESOLUTION;for(let f=0;f<c.length;++f)c[f]=Math.round(c[f]*d)/d}this.vertexDirty=i}calculateUvs(){const r=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new yb(r,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,ec);const t=this.geometry.getBuffer("aVertexPosition").data,e=Sp.points,i=this.geometry.getIndex().data,n=i.length,s=this.drawMode===4?3:1;for(let o=0;o+2<n;o+=s){const a=i[o]*2,l=i[o+1]*2,u=i[o+2]*2;if(e[0]=t[a],e[1]=t[a+1],e[2]=t[l],e[3]=t[l+1],e[4]=t[u],e[5]=t[u+1],Sp.contains(ec.x,ec.y))return!0}return!1}destroy(r){super.destroy(r),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let nd=Vm;nd.BATCHABLE_SIZE=100;class vb extends Si{constructor(t,e,i){super();const n=new zt(t),s=new zt(e,!0),o=new zt(i,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,mt.FLOAT).addAttribute("aTextureCoord",s,2,!1,mt.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var Eb=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Tb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class bp extends Tr{constructor(t,e){const i={uSampler:t,alpha:1,uTextureMatrix:Bt.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(i,e.uniforms),super(e.program||tr.from(Tb,Eb),i),this._colorDirty=!1,this.uvMatrix=new cm(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this.tint=e.tint,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture;Gx(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class Cp{constructor(t,e,i){this.geometry=new Si,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<t.length;++n){let s=t[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||mt.FLOAT,offset:s.offset},e[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new zt(cA(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=e,e+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new zt(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=n,n+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new zt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===mt.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===mt.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,e,i){for(let n=0;n<this.dynamicProperties.length;n++){const s=this.dynamicProperties[n];s.uploadFunction(t,e,i,s.type===mt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,i){for(let n=0;n<this.staticProperties.length;n++){const s=this.staticProperties[n];s.uploadFunction(t,e,i,s.type===mt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var Ab=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,Sb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Xm extends Tu{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Bt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:mt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Tr.from(Sb,Ab,{}),this.state=ii.for2d()}render(t){const e=t.children,i=t._maxSize,n=t._batchSize,s=this.renderer;let o=e.length;if(o===0)return;o>i&&!t.autoResize&&(o=i);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=e[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=$x(t.blendMode,u),s.state.set(this.state);const h=s.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=hA(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,u),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=n,p+=1){let _=o-f;_>n&&(_=n),p>=a.length&&a.push(this._generateOneMoreBuffer(t));const x=a[p];x.uploadDynamic(e,f,_);const g=t._bufferUpdateIDs[p]||0;d=d||x._updateID<g,d&&(x._updateID=t._updateID,x.uploadStatic(e,f,_)),s.geometry.bind(x.geometry),h.drawElements(h.TRIANGLES,_*6,h.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],i=t._maxSize,n=t._batchSize,s=t._properties;for(let o=0;o<i;o+=n)e.push(new Cp(this.properties,s,n));return e}_generateOneMoreBuffer(t){const e=t._batchSize,i=t._properties;return new Cp(this.properties,i,e)}uploadVertices(t,e,i,n,s,o){let a=0,l=0,u=0,h=0;for(let c=0;c<i;++c){const d=t[e+c],f=d._texture,p=d.scale.x,_=d.scale.y,x=f.trim,g=f.orig;x?(l=x.x-d.anchor.x*g.width,a=l+x.width,h=x.y-d.anchor.y*g.height,u=h+x.height):(a=g.width*(1-d.anchor.x),l=g.width*-d.anchor.x,u=g.height*(1-d.anchor.y),h=g.height*-d.anchor.y),n[o]=l*p,n[o+1]=h*_,n[o+s]=a*p,n[o+s+1]=h*_,n[o+s*2]=a*p,n[o+s*2+1]=u*_,n[o+s*3]=l*p,n[o+s*3+1]=u*_,o+=s*4}}uploadPosition(t,e,i,n,s,o){for(let a=0;a<i;a++){const l=t[e+a].position;n[o]=l.x,n[o+1]=l.y,n[o+s]=l.x,n[o+s+1]=l.y,n[o+s*2]=l.x,n[o+s*2+1]=l.y,n[o+s*3]=l.x,n[o+s*3+1]=l.y,o+=s*4}}uploadRotation(t,e,i,n,s,o){for(let a=0;a<i;a++){const l=t[e+a].rotation;n[o]=l,n[o+s]=l,n[o+s*2]=l,n[o+s*3]=l,o+=s*4}}uploadUvs(t,e,i,n,s,o){for(let a=0;a<i;++a){const l=t[e+a]._texture._uvs;l?(n[o]=l.x0,n[o+1]=l.y0,n[o+s]=l.x1,n[o+s+1]=l.y1,n[o+s*2]=l.x2,n[o+s*2+1]=l.y2,n[o+s*3]=l.x3,n[o+s*3+1]=l.y3,o+=s*4):(n[o]=0,n[o+1]=0,n[o+s]=0,n[o+s+1]=0,n[o+s*2]=0,n[o+s*2+1]=0,n[o+s*3]=0,n[o+s*3+1]=0,o+=s*4)}}uploadTint(t,e,i,n,s,o){for(let a=0;a<i;++a){const l=t[e+a],u=l._texture.baseTexture.alphaMode>0,h=l.alpha,c=h<1&&u?Pd(l._tintRGB,h):l._tintRGB+(h*255<<24);n[o]=c,n[o+s]=c,n[o+s*2]=c,n[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Xm.extension={name:"particle",type:st.RendererPlugin};xt.add(Xm);var wu=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(wu||{});const wl={willReadFrequently:!0},dt=class{static get experimentalLetterSpacingSupported(){let r=dt._experimentalLetterSpacingSupported;if(r!==void 0){const t=ot.ADAPTER.getCanvasRenderingContext2D().prototype;r=dt._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return r}constructor(r,t,e,i,n,s,o,a,l){this.text=r,this.style=t,this.width=e,this.height=i,this.lines=n,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(r,t,e,i=dt._canvas){e=e??t.wordWrap;const n=t.toFontString(),s=dt.measureFont(n);s.fontSize===0&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);const o=i.getContext("2d",wl);o.font=n;const l=(e?dt.wordWrap(r,t,i):r).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let h=0;for(let p=0;p<l.length;p++){const _=dt._measureText(l[p],t.letterSpacing,o);u[p]=_,h=Math.max(h,_)}let c=h+t.strokeThickness;t.dropShadow&&(c+=t.dropShadowDistance);const d=t.lineHeight||s.fontSize+t.strokeThickness;let f=Math.max(d,s.fontSize+t.strokeThickness*2)+(l.length-1)*(d+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new dt(r,t,c,f,l,u,d+t.leading,h,s)}static _measureText(r,t,e){let i=!1;dt.experimentalLetterSpacingSupported&&(dt.experimentalLetterSpacing?(e.letterSpacing=`${t}px`,e.textLetterSpacing=`${t}px`,i=!0):(e.letterSpacing="0px",e.textLetterSpacing="0px"));let n=e.measureText(r).width;return n>0&&(i?n-=t:n+=(dt.graphemeSegmenter(r).length-1)*t),n}static wordWrap(r,t,e=dt._canvas){const i=e.getContext("2d",wl);let n=0,s="",o="";const a=Object.create(null),{letterSpacing:l,whiteSpace:u}=t,h=dt.collapseSpaces(u),c=dt.collapseNewlines(u);let d=!h;const f=t.wordWrapWidth+l,p=dt.tokenize(r);for(let _=0;_<p.length;_++){let x=p[_];if(dt.isNewline(x)){if(!c){o+=dt.addLine(s),d=!h,s="",n=0;continue}x=" "}if(h){const v=dt.isBreakingSpace(x),m=dt.isBreakingSpace(s[s.length-1]);if(v&&m)continue}const g=dt.getFromCache(x,l,a,i);if(g>f)if(s!==""&&(o+=dt.addLine(s),s="",n=0),dt.canBreakWords(x,t.breakWords)){const v=dt.wordWrapSplit(x);for(let m=0;m<v.length;m++){let y=v[m],S=y,E=1;for(;v[m+E];){const T=v[m+E];if(!dt.canBreakChars(S,T,x,m,t.breakWords))y+=T;else break;S=T,E++}m+=E-1;const b=dt.getFromCache(y,l,a,i);b+n>f&&(o+=dt.addLine(s),d=!1,s="",n=0),s+=y,n+=b}}else{s.length>0&&(o+=dt.addLine(s),s="",n=0);const v=_===p.length-1;o+=dt.addLine(x,!v),d=!1,s="",n=0}else g+n>f&&(d=!1,o+=dt.addLine(s),s="",n=0),(s.length>0||!dt.isBreakingSpace(x)||d)&&(s+=x,n+=g)}return o+=dt.addLine(s,!1),o}static addLine(r,t=!0){return r=dt.trimRight(r),r=t?`${r}
`:r,r}static getFromCache(r,t,e,i){let n=e[r];return typeof n!="number"&&(n=dt._measureText(r,t,i)+t,e[r]=n),n}static collapseSpaces(r){return r==="normal"||r==="pre-line"}static collapseNewlines(r){return r==="normal"}static trimRight(r){if(typeof r!="string")return"";for(let t=r.length-1;t>=0;t--){const e=r[t];if(!dt.isBreakingSpace(e))break;r=r.slice(0,-1)}return r}static isNewline(r){return typeof r!="string"?!1:dt._newlines.includes(r.charCodeAt(0))}static isBreakingSpace(r,t){return typeof r!="string"?!1:dt._breakingSpaces.includes(r.charCodeAt(0))}static tokenize(r){const t=[];let e="";if(typeof r!="string")return t;for(let i=0;i<r.length;i++){const n=r[i],s=r[i+1];if(dt.isBreakingSpace(n,s)||dt.isNewline(n)){e!==""&&(t.push(e),e=""),t.push(n);continue}e+=n}return e!==""&&t.push(e),t}static canBreakWords(r,t){return t}static canBreakChars(r,t,e,i,n){return!0}static wordWrapSplit(r){return dt.graphemeSegmenter(r)}static measureFont(r){if(dt._fonts[r])return dt._fonts[r];const t={ascent:0,descent:0,fontSize:0},e=dt._canvas,i=dt._context;i.font=r;const n=dt.METRICS_STRING+dt.BASELINE_SYMBOL,s=Math.ceil(i.measureText(n).width);let o=Math.ceil(i.measureText(dt.BASELINE_SYMBOL).width);const a=Math.ceil(dt.HEIGHT_MULTIPLIER*o);if(o=o*dt.BASELINE_MULTIPLIER|0,s===0||a===0)return dt._fonts[r]=t,t;e.width=s,e.height=a,i.fillStyle="#f00",i.fillRect(0,0,s,a),i.font=r,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(n,0,o);const l=i.getImageData(0,0,s,a).data,u=l.length,h=s*4;let c=0,d=0,f=!1;for(c=0;c<o;++c){for(let p=0;p<h;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d+=h;else break}for(t.ascent=o-c,d=u-h,f=!1,c=a;c>o;--c){for(let p=0;p<h;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d-=h;else break}return t.descent=c-o,t.fontSize=t.ascent+t.descent,dt._fonts[r]=t,t}static clearMetrics(r=""){r?delete dt._fonts[r]:dt._fonts={}}static get _canvas(){if(!dt.__canvas){let r;try{const t=new OffscreenCanvas(0,0),e=t.getContext("2d",wl);if(e!=null&&e.measureText)return dt.__canvas=t,t;r=ot.ADAPTER.createCanvas()}catch{r=ot.ADAPTER.createCanvas()}r.width=r.height=10,dt.__canvas=r}return dt.__canvas}static get _context(){return dt.__context||(dt.__context=dt._canvas.getContext("2d",wl)),dt.__context}};let se=dt;se.METRICS_STRING="|q";se.BASELINE_SYMBOL="M";se.BASELINE_MULTIPLIER=1.4;se.HEIGHT_MULTIPLIER=2;se.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return t=>[...r.segment(t)].map(e=>e.segment)}return r=>[...r]})();se.experimentalLetterSpacing=!1;se._fonts={};se._newlines=[10,13];se._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const bb=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],qo=class{constructor(r){this.styleID=0,this.reset(),ic(this,r,r)}clone(){const r={};return ic(r,this,qo.defaultStyle),new qo(r)}reset(){ic(this,qo.defaultStyle,qo.defaultStyle)}get align(){return this._align}set align(r){this._align!==r&&(this._align=r,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(r){this._breakWords!==r&&(this._breakWords=r,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(r){this._dropShadow!==r&&(this._dropShadow=r,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(r){this._dropShadowAlpha!==r&&(this._dropShadowAlpha=r,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(r){this._dropShadowAngle!==r&&(this._dropShadowAngle=r,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(r){this._dropShadowBlur!==r&&(this._dropShadowBlur=r,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(r){const t=rc(r);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(r){this._dropShadowDistance!==r&&(this._dropShadowDistance=r,this.styleID++)}get fill(){return this._fill}set fill(r){const t=rc(r);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(r){this._fillGradientType!==r&&(this._fillGradientType=r,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(r){Cb(this._fillGradientStops,r)||(this._fillGradientStops=r,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(r){this.fontFamily!==r&&(this._fontFamily=r,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(r){this._fontSize!==r&&(this._fontSize=r,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(r){this._fontStyle!==r&&(this._fontStyle=r,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(r){this._fontVariant!==r&&(this._fontVariant=r,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(r){this._fontWeight!==r&&(this._fontWeight=r,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(r){this._lineHeight!==r&&(this._lineHeight=r,this.styleID++)}get leading(){return this._leading}set leading(r){this._leading!==r&&(this._leading=r,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(r){this._lineJoin!==r&&(this._lineJoin=r,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(r){this._miterLimit!==r&&(this._miterLimit=r,this.styleID++)}get padding(){return this._padding}set padding(r){this._padding!==r&&(this._padding=r,this.styleID++)}get stroke(){return this._stroke}set stroke(r){const t=rc(r);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(r){this._strokeThickness!==r&&(this._strokeThickness=r,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(r){this._textBaseline!==r&&(this._textBaseline=r,this.styleID++)}get trim(){return this._trim}set trim(r){this._trim!==r&&(this._trim=r,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(r){this._whiteSpace!==r&&(this._whiteSpace=r,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(r){this._wordWrap!==r&&(this._wordWrap=r,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(r){this._wordWrapWidth!==r&&(this._wordWrapWidth=r,this.styleID++)}toFontString(){const r=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let e=t.length-1;e>=0;e--){let i=t[e].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!bb.includes(i)&&(i=`"${i}"`),t[e]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${r} ${t.join(",")}`}};let an=qo;an.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:wu.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function wp(r){return typeof r=="number"?Hx(r):(typeof r=="string"&&r.startsWith("0x")&&(r=r.replace("0x","#")),r)}function rc(r){if(Array.isArray(r)){for(let t=0;t<r.length;++t)r[t]=wp(r[t]);return r}else return wp(r)}function Cb(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}function ic(r,t,e){for(const i in e)Array.isArray(t[i])?r[i]=t[i].slice():r[i]=t[i]}const wb={texture:!0,children:!1,baseTexture:!0},sd=class extends Cs{constructor(r,t,e){let i=!1;e||(e=ot.ADAPTER.createCanvas(),i=!0),e.width=3,e.height=3;const n=pt.from(e);n.orig=new Nt,n.trim=new Nt,super(n),this._ownCanvas=i,this.canvas=e,this.context=e.getContext("2d",{willReadFrequently:!0}),this._resolution=sd.defaultResolution??ot.RESOLUTION,this._autoResolution=sd.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=r,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return se.experimentalLetterSpacing}static set experimentalLetterSpacing(r){Pt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),se.experimentalLetterSpacing=r}updateText(r){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&r)return;this._font=this._style.toFontString();const e=this.context,i=se.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=i.width,s=i.height,o=i.lines,a=i.lineHeight,l=i.lineWidths,u=i.maxLineWidth,h=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,n)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),e.scale(this._resolution,this._resolution),e.clearRect(0,0,this.canvas.width,this.canvas.height),e.font=this._font,e.lineWidth=t.strokeThickness,e.textBaseline=t.textBaseline,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit;let c,d;const f=t.dropShadow?2:1;for(let p=0;p<f;++p){const _=t.dropShadow&&p===0,x=_?Math.ceil(Math.max(1,s)+t.padding*2):0,g=x*this._resolution;if(_){e.fillStyle="black",e.strokeStyle="black";const m=t.dropShadowColor,y=la(typeof m=="number"?m:Id(m)),S=t.dropShadowBlur*this._resolution,E=t.dropShadowDistance*this._resolution;e.shadowColor=`rgba(${y[0]*255},${y[1]*255},${y[2]*255},${t.dropShadowAlpha})`,e.shadowBlur=S,e.shadowOffsetX=Math.cos(t.dropShadowAngle)*E,e.shadowOffsetY=Math.sin(t.dropShadowAngle)*E+g}else e.fillStyle=this._generateFillStyle(t,o,i),e.strokeStyle=t.stroke,e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;let v=(a-h.fontSize)/2;a-h.fontSize<0&&(v=0);for(let m=0;m<o.length;m++)c=t.strokeThickness/2,d=t.strokeThickness/2+m*a+h.ascent+v,t.align==="right"?c+=u-l[m]:t.align==="center"&&(c+=(u-l[m])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[m],c+t.padding,d+t.padding-x,!0),t.fill&&this.drawLetterSpacing(o[m],c+t.padding,d+t.padding-x)}this.updateTexture()}drawLetterSpacing(r,t,e,i=!1){const s=this._style.letterSpacing;let o=!1;if(se.experimentalLetterSpacingSupported&&(se.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(r,t,e):this.context.fillText(r,t,e);return}let a=t;const l=se.graphemeSegmenter(r);let u=this.context.measureText(r).width,h=0;for(let c=0;c<l.length;++c){const d=l[c];i?this.context.strokeText(d,a,e):this.context.fillText(d,a,e);let f="";for(let p=c+1;p<l.length;++p)f+=l[p];h=this.context.measureText(f).width,a+=u-h+s,u=h}}updateTexture(){const r=this.canvas;if(this._style.trim){const s=pA(r);s.data&&(r.width=s.width,r.height=s.height,this.context.putImageData(s.data,0,0))}const t=this._texture,e=this._style,i=e.trim?0:e.padding,n=t.baseTexture;t.trim.width=t._frame.width=r.width/this._resolution,t.trim.height=t._frame.height=r.height/this._resolution,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),n.setRealSize(r.width,r.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0),this.updateText(!0),super._render(r)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(r,t){return this.updateText(!0),this._textureID===-1&&(r=!1),super.getBounds(r,t)}getLocalBounds(r){return this.updateText(!0),super.getLocalBounds.call(this,r)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(r,t,e){const i=r.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let n;const s=r.dropShadow?r.dropShadowDistance:0,o=r.padding||0,a=this.canvas.width/this._resolution-s-o*2,l=this.canvas.height/this._resolution-s-o*2,u=i.slice(),h=r.fillGradientStops.slice();if(!h.length){const c=u.length+1;for(let d=1;d<c;++d)h.push(d/c)}if(u.unshift(i[0]),h.unshift(0),u.push(i[i.length-1]),h.push(1),r.fillGradientType===wu.LINEAR_VERTICAL){n=this.context.createLinearGradient(a/2,o,a/2,l+o);const c=e.fontProperties.fontSize+r.strokeThickness;for(let d=0;d<t.length;d++){const f=e.lineHeight*(d-1)+c,p=e.lineHeight*d;let _=p;d>0&&f>p&&(_=(p+f)/2);const x=p+c,g=e.lineHeight*(d+1);let v=x;d+1<t.length&&g<x&&(v=(x+g)/2);const m=(v-_)/l;for(let y=0;y<u.length;y++){let S=0;typeof h[y]=="number"?S=h[y]:S=y/u.length;let E=Math.min(1,Math.max(0,_/l+S*m));E=Number(E.toFixed(5)),n.addColorStop(E,u[y])}}}else{n=this.context.createLinearGradient(o,l/2,a+o,l/2);const c=u.length+1;let d=1;for(let f=0;f<u.length;f++){let p;typeof h[f]=="number"?p=h[f]:p=d/c,n.addColorStop(p,u[f]),d++}}return n}destroy(r){typeof r=="boolean"&&(r={children:r}),r=Object.assign({},wb,r),super.destroy(r),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(r){this.updateText(!0);const t=Zn(this.scale.x)||1;this.scale.x=t*r/this._texture.orig.width,this._width=r}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(r){this.updateText(!0);const t=Zn(this.scale.y)||1;this.scale.y=t*r/this._texture.orig.height,this._height=r}get style(){return this._style}set style(r){r=r||{},r instanceof an?this._style=r:this._style=new an(r),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)}get resolution(){return this._resolution}set resolution(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)}};let jd=sd;jd.defaultAutoResolution=!0;class Nb{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function Rb(r,t){var i;let e=!1;if((i=r==null?void 0:r._textures)!=null&&i.length){for(let n=0;n<r._textures.length;n++)if(r._textures[n]instanceof pt){const s=r._textures[n].baseTexture;t.includes(s)||(t.push(s),e=!0)}}return e}function Ib(r,t){if(r.baseTexture instanceof At){const e=r.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function Pb(r,t){if(r._texture&&r._texture instanceof pt){const e=r._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function Db(r,t){return t instanceof jd?(t.updateText(!0),!0):!1}function Ob(r,t){if(t instanceof an){const e=t.toFontString();return se.measureFont(e),!0}return!1}function Fb(r,t){if(r instanceof jd){t.includes(r.style)||t.push(r.style),t.includes(r)||t.push(r);const e=r._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function Lb(r,t){return r instanceof an?(t.includes(r)||t.push(r),!0):!1}const Wm=class{constructor(r){this.limiter=new Nb(Wm.uploadsPerFrame),this.renderer=r,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(Fb),this.registerFindHook(Lb),this.registerFindHook(Rb),this.registerFindHook(Ib),this.registerFindHook(Pb),this.registerUploadHook(Db),this.registerUploadHook(Ob)}upload(r){return new Promise(t=>{r&&this.add(r),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Se.system.addOnce(this.tick,this,on.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const r=this.queue[0];let t=!1;if(r&&!r._destroyed){for(let e=0,i=this.uploadHooks.length;e<i;e++)if(this.uploadHooks[e](this.uploadHookHelper,r)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Se.system.addOnce(this.tick,this,on.UTILITY);else{this.ticking=!1;const r=this.completes.slice(0);this.completes.length=0;for(let t=0,e=r.length;t<e;t++)r[t]()}}registerFindHook(r){return r&&this.addHooks.push(r),this}registerUploadHook(r){return r&&this.uploadHooks.push(r),this}add(r){for(let t=0,e=this.addHooks.length;t<e&&!this.addHooks[t](r,this.queue);t++);if(r instanceof ze)for(let t=r.children.length-1;t>=0;t--)this.add(r.children[t]);return this}destroy(){this.ticking&&Se.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let au=Wm;au.uploadsPerFrame=4;Object.defineProperties(ot,{UPLOADS_PER_FRAME:{get(){return au.uploadsPerFrame},set(r){Pt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),au.uploadsPerFrame=r}}});function Ym(r,t){return t instanceof At?(t._glTextures[r.CONTEXT_UID]||r.texture.bind(t),!0):!1}function Bb(r,t){if(!(t instanceof Cu))return!1;const{geometry:e}=t;t.finishPoly(),e.updateBatches();const{batches:i}=e;for(let n=0;n<i.length;n++){const{texture:s}=i[n].style;s&&Ym(r,s.baseTexture)}return e.batchable||r.geometry.bind(e,t._resolveDirectShader(r)),!0}function Mb(r,t){return r instanceof Cu?(t.push(r),!0):!1}class qm extends au{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(Mb),this.registerUploadHook(Ym),this.registerUploadHook(Bb)}}qm.extension={name:"prepare",type:st.RendererSystem};xt.add(qm);var kb=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Ub=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Hb=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Np=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,jb=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Nl=new Bt;class Km extends Tu{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new am,this.state=ii.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=Tr.from(Np,jb,e),this.shader=t.context.webGLVersion>1?Tr.from(Ub,kb,e):Tr.from(Np,Hb,e)}render(t){const e=this.renderer,i=this.quad;let n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;n=i.uvs,n[0]=n[6]=-s,n[1]=n[3]=-o,n[2]=n[4]=1-s,n[5]=n[7]=1-o,i.invalidate();const a=t._texture,l=a.baseTexture,u=l.alphaMode>0,h=t.tileTransform.localTransform,c=t.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[e.CONTEXT_UID]?d=l.wrapMode!==Ei.CLAMP:l.wrapMode===Ei.CLAMP&&(l.wrapMode=Ei.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,_=a.height,x=t._width,g=t._height;Nl.set(h.a*p/x,h.b*p/g,h.c*_/x,h.d*_/g,h.tx/x,h.ty/g),Nl.invert(),d?Nl.prepend(c.mapCoord):(f.uniforms.uMapCoord=c.mapCoord.toArray(!0),f.uniforms.uClampFrame=c.uClampFrame,f.uniforms.uClampOffset=c.uClampOffset),f.uniforms.uTransform=Nl.toArray(!0),f.uniforms.uColor=Gx(t.tint,t.worldAlpha,f.uniforms.uColor,u),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,e.shader.bind(f),e.geometry.bind(i),this.state.blendMode=$x(t.blendMode,u),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Km.extension={name:"tilingSprite",type:st.RendererPlugin};xt.add(Km);const Ko=class{constructor(r,t,e=null){this.linkedSheets=[],this._texture=r instanceof pt?r:null,this.baseTexture=r instanceof At?r:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const i=this.baseTexture.resource;this.resolution=this._updateResolution(e||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(r=null){const{scale:t}=this.data.meta;let e=Ai(r,null);return e===null&&(e=parseFloat(t??"1")),e!==1&&this.baseTexture.setResolution(e),e}parse(){return new Promise(r=>{this._callback=r,this._batchIndex=0,this._frameKeys.length<=Ko.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(r){let t=r;const e=Ko.BATCH_SIZE;for(;t-r<e&&t<this._frameKeys.length;){const i=this._frameKeys[t],n=this._frames[i],s=n.frame;if(s){let o=null,a=null;const l=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,u=new Nt(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);n.rotated?o=new Nt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):o=new Nt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(a=new Nt(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new pt(this.baseTexture,o,u,a,n.rotated?2:0,n.anchor),pt.addToCache(this.textures[i],i)}t++}}_processAnimations(){const r=this.data.animations||{};for(const t in r){this.animations[t]=[];for(let e=0;e<r[t].length;e++){const i=r[t][e];this.animations[t].push(this.textures[i])}}}_parseComplete(){const r=this._callback;this._callback=null,this._batchIndex=0,r.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ko.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ko.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(r=!1){var t;for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,r&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let od=Ko;od.BATCH_SIZE=1e3;const $b=["jpg","png","jpeg","avif","webp"];function Zm(r,t,e){const i={};if(r.forEach(n=>{i[n]=t}),Object.keys(t.textures).forEach(n=>{i[n]=t.textures[n]}),!e){const n=ue.dirname(r[0]);t.linkedSheets.forEach((s,o)=>{const a=Zm([`${n}/${t.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(i,a)})}return i}const Gb={extension:st.Asset,cache:{test:r=>r instanceof od,getCacheableAssets:(r,t)=>Zm(r,t,!1)},resolver:{test:r=>{const e=r.split("?")[0].split("."),i=e.pop(),n=e.pop();return i==="json"&&$b.includes(n)},parse:r=>{var e;const t=r.split(".");return{resolution:parseFloat(((e=ot.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:t[t.length-2],src:r}}},loader:{extension:{type:st.LoadParser,priority:wr.Normal},async testParse(r,t){return ue.extname(t.src).toLowerCase()===".json"&&!!r.frames},async parse(r,t,e){var u,h;let i=ue.dirname(t.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");let n=i+r.meta.image;n=ed(n,t.src);const o=(await e.load([n]))[n],a=new od(o.baseTexture,r,t.src);await a.parse();const l=(u=r==null?void 0:r.meta)==null?void 0:u.related_multi_packs;if(Array.isArray(l)){const c=[];for(const f of l){if(typeof f!="string")continue;let p=i+f;(h=t.data)!=null&&h.ignoreMultiPack||(p=ed(p,t.src),c.push(e.load({src:p,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(c);a.linkedSheets=d,d.forEach(f=>{f.linkedSheets=[a].concat(a.linkedSheets.filter(p=>p!==f))})}return a},unload(r){r.destroy(!0)}}};xt.add(Gb);class lu{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class $l{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in e){const o=e[s].match(/^[a-z]+/gm)[0],a=e[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const h=a[u].split("="),c=h[0],d=h[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[c]=p}i[o].push(l)}const n=new lu;return i.info.forEach(s=>n.info.push({face:s.face,size:parseInt(s.size,10)})),i.common.forEach(s=>n.common.push({lineHeight:parseInt(s.lineHeight,10)})),i.page.forEach(s=>n.page.push({id:parseInt(s.id,10),file:s.file})),i.char.forEach(s=>n.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),i.kerning.forEach(s=>n.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),i.distanceField.forEach(s=>n.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),n}}class ad{static test(t){const e=t;return"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new lu,i=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let u=0;u<i.length;u++)e.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(let u=0;u<n.length;u++)e.common.push({lineHeight:parseInt(n[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)e.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<o.length;u++){const h=o[u];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)e.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)e.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return e}}class ld{static test(t){return typeof t=="string"&&t.includes("<font>")?ad.test(ot.ADAPTER.parseXML(t)):!1}static parse(t){return ad.parse(ot.ADAPTER.parseXML(t))}}const nc=[$l,ad,ld];function zb(r){for(let t=0;t<nc.length;t++)if(nc[t].test(r))return nc[t];return null}function Vb(r,t,e,i,n,s){const o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=e.dropShadow?e.dropShadowDistance:0,u=e.padding||0,h=r.width/i-l-u*2,c=r.height/i-l-u*2,d=o.slice(),f=e.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let _=1;_<p;++_)f.push(_/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),e.fillGradientType===wu.LINEAR_VERTICAL){a=t.createLinearGradient(h/2,u,h/2,c+u);let p=0;const x=(s.fontProperties.fontSize+e.strokeThickness)/c;for(let g=0;g<n.length;g++){const v=s.lineHeight*g;for(let m=0;m<d.length;m++){let y=0;typeof f[m]=="number"?y=f[m]:y=m/d.length;const S=v/c+y*x;let E=Math.max(p,S);E=Math.min(E,1),a.addColorStop(E,d[m]),p=E}}}else{a=t.createLinearGradient(u,c/2,h+u,c/2);const p=d.length+1;let _=1;for(let x=0;x<d.length;x++){let g;typeof f[x]=="number"?g=f[x]:g=_/p,a.addColorStop(g,d[x]),_++}}return a}function Xb(r,t,e,i,n,s,o){const a=e.text,l=e.fontProperties;t.translate(i,n),t.scale(s,s);const u=o.strokeThickness/2,h=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=Vb(r,t,o,s,[a],e),t.strokeStyle=o.stroke,o.dropShadow){const c=o.dropShadowColor,d=la(typeof c=="number"?c:Id(c)),f=o.dropShadowBlur*s,p=o.dropShadowDistance*s;t.shadowColor=`rgba(${d[0]*255},${d[1]*255},${d[2]*255},${o.dropShadowAlpha})`,t.shadowBlur=f,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*p,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*p}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,u,h+e.lineHeight-l.descent),o.fill&&t.fillText(a,u,h+e.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Gl(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function Qm(r){return Array.from?Array.from(r):r.split("")}function Wb(r){typeof r=="string"&&(r=[r]);const t=[];for(let e=0,i=r.length;e<i;e++){const n=r[e];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...Qm(n))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const Ke=class{constructor(r,t,e){var u;const[i]=r.info,[n]=r.common,[s]=r.page,[o]=r.distanceField,a=Ai(s.file),l={};this._ownsTextures=e,this.font=i.face,this.size=i.size,this.lineHeight=n.lineHeight/a,this.chars={},this.pageTextures=l;for(let h=0;h<r.page.length;h++){const{id:c,file:d}=r.page[h];l[c]=t instanceof Array?t[h]:t[d],o!=null&&o.fieldType&&o.fieldType!=="none"&&(l[c].baseTexture.alphaMode=sr.NO_PREMULTIPLIED_ALPHA,l[c].baseTexture.mipmap=Sr.OFF)}for(let h=0;h<r.char.length;h++){const{id:c,page:d}=r.char[h];let{x:f,y:p,width:_,height:x,xoffset:g,yoffset:v,xadvance:m}=r.char[h];f/=a,p/=a,_/=a,x/=a,g/=a,v/=a,m/=a;const y=new Nt(f+l[d].frame.x/a,p+l[d].frame.y/a,_,x);this.chars[c]={xOffset:g,yOffset:v,xAdvance:m,kerning:{},texture:new pt(l[d].baseTexture,y),page:d}}for(let h=0;h<r.kerning.length;h++){let{first:c,second:d,amount:f}=r.kerning[h];c/=a,d/=a,f/=a,this.chars[d]&&(this.chars[d].kerning[c]=f)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((u=o==null?void 0:o.fieldType)==null?void 0:u.toLowerCase())??"none"}destroy(){for(const r in this.chars)this.chars[r].texture.destroy(),this.chars[r].texture=null;for(const r in this.pageTextures)this._ownsTextures&&this.pageTextures[r].destroy(!0),this.pageTextures[r]=null;this.chars=null,this.pageTextures=null}static install(r,t,e){let i;if(r instanceof lu)i=r;else{const s=zb(r);if(!s)throw new Error("Unrecognized data format for font.");i=s.parse(r)}t instanceof pt&&(t=[t]);const n=new Ke(i,t,e);return Ke.available[n.font]=n,n}static uninstall(r){const t=Ke.available[r];if(!t)throw new Error(`No font found named '${r}'`);t.destroy(),delete Ke.available[r]}static from(r,t,e){if(!r)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:n,resolution:s,textureWidth:o,textureHeight:a,...l}=Object.assign({},Ke.defaultOptions,e),u=Wb(i),h=t instanceof an?t:new an(t),c=o,d=new lu;d.info[0]={face:h.fontFamily,size:h.fontSize},d.common[0]={lineHeight:h.fontSize};let f=0,p=0,_,x,g,v=0;const m=[];for(let S=0;S<u.length;S++){_||(_=ot.ADAPTER.createCanvas(),_.width=o,_.height=a,x=_.getContext("2d"),g=new At(_,{resolution:s,...l}),m.push(new pt(g)),d.page.push({id:m.length-1,file:""}));const E=u[S],b=se.measureText(E,h,!1,_),T=b.width,C=Math.ceil(b.height),D=Math.ceil((h.fontStyle==="italic"?2:1)*T);if(p>=a-C*s){if(p===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${E}')`);--S,_=null,x=null,g=null,p=0,f=0,v=0;continue}if(v=Math.max(C+b.fontProperties.descent,v),D*s+f>=c){if(f===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${E}')`);--S,p+=v*s,p=Math.ceil(p),f=0,v=0;continue}Xb(_,x,b,f,p,s,h);const I=Gl(b.text);d.char.push({id:I,page:m.length-1,x:f/s,y:p/s,width:D,height:C,xoffset:0,yoffset:0,xadvance:T-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0)}),f+=(D+2*n)*s,f=Math.ceil(f)}for(let S=0,E=u.length;S<E;S++){const b=u[S];for(let T=0;T<E;T++){const C=u[T],D=x.measureText(b).width,I=x.measureText(C).width,M=x.measureText(b+C).width-(D+I);M&&d.kerning.push({first:Gl(b),second:Gl(C),amount:M})}}const y=new Ke(d,m,!0);return Ke.available[r]!==void 0&&Ke.uninstall(r),Ke.available[r]=y,y}};let Ae=Ke;Ae.ALPHA=[["a","z"],["A","Z"]," "];Ae.NUMERIC=[["0","9"]];Ae.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];Ae.ASCII=[[" ","~"]];Ae.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Ke.ALPHANUMERIC};Ae.available={};var Yb=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,qb=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const Rp=[],Ip=[],Pp=[],Jm=class extends ze{constructor(r,t={}){super(),this._tint=16777215;const{align:e,tint:i,maxWidth:n,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},Jm.styleDefaults,t);if(!Ae.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=e,this._tint=i,this._font=void 0,this._fontName=o,this._fontSize=a,this.text=r,this._maxWidth=n,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new yi(()=>{this.dirty=!0},this,0,0),this._roundPixels=ot.ROUND_PIXELS,this.dirty=!0,this._resolution=ot.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var D;const r=Ae.available[this._fontName],t=this.fontSize,e=t/r.size,i=new Rt,n=[],s=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=Qm(a),u=this._maxWidth*r.size/t,h=r.distanceFieldType==="none"?Rp:Ip;let c=null,d=0,f=0,p=0,_=-1,x=0,g=0,v=0,m=0;for(let I=0;I<l.length;I++){const L=l[I],M=Gl(L);if(/(?:\s)/.test(L)&&(_=I,x=d,m++),L==="\r"||L===`
`){s.push(d),o.push(-1),f=Math.max(f,d),++p,++g,i.x=0,i.y+=r.lineHeight,c=null,m=0;continue}const k=r.chars[M];if(!k)continue;c&&k.kerning[c]&&(i.x+=k.kerning[c]);const q=Pp.pop()||{texture:pt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Rt};q.texture=k.texture,q.line=p,q.charCode=M,q.position.x=Math.round(i.x+k.xOffset+this._letterSpacing/2),q.position.y=Math.round(i.y+k.yOffset),q.prevSpaces=m,n.push(q),d=q.position.x+Math.max(k.xAdvance-k.xOffset,k.texture.orig.width),i.x+=k.xAdvance+this._letterSpacing,v=Math.max(v,k.yOffset+k.texture.height),c=M,_!==-1&&u>0&&i.x>u&&(++g,ls(n,1+_-g,1+I-_),I=_,_=-1,s.push(x),o.push(n.length>0?n[n.length-1].prevSpaces:0),f=Math.max(f,x),p++,i.x=0,i.y+=r.lineHeight,c=null,m=0)}const y=l[l.length-1];y!=="\r"&&y!==`
`&&(/(?:\s)/.test(y)&&(d=x),s.push(d),f=Math.max(f,d),o.push(-1));const S=[];for(let I=0;I<=p;I++){let L=0;this._align==="right"?L=f-s[I]:this._align==="center"?L=(f-s[I])/2:this._align==="justify"&&(L=o[I]<0?0:(f-s[I])/o[I]),S.push(L)}const E=n.length,b={},T=[],C=this._activePagesMeshData;h.push(...C);for(let I=0;I<E;I++){const L=n[I].texture,M=L.baseTexture.uid;if(!b[M]){let k=h.pop();if(!k){const ht=new vb;let it,at;r.distanceFieldType==="none"?(it=new bp(pt.EMPTY),at=Et.NORMAL):(it=new bp(pt.EMPTY,{program:tr.from(qb,Yb),uniforms:{uFWidth:0}}),at=Et.NORMAL_NPM);const Dt=new nd(ht,it);Dt.blendMode=at,k={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Dt,vertices:null,uvs:null,indices:null}}k.index=0,k.indexCount=0,k.vertexCount=0,k.uvsCount=0,k.total=0;const{_textureCache:q}=this;q[M]=q[M]||new pt(L.baseTexture),k.mesh.texture=q[M],k.mesh.tint=this._tint,T.push(k),b[M]=k}b[M].total++}for(let I=0;I<C.length;I++)T.includes(C[I])||this.removeChild(C[I].mesh);for(let I=0;I<T.length;I++)T[I].mesh.parent!==this&&this.addChild(T[I].mesh);this._activePagesMeshData=T;for(const I in b){const L=b[I],M=L.total;if(!(((D=L.indices)==null?void 0:D.length)>6*M)||L.vertices.length<nd.BATCHABLE_SIZE*2)L.vertices=new Float32Array(4*2*M),L.uvs=new Float32Array(4*2*M),L.indices=new Uint16Array(6*M);else{const k=L.total,q=L.vertices;for(let ht=k*4*2;ht<q.length;ht++)q[ht]=0}L.mesh.size=6*M}for(let I=0;I<E;I++){const L=n[I];let M=L.position.x+S[L.line]*(this._align==="justify"?L.prevSpaces:1);this._roundPixels&&(M=Math.round(M));const k=M*e,q=L.position.y*e,ht=L.texture,it=b[ht.baseTexture.uid],at=ht.frame,Dt=ht._uvs,Tt=it.index++;it.indices[Tt*6+0]=0+Tt*4,it.indices[Tt*6+1]=1+Tt*4,it.indices[Tt*6+2]=2+Tt*4,it.indices[Tt*6+3]=0+Tt*4,it.indices[Tt*6+4]=2+Tt*4,it.indices[Tt*6+5]=3+Tt*4,it.vertices[Tt*8+0]=k,it.vertices[Tt*8+1]=q,it.vertices[Tt*8+2]=k+at.width*e,it.vertices[Tt*8+3]=q,it.vertices[Tt*8+4]=k+at.width*e,it.vertices[Tt*8+5]=q+at.height*e,it.vertices[Tt*8+6]=k,it.vertices[Tt*8+7]=q+at.height*e,it.uvs[Tt*8+0]=Dt.x0,it.uvs[Tt*8+1]=Dt.y0,it.uvs[Tt*8+2]=Dt.x1,it.uvs[Tt*8+3]=Dt.y1,it.uvs[Tt*8+4]=Dt.x2,it.uvs[Tt*8+5]=Dt.y2,it.uvs[Tt*8+6]=Dt.x3,it.uvs[Tt*8+7]=Dt.y3}this._textWidth=f*e,this._textHeight=(i.y+r.lineHeight)*e;for(const I in b){const L=b[I];if(this.anchor.x!==0||this.anchor.y!==0){let ht=0;const it=this._textWidth*this.anchor.x,at=this._textHeight*this.anchor.y;for(let Dt=0;Dt<L.total;Dt++)L.vertices[ht++]-=it,L.vertices[ht++]-=at,L.vertices[ht++]-=it,L.vertices[ht++]-=at,L.vertices[ht++]-=it,L.vertices[ht++]-=at,L.vertices[ht++]-=it,L.vertices[ht++]-=at}this._maxLineHeight=v*e;const M=L.mesh.geometry.getBuffer("aVertexPosition"),k=L.mesh.geometry.getBuffer("aTextureCoord"),q=L.mesh.geometry.getIndex();M.data=L.vertices,k.data=L.uvs,q.data=L.indices,M.update(),k.update(),q.update()}for(let I=0;I<n.length;I++)Pp.push(n[I]);this._font=r,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:e,size:i}=Ae.available[this._fontName];if(e!=="none"){const{a:n,b:s,c:o,d:a}=this.worldTransform,l=Math.sqrt(n*n+s*s),u=Math.sqrt(o*o+a*a),h=(Math.abs(l)+Math.abs(u))/2,c=this.fontSize/i,d=r._view.resolution;for(const f of this._activePagesMeshData)f.mesh.shader.uniforms.uFWidth=h*t*c*d}super._render(r)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const r=Ae.available[this._fontName];if(!r)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==r&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(r){if(this._tint!==r){this._tint=r;for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=r}}get align(){return this._align}set align(r){this._align!==r&&(this._align=r,this.dirty=!0)}get fontName(){return this._fontName}set fontName(r){if(!Ae.available[r])throw new Error(`Missing BitmapFont "${r}"`);this._fontName!==r&&(this._fontName=r,this.dirty=!0)}get fontSize(){return this._fontSize??Ae.available[this._fontName].size}set fontSize(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)}get anchor(){return this._anchor}set anchor(r){typeof r=="number"?this._anchor.set(r):this._anchor.copyFrom(r)}get text(){return this._text}set text(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(r){r!==this._roundPixels&&(this._roundPixels=r,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)}destroy(r){const{_textureCache:t}=this,i=Ae.available[this._fontName].distanceFieldType==="none"?Rp:Ip;i.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],i.filter(n=>t[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=pt.EMPTY});for(const n in t)t[n].destroy(),delete t[n];this._font=null,this._textureCache=null,super.destroy(r)}};let Kb=Jm;Kb.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const Zb=[".xml",".fnt"],Qb={extension:{type:st.LoadParser,priority:wr.Normal},test(r){return Zb.includes(ue.extname(r).toLowerCase())},async testParse(r){return $l.test(r)||ld.test(r)},async parse(r,t,e){const i=$l.test(r)?$l.parse(r):ld.parse(r),{src:n}=t,{page:s}=i,o=[];for(let u=0;u<s.length;++u){const h=s[u].file;let c=ue.join(ue.dirname(n),h);c=ed(c,n),o.push(c)}const a=await e.load(o),l=o.map(u=>a[u]);return Ae.install(i,l,!0)},async load(r,t){return(await ot.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};xt.add(Qb);const Jb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAAF9JREFUGJWFj8ENgDAMA6+IeUgmoVvBPGUSguR5wofyAYFfZ8myZfhRMZuy874HAO6WABFHGQCWZQVId0t3y8sDMHZobXudGDrUOiMJSdQ6fze0tt2hOyDp98VDEUc5AZR4I9GJyI92AAAAAElFTkSuQmCC";class ye{constructor(t){N(this,"opcode");this.opcode=t}}var Ar=(r=>(r[r.Step=0]="Step",r[r.OneStep=1]="OneStep",r[r.Can=2]="Can",r))(Ar||{}),ne=(r=>(r[r.Up=0]="Up",r[r.Down=1]="Down",r[r.Left=2]="Left",r[r.Right=3]="Right",r))(ne||{}),Wt=(r=>(r[r.Add=0]="Add",r[r.Sub=1]="Sub",r[r.Div=2]="Div",r[r.Mul=3]="Mul",r[r.Mod=4]="Mod",r[r.CmpEq=5]="CmpEq",r[r.CmpNeq=6]="CmpNeq",r[r.CmpLt=7]="CmpLt",r[r.CmpGt=8]="CmpGt",r[r.CmpLteq=9]="CmpLteq",r[r.CmpGteq=10]="CmpGteq",r[r.Not=11]="Not",r[r.BTrue=12]="BTrue",r[r.BFalse=13]="BFalse",r[r.Branch=14]="Branch",r[r.Trap=15]="Trap",r[r.Set=16]="Set",r[r.Get=17]="Get",r[r.LdInt=18]="LdInt",r))(Wt||{});class t_ extends ye{constructor(){super(0)}}class e_ extends ye{constructor(){super(1)}}class r_ extends ye{constructor(){super(2)}}class i_ extends ye{constructor(){super(3)}}class n_ extends ye{constructor(){super(5)}}class s_ extends ye{constructor(){super(6)}}class o_ extends ye{constructor(){super(7)}}class a_ extends ye{constructor(){super(8)}}class l_ extends ye{constructor(){super(9)}}class u_ extends ye{constructor(){super(10)}}class h_ extends ye{constructor(e){super(13);N(this,"to");this.to=e}}class cs extends ye{constructor(e){super(15);N(this,"id");this.id=e}}let c_=class extends ye{constructor(e){super(16);N(this,"id");this.id=e}};class d_ extends ye{constructor(e){super(17);N(this,"id");this.id=e}}class vi extends ye{constructor(e){super(18);N(this,"integer");this.integer=e}}class tC{constructor(){N(this,"dictionary",{});N(this,"code",[]);N(this,"traps",[]);N(this,"stack",[]);N(this,"ip",0);N(this,"canExecute",!0)}LoadCode(t){this.code=t}SetLocal(t,e){this.dictionary[t]=e}GetLocal(t){return this.dictionary[t]??0}SetTraps(t){this.traps=t}ExecuteOneInstruction(t=-1){if(this.ip=t>=0?t:this.ip,!this.canExecute||this.ip>=this.code.length)return;const e=this.code[this.ip];switch(e.opcode){case Wt.Add:this.stack.push(this.stack.pop()+this.stack.pop());break;case Wt.Sub:this.stack.push(this.stack.pop()-this.stack.pop());break;case Wt.Div:this.stack.push(this.stack.pop()/this.stack.pop());break;case Wt.Mul:this.stack.push(this.stack.pop()*this.stack.pop());break;case Wt.Mod:this.stack.push(this.stack.pop()%this.stack.pop());break;case Wt.CmpEq:this.stack.push(Number(this.stack.pop()==this.stack.pop()));break;case Wt.CmpNeq:this.stack.push(Number(this.stack.pop()!=this.stack.pop()));break;case Wt.CmpLt:this.stack.push(Number(this.stack.pop()<this.stack.pop()));break;case Wt.CmpGt:this.stack.push(Number(this.stack.pop()>this.stack.pop()));break;case Wt.CmpLteq:this.stack.push(Number(this.stack.pop()<=this.stack.pop()));break;case Wt.CmpGteq:this.stack.push(Number(this.stack.pop()>=this.stack.pop()));break;case Wt.Not:this.stack.push(Number(!this.stack.pop()));break;case Wt.BTrue:this.stack.pop()&&(this.ip=e.to-1);break;case Wt.BFalse:this.stack.pop()||(this.ip=e.to-1);break;case Wt.Branch:this.ip=e.to-1;break;case Wt.Trap:this.canExecute=!1;const i=this.traps[e.id].apply(this);i!==void 0&&this.stack.push(i);break;case Wt.Set:this.dictionary[e.id]=this.stack.pop();break;case Wt.Get:this.stack.push(this.dictionary[e.id]);break;case Wt.LdInt:this.stack.push(e.integer);break}this.ip++}SetIP(t){this.ip=t}}var Zo={},f_={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(f_,"__esModule",{value:!0});var p_={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(p_,"__esModule",{value:!0});var Nu={};function Dp(r,t){if(r===t)return 0;for(var e=r.length,i=t.length,n=0,s=Math.min(e,i);n<s;++n)if(r[n]!==t[n]){e=r[n],i=t[n];break}return e<i?-1:i<e?1:0}var eC=Object.prototype.hasOwnProperty,Op=Object.keys||function(r){var t=[];for(var e in r)eC.call(r,e)&&t.push(e);return t},Fp=Array.prototype.slice,sc;function x_(){return typeof sc<"u"?sc:sc=function(){return function(){}.name==="foo"}()}function Lp(r){return Object.prototype.toString.call(r)}function Bp(r){return Kn(r)||typeof nn.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r?!!(r instanceof DataView||r.buffer&&r.buffer instanceof ArrayBuffer):!1}function ve(r,t){r||_e(r,!0,t,"==",da)}var rC=/\s*function\s+([^\(\s]*)\s*/;function m_(r){if(Ji(r)){if(x_())return r.name;var t=r.toString(),e=t.match(rC);return e&&e[1]}}ve.AssertionError=Ru;function Ru(r){this.name="AssertionError",this.actual=r.actual,this.expected=r.expected,this.operator=r.operator,r.message?(this.message=r.message,this.generatedMessage=!1):(this.message=iC(this),this.generatedMessage=!0);var t=r.stackStartFunction||_e;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var e=new Error;if(e.stack){var i=e.stack,n=m_(t),s=i.indexOf(`
`+n);if(s>=0){var o=i.indexOf(`
`,s+1);i=i.substring(o+1)}this.stack=i}}}Ed(Ru,Error);function Mp(r,t){return typeof r=="string"?r.length<t?r:r.slice(0,t):r}function kp(r){if(x_()||!Ji(r))return er(r);var t=m_(r),e=t?": "+t:"";return"[Function"+e+"]"}function iC(r){return Mp(kp(r.actual),128)+" "+r.operator+" "+Mp(kp(r.expected),128)}function _e(r,t,e,i,n){throw new Ru({message:e,actual:r,expected:t,operator:i,stackStartFunction:n})}ve.fail=_e;function da(r,t){r||_e(r,!0,t,"==",da)}ve.ok=da;ve.equal=$d;function $d(r,t,e){r!=t&&_e(r,t,e,"==",$d)}ve.notEqual=Gd;function Gd(r,t,e){r==t&&_e(r,t,e,"!=",Gd)}ve.deepEqual=zd;function zd(r,t,e){xs(r,t,!1)||_e(r,t,e,"deepEqual",zd)}ve.deepStrictEqual=Vd;function Vd(r,t,e){xs(r,t,!0)||_e(r,t,e,"deepStrictEqual",Vd)}function xs(r,t,e,i){if(r===t)return!0;if(Kn(r)&&Kn(t))return Dp(r,t)===0;if(ds(r)&&ds(t))return r.getTime()===t.getTime();if(Qi(r)&&Qi(t))return r.source===t.source&&r.global===t.global&&r.multiline===t.multiline&&r.lastIndex===t.lastIndex&&r.ignoreCase===t.ignoreCase;if((r===null||typeof r!="object")&&(t===null||typeof t!="object"))return e?r===t:r==t;if(Bp(r)&&Bp(t)&&Lp(r)===Lp(t)&&!(r instanceof Float32Array||r instanceof Float64Array))return Dp(new Uint8Array(r.buffer),new Uint8Array(t.buffer))===0;if(Kn(r)!==Kn(t))return!1;i=i||{actual:[],expected:[]};var n=i.actual.indexOf(r);return n!==-1&&n===i.expected.indexOf(t)?!0:(i.actual.push(r),i.expected.push(t),nC(r,t,e,i))}function Up(r){return Object.prototype.toString.call(r)=="[object Arguments]"}function nC(r,t,e,i){if(r==null||t===null||t===void 0)return!1;if(Zl(r)||Zl(t))return r===t;if(e&&Object.getPrototypeOf(r)!==Object.getPrototypeOf(t))return!1;var n=Up(r),s=Up(t);if(n&&!s||!n&&s)return!1;if(n)return r=Fp.call(r),t=Fp.call(t),xs(r,t,e);var o=Op(r),a=Op(t),l,u;if(o.length!==a.length)return!1;for(o.sort(),a.sort(),u=o.length-1;u>=0;u--)if(o[u]!==a[u])return!1;for(u=o.length-1;u>=0;u--)if(l=o[u],!xs(r[l],t[l],e,i))return!1;return!0}ve.notDeepEqual=Xd;function Xd(r,t,e){xs(r,t,!1)&&_e(r,t,e,"notDeepEqual",Xd)}ve.notDeepStrictEqual=Wd;function Wd(r,t,e){xs(r,t,!0)&&_e(r,t,e,"notDeepStrictEqual",Wd)}ve.strictEqual=Yd;function Yd(r,t,e){r!==t&&_e(r,t,e,"===",Yd)}ve.notStrictEqual=qd;function qd(r,t,e){r===t&&_e(r,t,e,"!==",qd)}function Hp(r,t){if(!r||!t)return!1;if(Object.prototype.toString.call(t)=="[object RegExp]")return t.test(r);try{if(r instanceof t)return!0}catch{}return Error.isPrototypeOf(t)?!1:t.call({},r)===!0}function sC(r){var t;try{r()}catch(e){t=e}return t}function __(r,t,e,i){var n;if(typeof t!="function")throw new TypeError('"block" argument must be a function');typeof e=="string"&&(i=e,e=null),n=sC(t),i=(e&&e.name?" ("+e.name+").":".")+(i?" "+i:"."),r&&!n&&_e(n,e,"Missing expected exception"+i);var s=typeof i=="string",o=!r&&os(n),a=!r&&n&&!e;if((o&&s&&Hp(n,e)||a)&&_e(n,e,"Got unwanted exception"+i),r&&n&&e&&!Hp(n,e)||!r&&n)throw n}ve.throws=g_;function g_(r,t,e){__(!0,r,t,e)}ve.doesNotThrow=y_;function y_(r,t,e){__(!1,r,t,e)}ve.ifError=v_;function v_(r){if(r)throw r}const oC=Object.freeze(Object.defineProperty({__proto__:null,AssertionError:Ru,assert:da,deepEqual:zd,deepStrictEqual:Vd,default:ve,doesNotThrow:y_,equal:$d,fail:_e,ifError:v_,notDeepEqual:Xd,notDeepStrictEqual:Wd,notEqual:Gd,notStrictEqual:qd,ok:da,strictEqual:Yd,throws:g_},Symbol.toStringTag,{value:"Module"})),Be=lx(oC);var G={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(G,"__esModule",{value:!0});G.SuppressWarnings=G.Override=G.Nullable=G.NotNull=void 0;function aC(r,t,e){}G.NotNull=aC;function lC(r,t,e){}G.Nullable=lC;function uC(r,t,e){}G.Override=uC;function hC(r){return(t,e,i)=>{}}G.SuppressWarnings=hC;var ni={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.IntStream=void 0,function(t){t.EOF=-1,t.UNKNOWN_SOURCE_NAME="<unknown>"}(r.IntStream||(r.IntStream={}))})(ni);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Nr=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.ANTLRInputStream=void 0;const cC=Be,Rr=G,Rl=ni;class or{constructor(t){this.p=0,this.data=t,this.n=t.length}reset(){this.p=0}consume(){if(this.p>=this.n)throw cC(this.LA(1)===Rl.IntStream.EOF),new Error("cannot consume EOF");this.p<this.n&&this.p++}LA(t){return t===0?0:t<0&&(t++,this.p+t-1<0)||this.p+t-1>=this.n?Rl.IntStream.EOF:this.data.charCodeAt(this.p+t-1)}LT(t){return this.LA(t)}get index(){return this.p}get size(){return this.n}mark(){return-1}release(t){}seek(t){if(t<=this.p){this.p=t;return}for(t=Math.min(t,this.n);this.p<t;)this.consume()}getText(t){let e=t.a,i=t.b;i>=this.n&&(i=this.n-1);let n=i-e+1;return e>=this.n?"":this.data.substr(e,n)}get sourceName(){return this.name?this.name:Rl.IntStream.UNKNOWN_SOURCE_NAME}toString(){return this.data}}Nr([Rr.Override],or.prototype,"consume",null);Nr([Rr.Override],or.prototype,"LA",null);Nr([Rr.Override],or.prototype,"index",null);Nr([Rr.Override],or.prototype,"size",null);Nr([Rr.Override],or.prototype,"mark",null);Nr([Rr.Override],or.prototype,"release",null);Nr([Rr.Override],or.prototype,"seek",null);Nr([Rr.Override],or.prototype,"getText",null);Nr([Rr.Override],or.prototype,"sourceName",null);Nr([Rr.Override],or.prototype,"toString",null);Nu.ANTLRInputStream=or;var qs={},Ks={},Ir={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__decorate||function(n,s,o,a){var l=arguments.length,u=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,s,o,a);else for(var c=n.length-1;c>=0;c--)(h=n[c])&&(u=(l<3?h(u):l>3?h(s,o,u):h(s,o))||u);return l>3&&u&&Object.defineProperty(s,o,u),u};Object.defineProperty(r,"__esModule",{value:!0}),r.ATNState=void 0;const e=G;class i{constructor(){this.stateNumber=i.INVALID_STATE_NUMBER,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.optimizedTransitions=this.transitions}getStateNumber(){return this.stateNumber}get nonStopStateNumber(){return this.getStateNumber()}hashCode(){return this.stateNumber}equals(s){return s instanceof i?this.stateNumber===s.stateNumber:!1}get isNonGreedyExitState(){return!1}toString(){return String(this.stateNumber)}getTransitions(){return this.transitions.slice(0)}get numberOfTransitions(){return this.transitions.length}addTransition(s,o){if(this.transitions.length===0)this.epsilonOnlyTransitions=s.isEpsilon;else if(this.epsilonOnlyTransitions!==s.isEpsilon)throw this.epsilonOnlyTransitions=!1,new Error("ATN state "+this.stateNumber+" has both epsilon and non-epsilon transitions.");this.transitions.splice(o!==void 0?o:this.transitions.length,0,s)}transition(s){return this.transitions[s]}setTransition(s,o){this.transitions[s]=o}removeTransition(s){return this.transitions.splice(s,1)[0]}get onlyHasEpsilonTransitions(){return this.epsilonOnlyTransitions}setRuleIndex(s){this.ruleIndex=s}get isOptimized(){return this.optimizedTransitions!==this.transitions}get numberOfOptimizedTransitions(){return this.optimizedTransitions.length}getOptimizedTransition(s){return this.optimizedTransitions[s]}addOptimizedTransition(s){this.isOptimized||(this.optimizedTransitions=new Array),this.optimizedTransitions.push(s)}setOptimizedTransition(s,o){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions[s]=o}removeOptimizedTransition(s){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions.splice(s,1)}}t([e.Override],i.prototype,"hashCode",null),t([e.Override],i.prototype,"equals",null),t([e.Override],i.prototype,"toString",null),r.ATNState=i,function(n){n.INVALID_STATE_NUMBER=-1}(i=r.ATNState||(r.ATNState={}))})(Ir);var re={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.ATNStateType=void 0,function(t){t[t.INVALID_TYPE=0]="INVALID_TYPE",t[t.BASIC=1]="BASIC",t[t.RULE_START=2]="RULE_START",t[t.BLOCK_START=3]="BLOCK_START",t[t.PLUS_BLOCK_START=4]="PLUS_BLOCK_START",t[t.STAR_BLOCK_START=5]="STAR_BLOCK_START",t[t.TOKEN_START=6]="TOKEN_START",t[t.RULE_STOP=7]="RULE_STOP",t[t.BLOCK_END=8]="BLOCK_END",t[t.STAR_LOOP_BACK=9]="STAR_LOOP_BACK",t[t.STAR_LOOP_ENTRY=10]="STAR_LOOP_ENTRY",t[t.PLUS_LOOP_BACK=11]="PLUS_LOOP_BACK",t[t.LOOP_END=12]="LOOP_END"}(r.ATNStateType||(r.ATNStateType={}))})(re);var ws={},Pr={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Pr,"__esModule",{value:!0});var Oe=Pr.RecognitionException=void 0;class dC extends Error{constructor(t,e,i,n){super(n),this._offendingState=-1,this._recognizer=t,this.input=e,this.ctx=i,t&&(this._offendingState=t.state)}get offendingState(){return this._offendingState}setOffendingState(t){this._offendingState=t}get expectedTokens(){if(this._recognizer)return this._recognizer.atn.getExpectedTokens(this._offendingState,this.ctx)}get context(){return this.ctx}get inputStream(){return this.input}getOffendingToken(t){if(!(t&&t!==this._recognizer))return this.offendingToken}setOffendingToken(t,e){t===this._recognizer&&(this.offendingToken=e)}get recognizer(){return this._recognizer}}Oe=Pr.RecognitionException=dC;var Sa={},Ns={},ar={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var E_=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},fC=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(ar,"__esModule",{value:!0});ar.Transition=void 0;const T_=G;let fa=class{constructor(t){if(t==null)throw new Error("target cannot be null.");this.target=t}get isEpsilon(){return!1}get label(){}};fa.serializationNames=["INVALID","EPSILON","RANGE","RULE","PREDICATE","ATOM","ACTION","SET","NOT_SET","WILDCARD","PRECEDENCE"];E_([T_.NotNull],fa.prototype,"target",void 0);fa=E_([fC(0,T_.NotNull)],fa);ar.Transition=fa;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ns,"__esModule",{value:!0});Ns.AbstractPredicateTransition=void 0;const pC=ar;class xC extends pC.Transition{constructor(t){super(t)}}Ns.AbstractPredicateTransition=xC;var Sn={},lr={},Iu={},jt={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.MurmurHash=void 0,function(t){function i(l=0){return l}t.initialize=i;function n(l,u){u==null?u=0:typeof u=="string"?u=a(u):typeof u=="object"&&(u=u.hashCode());let x=u;return x=Math.imul(x,3432918353),x=x<<15|x>>>32-15,x=Math.imul(x,461845907),l=l^x,l=l<<13|l>>>32-13,l=Math.imul(l,5)+3864292196,l&4294967295}t.update=n;function s(l,u){return l=l^u*4,l=l^l>>>16,l=Math.imul(l,2246822507),l=l^l>>>13,l=Math.imul(l,3266489909),l=l^l>>>16,l}t.finish=s;function o(l,u=0){let h=i(u),c=0;for(let d of l)h=n(h,d),c++;return h=s(h,c),h}t.hashCode=o;function a(l){let u=l.length;if(u===0)return 0;let h=0;for(let c=0;c<u;c++){let d=l.charCodeAt(c);h=(h<<5>>>0)-h+d,h|=0}return h}}(r.MurmurHash||(r.MurmurHash={}))})(jt);var Me={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var A_=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Me,"__esModule",{value:!0});Me.ObjectEqualityComparator=void 0;const S_=G;class pa{hashCode(t){return t==null?0:t.hashCode()}equals(t,e){return t==null?e==null:t.equals(e)}}pa.INSTANCE=new pa;A_([S_.Override],pa.prototype,"hashCode",null);A_([S_.Override],pa.prototype,"equals",null);Me.ObjectEqualityComparator=pa;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var b_=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.DefaultEqualityComparator=void 0;const C_=G,mC=jt,jp=Me;class xa{hashCode(t){return t==null?0:typeof t=="string"||typeof t=="number"?mC.MurmurHash.hashCode([t]):jp.ObjectEqualityComparator.INSTANCE.hashCode(t)}equals(t,e){return t==null?e==null:typeof t=="string"||typeof t=="number"?t===e:jp.ObjectEqualityComparator.INSTANCE.equals(t,e)}}xa.INSTANCE=new xa;b_([C_.Override],xa.prototype,"hashCode",null);b_([C_.Override],xa.prototype,"equals",null);Iu.DefaultEqualityComparator=xa;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var xe=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},_C=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(lr,"__esModule",{value:!0});lr.Array2DHashSet=void 0;const gC=Be,yC=Iu,me=G,oc=jt,Il=16,ac=.75;class Vt{constructor(t,e=Il){if(this.n=0,this.threshold=Math.floor(Il*ac),t instanceof Vt){this.comparator=t.comparator,this.buckets=t.buckets.slice(0);for(let i=0;i<this.buckets.length;i++){let n=this.buckets[i];n&&(this.buckets[i]=n.slice(0))}this.n=t.n,this.threshold=t.threshold}else this.comparator=t||yC.DefaultEqualityComparator.INSTANCE,this.buckets=this.createBuckets(e)}getOrAdd(t){return this.n>this.threshold&&this.expand(),this.getOrAddImpl(t)}getOrAddImpl(t){let e=this.getBucket(t),i=this.buckets[e];if(!i)return i=[t],this.buckets[e]=i,this.n++,t;for(let n of i)if(this.comparator.equals(n,t))return n;return i.push(t),this.n++,t}get(t){if(t==null)return t;let e=this.getBucket(t),i=this.buckets[e];if(i){for(let n of i)if(this.comparator.equals(n,t))return n}}getBucket(t){return this.comparator.hashCode(t)&this.buckets.length-1}hashCode(){let t=oc.MurmurHash.initialize();for(let e of this.buckets)if(e!=null)for(let i of e){if(i==null)break;t=oc.MurmurHash.update(t,this.comparator.hashCode(i))}return t=oc.MurmurHash.finish(t,this.size),t}equals(t){return t===this?!0:!(t instanceof Vt)||t.size!==this.size?!1:this.containsAll(t)}expand(){let t=this.buckets,e=this.buckets.length*2,i=this.createBuckets(e);this.buckets=i,this.threshold=Math.floor(e*ac);let n=this.size;for(let s of t)if(s)for(let o of s){let a=this.getBucket(o),l=this.buckets[a];l||(l=[],this.buckets[a]=l),l.push(o)}gC(this.n===n)}add(t){return this.getOrAdd(t)===t}get size(){return this.n}get isEmpty(){return this.n===0}contains(t){return this.containsFast(this.asElementType(t))}containsFast(t){return t==null?!1:this.get(t)!=null}*[Symbol.iterator](){yield*this.toArray()}toArray(){const t=new Array(this.size);let e=0;for(let i of this.buckets)if(i!=null)for(let n of i){if(n==null)break;t[e++]=n}return t}containsAll(t){if(t instanceof Vt){let e=t;for(let i of e.buckets)if(i!=null)for(let n of i){if(n==null)break;if(!this.containsFast(this.asElementType(n)))return!1}}else for(let e of t)if(!this.containsFast(this.asElementType(e)))return!1;return!0}addAll(t){let e=!1;for(let i of t)this.getOrAdd(i)!==i&&(e=!0);return e}clear(){this.buckets=this.createBuckets(Il),this.n=0,this.threshold=Math.floor(Il*ac)}toString(){if(this.size===0)return"{}";let t="{",e=!0;for(let i of this.buckets)if(i!=null)for(let n of i){if(n==null)break;e?e=!1:t+=", ",t+=n.toString()}return t+="}",t}toTableString(){let t="";for(let e of this.buckets){if(e==null){t+=`null
`;continue}t+="[";let i=!0;for(let n of e)i?i=!1:t+=" ",n==null?t+="_":t+=n.toString();t+=`]
`}return t}asElementType(t){return t}createBuckets(t){return new Array(t)}}xe([me.NotNull],Vt.prototype,"comparator",void 0);xe([me.Override],Vt.prototype,"hashCode",null);xe([me.Override],Vt.prototype,"equals",null);xe([me.Override],Vt.prototype,"add",null);xe([me.Override],Vt.prototype,"size",null);xe([me.Override],Vt.prototype,"isEmpty",null);xe([me.Override],Vt.prototype,"contains",null);xe([_C(0,me.Nullable)],Vt.prototype,"containsFast",null);xe([me.Override],Vt.prototype,Symbol.iterator,null);xe([me.Override],Vt.prototype,"toArray",null);xe([me.Override],Vt.prototype,"containsAll",null);xe([me.Override],Vt.prototype,"addAll",null);xe([me.Override],Vt.prototype,"clear",null);xe([me.Override],Vt.prototype,"toString",null);xe([me.SuppressWarnings("unchecked")],Vt.prototype,"asElementType",null);xe([me.SuppressWarnings("unchecked")],Vt.prototype,"createBuckets",null);lr.Array2DHashSet=Vt;var bn={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var w_=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(bn,"__esModule",{value:!0});bn.ArrayEqualityComparator=void 0;const N_=G,vC=jt,EC=Me;class ma{hashCode(t){return t==null?0:vC.MurmurHash.hashCode(t,0)}equals(t,e){if(t==null)return e==null;if(e==null||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!EC.ObjectEqualityComparator.INSTANCE.equals(t[i],e[i]))return!1;return!0}}ma.INSTANCE=new ma;w_([N_.Override],ma.prototype,"hashCode",null);w_([N_.Override],ma.prototype,"equals",null);bn.ArrayEqualityComparator=ma;var Qt={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Qt,"__esModule",{value:!0});var ba=Qt.toCharArray=Qt.toMap=Qt.equals=Qt.join=Qt.escapeWhitespace=void 0;function TC(r,t){return t?r.replace(/ /,""):r.replace(/\t/,"\\t").replace(/\n/,"\\n").replace(/\r/,"\\r")}Qt.escapeWhitespace=TC;function AC(r,t){let e="",i=!0;for(let n of r)i?i=!1:e+=t,e+=n;return e}Qt.join=AC;function SC(r,t){return r===t?!0:r===void 0||t===void 0?!1:r.equals(t)}Qt.equals=SC;function bC(r){let t=new Map;for(let e=0;e<r.length;e++)t.set(r[e],e);return t}Qt.toMap=bC;function CC(r){if(typeof r=="string"){let t=new Uint16Array(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);return t}else return r.toCharArray()}ba=Qt.toCharArray=CC;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__decorate||function(d,f,p,_){var x=arguments.length,g=x<3?f:_===null?_=Object.getOwnPropertyDescriptor(f,p):_,v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(d,f,p,_);else for(var m=d.length-1;m>=0;m--)(v=d[m])&&(g=(x<3?v(g):x>3?v(f,p,g):v(f,p))||g);return x>3&&g&&Object.defineProperty(f,p,g),g},e=A&&A.__param||function(d,f){return function(p,_){f(p,_,d)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SemanticContext=void 0;const i=lr,n=bn,s=jt,o=G,a=Me,l=Qt;function u(d){let f;for(let p of d){if(f===void 0){f=p;continue}f.compareTo(p)<0&&(f=p)}return f}function h(d){let f;for(let p of d){if(f===void 0){f=p;continue}f.compareTo(p)>0&&(f=p)}return f}class c{static get NONE(){return c._NONE===void 0&&(c._NONE=new c.Predicate),c._NONE}evalPrecedence(f,p){return this}static and(f,p){if(!f||f===c.NONE)return p;if(p===c.NONE)return f;let _=new c.AND(f,p);return _.opnds.length===1?_.opnds[0]:_}static or(f,p){if(!f)return p;if(f===c.NONE||p===c.NONE)return c.NONE;let _=new c.OR(f,p);return _.opnds.length===1?_.opnds[0]:_}}r.SemanticContext=c,function(d){function _(S){let E=[];for(let b=0;b<S.length;b++){let T=S[b];T instanceof d.PrecedencePredicate&&(E.push(T),S.splice(b,1),b--)}return E}class x extends d{constructor(E=-1,b=-1,T=!1){super(),this.ruleIndex=E,this.predIndex=b,this.isCtxDependent=T}eval(E,b){let T=this.isCtxDependent?b:void 0;return E.sempred(T,this.ruleIndex,this.predIndex)}hashCode(){let E=s.MurmurHash.initialize();return E=s.MurmurHash.update(E,this.ruleIndex),E=s.MurmurHash.update(E,this.predIndex),E=s.MurmurHash.update(E,this.isCtxDependent?1:0),E=s.MurmurHash.finish(E,3),E}equals(E){return E instanceof x?this===E?!0:this.ruleIndex===E.ruleIndex&&this.predIndex===E.predIndex&&this.isCtxDependent===E.isCtxDependent:!1}toString(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"}}t([o.Override],x.prototype,"eval",null),t([o.Override],x.prototype,"hashCode",null),t([o.Override],x.prototype,"equals",null),t([o.Override],x.prototype,"toString",null),d.Predicate=x;class g extends d{constructor(E){super(),this.precedence=E}eval(E,b){return E.precpred(b,this.precedence)}evalPrecedence(E,b){if(E.precpred(b,this.precedence))return d.NONE}compareTo(E){return this.precedence-E.precedence}hashCode(){let E=1;return E=31*E+this.precedence,E}equals(E){return E instanceof g?this===E?!0:this.precedence===E.precedence:!1}toString(){return"{"+this.precedence+">=prec}?"}}t([o.Override],g.prototype,"eval",null),t([o.Override],g.prototype,"evalPrecedence",null),t([o.Override],g.prototype,"compareTo",null),t([o.Override],g.prototype,"hashCode",null),t([o.Override],g.prototype,"equals",null),t([o.Override],g.prototype,"toString",null),d.PrecedencePredicate=g;class v extends d{}d.Operator=v;let m=class zl extends v{constructor(E,b){super();let T=new i.Array2DHashSet(a.ObjectEqualityComparator.INSTANCE);E instanceof zl?T.addAll(E.opnds):T.add(E),b instanceof zl?T.addAll(b.opnds):T.add(b),this.opnds=T.toArray();let C=_(this.opnds),D=h(C);D&&this.opnds.push(D)}get operands(){return this.opnds}equals(E){return this===E?!0:E instanceof zl?n.ArrayEqualityComparator.INSTANCE.equals(this.opnds,E.opnds):!1}hashCode(){return s.MurmurHash.hashCode(this.opnds,40363613)}eval(E,b){for(let T of this.opnds)if(!T.eval(E,b))return!1;return!0}evalPrecedence(E,b){let T=!1,C=[];for(let I of this.opnds){let L=I.evalPrecedence(E,b);if(T=T||L!==I,L==null)return;L!==d.NONE&&C.push(L)}if(!T)return this;if(C.length===0)return d.NONE;let D=C[0];for(let I=1;I<C.length;I++)D=d.and(D,C[I]);return D}toString(){return l.join(this.opnds,"&&")}};t([o.Override],m.prototype,"operands",null),t([o.Override],m.prototype,"equals",null),t([o.Override],m.prototype,"hashCode",null),t([o.Override],m.prototype,"eval",null),t([o.Override],m.prototype,"evalPrecedence",null),t([o.Override],m.prototype,"toString",null),m=t([e(0,o.NotNull),e(1,o.NotNull)],m),d.AND=m;let y=class Vl extends v{constructor(E,b){super();let T=new i.Array2DHashSet(a.ObjectEqualityComparator.INSTANCE);E instanceof Vl?T.addAll(E.opnds):T.add(E),b instanceof Vl?T.addAll(b.opnds):T.add(b),this.opnds=T.toArray();let C=_(this.opnds),D=u(C);D&&this.opnds.push(D)}get operands(){return this.opnds}equals(E){return this===E?!0:E instanceof Vl?n.ArrayEqualityComparator.INSTANCE.equals(this.opnds,E.opnds):!1}hashCode(){return s.MurmurHash.hashCode(this.opnds,486279973)}eval(E,b){for(let T of this.opnds)if(T.eval(E,b))return!0;return!1}evalPrecedence(E,b){let T=!1,C=[];for(let I of this.opnds){let L=I.evalPrecedence(E,b);if(T=T||L!==I,L===d.NONE)return d.NONE;L&&C.push(L)}if(!T)return this;if(C.length===0)return;let D=C[0];for(let I=1;I<C.length;I++)D=d.or(D,C[I]);return D}toString(){return l.join(this.opnds,"||")}};t([o.Override],y.prototype,"operands",null),t([o.Override],y.prototype,"equals",null),t([o.Override],y.prototype,"hashCode",null),t([o.Override],y.prototype,"eval",null),t([o.Override],y.prototype,"evalPrecedence",null),t([o.Override],y.prototype,"toString",null),y=t([e(0,o.NotNull),e(1,o.NotNull)],y),d.OR=y}(c=r.SemanticContext||(r.SemanticContext={}))})(Sn);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ca=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},wC=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.PredicateTransition=void 0;const NC=Ns,ms=G,RC=Sn;let ln=class extends NC.AbstractPredicateTransition{constructor(t,e,i,n){super(t),this.ruleIndex=e,this.predIndex=i,this.isCtxDependent=n}get serializationType(){return 4}get isEpsilon(){return!0}matches(t,e,i){return!1}get predicate(){return new RC.SemanticContext.Predicate(this.ruleIndex,this.predIndex,this.isCtxDependent)}toString(){return"pred_"+this.ruleIndex+":"+this.predIndex}};Ca([ms.Override],ln.prototype,"serializationType",null);Ca([ms.Override],ln.prototype,"isEpsilon",null);Ca([ms.Override],ln.prototype,"matches",null);Ca([ms.Override,ms.NotNull],ln.prototype,"toString",null);ln=Ca([wC(0,ms.NotNull)],ln);Sa.PredicateTransition=ln;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var R_=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},IC=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(ws,"__esModule",{value:!0});var Kd=ws.FailedPredicateException=void 0;const PC=Pr,I_=G,DC=Sa;let uu=class P_ extends PC.RecognitionException{constructor(t,e,i){super(t,t.inputStream,t.context,P_.formatMessage(e,i));let s=t.interpreter.atn.states[t.state].transition(0);s instanceof DC.PredicateTransition?(this._ruleIndex=s.ruleIndex,this._predicateIndex=s.predIndex):(this._ruleIndex=0,this._predicateIndex=0),this._predicate=e,super.setOffendingToken(t,t.currentToken)}get ruleIndex(){return this._ruleIndex}get predicateIndex(){return this._predicateIndex}get predicate(){return this._predicate}static formatMessage(t,e){return e||`failed predicate: {${t}}?`}};R_([I_.NotNull],uu,"formatMessage",null);uu=R_([IC(0,I_.NotNull)],uu);Kd=ws.FailedPredicateException=uu;var Cn={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var OC=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},FC=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.InputMismatchException=void 0;const LC=Pr,BC=G;let ud=class extends LC.RecognitionException{constructor(t,e,i){i===void 0&&(i=t.context),super(t,t.inputStream,i),e!==void 0&&this.setOffendingState(e),this.setOffendingToken(t,t.currentToken)}};ud=OC([FC(0,BC.NotNull)],ud);Cn.InputMismatchException=ud;var Zs={},Rs={},Pu={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.Arrays=void 0,function(t){function e(s,o,a,l){return i(s,a!==void 0?a:0,l!==void 0?l:s.length,o)}t.binarySearch=e;function i(s,o,a,l){let u=o,h=a-1;for(;u<=h;){let c=u+h>>>1,d=s[c];if(d<l)u=c+1;else if(d>l)h=c-1;else return c}return-(u+1)}function n(s){let o="[",a=!0;for(let l of s)a?a=!1:o+=", ",l===null?o+="null":l===void 0?o+="undefined":o+=l;return o+="]",o}t.toString=n}(r.Arrays||(r.Arrays={}))})(Pu);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Du=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.IntegerList=void 0;const MC=Pu,Ou=G,lc=new Int32Array(0),kC=4,uc=(1<<31>>>0)-1-8;class qr{constructor(t){if(!t)this._data=lc,this._size=0;else if(t instanceof qr)this._data=t._data.slice(0),this._size=t._size;else if(typeof t=="number")t===0?(this._data=lc,this._size=0):(this._data=new Int32Array(t),this._size=0);else{this._data=lc,this._size=0;for(let e of t)this.add(e)}}add(t){this._data.length===this._size&&this.ensureCapacity(this._size+1),this._data[this._size]=t,this._size++}addAll(t){if(Array.isArray(t))this.ensureCapacity(this._size+t.length),this._data.subarray(this._size,this._size+t.length).set(t),this._size+=t.length;else if(t instanceof qr)this.ensureCapacity(this._size+t._size),this._data.subarray(this._size,this._size+t.size).set(t._data),this._size+=t._size;else{this.ensureCapacity(this._size+t.size);let e=0;for(let i of t)this._data[this._size+e]=i,e++;this._size+=t.size}}get(t){if(t<0||t>=this._size)throw RangeError();return this._data[t]}contains(t){for(let e=0;e<this._size;e++)if(this._data[e]===t)return!0;return!1}set(t,e){if(t<0||t>=this._size)throw RangeError();let i=this._data[t];return this._data[t]=e,i}removeAt(t){let e=this.get(t);return this._data.copyWithin(t,t+1,this._size),this._data[this._size-1]=0,this._size--,e}removeRange(t,e){if(t<0||e<0||t>this._size||e>this._size||t>e)throw RangeError();this._data.copyWithin(e,t,this._size),this._data.fill(0,this._size-(e-t),this._size),this._size-=e-t}get isEmpty(){return this._size===0}get size(){return this._size}trimToSize(){this._data.length!==this._size&&(this._data=this._data.slice(0,this._size))}clear(){this._data.fill(0,0,this._size),this._size=0}toArray(){return this._size===0?[]:Array.from(this._data.subarray(0,this._size))}sort(){this._data.subarray(0,this._size).sort()}equals(t){if(t===this)return!0;if(!(t instanceof qr)||this._size!==t._size)return!1;for(let e=0;e<this._size;e++)if(this._data[e]!==t._data[e])return!1;return!0}hashCode(){let t=1;for(let e=0;e<this._size;e++)t=31*t+this._data[e];return t}toString(){return this._data.toString()}binarySearch(t,e,i){if(e===void 0&&(e=0),i===void 0&&(i=this._size),e<0||i<0||e>this._size||i>this._size)throw new RangeError;if(e>i)throw new RangeError;return MC.Arrays.binarySearch(this._data,t,e,i)}ensureCapacity(t){if(t<0||t>uc)throw new RangeError;let e;for(this._data.length===0?e=kC:e=this._data.length;e<t;)e=e*2,(e<0||e>uc)&&(e=uc);let i=new Int32Array(e);i.set(this._data),this._data=i}toCharArray(){let t=new Uint16Array(this._size),e=0,i=!1;for(let n=0;n<this._size;n++){let s=this._data[n];if(s>=0&&s<65536){t[e]=s,e++;continue}if(!i){let a=new Uint16Array(this.charArraySize());a.set(t,0),t=a,i=!0}let o=String.fromCodePoint(s);t[e]=o.charCodeAt(0),t[e+1]=o.charCodeAt(1),e+=2}return t}charArraySize(){let t=0;for(let e=0;e<this._size;e++)t+=this._data[e]>=65536?2:1;return t}}Du([Ou.NotNull],qr.prototype,"_data",void 0);Du([Ou.Override],qr.prototype,"equals",null);Du([Ou.Override],qr.prototype,"hashCode",null);Du([Ou.Override],qr.prototype,"toString",null);Rs.IntegerList=qr;var de={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Zd=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(de,"__esModule",{value:!0});de.Interval=void 0;const Qd=G,D_=1e3;class Zt{constructor(t,e){this.a=t,this.b=e}static get INVALID(){return Zt._INVALID}static of(t,e){return t!==e||t<0||t>D_?new Zt(t,e):(Zt.cache[t]==null&&(Zt.cache[t]=new Zt(t,t)),Zt.cache[t])}get length(){return this.b<this.a?0:this.b-this.a+1}equals(t){return t===this?!0:t instanceof Zt?this.a===t.a&&this.b===t.b:!1}hashCode(){let t=23;return t=t*31+this.a,t=t*31+this.b,t}startsBeforeDisjoint(t){return this.a<t.a&&this.b<t.a}startsBeforeNonDisjoint(t){return this.a<=t.a&&this.b>=t.a}startsAfter(t){return this.a>t.a}startsAfterDisjoint(t){return this.a>t.b}startsAfterNonDisjoint(t){return this.a>t.a&&this.a<=t.b}disjoint(t){return this.startsBeforeDisjoint(t)||this.startsAfterDisjoint(t)}adjacent(t){return this.a===t.b+1||this.b===t.a-1}properlyContains(t){return t.a>=this.a&&t.b<=this.b}union(t){return Zt.of(Math.min(this.a,t.a),Math.max(this.b,t.b))}intersection(t){return Zt.of(Math.max(this.a,t.a),Math.min(this.b,t.b))}differenceNotProperlyContained(t){let e;return t.startsBeforeNonDisjoint(this)?e=Zt.of(Math.max(this.a,t.b+1),this.b):t.startsAfterNonDisjoint(this)&&(e=Zt.of(this.a,t.a-1)),e}toString(){return this.a+".."+this.b}}Zt._INVALID=new Zt(-1,-2);Zt.cache=new Array(D_+1);Zd([Qd.Override],Zt.prototype,"equals",null);Zd([Qd.Override],Zt.prototype,"hashCode",null);Zd([Qd.Override],Zt.prototype,"toString",null);de.Interval=Zt;var Qs={},Fu={},Ri={},St={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.Token=void 0;const t=ni;(function(e){e.INVALID_TYPE=0,e.EPSILON=-2,e.MIN_USER_TOKEN_TYPE=1,e.EOF=t.IntStream.EOF,e.DEFAULT_CHANNEL=0,e.HIDDEN_CHANNEL=1,e.MIN_USER_CHANNEL_VALUE=2})(r.Token||(r.Token={}))})(St);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ce=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},O_=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.CommonToken=void 0;const UC=de,we=G,$p=St;let he=class Qo{constructor(t,e,i=Qo.EMPTY_SOURCE,n=$p.Token.DEFAULT_CHANNEL,s=0,o=0){this._line=0,this._charPositionInLine=-1,this._channel=$p.Token.DEFAULT_CHANNEL,this.index=-1,this._text=e,this._type=t,this.source=i,this._channel=n,this.start=s,this.stop=o,i.source!=null&&(this._line=i.source.line,this._charPositionInLine=i.source.charPositionInLine)}static fromToken(t){let e=new Qo(t.type,void 0,Qo.EMPTY_SOURCE,t.channel,t.startIndex,t.stopIndex);return e._line=t.line,e.index=t.tokenIndex,e._charPositionInLine=t.charPositionInLine,t instanceof Qo?(e._text=t._text,e.source=t.source):(e._text=t.text,e.source={source:t.tokenSource,stream:t.inputStream}),e}get type(){return this._type}set type(t){this._type=t}get line(){return this._line}set line(t){this._line=t}get text(){if(this._text!=null)return this._text;let t=this.inputStream;if(t==null)return;let e=t.size;return this.start<e&&this.stop<e?t.getText(UC.Interval.of(this.start,this.stop)):"<EOF>"}set text(t){this._text=t}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(t){this._charPositionInLine=t}get channel(){return this._channel}set channel(t){this._channel=t}get startIndex(){return this.start}set startIndex(t){this.start=t}get stopIndex(){return this.stop}set stopIndex(t){this.stop=t}get tokenIndex(){return this.index}set tokenIndex(t){this.index=t}get tokenSource(){return this.source.source}get inputStream(){return this.source.stream}toString(t){let e="";this._channel>0&&(e=",channel="+this._channel);let i=this.text;i!=null?(i=i.replace(/\n/g,"\\n"),i=i.replace(/\r/g,"\\r"),i=i.replace(/\t/g,"\\t")):i="<no text>";let n=String(this._type);return t&&(n=t.vocabulary.getDisplayName(this._type)),"[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+i+"',<"+n+">"+e+","+this._line+":"+this.charPositionInLine+"]"}};he.EMPTY_SOURCE={source:void 0,stream:void 0};Ce([we.NotNull],he.prototype,"source",void 0);Ce([we.Override],he.prototype,"type",null);Ce([we.Override],he.prototype,"line",null);Ce([we.Override],he.prototype,"text",null);Ce([we.Override],he.prototype,"charPositionInLine",null);Ce([we.Override],he.prototype,"channel",null);Ce([we.Override],he.prototype,"startIndex",null);Ce([we.Override],he.prototype,"stopIndex",null);Ce([we.Override],he.prototype,"tokenIndex",null);Ce([we.Override],he.prototype,"tokenSource",null);Ce([we.Override],he.prototype,"inputStream",null);Ce([we.Override],he.prototype,"toString",null);Ce([O_(0,we.NotNull)],he,"fromToken",null);he=Ce([O_(2,we.NotNull)],he);Ri.CommonToken=he;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c};Object.defineProperty(r,"__esModule",{value:!0}),r.CommonTokenFactory=void 0;const e=Ri,i=de,n=G;class s{constructor(a=!1){this.copyText=a}create(a,l,u,h,c,d,f,p){let _=new e.CommonToken(l,u,a,h,c,d);return _.line=f,_.charPositionInLine=p,u==null&&this.copyText&&a.stream!=null&&(_.text=a.stream.getText(i.Interval.of(c,d))),_}createSimple(a,l){return new e.CommonToken(a,l)}}t([n.Override],s.prototype,"create",null),t([n.Override],s.prototype,"createSimple",null),r.CommonTokenFactory=s,function(o){o.DEFAULT=new o}(s=r.CommonTokenFactory||(r.CommonTokenFactory={}))})(Fu);var wa={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(wa,"__esModule",{value:!0});wa.IntegerStack=void 0;const HC=Rs;class jC extends HC.IntegerList{constructor(t){super(t)}push(t){this.add(t)}pop(){return this.removeAt(this.size-1)}peek(){return this.get(this.size-1)}}wa.IntegerStack=jC;var hc={},Na={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Na,"__esModule",{value:!0});Na.AcceptStateInfo=void 0;class $C{constructor(t,e){this._prediction=t,this._lexerActionExecutor=e}get prediction(){return this._prediction}get lexerActionExecutor(){return this._lexerActionExecutor}}Na.AcceptStateInfo=$C;var cc={},si={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(si,"__esModule",{value:!0});si.Array2DHashMap=void 0;const Gp=lr;class GC{constructor(t){this.keyComparator=t}hashCode(t){return this.keyComparator.hashCode(t.key)}equals(t,e){return this.keyComparator.equals(t.key,e.key)}}class hu{constructor(t){t instanceof hu?this.backingStore=new Gp.Array2DHashSet(t.backingStore):this.backingStore=new Gp.Array2DHashSet(new GC(t))}clear(){this.backingStore.clear()}containsKey(t){return this.backingStore.contains({key:t})}get(t){let e=this.backingStore.get({key:t});if(e)return e.value}get isEmpty(){return this.backingStore.isEmpty}put(t,e){let i=this.backingStore.get({key:t,value:e}),n;return i?(n=i.value,i.value=e):this.backingStore.add({key:t,value:e}),n}putIfAbsent(t,e){let i=this.backingStore.get({key:t,value:e}),n;return i?n=i.value:this.backingStore.add({key:t,value:e}),n}get size(){return this.backingStore.size}hashCode(){return this.backingStore.hashCode()}equals(t){return t instanceof hu?this.backingStore.equals(t.backingStore):!1}}si.Array2DHashMap=hu;var Js={},to={},wn={},Dr={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Dr,"__esModule",{value:!0});Dr.DecisionState=void 0;const zC=Ir;class VC extends zC.ATNState{constructor(){super(...arguments),this.decision=-1,this.nonGreedy=!1,this.sll=!1}}Dr.DecisionState=VC;var dc={},fc={},zp;function Jd(){return zp||(zp=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__decorate||function(l,u,h,c){var d=arguments.length,f=d<3?u:c===null?c=Object.getOwnPropertyDescriptor(u,h):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(l,u,h,c);else for(var _=l.length-1;_>=0;_--)(p=l[_])&&(f=(d<3?p(f):d>3?p(u,h,f):p(u,h))||f);return d>3&&f&&Object.defineProperty(u,h,f),f};Object.defineProperty(r,"__esModule",{value:!0}),r.PredictionContextCache=void 0;const e=si,i=G,n=Me,s=ur(),o=Be;class a{constructor(u=!0){this.contexts=new e.Array2DHashMap(n.ObjectEqualityComparator.INSTANCE),this.childContexts=new e.Array2DHashMap(n.ObjectEqualityComparator.INSTANCE),this.joinContexts=new e.Array2DHashMap(n.ObjectEqualityComparator.INSTANCE),this.enableCache=u}getAsCached(u){if(!this.enableCache)return u;let h=this.contexts.get(u);return h||(h=u,this.contexts.put(u,u)),h}getChild(u,h){if(!this.enableCache)return u.getChild(h);let c=new a.PredictionContextAndInt(u,h),d=this.childContexts.get(c);return d||(d=u.getChild(h),d=this.getAsCached(d),this.childContexts.put(c,d)),d}join(u,h){if(!this.enableCache)return s.PredictionContext.join(u,h,this);let c=new a.IdentityCommutativePredictionContextOperands(u,h),d=this.joinContexts.get(c);return d||(d=s.PredictionContext.join(u,h,this),d=this.getAsCached(d),this.joinContexts.put(c,d),d)}}r.PredictionContextCache=a,a.UNCACHED=new a(!1),function(l){class u{constructor(d,f){this.obj=d,this.value=f}equals(d){if(d instanceof u){if(d===this)return!0}else return!1;let f=d;return this.value===f.value&&(this.obj===f.obj||this.obj!=null&&this.obj.equals(f.obj))}hashCode(){let d=5;return d=7*d+(this.obj!=null?this.obj.hashCode():0),d=7*d+this.value,d}}t([i.Override],u.prototype,"equals",null),t([i.Override],u.prototype,"hashCode",null),l.PredictionContextAndInt=u;class h{constructor(d,f){o(d!=null),o(f!=null),this._x=d,this._y=f}get x(){return this._x}get y(){return this._y}equals(d){if(d instanceof h){if(this===d)return!0}else return!1;let f=d;return this._x===f._x&&this._y===f._y||this._x===f._y&&this._y===f._x}hashCode(){return this._x.hashCode()^this._y.hashCode()}}t([i.Override],h.prototype,"equals",null),t([i.Override],h.prototype,"hashCode",null),l.IdentityCommutativePredictionContextOperands=h}(a=r.PredictionContextCache||(r.PredictionContextCache={}))}(fc)),fc}var Vp;function ur(){return Vp||(Vp=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__decorate||function(_,x,g,v){var m=arguments.length,y=m<3?x:v===null?v=Object.getOwnPropertyDescriptor(x,g):v,S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(_,x,g,v);else for(var E=_.length-1;E>=0;E--)(S=_[E])&&(y=(m<3?S(y):m>3?S(x,g,y):S(x,g))||y);return m>3&&y&&Object.defineProperty(x,g,y),y},e=A&&A.__param||function(_,x){return function(g,v){x(g,v,_)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SingletonPredictionContext=r.PredictionContext=void 0;const i=si,n=lr,s=Pu,o=jt,a=G,l=Jd(),u=Be,h=1;class c{constructor(x){this.cachedHashCode=x}static calculateEmptyHashCode(){let x=o.MurmurHash.initialize(h);return x=o.MurmurHash.finish(x,0),x}static calculateSingleHashCode(x,g){let v=o.MurmurHash.initialize(h);return v=o.MurmurHash.update(v,x),v=o.MurmurHash.update(v,g),v=o.MurmurHash.finish(v,2),v}static calculateHashCode(x,g){let v=o.MurmurHash.initialize(h);for(let m of x)v=o.MurmurHash.update(v,m);for(let m of g)v=o.MurmurHash.update(v,m);return v=o.MurmurHash.finish(v,2*x.length),v}static fromRuleContext(x,g,v=!0){if(g.isEmpty)return v?c.EMPTY_FULL:c.EMPTY_LOCAL;let m;g._parent?m=c.fromRuleContext(x,g._parent,v):m=v?c.EMPTY_FULL:c.EMPTY_LOCAL;let S=x.states[g.invokingState].transition(0);return m.getChild(S.followState.stateNumber)}static addEmptyContext(x){return x.addEmptyContext()}static removeEmptyContext(x){return x.removeEmptyContext()}static join(x,g,v=l.PredictionContextCache.UNCACHED){if(x===g)return x;if(x.isEmpty)return c.isEmptyLocal(x)?x:c.addEmptyContext(g);if(g.isEmpty)return c.isEmptyLocal(g)?g:c.addEmptyContext(x);let m=x.size,y=g.size;if(m===1&&y===1&&x.getReturnState(0)===g.getReturnState(0)){let L=v.join(x.getParent(0),g.getParent(0));return L===x.getParent(0)?x:L===g.getParent(0)?g:L.getChild(x.getReturnState(0))}let S=0,E=new Array(m+y),b=new Array(E.length),T=0,C=0,D=!0,I=!0;for(;T<m&&C<y;)x.getReturnState(T)===g.getReturnState(C)?(E[S]=v.join(x.getParent(T),g.getParent(C)),b[S]=x.getReturnState(T),D=D&&E[S]===x.getParent(T),I=I&&E[S]===g.getParent(C),T++,C++):x.getReturnState(T)<g.getReturnState(C)?(E[S]=x.getParent(T),b[S]=x.getReturnState(T),I=!1,T++):(u(g.getReturnState(C)<x.getReturnState(T)),E[S]=g.getParent(C),b[S]=g.getReturnState(C),D=!1,C++),S++;for(;T<m;)E[S]=x.getParent(T),b[S]=x.getReturnState(T),T++,I=!1,S++;for(;C<y;)E[S]=g.getParent(C),b[S]=g.getReturnState(C),C++,D=!1,S++;return D?x:I?g:(S<E.length&&(E=E.slice(0,S),b=b.slice(0,S)),E.length===0?c.EMPTY_FULL:E.length===1?new p(E[0],b[0]):new f(E,b))}static isEmptyLocal(x){return x===c.EMPTY_LOCAL}static getCachedContext(x,g,v){if(x.isEmpty)return x;let m=v.get(x);if(m)return m;if(m=g.get(x),m)return v.put(x,m),m;let y=!1,S=new Array(x.size);for(let b=0;b<S.length;b++){let T=c.getCachedContext(x.getParent(b),g,v);if(y||T!==x.getParent(b)){if(!y){S=new Array(x.size);for(let C=0;C<x.size;C++)S[C]=x.getParent(C);y=!0}S[b]=T}}if(!y)return m=g.putIfAbsent(x,x),v.put(x,m??x),x;let E;if(S.length===1)E=new p(S[0],x.getReturnState(0));else{let b=new Array(x.size);for(let T=0;T<x.size;T++)b[T]=x.getReturnState(T);E=new f(S,b,x.hashCode())}return m=g.putIfAbsent(E,E),v.put(E,m||E),v.put(x,m||E),E}appendSingleContext(x,g){return this.appendContext(c.EMPTY_FULL.getChild(x),g)}getChild(x){return new p(this,x)}hashCode(){return this.cachedHashCode}toStrings(x,g,v=c.EMPTY_FULL){let m=[];t:for(let y=0;;y++){let S=0,E=!0,b=this,T=g,C="";for(C+="[";!b.isEmpty&&b!==v;){let D=0;if(b.size>0){let I=1;for(;1<<I>>>0<b.size;)I++;let L=(1<<I>>>0)-1;if(D=y>>S&L,E=E&&D>=b.size-1,D>=b.size)continue t;S+=I}if(x){C.length>1&&(C+=" ");let L=x.atn.states[T],M=x.ruleNames[L.ruleIndex];C+=M}else b.getReturnState(D)!==c.EMPTY_FULL_STATE_KEY&&(b.isEmpty||(C.length>1&&(C+=" "),C+=b.getReturnState(D)));T=b.getReturnState(D),b=b.getParent(D)}if(C+="]",m.push(C),E)break}return m}}t([a.Override],c.prototype,"hashCode",null),t([e(0,a.NotNull),e(1,a.NotNull),e(2,a.NotNull)],c,"join",null),t([e(0,a.NotNull),e(1,a.NotNull),e(2,a.NotNull)],c,"getCachedContext",null),r.PredictionContext=c;class d extends c{constructor(x){super(c.calculateEmptyHashCode()),this.fullContext=x}get isFullContext(){return this.fullContext}addEmptyContext(){return this}removeEmptyContext(){throw new Error("Cannot remove the empty context from itself.")}getParent(x){throw new Error("index out of bounds")}getReturnState(x){throw new Error("index out of bounds")}findReturnState(x){return-1}get size(){return 0}appendSingleContext(x,g){return g.getChild(this,x)}appendContext(x,g){return x}get isEmpty(){return!0}get hasEmpty(){return!0}equals(x){return this===x}toStrings(x,g,v){return["[]"]}}t([a.Override],d.prototype,"addEmptyContext",null),t([a.Override],d.prototype,"removeEmptyContext",null),t([a.Override],d.prototype,"getParent",null),t([a.Override],d.prototype,"getReturnState",null),t([a.Override],d.prototype,"findReturnState",null),t([a.Override],d.prototype,"size",null),t([a.Override],d.prototype,"appendSingleContext",null),t([a.Override],d.prototype,"appendContext",null),t([a.Override],d.prototype,"isEmpty",null),t([a.Override],d.prototype,"hasEmpty",null),t([a.Override],d.prototype,"equals",null),t([a.Override],d.prototype,"toStrings",null);let f=class Xi extends c{constructor(x,g,v){super(v||c.calculateHashCode(x,g)),u(x.length===g.length),u(g.length>1||g[0]!==c.EMPTY_FULL_STATE_KEY,"Should be using PredictionContext.EMPTY instead."),this.parents=x,this.returnStates=g}getParent(x){return this.parents[x]}getReturnState(x){return this.returnStates[x]}findReturnState(x){return s.Arrays.binarySearch(this.returnStates,x)}get size(){return this.returnStates.length}get isEmpty(){return!1}get hasEmpty(){return this.returnStates[this.returnStates.length-1]===c.EMPTY_FULL_STATE_KEY}addEmptyContext(){if(this.hasEmpty)return this;let x=this.parents.slice(0),g=this.returnStates.slice(0);return x.push(c.EMPTY_FULL),g.push(c.EMPTY_FULL_STATE_KEY),new Xi(x,g)}removeEmptyContext(){if(!this.hasEmpty)return this;if(this.returnStates.length===2)return new p(this.parents[0],this.returnStates[0]);{let x=this.parents.slice(0,this.parents.length-1),g=this.returnStates.slice(0,this.returnStates.length-1);return new Xi(x,g)}}appendContext(x,g){return Xi.appendContextImpl(this,x,new c.IdentityHashMap)}static appendContextImpl(x,g,v){if(g.isEmpty){if(c.isEmptyLocal(g)){if(x.hasEmpty)return c.EMPTY_LOCAL;throw new Error("what to do here?")}return x}if(g.size!==1)throw new Error("Appending a tree suffix is not yet supported.");let m=v.get(x);if(!m){if(x.isEmpty)m=g;else{let y=x.size;x.hasEmpty&&y--;let S=new Array(y),E=new Array(y);for(let b=0;b<y;b++)E[b]=x.getReturnState(b);for(let b=0;b<y;b++)S[b]=Xi.appendContextImpl(x.getParent(b),g,v);S.length===1?m=new p(S[0],E[0]):(u(S.length>1),m=new Xi(S,E)),x.hasEmpty&&(m=c.join(m,g))}v.put(x,m)}return m}equals(x){if(this===x)return!0;if(!(x instanceof Xi)||this.hashCode()!==x.hashCode())return!1;let g=x;return this.equalsImpl(g,new n.Array2DHashSet)}equalsImpl(x,g){let v=[],m=[];for(v.push(this),m.push(x);;){let y=v.pop(),S=m.pop();if(!y||!S)break;let E=new l.PredictionContextCache.IdentityCommutativePredictionContextOperands(y,S);if(!g.add(E))continue;let b=E.x.size;if(b===0){if(!E.x.equals(E.y))return!1;continue}let T=E.y.size;if(b!==T)return!1;for(let C=0;C<b;C++){if(E.x.getReturnState(C)!==E.y.getReturnState(C))return!1;let D=E.x.getParent(C),I=E.y.getParent(C);if(D.hashCode()!==I.hashCode())return!1;D!==I&&(v.push(D),m.push(I))}}return!0}};t([a.NotNull],f.prototype,"parents",void 0),t([a.NotNull],f.prototype,"returnStates",void 0),t([a.Override],f.prototype,"getParent",null),t([a.Override],f.prototype,"getReturnState",null),t([a.Override],f.prototype,"findReturnState",null),t([a.Override],f.prototype,"size",null),t([a.Override],f.prototype,"isEmpty",null),t([a.Override],f.prototype,"hasEmpty",null),t([a.Override],f.prototype,"addEmptyContext",null),t([a.Override],f.prototype,"removeEmptyContext",null),t([a.Override],f.prototype,"appendContext",null),t([a.Override],f.prototype,"equals",null),f=t([e(0,a.NotNull)],f);let p=class F_ extends c{constructor(x,g){super(c.calculateSingleHashCode(x,g)),this.parent=x,this.returnState=g}getParent(x){return this.parent}getReturnState(x){return this.returnState}findReturnState(x){return this.returnState===x?0:-1}get size(){return 1}get isEmpty(){return!1}get hasEmpty(){return!1}appendContext(x,g){return g.getChild(this.parent.appendContext(x,g),this.returnState)}addEmptyContext(){let x=[this.parent,c.EMPTY_FULL],g=[this.returnState,c.EMPTY_FULL_STATE_KEY];return new f(x,g)}removeEmptyContext(){return this}equals(x){if(x===this)return!0;if(!(x instanceof F_))return!1;let g=x;return this.hashCode()!==g.hashCode()?!1:this.returnState===g.returnState&&this.parent.equals(g.parent)}};t([a.NotNull],p.prototype,"parent",void 0),t([a.Override],p.prototype,"getParent",null),t([a.Override],p.prototype,"getReturnState",null),t([a.Override],p.prototype,"findReturnState",null),t([a.Override],p.prototype,"size",null),t([a.Override],p.prototype,"isEmpty",null),t([a.Override],p.prototype,"hasEmpty",null),t([a.Override],p.prototype,"appendContext",null),t([a.Override],p.prototype,"addEmptyContext",null),t([a.Override],p.prototype,"removeEmptyContext",null),t([a.Override],p.prototype,"equals",null),p=t([e(0,a.NotNull)],p),r.SingletonPredictionContext=p,function(_){_.EMPTY_LOCAL=new d(!1),_.EMPTY_FULL=new d(!0),_.EMPTY_LOCAL_STATE_KEY=-(1<<31>>>0),_.EMPTY_FULL_STATE_KEY=(1<<31>>>0)-1;class x extends i.Array2DHashMap{constructor(){super(g.INSTANCE)}}_.IdentityHashMap=x;class g{IdentityEqualityComparator(){}hashCode(m){return m.hashCode()}equals(m,y){return m===y}}g.INSTANCE=new g,t([a.Override],g.prototype,"hashCode",null),t([a.Override],g.prototype,"equals",null),_.IdentityEqualityComparator=g}(c=r.PredictionContext||(r.PredictionContext={}))}(dc)),dc}/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Yt=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Fe=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(wn,"__esModule",{value:!0});wn.ATNConfig=void 0;const XC=si,WC=Dr,jr=jt,Ot=G,YC=Me,Xp=ur(),Wi=Sn,Wp=Be,pc=2147483648;let ge=class Jo{constructor(t,e,i){typeof e=="number"?(Wp((e&16777215)===e),this._state=t,this.altAndOuterContextDepth=e,this._context=i):(this._state=t,this.altAndOuterContextDepth=e.altAndOuterContextDepth,this._context=i)}static create(t,e,i,n=Wi.SemanticContext.NONE,s){return n!==Wi.SemanticContext.NONE?s!=null?new gs(s,n,t,e,i,!1):new un(n,t,e,i):s!=null?new _s(s,t,e,i,!1):new Jo(t,e,i)}get state(){return this._state}get alt(){return this.altAndOuterContextDepth&16777215}get context(){return this._context}set context(t){this._context=t}get reachesIntoOuterContext(){return this.outerContextDepth!==0}get outerContextDepth(){return this.altAndOuterContextDepth>>>24&127}set outerContextDepth(t){Wp(t>=0),t=Math.min(t,127),this.altAndOuterContextDepth=t<<24|(this.altAndOuterContextDepth&-2130706433)>>>0}get lexerActionExecutor(){}get semanticContext(){return Wi.SemanticContext.NONE}get hasPassedThroughNonGreedyDecision(){return!1}clone(){return this.transform(this.state,!1)}transform(t,e,i){return i==null?this.transformImpl(t,this._context,this.semanticContext,e,this.lexerActionExecutor):i instanceof Xp.PredictionContext?this.transformImpl(t,i,this.semanticContext,e,this.lexerActionExecutor):i instanceof Wi.SemanticContext?this.transformImpl(t,this._context,i,e,this.lexerActionExecutor):this.transformImpl(t,this._context,this.semanticContext,e,i)}transformImpl(t,e,i,n,s){let o=n&&Jo.checkNonGreedyDecision(this,t);return i!==Wi.SemanticContext.NONE?s!=null||o?new gs(s,i,t,this,e,o):new un(i,t,this,e):s!=null||o?new _s(s,t,this,e,o):new Jo(t,this,e)}static checkNonGreedyDecision(t,e){return t.hasPassedThroughNonGreedyDecision||e instanceof WC.DecisionState&&e.nonGreedy}appendContext(t,e){if(typeof t=="number"){let i=this.context.appendSingleContext(t,e);return this.transform(this.state,!1,i)}else{let i=this.context.appendContext(t,e);return this.transform(this.state,!1,i)}}contains(t){if(this.state.stateNumber!==t.state.stateNumber||this.alt!==t.alt||!this.semanticContext.equals(t.semanticContext))return!1;let e=[],i=[];for(e.push(this.context),i.push(t.context);;){let n=e.pop(),s=i.pop();if(!n||!s)break;if(n===s)return!0;if(n.size<s.size)return!1;if(s.isEmpty)return n.hasEmpty;for(let o=0;o<s.size;o++){let a=n.findReturnState(s.getReturnState(o));if(a<0)return!1;e.push(n.getParent(a)),i.push(s.getParent(o))}}return!1}get isPrecedenceFilterSuppressed(){return(this.altAndOuterContextDepth&pc)!==0}set isPrecedenceFilterSuppressed(t){t?this.altAndOuterContextDepth|=pc:this.altAndOuterContextDepth&=~pc}equals(t){return this===t?!0:t instanceof Jo?this.state.stateNumber===t.state.stateNumber&&this.alt===t.alt&&this.reachesIntoOuterContext===t.reachesIntoOuterContext&&this.context.equals(t.context)&&this.semanticContext.equals(t.semanticContext)&&this.isPrecedenceFilterSuppressed===t.isPrecedenceFilterSuppressed&&this.hasPassedThroughNonGreedyDecision===t.hasPassedThroughNonGreedyDecision&&YC.ObjectEqualityComparator.INSTANCE.equals(this.lexerActionExecutor,t.lexerActionExecutor):!1}hashCode(){let t=jr.MurmurHash.initialize(7);return t=jr.MurmurHash.update(t,this.state.stateNumber),t=jr.MurmurHash.update(t,this.alt),t=jr.MurmurHash.update(t,this.reachesIntoOuterContext?1:0),t=jr.MurmurHash.update(t,this.context),t=jr.MurmurHash.update(t,this.semanticContext),t=jr.MurmurHash.update(t,this.hasPassedThroughNonGreedyDecision?1:0),t=jr.MurmurHash.update(t,this.lexerActionExecutor),t=jr.MurmurHash.finish(t,7),t}toDotString(){let t="";t+=`digraph G {
`,t+=`rankdir=LR;
`;let e=new XC.Array2DHashMap(Xp.PredictionContext.IdentityEqualityComparator.INSTANCE),i=[];function n(s){let o=e.size,a=e.putIfAbsent(s,o);return a??(i.push(s),o)}for(i.push(this.context),e.put(this.context,0);;){let s=i.pop();if(!s)break;for(let o=0;o<s.size;o++)t+="  s"+n(s),t+="->",t+="s"+n(s.getParent(o)),t+='[label="'+s.getReturnState(o)+`"];
`}return t+=`}
`,t.toString()}toString(t,e,i){i==null&&(i=e!=null),e==null&&(e=!0);let n="",s;i?s=this.context.toStrings(t,this.state.stateNumber):s=["?"];let o=!0;for(let a of s)o?o=!1:n+=", ",n+="(",n+=this.state,e&&(n+=",",n+=this.alt),this.context&&(n+=",",n+=a),this.semanticContext!==Wi.SemanticContext.NONE&&(n+=",",n+=this.semanticContext),this.reachesIntoOuterContext&&(n+=",up="+this.outerContextDepth),n+=")";return n.toString()}};Yt([Ot.NotNull],ge.prototype,"_state",void 0);Yt([Ot.NotNull],ge.prototype,"_context",void 0);Yt([Ot.NotNull],ge.prototype,"state",null);Yt([Ot.NotNull,Fe(0,Ot.NotNull)],ge.prototype,"context",null);Yt([Ot.NotNull],ge.prototype,"semanticContext",null);Yt([Ot.Override],ge.prototype,"clone",null);Yt([Fe(0,Ot.NotNull),Fe(2,Ot.NotNull)],ge.prototype,"transformImpl",null);Yt([Ot.Override],ge.prototype,"equals",null);Yt([Ot.Override],ge.prototype,"hashCode",null);Yt([Fe(0,Ot.NotNull),Fe(3,Ot.NotNull)],ge,"create",null);ge=Yt([Fe(0,Ot.NotNull),Fe(2,Ot.NotNull)],ge);wn.ATNConfig=ge;let un=class extends ge{constructor(t,e,i,n){typeof i=="number"?super(e,i,n):super(e,i,n),this._semanticContext=t}get semanticContext(){return this._semanticContext}};Yt([Ot.NotNull],un.prototype,"_semanticContext",void 0);Yt([Ot.Override],un.prototype,"semanticContext",null);un=Yt([Fe(1,Ot.NotNull),Fe(2,Ot.NotNull)],un);let _s=class extends ge{constructor(t,e,i,n,s){if(typeof i=="number")super(e,i,n);else if(super(e,i,n),i.semanticContext!==Wi.SemanticContext.NONE)throw new Error("Not supported");this._lexerActionExecutor=t,this.passedThroughNonGreedyDecision=s}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};Yt([Ot.Override],_s.prototype,"lexerActionExecutor",null);Yt([Ot.Override],_s.prototype,"hasPassedThroughNonGreedyDecision",null);_s=Yt([Fe(1,Ot.NotNull),Fe(2,Ot.NotNull)],_s);let gs=class extends un{constructor(t,e,i,n,s,o){typeof n=="number"?super(e,i,n,s):super(e,i,n,s),this._lexerActionExecutor=t,this.passedThroughNonGreedyDecision=o}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};Yt([Ot.Override],gs.prototype,"lexerActionExecutor",null);Yt([Ot.Override],gs.prototype,"hasPassedThroughNonGreedyDecision",null);gs=Yt([Fe(1,Ot.NotNull),Fe(2,Ot.NotNull)],gs);var hr={};const qC=lx(i1);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(hr,"__esModule",{value:!0});hr.BitSet=void 0;const KC=qC,ZC=jt,eo=new Uint16Array(0);function Ne(r){return r>>>4}function Wn(r){return r*16}function hd(r){let t=1;for(let e=0;e<16;e++){if(r&t)return e;t=t<<1>>>0}throw new RangeError("No specified bit found")}function Yp(r){let t=32768;for(let e=15;e>=0;e--){if(r&t)return e;t=t>>>1}throw new RangeError("No specified bit found")}function He(r,t){return r&=15,t&=15,r===t?1<<r>>>0:65535>>>15-t^65535>>>16-r}const cd=new Uint8Array(65536);for(let r=0;r<16;r++){const t=1<<r>>>0;let e=0;for(;e<cd.length;){e+=t;for(let i=0;i<t;i++)cd[e]++,e++}}class Jn{constructor(t){if(!t)this.data=eo;else if(typeof t=="number"){if(t<0)throw new RangeError("nbits cannot be negative");this.data=new Uint16Array(Ne(t-1)+1)}else if(t instanceof Jn)this.data=t.data.slice(0);else{let e=-1;for(let i of t)e<i&&(e=i);this.data=new Uint16Array(Ne(e-1)+1);for(let i of t)this.set(i)}}and(t){const e=this.data,i=t.data,n=Math.min(e.length,i.length);let s=-1;for(let o=0;o<n;o++)(e[o]&=i[o])!==0&&(s=o);s===-1&&(this.data=eo),s<e.length-1&&(this.data=e.slice(0,s+1))}andNot(t){const e=this.data,i=t.data,n=Math.min(e.length,i.length);let s=-1;for(let o=0;o<n;o++)(e[o]&=i[o]^65535)!==0&&(s=o);s===-1&&(this.data=eo),s<e.length-1&&(this.data=e.slice(0,s+1))}cardinality(){if(this.isEmpty)return 0;const t=this.data,e=t.length;let i=0;for(let n=0;n<e;n++)i+=cd[t[n]];return i}clear(t,e){t==null?this.data.fill(0):e==null?this.set(t,!1):this.set(t,e,!1)}flip(t,e){if(e==null&&(e=t),t<0||e<t)throw new RangeError;let i=Ne(t);const n=Ne(e);if(i===n)this.data[i]^=He(t,e);else{for(this.data[i++]^=He(t,15);i<n;)this.data[i++]^=65535;this.data[i++]^=He(0,e)}}get(t,e){if(e===void 0)return!!(this.data[Ne(t)]&He(t,t));{let i=new Jn(e+1);for(let n=t;n<=e;n++)i.set(n,this.get(n));return i}}intersects(t){let e=Math.min(this.length(),t.length());if(e===0)return!1;let i=Ne(e-1);for(let n=0;n<=i;n++)if(this.data[n]&t.data[n])return!0;return!1}get isEmpty(){return this.length()===0}length(){return this.data.length?this.previousSetBit(Wn(this.data.length)-1)+1:0}nextClearBit(t){if(t<0)throw new RangeError("fromIndex cannot be negative");const e=this.data,i=e.length;let n=Ne(t);if(n>i)return-1;let s=65535^He(t,15);if((e[n]|s)===65535){for(n++,s=0;n<i&&e[n]===65535;n++);if(n===i)return-1}return Wn(n)+hd((e[n]|s)^65535)}nextSetBit(t){if(t<0)throw new RangeError("fromIndex cannot be negative");const e=this.data,i=e.length;let n=Ne(t);if(n>i)return-1;let s=He(t,15);if(!(e[n]&s)){for(n++,s=65535;n<i&&e[n]===0;n++);if(n>=i)return-1}return Wn(n)+hd(e[n]&s)}or(t){const e=this.data,i=t.data,n=Math.min(e.length,i.length),s=Math.max(e.length,i.length),o=e.length===s?e:new Uint16Array(s);let a=-1;for(let u=0;u<n;u++)(o[u]=e[u]|i[u])!==0&&(a=u);const l=e.length>i.length?e:i;for(let u=n;u<s;u++)(o[u]=l[u])!==0&&(a=u);a===-1?this.data=eo:o.length===a+1?this.data=o:this.data=o.slice(0,a)}previousClearBit(t){if(t<0)throw new RangeError("fromIndex cannot be negative");const e=this.data,i=e.length;let n=Ne(t);n>=i&&(n=i-1);let s=65535^He(0,t);if((e[n]|s)===65535){for(s=0,n--;n>=0&&e[n]===65535;n--);if(n<0)return-1}return Wn(n)+Yp((e[n]|s)^65535)}previousSetBit(t){if(t<0)throw new RangeError("fromIndex cannot be negative");const e=this.data,i=e.length;let n=Ne(t);n>=i&&(n=i-1);let s=He(0,t);if(!(e[n]&s)){for(n--,s=65535;n>=0&&e[n]===0;n--);if(n<0)return-1}return Wn(n)+Yp(e[n]&s)}set(t,e,i){if(e===void 0?(e=t,i=!0):typeof e=="boolean"&&(i=e,e=t),i===void 0&&(i=!0),t<0||t>e)throw new RangeError;let n=Ne(t),s=Ne(e);if(i&&s>=this.data.length){let o=new Uint16Array(s+1);this.data.forEach((a,l)=>o[l]=a),this.data=o}else if(!i){if(n>=this.data.length)return;s>=this.data.length&&(s=this.data.length-1,e=this.data.length*16-1)}if(n===s)this._setBits(n,i,He(t,e));else{for(this._setBits(n++,i,He(t,15));n<s;)this.data[n++]=i?65535:0;this._setBits(n,i,He(0,e))}}_setBits(t,e,i){e?this.data[t]|=i:this.data[t]&=65535^i}get size(){return this.data.byteLength*8}hashCode(){return ZC.MurmurHash.hashCode(this.data,22)}equals(t){if(t===this)return!0;if(!(t instanceof Jn))return!1;const e=this.length();if(e!==t.length())return!1;if(e===0)return!0;let i=Ne(e-1);for(let n=0;n<=i;n++)if(this.data[n]!==t.data[n])return!1;return!0}toString(){let t="{",e=!0;for(let i=this.nextSetBit(0);i>=0;i=this.nextSetBit(i+1))e?e=!1:t+=", ",t+=i;return t+="}",t}xor(t){const e=this.data,i=t.data,n=Math.min(e.length,i.length),s=Math.max(e.length,i.length),o=e.length===s?e:new Uint16Array(s);let a=-1;for(let u=0;u<n;u++)(o[u]=e[u]^i[u])!==0&&(a=u);const l=e.length>i.length?e:i;for(let u=n;u<s;u++)(o[u]=l[u])!==0&&(a=u);a===-1?this.data=eo:o.length===a+1?this.data=o:this.data=o.slice(0,a+1)}clone(){return new Jn(this)}[Symbol.iterator](){return new QC(this.data)}[KC.inspect.custom](){return"BitSet "+this.toString()}}hr.BitSet=Jn;class QC{constructor(t){this.data=t,this.index=0,this.mask=65535}next(){for(;this.index<this.data.length;){const t=this.data[this.index]&this.mask;if(t!==0){const e=Wn(this.index)+hd(t);return this.mask=He(e+1,15),{done:!1,value:e}}this.index++,this.mask=65535}return{done:!0,value:-1}}[Symbol.iterator](){return this}}var qp;function Ra(){if(qp)return to;qp=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(g,v,m,y){var S=arguments.length,E=S<3?v:y===null?y=Object.getOwnPropertyDescriptor(v,m):y,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(g,v,m,y);else for(var T=g.length-1;T>=0;T--)(b=g[T])&&(E=(S<3?b(E):S>3?b(v,m,E):b(v,m))||E);return S>3&&E&&Object.defineProperty(v,m,E),E};Object.defineProperty(to,"__esModule",{value:!0}),to.ATNConfigSet=void 0;const t=si,e=lr,i=bn,n=Fr(),s=wn,o=hr,a=G,l=Me,u=ur(),h=Jd(),c=Sn,d=Be,f=Qt;class p{hashCode(v){return v.state^v.alt}equals(v,m){return v.state===m.state&&v.alt===m.alt}}p.INSTANCE=new p;function _(g){return g?new t.Array2DHashMap(g):new t.Array2DHashMap(p.INSTANCE)}let x=class dd{constructor(v,m){this._uniqueAlt=0,this._hasSemanticContext=!1,this._dipsIntoOuterContext=!1,this.outermostConfigSet=!1,this.cachedHashCode=-1,v?(m?(this.mergedConfigs=void 0,this.unmerged=void 0):v.isReadOnly?(this.mergedConfigs=_(),this.unmerged=[]):(this.mergedConfigs=_(v.mergedConfigs),this.unmerged=v.unmerged.slice(0)),this.configs=v.configs.slice(0),this._dipsIntoOuterContext=v._dipsIntoOuterContext,this._hasSemanticContext=v._hasSemanticContext,this.outermostConfigSet=v.outermostConfigSet,(m||!v.isReadOnly)&&(this._uniqueAlt=v._uniqueAlt,this._conflictInfo=v._conflictInfo)):(this.mergedConfigs=_(),this.unmerged=[],this.configs=[],this._uniqueAlt=n.ATN.INVALID_ALT_NUMBER)}getRepresentedAlternatives(){if(this._conflictInfo!=null)return this._conflictInfo.conflictedAlts.clone();let v=new o.BitSet;for(let m of this)v.set(m.alt);return v}get isReadOnly(){return this.mergedConfigs==null}get isOutermostConfigSet(){return this.outermostConfigSet}set isOutermostConfigSet(v){if(this.outermostConfigSet&&!v)throw new Error("IllegalStateException");d(!v||!this._dipsIntoOuterContext),this.outermostConfigSet=v}getStates(){let v=new e.Array2DHashSet(l.ObjectEqualityComparator.INSTANCE);for(let m of this.configs)v.add(m.state);return v}optimizeConfigs(v){if(this.configs.length!==0)for(let m of this.configs)m.context=v.atn.getCachedContext(m.context)}clone(v){let m=new dd(this,v);return!v&&this.isReadOnly&&m.addAll(this.configs),m}get size(){return this.configs.length}get isEmpty(){return this.configs.length===0}contains(v){if(!(v instanceof s.ATNConfig))return!1;if(this.mergedConfigs&&this.unmerged){let m=v,y=this.getKey(m),S=this.mergedConfigs.get(y);if(S!=null&&this.canMerge(m,y,S))return S.contains(m);for(let E of this.unmerged)if(E.contains(v))return!0}else for(let m of this.configs)if(m.contains(v))return!0;return!1}*[Symbol.iterator](){yield*this.configs}toArray(){return this.configs}add(v,m){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");d(!this.outermostConfigSet||!v.reachesIntoOuterContext),m==null&&(m=h.PredictionContextCache.UNCACHED);let y,S=this.getKey(v),E=this.mergedConfigs.get(S);if(y=E==null,E!=null&&this.canMerge(v,S,E)){E.outerContextDepth=Math.max(E.outerContextDepth,v.outerContextDepth),v.isPrecedenceFilterSuppressed&&(E.isPrecedenceFilterSuppressed=!0);let b=u.PredictionContext.join(E.context,v.context,m);return this.updatePropertiesForMergedConfig(v),E.context===b?!1:(E.context=b,!0)}for(let b=0;b<this.unmerged.length;b++){let T=this.unmerged[b];if(this.canMerge(v,S,T)){T.outerContextDepth=Math.max(T.outerContextDepth,v.outerContextDepth),v.isPrecedenceFilterSuppressed&&(T.isPrecedenceFilterSuppressed=!0);let C=u.PredictionContext.join(T.context,v.context,m);return this.updatePropertiesForMergedConfig(v),T.context===C?!1:(T.context=C,y&&(this.mergedConfigs.put(S,T),this.unmerged.splice(b,1)),!0)}}return this.configs.push(v),y?this.mergedConfigs.put(S,v):this.unmerged.push(v),this.updatePropertiesForAddedConfig(v),!0}updatePropertiesForMergedConfig(v){this._dipsIntoOuterContext=this._dipsIntoOuterContext||v.reachesIntoOuterContext,d(!this.outermostConfigSet||!this._dipsIntoOuterContext)}updatePropertiesForAddedConfig(v){this.configs.length===1?this._uniqueAlt=v.alt:this._uniqueAlt!==v.alt&&(this._uniqueAlt=n.ATN.INVALID_ALT_NUMBER),this._hasSemanticContext=this._hasSemanticContext||!c.SemanticContext.NONE.equals(v.semanticContext),this._dipsIntoOuterContext=this._dipsIntoOuterContext||v.reachesIntoOuterContext,d(!this.outermostConfigSet||!this._dipsIntoOuterContext)}canMerge(v,m,y){return v.state.stateNumber!==y.state.stateNumber||m.alt!==y.alt?!1:v.semanticContext.equals(y.semanticContext)}getKey(v){return{state:v.state.stateNumber,alt:v.alt}}containsAll(v){for(let m of v)if(!(m instanceof s.ATNConfig)||!this.contains(m))return!1;return!0}addAll(v,m){this.ensureWritable();let y=!1;for(let S of v)this.add(S,m)&&(y=!0);return y}clear(){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");this.mergedConfigs.clear(),this.unmerged.length=0,this.configs.length=0,this._dipsIntoOuterContext=!1,this._hasSemanticContext=!1,this._uniqueAlt=n.ATN.INVALID_ALT_NUMBER,this._conflictInfo=void 0}equals(v){return this===v?!0:v instanceof dd?this.outermostConfigSet===v.outermostConfigSet&&f.equals(this._conflictInfo,v._conflictInfo)&&i.ArrayEqualityComparator.INSTANCE.equals(this.configs,v.configs):!1}hashCode(){if(this.isReadOnly&&this.cachedHashCode!==-1)return this.cachedHashCode;let v=1;return v=5*v^(this.outermostConfigSet?1:0),v=5*v^i.ArrayEqualityComparator.INSTANCE.hashCode(this.configs),this.isReadOnly&&(this.cachedHashCode=v),v}toString(v){v==null&&(v=!1);let m="",y=this.configs.slice(0);y.sort((S,E)=>S.alt!==E.alt?S.alt-E.alt:S.state.stateNumber!==E.state.stateNumber?S.state.stateNumber-E.state.stateNumber:S.semanticContext.toString().localeCompare(E.semanticContext.toString())),m+="[";for(let S=0;S<y.length;S++)S>0&&(m+=", "),m+=y[S].toString(void 0,!0,v);return m+="]",this._hasSemanticContext&&(m+=",hasSemanticContext="+this._hasSemanticContext),this._uniqueAlt!==n.ATN.INVALID_ALT_NUMBER&&(m+=",uniqueAlt="+this._uniqueAlt),this._conflictInfo!=null&&(m+=",conflictingAlts="+this._conflictInfo.conflictedAlts,this._conflictInfo.isExact||(m+="*")),this._dipsIntoOuterContext&&(m+=",dipsIntoOuterContext"),m.toString()}get uniqueAlt(){return this._uniqueAlt}get hasSemanticContext(){return this._hasSemanticContext}set hasSemanticContext(v){this.ensureWritable(),this._hasSemanticContext=v}get conflictInfo(){return this._conflictInfo}set conflictInfo(v){this.ensureWritable(),this._conflictInfo=v}get conflictingAlts(){if(this._conflictInfo!=null)return this._conflictInfo.conflictedAlts}get isExactConflict(){return this._conflictInfo==null?!1:this._conflictInfo.isExact}get dipsIntoOuterContext(){return this._dipsIntoOuterContext}get(v){return this.configs[v]}ensureWritable(){if(this.isReadOnly)throw new Error("This ATNConfigSet is read only.")}};return r([a.NotNull],x.prototype,"getRepresentedAlternatives",null),r([a.Override],x.prototype,"size",null),r([a.Override],x.prototype,"isEmpty",null),r([a.Override],x.prototype,"contains",null),r([a.Override],x.prototype,Symbol.iterator,null),r([a.Override],x.prototype,"toArray",null),r([a.Override],x.prototype,"containsAll",null),r([a.Override],x.prototype,"clear",null),r([a.Override],x.prototype,"equals",null),r([a.Override],x.prototype,"hashCode",null),to.ATNConfigSet=x,to}var ro={},xc={},mc={},Kp;function Lu(){return Kp||(Kp=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__decorate||function(h,c,d,f){var p=arguments.length,_=p<3?c:f===null?f=Object.getOwnPropertyDescriptor(c,d):f,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(h,c,d,f);else for(var g=h.length-1;g>=0;g--)(x=h[g])&&(_=(p<3?x(_):p>3?x(c,d,_):x(c,d))||_);return p>3&&_&&Object.defineProperty(c,d,_),_},e=A&&A.__param||function(h,c){return function(d,f){c(d,f,h)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DFAState=void 0;const i=Fr(),n=hr,s=jt,o=G,a=ur(),l=Be;class u{constructor(c){this.stateNumber=-1,this.configs=c,this.edges=new Map,this.contextEdges=new Map}get isContextSensitive(){return!!this.contextSymbols}isContextSymbol(c){return this.isContextSensitive?this.contextSymbols.get(c):!1}setContextSymbol(c){l(this.isContextSensitive),this.contextSymbols.set(c)}setContextSensitive(c){l(!this.configs.isOutermostConfigSet),!this.isContextSensitive&&(this.contextSymbols||(this.contextSymbols=new n.BitSet))}get acceptStateInfo(){return this._acceptStateInfo}set acceptStateInfo(c){this._acceptStateInfo=c}get isAcceptState(){return!!this._acceptStateInfo}get prediction(){return this._acceptStateInfo?this._acceptStateInfo.prediction:i.ATN.INVALID_ALT_NUMBER}get lexerActionExecutor(){if(this._acceptStateInfo)return this._acceptStateInfo.lexerActionExecutor}getTarget(c){return this.edges.get(c)}setTarget(c,d){this.edges.set(c,d)}getEdgeMap(){return this.edges}getContextTarget(c){return c===a.PredictionContext.EMPTY_FULL_STATE_KEY&&(c=-1),this.contextEdges.get(c)}setContextTarget(c,d){if(!this.isContextSensitive)throw new Error("The state is not context sensitive.");c===a.PredictionContext.EMPTY_FULL_STATE_KEY&&(c=-1),this.contextEdges.set(c,d)}getContextEdgeMap(){let c=new Map(this.contextEdges),d=c.get(-1);if(d!==void 0)if(c.size===1){let f=new Map;return f.set(a.PredictionContext.EMPTY_FULL_STATE_KEY,d),f}else c.delete(-1),c.set(a.PredictionContext.EMPTY_FULL_STATE_KEY,d);return c}hashCode(){let c=s.MurmurHash.initialize(7);return c=s.MurmurHash.update(c,this.configs.hashCode()),c=s.MurmurHash.finish(c,1),c}equals(c){if(this===c)return!0;if(!(c instanceof u))return!1;let d=c;return this.configs.equals(d.configs)}toString(){let c="";return c+=this.stateNumber+":"+this.configs,this.isAcceptState&&(c+="=>",this.predicates?c+=this.predicates:c+=this.prediction),c.toString()}}t([o.NotNull],u.prototype,"configs",void 0),t([o.NotNull],u.prototype,"edges",void 0),t([o.NotNull],u.prototype,"contextEdges",void 0),t([o.Override],u.prototype,"hashCode",null),t([o.Override],u.prototype,"equals",null),t([o.Override],u.prototype,"toString",null),r.DFAState=u,function(h){let c=class{constructor(f,p){this.alt=p,this.pred=f}toString(){return"("+this.pred+", "+this.alt+")"}};t([o.NotNull],c.prototype,"pred",void 0),t([o.Override],c.prototype,"toString",null),c=t([e(0,o.NotNull)],c),h.PredPrediction=c}(u=r.DFAState||(r.DFAState={}))}(mc)),mc}var Zp;function Bu(){return Zp||(Zp=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__decorate||function(l,u,h,c){var d=arguments.length,f=d<3?u:c===null?c=Object.getOwnPropertyDescriptor(u,h):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(l,u,h,c);else for(var _=l.length-1;_>=0;_--)(p=l[_])&&(f=(d<3?p(f):d>3?p(u,h,f):p(u,h))||f);return d>3&&f&&Object.defineProperty(u,h,f),f},e=A&&A.__param||function(l,u){return function(h,c){u(h,c,l)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ATNSimulator=void 0;const i=Ra(),n=Lu(),s=G,o=ur();let a=class ta{constructor(u){this.atn=u}static get ERROR(){return ta._ERROR||(ta._ERROR=new n.DFAState(new i.ATNConfigSet),ta._ERROR.stateNumber=o.PredictionContext.EMPTY_FULL_STATE_KEY),ta._ERROR}clearDFA(){this.atn.clearDFA()}};t([s.NotNull],a.prototype,"atn",void 0),t([s.NotNull],a,"ERROR",null),a=t([e(0,s.NotNull)],a),r.ATNSimulator=a,function(l){}(a=r.ATNSimulator||(r.ATNSimulator={})),r.ATNSimulator=a}(xc)),xc}var Ii={},Ia={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ia,"__esModule",{value:!0});Ia.ConsoleErrorListener=void 0;class fd{syntaxError(t,e,i,n,s,o){console.error(`line ${i}:${n} ${s}`)}}Ia.ConsoleErrorListener=fd;fd.INSTANCE=new fd;var Is={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var JC=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Qp=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Is,"__esModule",{value:!0});Is.ProxyErrorListener=void 0;const _c=G;class L_{constructor(t){if(this.delegates=t,!t)throw new Error("Invalid delegates")}getDelegates(){return this.delegates}syntaxError(t,e,i,n,s,o){this.delegates.forEach(a=>{a.syntaxError&&a.syntaxError(t,e,i,n,s,o)})}}JC([_c.Override,Qp(0,_c.NotNull),Qp(4,_c.NotNull)],L_.prototype,"syntaxError",null);Is.ProxyErrorListener=L_;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Or=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Mu=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.Recognizer=void 0;const tw=Ia,ew=Is,Le=G,Jp=St,rw=Qt;class Jt{constructor(){this._listeners=[tw.ConsoleErrorListener.INSTANCE],this._stateNumber=-1}getTokenTypeMap(){let t=this.vocabulary,e=Jt.tokenTypeMapCache.get(t);if(e==null){let i=new Map;for(let n=0;n<=this.atn.maxTokenType;n++){let s=t.getLiteralName(n);s!=null&&i.set(s,n);let o=t.getSymbolicName(n);o!=null&&i.set(o,n)}i.set("EOF",Jp.Token.EOF),e=i,Jt.tokenTypeMapCache.set(t,e)}return e}getRuleIndexMap(){let t=this.ruleNames;if(t==null)throw new Error("The current recognizer does not provide a list of rule names.");let e=Jt.ruleIndexMapCache.get(t);return e==null&&(e=rw.toMap(t),Jt.ruleIndexMapCache.set(t,e)),e}getTokenType(t){let e=this.getTokenTypeMap().get(t);return e??Jp.Token.INVALID_TYPE}get serializedATN(){throw new Error("there is no serialized ATN")}get atn(){return this._interp.atn}get interpreter(){return this._interp}set interpreter(t){this._interp=t}get parseInfo(){return Promise.resolve(void 0)}getErrorHeader(t){let e=t.getOffendingToken();if(!e)return"";let i=e.line,n=e.charPositionInLine;return"line "+i+":"+n}addErrorListener(t){if(!t)throw new TypeError("listener must not be null");this._listeners.push(t)}removeErrorListener(t){let e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}removeErrorListeners(){this._listeners.length=0}getErrorListeners(){return this._listeners.slice(0)}getErrorListenerDispatch(){return new ew.ProxyErrorListener(this.getErrorListeners())}sempred(t,e,i){return!0}precpred(t,e){return!0}action(t,e,i){}get state(){return this._stateNumber}set state(t){this._stateNumber=t}}Jt.EOF=-1;Jt.tokenTypeMapCache=new WeakMap;Jt.ruleIndexMapCache=new WeakMap;Or([Le.SuppressWarnings("serial"),Le.NotNull],Jt.prototype,"_listeners",void 0);Or([Le.NotNull],Jt.prototype,"getTokenTypeMap",null);Or([Le.NotNull],Jt.prototype,"getRuleIndexMap",null);Or([Le.NotNull],Jt.prototype,"serializedATN",null);Or([Le.NotNull],Jt.prototype,"atn",null);Or([Le.NotNull,Mu(0,Le.NotNull)],Jt.prototype,"interpreter",null);Or([Le.NotNull,Mu(0,Le.NotNull)],Jt.prototype,"getErrorHeader",null);Or([Mu(0,Le.NotNull)],Jt.prototype,"addErrorListener",null);Or([Mu(0,Le.NotNull)],Jt.prototype,"removeErrorListener",null);Or([Le.NotNull],Jt.prototype,"getErrorListeners",null);Ii.Recognizer=Jt;var oi={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Pi=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(oi,"__esModule",{value:!0});var Pa=oi.VocabularyImpl=void 0;const Zr=G,iw=St;class nr{constructor(t,e,i){this.literalNames=t,this.symbolicNames=e,this.displayNames=i,this._maxTokenType=Math.max(this.displayNames.length,Math.max(this.literalNames.length,this.symbolicNames.length))-1}get maxTokenType(){return this._maxTokenType}getLiteralName(t){if(t>=0&&t<this.literalNames.length)return this.literalNames[t]}getSymbolicName(t){if(t>=0&&t<this.symbolicNames.length)return this.symbolicNames[t];if(t===iw.Token.EOF)return"EOF"}getDisplayName(t){if(t>=0&&t<this.displayNames.length){let n=this.displayNames[t];if(n)return n}let e=this.getLiteralName(t);if(e)return e;let i=this.getSymbolicName(t);return i||String(t)}}nr.EMPTY_VOCABULARY=new nr([],[],[]);Pi([Zr.NotNull],nr.prototype,"literalNames",void 0);Pi([Zr.NotNull],nr.prototype,"symbolicNames",void 0);Pi([Zr.NotNull],nr.prototype,"displayNames",void 0);Pi([Zr.Override],nr.prototype,"maxTokenType",null);Pi([Zr.Override],nr.prototype,"getLiteralName",null);Pi([Zr.Override],nr.prototype,"getSymbolicName",null);Pi([Zr.Override,Zr.NotNull],nr.prototype,"getDisplayName",null);Pi([Zr.NotNull],nr,"EMPTY_VOCABULARY",void 0);Pa=oi.VocabularyImpl=nr;var t0;function B_(){if(t0)return ro;t0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(a,l,u,h){var c=arguments.length,d=c<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,u):h,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(a,l,u,h);else for(var p=a.length-1;p>=0;p--)(f=a[p])&&(d=(c<3?f(d):c>3?f(l,u,d):f(l,u))||d);return c>3&&d&&Object.defineProperty(l,u,d),d};Object.defineProperty(ro,"__esModule",{value:!0}),ro.DFASerializer=void 0;const t=Bu(),e=G,i=ur(),n=Ii,s=oi;let o=class{constructor(l,u,h,c){u instanceof n.Recognizer?(h=u.ruleNames,c=u.atn,u=u.vocabulary):u||(u=s.VocabularyImpl.EMPTY_VOCABULARY),this.dfa=l,this.vocabulary=u,this.ruleNames=h,this.atn=c}toString(){if(!this.dfa.s0)return"";let l="";if(this.dfa.states){let h=new Array(...this.dfa.states.toArray());h.sort((c,d)=>c.stateNumber-d.stateNumber);for(let c of h){let d=c.getEdgeMap(),f=[...d.keys()].sort((x,g)=>x-g),p=c.getContextEdgeMap(),_=[...p.keys()].sort((x,g)=>x-g);for(let x of f){let g=d.get(x);if((g==null||g===t.ATNSimulator.ERROR)&&!c.isContextSymbol(x))continue;let v=!1;l+=this.getStateString(c)+"-"+this.getEdgeLabel(x)+"->",c.isContextSymbol(x)&&(l+="!",v=!0);let m=g;m&&m.stateNumber!==t.ATNSimulator.ERROR.stateNumber?l+=this.getStateString(m)+`
`:v&&(l+=`ctx
`)}if(c.isContextSensitive)for(let x of _)l+=this.getStateString(c)+"-"+this.getContextLabel(x)+"->"+this.getStateString(p.get(x))+`
`}}let u=l;return u.length===0?"":u}getContextLabel(l){if(l===i.PredictionContext.EMPTY_FULL_STATE_KEY)return"ctx:EMPTY_FULL";if(l===i.PredictionContext.EMPTY_LOCAL_STATE_KEY)return"ctx:EMPTY_LOCAL";if(this.atn&&l>0&&l<=this.atn.states.length){let h=this.atn.states[l].ruleIndex;if(this.ruleNames&&h>=0&&h<this.ruleNames.length)return"ctx:"+String(l)+"("+this.ruleNames[h]+")"}return"ctx:"+String(l)}getEdgeLabel(l){return this.vocabulary.getDisplayName(l)}getStateString(l){if(l===t.ATNSimulator.ERROR)return"ERROR";let u=l.stateNumber,h="s"+u;if(l.isAcceptState&&(l.predicates?h=":s"+u+"=>"+l.predicates:h=":s"+u+"=>"+l.prediction),l.isContextSensitive){h+="*";for(let c of l.configs)if(c.reachesIntoOuterContext){h+="*";break}}return h}};return r([e.NotNull],o.prototype,"dfa",void 0),r([e.NotNull],o.prototype,"vocabulary",void 0),r([e.Override],o.prototype,"toString",null),ro.DFASerializer=o,ro}var io={},e0;function nw(){if(e0)return io;e0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c},t=A&&A.__param||function(o,a){return function(l,u){a(l,u,o)}};Object.defineProperty(io,"__esModule",{value:!0}),io.LexerDFASerializer=void 0;const e=B_(),i=G,n=oi;let s=class extends e.DFASerializer{constructor(a){super(a,n.VocabularyImpl.EMPTY_VOCABULARY)}getEdgeLabel(a){return"'"+String.fromCodePoint(a)+"'"}};return r([i.Override,i.NotNull],s.prototype,"getEdgeLabel",null),s=r([t(0,i.NotNull)],s),io.LexerDFASerializer=s,io}var Ps={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var sw=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.StarLoopEntryState=void 0;const ow=re,aw=hr,lw=Dr,uw=G;class M_ extends lw.DecisionState{constructor(){super(...arguments),this.precedenceRuleDecision=!1,this.precedenceLoopbackStates=new aw.BitSet}get stateType(){return ow.ATNStateType.STAR_LOOP_ENTRY}}sw([uw.Override],M_.prototype,"stateType",null);Ps.StarLoopEntryState=M_;var r0;function k_(){if(r0)return Js;r0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(d,f,p,_){var x=arguments.length,g=x<3?f:_===null?_=Object.getOwnPropertyDescriptor(f,p):_,v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(d,f,p,_);else for(var m=d.length-1;m>=0;m--)(v=d[m])&&(g=(x<3?v(g):x>3?v(f,p,g):v(f,p))||g);return x>3&&g&&Object.defineProperty(f,p,g),g},t=A&&A.__param||function(d,f){return function(p,_){f(p,_,d)}};Object.defineProperty(Js,"__esModule",{value:!0}),Js.DFA=void 0;const e=lr,i=Ra(),n=B_(),s=Lu(),o=nw(),a=G,l=Me,u=Ps,h=oi;let c=class{constructor(f,p=0){if(this.states=new e.Array2DHashSet(l.ObjectEqualityComparator.INSTANCE),this.nextStateNumber=0,!f.atn)throw new Error("The ATNState must be associated with an ATN");this.atnStartState=f,this.atn=f.atn,this.decision=p;let _=!1;f instanceof u.StarLoopEntryState&&f.precedenceRuleDecision&&(_=!0,this.s0=new s.DFAState(new i.ATNConfigSet),this.s0full=new s.DFAState(new i.ATNConfigSet)),this.precedenceDfa=_}get isPrecedenceDfa(){return this.precedenceDfa}getPrecedenceStartState(f,p){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");return p?this.s0full.getTarget(f):this.s0.getTarget(f)}setPrecedenceStartState(f,p,_){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");f<0||(p?this.s0full.setTarget(f,_):this.s0.setTarget(f,_))}get isEmpty(){return this.isPrecedenceDfa?this.s0.getEdgeMap().size===0&&this.s0full.getEdgeMap().size===0:this.s0==null&&this.s0full==null}get isContextSensitive(){return this.isPrecedenceDfa?this.s0full.getEdgeMap().size>0:this.s0full!=null}addState(f){return f.stateNumber=this.nextStateNumber++,this.states.getOrAdd(f)}toString(f,p){if(f||(f=h.VocabularyImpl.EMPTY_VOCABULARY),!this.s0)return"";let _;return p?_=new n.DFASerializer(this,f,p,this.atnStartState.atn):_=new n.DFASerializer(this,f),_.toString()}toLexerString(){return this.s0?new o.LexerDFASerializer(this).toString():""}};return r([a.NotNull],c.prototype,"states",void 0),r([a.NotNull],c.prototype,"atnStartState",void 0),r([a.NotNull],c.prototype,"atn",void 0),c=r([t(0,a.NotNull)],c),Js.DFA=c,Js}var Da={},Oa={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var hw=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.BasicState=void 0;const cw=Ir,dw=re,fw=G;class U_ extends cw.ATNState{get stateType(){return dw.ATNStateType.BASIC}}hw([fw.Override],U_.prototype,"stateType",null);Oa.BasicState=U_;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var pw=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Da,"__esModule",{value:!0});Da.InvalidState=void 0;const xw=re,mw=Oa,_w=G;class H_ extends mw.BasicState{get stateType(){return xw.ATNStateType.INVALID_TYPE}}pw([_w.Override],H_.prototype,"stateType",null);Da.InvalidState=H_;var no={},so={},oo={},i0;function tf(){if(i0)return oo;i0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(a,l,u,h){var c=arguments.length,d=c<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,u):h,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(a,l,u,h);else for(var p=a.length-1;p>=0;p--)(f=a[p])&&(d=(c<3?f(d):c>3?f(l,u,d):f(l,u))||d);return c>3&&d&&Object.defineProperty(l,u,d),d},t=A&&A.__param||function(a,l){return function(u,h){l(u,h,a)}};Object.defineProperty(oo,"__esModule",{value:!0}),oo.SetTransition=void 0;const e=Dn(),i=G,n=St,s=ar;let o=class extends s.Transition{constructor(l,u){super(l),u==null&&(u=e.IntervalSet.of(n.Token.INVALID_TYPE)),this.set=u}get serializationType(){return 7}get label(){return this.set}matches(l,u,h){return this.set.contains(l)}toString(){return this.set.toString()}};return r([i.NotNull],o.prototype,"set",void 0),r([i.Override],o.prototype,"serializationType",null),r([i.Override,i.NotNull],o.prototype,"label",null),r([i.Override],o.prototype,"matches",null),r([i.Override,i.NotNull],o.prototype,"toString",null),o=r([t(0,i.NotNull),t(1,i.Nullable)],o),oo.SetTransition=o,oo}var n0;function ef(){if(n0)return so;n0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=A&&A.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(so,"__esModule",{value:!0}),so.NotSetTransition=void 0;const e=G,i=tf();let n=class extends i.SetTransition{constructor(o,a){super(o,a)}get serializationType(){return 8}matches(o,a,l){return o>=a&&o<=l&&!super.matches(o,a,l)}toString(){return"~"+super.toString()}};return r([e.Override],n.prototype,"serializationType",null),r([e.Override],n.prototype,"matches",null),r([e.Override],n.prototype,"toString",null),n=r([t(0,e.NotNull),t(1,e.Nullable)],n),so.NotSetTransition=n,so}var Di={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var j_=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Di,"__esModule",{value:!0});Di.RuleStopState=void 0;const gw=Ir,yw=re,$_=G;class rf extends gw.ATNState{get nonStopStateNumber(){return-1}get stateType(){return yw.ATNStateType.RULE_STOP}}j_([$_.Override],rf.prototype,"nonStopStateNumber",null);j_([$_.Override],rf.prototype,"stateType",null);Di.RuleStopState=rf;var Ds={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Fa=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},s0=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Ds,"__esModule",{value:!0});Ds.RuleTransition=void 0;const ys=G,vw=ar;let hn=class extends vw.Transition{constructor(t,e,i,n){super(t),this.tailCall=!1,this.optimizedTailCall=!1,this.ruleIndex=e,this.precedence=i,this.followState=n}get serializationType(){return 3}get isEpsilon(){return!0}matches(t,e,i){return!1}};Fa([ys.NotNull],hn.prototype,"followState",void 0);Fa([ys.Override],hn.prototype,"serializationType",null);Fa([ys.Override],hn.prototype,"isEpsilon",null);Fa([ys.Override],hn.prototype,"matches",null);hn=Fa([s0(0,ys.NotNull),s0(3,ys.NotNull)],hn);Ds.RuleTransition=hn;var La={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ku=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Ew=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(La,"__esModule",{value:!0});La.WildcardTransition=void 0;const _a=G,Tw=ar;let vs=class extends Tw.Transition{constructor(t){super(t)}get serializationType(){return 9}matches(t,e,i){return t>=e&&t<=i}toString(){return"."}};ku([_a.Override],vs.prototype,"serializationType",null);ku([_a.Override],vs.prototype,"matches",null);ku([_a.Override,_a.NotNull],vs.prototype,"toString",null);vs=ku([Ew(0,_a.NotNull)],vs);La.WildcardTransition=vs;var o0;function Aw(){if(o0)return no;o0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(x,g,v,m){var y=arguments.length,S=y<3?g:m===null?m=Object.getOwnPropertyDescriptor(g,v):m,E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(x,g,v,m);else for(var b=x.length-1;b>=0;b--)(E=x[b])&&(S=(y<3?E(S):y>3?E(g,v,S):E(g,v))||S);return y>3&&S&&Object.defineProperty(g,v,S),S},t=A&&A.__param||function(x,g){return function(v,m){g(v,m,x)}};Object.defineProperty(no,"__esModule",{value:!0}),no.LL1Analyzer=void 0;const e=Ns,i=lr,n=wn,s=hr,o=Dn(),a=G,l=ef(),u=Me,h=ur(),c=Di,d=Ds,f=St,p=La;let _=class pd{constructor(g){this.atn=g}getDecisionLookahead(g){if(g==null)return;let v=new Array(g.numberOfTransitions);for(let m=0;m<g.numberOfTransitions;m++){let y=new o.IntervalSet;v[m]=y;let S=new i.Array2DHashSet(u.ObjectEqualityComparator.INSTANCE),E=!1;this._LOOK(g.transition(m).target,void 0,h.PredictionContext.EMPTY_LOCAL,y,S,new s.BitSet,E,!1),(y.size===0||y.contains(pd.HIT_PRED))&&(y=void 0,v[m]=y)}return v}LOOK(g,v,m){if(m===void 0){if(g.atn==null)throw new Error("Illegal state");m=g.atn.ruleToStopState[g.ruleIndex]}else m===null&&(m=void 0);let y=new o.IntervalSet,S=!0,E=!0;return this._LOOK(g,m,v,y,new i.Array2DHashSet,new s.BitSet,S,E),y}_LOOK(g,v,m,y,S,E,b,T){let C=n.ATNConfig.create(g,0,m);if(!S.add(C))return;if(g===v){if(h.PredictionContext.isEmptyLocal(m)){y.add(f.Token.EPSILON);return}else if(m.isEmpty){T&&y.add(f.Token.EOF);return}}if(g instanceof c.RuleStopState){if(m.isEmpty&&!h.PredictionContext.isEmptyLocal(m)){T&&y.add(f.Token.EOF);return}let I=E.get(g.ruleIndex);try{E.clear(g.ruleIndex);for(let L=0;L<m.size;L++){if(m.getReturnState(L)===h.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let M=this.atn.states[m.getReturnState(L)];this._LOOK(M,v,m.getParent(L),y,S,E,b,T)}}finally{I&&E.set(g.ruleIndex)}}let D=g.numberOfTransitions;for(let I=0;I<D;I++){let L=g.transition(I);if(L instanceof d.RuleTransition){if(E.get(L.ruleIndex))continue;let M=m.getChild(L.followState.stateNumber);try{E.set(L.ruleIndex),this._LOOK(L.target,v,M,y,S,E,b,T)}finally{E.clear(L.ruleIndex)}}else if(L instanceof e.AbstractPredicateTransition)b?this._LOOK(L.target,v,m,y,S,E,b,T):y.add(pd.HIT_PRED);else if(L.isEpsilon)this._LOOK(L.target,v,m,y,S,E,b,T);else if(L instanceof p.WildcardTransition)y.addAll(o.IntervalSet.of(f.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType));else{let M=L.label;M!=null&&(L instanceof l.NotSetTransition&&(M=M.complement(o.IntervalSet.of(f.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType))),y.addAll(M))}}}};return _.HIT_PRED=f.Token.INVALID_TYPE,r([a.NotNull],_.prototype,"atn",void 0),r([a.NotNull,t(0,a.NotNull),t(1,a.NotNull)],_.prototype,"LOOK",null),r([t(0,a.NotNull),t(2,a.NotNull),t(3,a.NotNull),t(4,a.NotNull),t(5,a.NotNull)],_.prototype,"_LOOK",null),_=r([t(0,a.NotNull)],_),no.LL1Analyzer=_,no}var a0;function Fr(){return a0||(a0=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__decorate||function(p,_,x,g){var v=arguments.length,m=v<3?_:g===null?g=Object.getOwnPropertyDescriptor(_,x):g,y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(p,_,x,g);else for(var S=p.length-1;S>=0;S--)(y=p[S])&&(m=(v<3?y(m):v>3?y(_,x,m):y(_,x))||m);return v>3&&m&&Object.defineProperty(_,x,m),m},e=A&&A.__param||function(p,_){return function(x,g){_(x,g,p)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ATN=void 0;const i=si,n=k_(),s=Dn(),o=Da,a=Aw(),l=G,u=Me,h=ur(),c=St,d=Be;let f=class{constructor(_,x){this.states=[],this.decisionToState=[],this.modeNameToStartState=new Map,this.modeToStartState=[],this.contextCache=new i.Array2DHashMap(u.ObjectEqualityComparator.INSTANCE),this.decisionToDFA=[],this.modeToDFA=[],this.LL1Table=new Map,this.grammarType=_,this.maxTokenType=x}clearDFA(){this.decisionToDFA=new Array(this.decisionToState.length);for(let _=0;_<this.decisionToDFA.length;_++)this.decisionToDFA[_]=new n.DFA(this.decisionToState[_],_);this.modeToDFA=new Array(this.modeToStartState.length);for(let _=0;_<this.modeToDFA.length;_++)this.modeToDFA[_]=new n.DFA(this.modeToStartState[_]);this.contextCache.clear(),this.LL1Table.clear()}get contextCacheSize(){return this.contextCache.size}getCachedContext(_){return h.PredictionContext.getCachedContext(_,this.contextCache,new h.PredictionContext.IdentityHashMap)}getDecisionToDFA(){return d(this.decisionToDFA!=null&&this.decisionToDFA.length===this.decisionToState.length),this.decisionToDFA}nextTokens(_,x){return x?new a.LL1Analyzer(this).LOOK(_,x):(_.nextTokenWithinRule||(_.nextTokenWithinRule=this.nextTokens(_,h.PredictionContext.EMPTY_LOCAL),_.nextTokenWithinRule.setReadonly(!0)),_.nextTokenWithinRule)}addState(_){_.atn=this,_.stateNumber=this.states.length,this.states.push(_)}removeState(_){let x=new o.InvalidState;x.atn=this,x.stateNumber=_.stateNumber,this.states[_.stateNumber]=x}defineMode(_,x){this.modeNameToStartState.set(_,x),this.modeToStartState.push(x),this.modeToDFA.push(new n.DFA(x)),this.defineDecisionState(x)}defineDecisionState(_){return this.decisionToState.push(_),_.decision=this.decisionToState.length-1,this.decisionToDFA.push(new n.DFA(_,_.decision)),_.decision}getDecisionState(_){if(this.decisionToState.length>0)return this.decisionToState[_]}get numberOfDecisions(){return this.decisionToState.length}getExpectedTokens(_,x){if(_<0||_>=this.states.length)throw new RangeError("Invalid state number.");let g=x,v=this.states[_],m=this.nextTokens(v);if(!m.contains(c.Token.EPSILON))return m;let y=new s.IntervalSet;for(y.addAll(m),y.remove(c.Token.EPSILON);g!=null&&g.invokingState>=0&&m.contains(c.Token.EPSILON);){let E=this.states[g.invokingState].transition(0);m=this.nextTokens(E.followState),y.addAll(m),y.remove(c.Token.EPSILON),g=g._parent}return m.contains(c.Token.EPSILON)&&y.add(c.Token.EOF),y}};t([l.NotNull],f.prototype,"states",void 0),t([l.NotNull],f.prototype,"decisionToState",void 0),t([l.NotNull],f.prototype,"modeNameToStartState",void 0),t([l.NotNull],f.prototype,"modeToStartState",void 0),t([l.NotNull],f.prototype,"decisionToDFA",void 0),t([l.NotNull],f.prototype,"modeToDFA",void 0),t([l.NotNull],f.prototype,"nextTokens",null),t([e(0,l.NotNull)],f.prototype,"removeState",null),t([e(0,l.NotNull),e(1,l.NotNull)],f.prototype,"defineMode",null),t([e(0,l.NotNull)],f.prototype,"defineDecisionState",null),t([l.NotNull],f.prototype,"getExpectedTokens",null),f=t([e(0,l.NotNull)],f),r.ATN=f,function(p){p.INVALID_ALT_NUMBER=0}(f=r.ATN||(r.ATN={})),r.ATN=f}(cc)),cc}var Uu={},Hu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Nn=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Sw=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.LexerIndexedCustomAction=void 0;const Pl=jt,Rn=G;let Qr=class G_{constructor(t,e){this._offset=t,this._action=e}get offset(){return this._offset}get action(){return this._action}get actionType(){return this._action.actionType}get isPositionDependent(){return!0}execute(t){this._action.execute(t)}hashCode(){let t=Pl.MurmurHash.initialize();return t=Pl.MurmurHash.update(t,this._offset),t=Pl.MurmurHash.update(t,this._action),Pl.MurmurHash.finish(t,2)}equals(t){return t===this?!0:t instanceof G_?this._offset===t._offset&&this._action.equals(t._action):!1}};Nn([Rn.NotNull],Qr.prototype,"action",null);Nn([Rn.Override],Qr.prototype,"actionType",null);Nn([Rn.Override],Qr.prototype,"isPositionDependent",null);Nn([Rn.Override],Qr.prototype,"execute",null);Nn([Rn.Override],Qr.prototype,"hashCode",null);Nn([Rn.Override],Qr.prototype,"equals",null);Qr=Nn([Sw(1,Rn.NotNull)],Qr);Hu.LexerIndexedCustomAction=Qr;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var In=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},nf=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.LexerActionExecutor=void 0;const bw=bn,gc=Hu,yc=jt,wi=G;let Jr=class ea{constructor(t){this._lexerActions=t;let e=yc.MurmurHash.initialize();for(let i of t)e=yc.MurmurHash.update(e,i);this.cachedHashCode=yc.MurmurHash.finish(e,t.length)}static append(t,e){if(!t)return new ea([e]);let i=t._lexerActions.slice(0);return i.push(e),new ea(i)}fixOffsetBeforeMatch(t){let e;for(let i=0;i<this._lexerActions.length;i++)this._lexerActions[i].isPositionDependent&&!(this._lexerActions[i]instanceof gc.LexerIndexedCustomAction)&&(e||(e=this._lexerActions.slice(0)),e[i]=new gc.LexerIndexedCustomAction(t,this._lexerActions[i]));return e?new ea(e):this}get lexerActions(){return this._lexerActions}execute(t,e,i){let n=!1,s=e.index;try{for(let o of this._lexerActions){if(o instanceof gc.LexerIndexedCustomAction){let a=o.offset;e.seek(i+a),o=o.action,n=i+a!==s}else o.isPositionDependent&&(e.seek(s),n=!1);o.execute(t)}}finally{n&&e.seek(s)}}hashCode(){return this.cachedHashCode}equals(t){return t===this?!0:t instanceof ea?this.cachedHashCode===t.cachedHashCode&&bw.ArrayEqualityComparator.INSTANCE.equals(this._lexerActions,t._lexerActions):!1}};In([wi.NotNull],Jr.prototype,"_lexerActions",void 0);In([wi.NotNull],Jr.prototype,"lexerActions",null);In([nf(0,wi.NotNull)],Jr.prototype,"execute",null);In([wi.Override],Jr.prototype,"hashCode",null);In([wi.Override],Jr.prototype,"equals",null);In([wi.NotNull,nf(1,wi.NotNull)],Jr,"append",null);Jr=In([nf(0,wi.NotNull)],Jr);Uu.LexerActionExecutor=Jr;var Pn={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var sf=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Cw=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.LexerNoViableAltException=void 0;const ww=Pr,of=G,Nw=de,Rw=Qt;let ga=class extends ww.RecognitionException{constructor(t,e,i,n){super(t,e),this._startIndex=i,this._deadEndConfigs=n}get startIndex(){return this._startIndex}get deadEndConfigs(){return this._deadEndConfigs}get inputStream(){return super.inputStream}toString(){let t="";return this._startIndex>=0&&this._startIndex<this.inputStream.size&&(t=this.inputStream.getText(Nw.Interval.of(this._startIndex,this._startIndex)),t=Rw.escapeWhitespace(t,!1)),`LexerNoViableAltException('${t}')`}};sf([of.Override],ga.prototype,"inputStream",null);sf([of.Override],ga.prototype,"toString",null);ga=sf([Cw(1,of.NotNull)],ga);Pn.LexerNoViableAltException=ga;var ao={},l0;function Iw(){if(l0)return ao;l0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(n,s,o,a){var l=arguments.length,u=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,s,o,a);else for(var c=n.length-1;c>=0;c--)(h=n[c])&&(u=(l<3?h(u):l>3?h(s,o,u):h(s,o))||u);return l>3&&u&&Object.defineProperty(s,o,u),u};Object.defineProperty(ao,"__esModule",{value:!0}),ao.OrderedATNConfigSet=void 0;const t=Ra(),e=G;let i=class z_ extends t.ATNConfigSet{constructor(s,o){s!=null&&o!=null?super(s,o):super()}clone(s){let o=new z_(this,s);return!s&&this.isReadOnly&&o.addAll(this),o}getKey(s){return{state:0,alt:s.hashCode()}}canMerge(s,o,a){return s.equals(a)}};return r([e.Override],i.prototype,"clone",null),r([e.Override],i.prototype,"getKey",null),r([e.Override],i.prototype,"canMerge",null),ao.OrderedATNConfigSet=i,ao}var u0;function ju(){return u0||(u0=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__decorate||function(S,E,b,T){var C=arguments.length,D=C<3?E:T===null?T=Object.getOwnPropertyDescriptor(E,b):T,I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(S,E,b,T);else for(var L=S.length-1;L>=0;L--)(I=S[L])&&(D=(C<3?I(D):C>3?I(E,b,D):I(E,b))||D);return C>3&&D&&Object.defineProperty(E,b,D),D},e=A&&A.__param||function(S,E){return function(b,T){E(b,T,S)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerATNSimulator=void 0;const i=Na,n=Fr(),s=wn,o=Ra(),a=Bu(),l=Lu(),u=de,h=ni,c=Oi(),d=Uu,f=Pn,p=G,_=Iw(),x=ur(),g=Di,v=St,m=Be;let y=class Ie extends a.ATNSimulator{constructor(E,b){super(E),this.optimize_tail_calls=!0,this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=c.Lexer.DEFAULT_MODE,this.prevAccept=new Ie.SimState,this.recog=b}copyState(E){this._charPositionInLine=E.charPositionInLine,this._line=E._line,this.mode=E.mode,this.startIndex=E.startIndex}match(E,b){this.mode=b;let T=E.mark();try{this.startIndex=E.index,this.prevAccept.reset();let C=this.atn.modeToDFA[b].s0;return C==null?this.matchATN(E):this.execATN(E,C)}finally{E.release(T)}}reset(){this.prevAccept.reset(),this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=c.Lexer.DEFAULT_MODE}matchATN(E){let b=this.atn.modeToStartState[this.mode];Ie.debug&&console.log(`matchATN mode ${this.mode} start: ${b}`);let T=this.mode,C=this.computeStartState(E,b),D=C.hasSemanticContext;D&&(C.hasSemanticContext=!1);let I=this.addDFAState(C);if(!D){let M=this.atn.modeToDFA[this.mode];M.s0?I=M.s0:M.s0=I}let L=this.execATN(E,I);return Ie.debug&&console.log(`DFA after matchATN: ${this.atn.modeToDFA[T].toLexerString()}`),L}execATN(E,b){Ie.debug&&console.log(`start state closure=${b.configs}`),b.isAcceptState&&this.captureSimState(this.prevAccept,E,b);let T=E.LA(1),C=b;for(;;){Ie.debug&&console.log(`execATN loop starting closure: ${C.configs}`);let D=this.getExistingTargetState(C,T);if(D==null&&(D=this.computeTargetState(E,C,T)),D===a.ATNSimulator.ERROR||(T!==h.IntStream.EOF&&this.consume(E),D.isAcceptState&&(this.captureSimState(this.prevAccept,E,D),T===h.IntStream.EOF)))break;T=E.LA(1),C=D}return this.failOrAccept(this.prevAccept,E,C.configs,T)}getExistingTargetState(E,b){let T=E.getTarget(b);return Ie.debug&&T!=null&&console.log("reuse state "+E.stateNumber+" edge to "+T.stateNumber),T}computeTargetState(E,b,T){let C=new _.OrderedATNConfigSet;return this.getReachableConfigSet(E,b.configs,C,T),C.isEmpty?(C.hasSemanticContext||this.addDFAEdge(b,T,a.ATNSimulator.ERROR),a.ATNSimulator.ERROR):this.addDFAEdge(b,T,C)}failOrAccept(E,b,T,C){if(E.dfaState!=null){let D=E.dfaState.lexerActionExecutor;return this.accept(b,D,this.startIndex,E.index,E.line,E.charPos),E.dfaState.prediction}else{if(C===h.IntStream.EOF&&b.index===this.startIndex)return v.Token.EOF;throw new f.LexerNoViableAltException(this.recog,b,this.startIndex,T)}}getReachableConfigSet(E,b,T,C){let D=n.ATN.INVALID_ALT_NUMBER;for(let I of b){let L=I.alt===D;if(L&&I.hasPassedThroughNonGreedyDecision)continue;Ie.debug&&console.log(`testing ${this.getTokenName(C)} at ${I.toString(this.recog,!0)}`);let M=I.state.numberOfOptimizedTransitions;for(let k=0;k<M;k++){let q=I.state.getOptimizedTransition(k),ht=this.getReachableTarget(q,C);if(ht!=null){let it=I.lexerActionExecutor,at;it!=null?(it=it.fixOffsetBeforeMatch(E.index-this.startIndex),at=I.transform(ht,!0,it)):(m(I.lexerActionExecutor==null),at=I.transform(ht,!0));let Dt=C===h.IntStream.EOF;if(this.closure(E,at,T,L,!0,Dt)){D=I.alt;break}}}}}accept(E,b,T,C,D,I){Ie.debug&&console.log(`ACTION ${b}`),E.seek(C),this._line=D,this._charPositionInLine=I,b!=null&&this.recog!=null&&b.execute(this.recog,E,T)}getReachableTarget(E,b){if(E.matches(b,c.Lexer.MIN_CHAR_VALUE,c.Lexer.MAX_CHAR_VALUE))return E.target}computeStartState(E,b){let T=x.PredictionContext.EMPTY_FULL,C=new _.OrderedATNConfigSet;for(let D=0;D<b.numberOfTransitions;D++){let I=b.transition(D).target,L=s.ATNConfig.create(I,D+1,T);this.closure(E,L,C,!1,!1,!1)}return C}closure(E,b,T,C,D,I){if(Ie.debug&&console.log("closure("+b.toString(this.recog,!0)+")"),b.state instanceof g.RuleStopState){Ie.debug&&(this.recog!=null?console.log(`closure at ${this.recog.ruleNames[b.state.ruleIndex]} rule stop ${b}`):console.log(`closure at rule stop ${b}`));let M=b.context;if(M.isEmpty)return T.add(b),!0;M.hasEmpty&&(T.add(b.transform(b.state,!0,x.PredictionContext.EMPTY_FULL)),C=!0);for(let k=0;k<M.size;k++){let q=M.getReturnState(k);if(q===x.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let ht=M.getParent(k),it=this.atn.states[q],at=b.transform(it,!1,ht);C=this.closure(E,at,T,C,D,I)}return C}b.state.onlyHasEpsilonTransitions||(!C||!b.hasPassedThroughNonGreedyDecision)&&T.add(b);let L=b.state;for(let M=0;M<L.numberOfOptimizedTransitions;M++){let k=L.getOptimizedTransition(M),q=this.getEpsilonTarget(E,b,k,T,D,I);q!=null&&(C=this.closure(E,q,T,C,D,I))}return C}getEpsilonTarget(E,b,T,C,D,I){let L;switch(T.serializationType){case 3:let M=T;if(this.optimize_tail_calls&&M.optimizedTailCall&&!b.context.hasEmpty)L=b.transform(T.target,!0);else{let q=b.context.getChild(M.followState.stateNumber);L=b.transform(T.target,!0,q)}break;case 10:throw new Error("Precedence predicates are not supported in lexers.");case 4:let k=T;Ie.debug&&console.log("EVAL rule "+k.ruleIndex+":"+k.predIndex),C.hasSemanticContext=!0,this.evaluatePredicate(E,k.ruleIndex,k.predIndex,D)?L=b.transform(T.target,!0):L=void 0;break;case 6:if(b.context.hasEmpty){let q=d.LexerActionExecutor.append(b.lexerActionExecutor,this.atn.lexerActions[T.actionIndex]);L=b.transform(T.target,!0,q);break}else{L=b.transform(T.target,!0);break}case 1:L=b.transform(T.target,!0);break;case 5:case 2:case 7:if(I&&T.matches(h.IntStream.EOF,c.Lexer.MIN_CHAR_VALUE,c.Lexer.MAX_CHAR_VALUE)){L=b.transform(T.target,!1);break}L=void 0;break;default:L=void 0;break}return L}evaluatePredicate(E,b,T,C){if(this.recog==null)return!0;if(!C)return this.recog.sempred(void 0,b,T);let D=this._charPositionInLine,I=this._line,L=E.index,M=E.mark();try{return this.consume(E),this.recog.sempred(void 0,b,T)}finally{this._charPositionInLine=D,this._line=I,E.seek(L),E.release(M)}}captureSimState(E,b,T){E.index=b.index,E.line=this._line,E.charPos=this._charPositionInLine,E.dfaState=T}addDFAEdge(E,b,T){if(T instanceof o.ATNConfigSet){let C=T.hasSemanticContext;C&&(T.hasSemanticContext=!1);let D=this.addDFAState(T);return C||this.addDFAEdge(E,b,D),D}else Ie.debug&&console.log("EDGE "+E+" -> "+T+" upon "+String.fromCharCode(b)),E!=null&&E.setTarget(b,T)}addDFAState(E){m(!E.hasSemanticContext);let b=new l.DFAState(E),T=this.atn.modeToDFA[this.mode].states.get(b);if(T!=null)return T;E.optimizeConfigs(this);let C=new l.DFAState(E.clone(!0)),D;for(let I of E)if(I.state instanceof g.RuleStopState){D=I;break}if(D!=null){let I=this.atn.ruleToTokenType[D.state.ruleIndex],L=D.lexerActionExecutor;C.acceptStateInfo=new i.AcceptStateInfo(I,L)}return this.atn.modeToDFA[this.mode].addState(C)}getDFA(E){return this.atn.modeToDFA[E]}getText(E){return E.getText(u.Interval.of(this.startIndex,E.index-1))}get line(){return this._line}set line(E){this._line=E}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(E){this._charPositionInLine=E}consume(E){E.LA(1)===`
`.charCodeAt(0)?(this._line++,this._charPositionInLine=0):this._charPositionInLine++,E.consume()}getTokenName(E){return E===-1?"EOF":"'"+String.fromCharCode(E)+"'"}};t([p.NotNull],y.prototype,"prevAccept",void 0),t([e(0,p.NotNull)],y.prototype,"copyState",null),t([e(0,p.NotNull)],y.prototype,"match",null),t([p.Override],y.prototype,"reset",null),t([e(0,p.NotNull)],y.prototype,"matchATN",null),t([e(0,p.NotNull),e(1,p.NotNull)],y.prototype,"execATN",null),t([e(0,p.NotNull)],y.prototype,"getExistingTargetState",null),t([p.NotNull,e(0,p.NotNull),e(1,p.NotNull)],y.prototype,"computeTargetState",null),t([e(0,p.NotNull),e(1,p.NotNull),e(2,p.NotNull)],y.prototype,"getReachableConfigSet",null),t([e(0,p.NotNull)],y.prototype,"accept",null),t([p.NotNull,e(0,p.NotNull),e(1,p.NotNull)],y.prototype,"computeStartState",null),t([e(0,p.NotNull),e(1,p.NotNull),e(2,p.NotNull)],y.prototype,"closure",null),t([e(0,p.NotNull),e(1,p.NotNull),e(2,p.NotNull),e(3,p.NotNull)],y.prototype,"getEpsilonTarget",null),t([e(0,p.NotNull)],y.prototype,"evaluatePredicate",null),t([e(0,p.NotNull),e(1,p.NotNull),e(2,p.NotNull)],y.prototype,"captureSimState",null),t([p.NotNull,e(0,p.NotNull)],y.prototype,"addDFAState",null),t([p.NotNull],y.prototype,"getDFA",null),t([p.NotNull,e(0,p.NotNull)],y.prototype,"getText",null),t([e(0,p.NotNull)],y.prototype,"consume",null),t([p.NotNull],y.prototype,"getTokenName",null),y=t([e(0,p.NotNull)],y),r.LexerATNSimulator=y,function(S){S.debug=!1,S.dfa_debug=!1;class E{constructor(){this.index=-1,this.line=0,this.charPos=-1}reset(){this.index=-1,this.line=0,this.charPos=-1,this.dfaState=void 0}}S.SimState=E}(y=r.LexerATNSimulator||(r.LexerATNSimulator={})),r.LexerATNSimulator=y}(hc)),hc}var h0;function Oi(){if(h0)return Qs;h0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(c,d,f,p){var _=arguments.length,x=_<3?d:p===null?p=Object.getOwnPropertyDescriptor(d,f):p,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,d,f,p);else for(var v=c.length-1;v>=0;v--)(g=c[v])&&(x=(_<3?g(x):_>3?g(d,f,x):g(d,f))||x);return _>3&&x&&Object.defineProperty(d,f,x),x};Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.Lexer=void 0;const t=Fu,e=wa,i=de,n=ni,s=ju(),o=Pn,a=G,l=Ii,u=St;let h=class mi extends l.Recognizer{constructor(d){super(),this._factory=t.CommonTokenFactory.DEFAULT,this._tokenStartCharIndex=-1,this._tokenStartLine=0,this._tokenStartCharPositionInLine=0,this._hitEOF=!1,this._channel=0,this._type=0,this._modeStack=new e.IntegerStack,this._mode=mi.DEFAULT_MODE,this._input=d,this._tokenFactorySourcePair={source:this,stream:d}}static get DEFAULT_TOKEN_CHANNEL(){return u.Token.DEFAULT_CHANNEL}static get HIDDEN(){return u.Token.HIDDEN_CHANNEL}reset(d){(d===void 0||d)&&this._input.seek(0),this._token=void 0,this._type=u.Token.INVALID_TYPE,this._channel=u.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartCharPositionInLine=-1,this._tokenStartLine=-1,this._text=void 0,this._hitEOF=!1,this._mode=mi.DEFAULT_MODE,this._modeStack.clear(),this.interpreter.reset()}nextToken(){if(this._input==null)throw new Error("nextToken requires a non-null input stream.");let d=this._input.mark();try{t:for(;;){if(this._hitEOF)return this.emitEOF();this._token=void 0,this._channel=u.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartCharPositionInLine=this.interpreter.charPositionInLine,this._tokenStartLine=this.interpreter.line,this._text=void 0;do{this._type=u.Token.INVALID_TYPE;let f;try{f=this.interpreter.match(this._input,this._mode)}catch(p){if(p instanceof o.LexerNoViableAltException)this.notifyListeners(p),this.recover(p),f=mi.SKIP;else throw p}if(this._input.LA(1)===n.IntStream.EOF&&(this._hitEOF=!0),this._type===u.Token.INVALID_TYPE&&(this._type=f),this._type===mi.SKIP)continue t}while(this._type===mi.MORE);return this._token==null?this.emit():this._token}}finally{this._input.release(d)}}skip(){this._type=mi.SKIP}more(){this._type=mi.MORE}mode(d){this._mode=d}pushMode(d){s.LexerATNSimulator.debug&&console.log("pushMode "+d),this._modeStack.push(this._mode),this.mode(d)}popMode(){if(this._modeStack.isEmpty)throw new Error("EmptyStackException");return s.LexerATNSimulator.debug&&console.log("popMode back to "+this._modeStack.peek()),this.mode(this._modeStack.pop()),this._mode}get tokenFactory(){return this._factory}set tokenFactory(d){this._factory=d}get inputStream(){return this._input}set inputStream(d){this.reset(!1),this._input=d,this._tokenFactorySourcePair={source:this,stream:this._input}}get sourceName(){return this._input.sourceName}emit(d){return d||(d=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.charIndex-1,this._tokenStartLine,this._tokenStartCharPositionInLine)),this._token=d,d}emitEOF(){let d=this.charPositionInLine,f=this.line,p=this._factory.create(this._tokenFactorySourcePair,u.Token.EOF,void 0,u.Token.DEFAULT_CHANNEL,this._input.index,this._input.index-1,f,d);return this.emit(p),p}get line(){return this.interpreter.line}set line(d){this.interpreter.line=d}get charPositionInLine(){return this.interpreter.charPositionInLine}set charPositionInLine(d){this.interpreter.charPositionInLine=d}get charIndex(){return this._input.index}get text(){return this._text!=null?this._text:this.interpreter.getText(this._input)}set text(d){this._text=d}get token(){return this._token}set token(d){this._token=d}set type(d){this._type=d}get type(){return this._type}set channel(d){this._channel=d}get channel(){return this._channel}getAllTokens(){let d=[],f=this.nextToken();for(;f.type!==u.Token.EOF;)d.push(f),f=this.nextToken();return d}notifyListeners(d){let f=this._input.getText(i.Interval.of(this._tokenStartCharIndex,this._input.index)),p="token recognition error at: '"+this.getErrorDisplay(f)+"'",_=this.getErrorListenerDispatch();_.syntaxError&&_.syntaxError(this,void 0,this._tokenStartLine,this._tokenStartCharPositionInLine,p,d)}getErrorDisplay(d){if(typeof d=="number"){switch(d){case u.Token.EOF:return"<EOF>";case 10:return"\\n";case 9:return"\\t";case 13:return"\\r"}return String.fromCharCode(d)}return d.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}getCharErrorDisplay(d){return"'"+this.getErrorDisplay(d)+"'"}recover(d){d instanceof o.LexerNoViableAltException?this._input.LA(1)!==n.IntStream.EOF&&this.interpreter.consume(this._input):this._input.consume()}};return h.DEFAULT_MODE=0,h.MORE=-2,h.SKIP=-3,h.MIN_CHAR_VALUE=0,h.MAX_CHAR_VALUE=1114111,r([a.Override],h.prototype,"nextToken",null),r([a.Override],h.prototype,"tokenFactory",null),r([a.Override],h.prototype,"inputStream",null),r([a.Override],h.prototype,"sourceName",null),r([a.Override],h.prototype,"line",null),r([a.Override],h.prototype,"charPositionInLine",null),Qs.Lexer=h,Qs}var c0;function Dn(){if(c0)return Zs;c0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(h,c,d,f){var p=arguments.length,_=p<3?c:f===null?f=Object.getOwnPropertyDescriptor(c,d):f,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(h,c,d,f);else for(var g=h.length-1;g>=0;g--)(x=h[g])&&(_=(p<3?x(_):p>3?x(c,d,_):x(c,d))||_);return p>3&&_&&Object.defineProperty(c,d,_),_},t=A&&A.__param||function(h,c){return function(d,f){c(d,f,h)}};Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.IntervalSet=void 0;const e=bn,i=Rs,n=de,s=Oi(),o=jt,a=G,l=St;let u=class It{constructor(c){this.readonly=!1,c!=null?this._intervals=c.slice(0):this._intervals=[]}static get COMPLETE_CHAR_SET(){return It._COMPLETE_CHAR_SET===void 0&&(It._COMPLETE_CHAR_SET=It.of(s.Lexer.MIN_CHAR_VALUE,s.Lexer.MAX_CHAR_VALUE),It._COMPLETE_CHAR_SET.setReadonly(!0)),It._COMPLETE_CHAR_SET}static get EMPTY_SET(){return It._EMPTY_SET==null&&(It._EMPTY_SET=new It,It._EMPTY_SET.setReadonly(!0)),It._EMPTY_SET}static of(c,d=c){let f=new It;return f.add(c,d),f}clear(){if(this.readonly)throw new Error("can't alter readonly IntervalSet");this._intervals.length=0}add(c,d=c){this.addRange(n.Interval.of(c,d))}addRange(c){if(this.readonly)throw new Error("can't alter readonly IntervalSet");if(!(c.b<c.a)){for(let d=0;d<this._intervals.length;d++){let f=this._intervals[d];if(c.equals(f))return;if(c.adjacent(f)||!c.disjoint(f)){let p=c.union(f);for(this._intervals[d]=p;d<this._intervals.length-1;){d++;let _=this._intervals[d];if(!p.adjacent(_)&&p.disjoint(_))break;this._intervals.splice(d,1),d--,this._intervals[d]=p.union(_)}return}if(c.startsBeforeDisjoint(f)){this._intervals.splice(d,0,c);return}}this._intervals.push(c)}}static or(c){let d=new It;for(let f of c)d.addAll(f);return d}addAll(c){if(c==null)return this;if(c instanceof It){let d=c,f=d._intervals.length;for(let p=0;p<f;p++){let _=d._intervals[p];this.add(_.a,_.b)}}else for(let d of c.toArray())this.add(d);return this}complementRange(c,d){return this.complement(It.of(c,d))}complement(c){if(c.isNil)return It.EMPTY_SET;let d;return c instanceof It?d=c:(d=new It,d.addAll(c)),d.subtract(this)}subtract(c){if(c==null||c.isNil)return new It(this._intervals);if(c instanceof It)return It.subtract(this,c);let d=new It;return d.addAll(c),It.subtract(this,d)}static subtract(c,d){if(c.isNil)return new It;let f=new It(c._intervals);if(d.isNil)return f;let p=0,_=0;for(;p<f._intervals.length&&_<d._intervals.length;){let x=f._intervals[p],g=d._intervals[_];if(g.b<x.a){_++;continue}if(g.a>x.b){p++;continue}let v,m;if(g.a>x.a&&(v=new n.Interval(x.a,g.a-1)),g.b<x.b&&(m=new n.Interval(g.b+1,x.b)),v)if(m){f._intervals[p]=v,f._intervals.splice(p+1,0,m),p++,_++;continue}else{f._intervals[p]=v,p++;continue}else if(m){f._intervals[p]=m,_++;continue}else{f._intervals.splice(p,1);continue}}return f}or(c){let d=new It;return d.addAll(this),d.addAll(c),d}and(c){if(c.isNil)return new It;let d=this._intervals,f=c._intervals,p,_=d.length,x=f.length,g=0,v=0;for(;g<_&&v<x;){let m=d[g],y=f[v];m.startsBeforeDisjoint(y)?g++:y.startsBeforeDisjoint(m)?v++:m.properlyContains(y)?(p||(p=new It),p.addRange(m.intersection(y)),v++):y.properlyContains(m)?(p||(p=new It),p.addRange(m.intersection(y)),g++):m.disjoint(y)||(p||(p=new It),p.addRange(m.intersection(y)),m.startsAfterNonDisjoint(y)?v++:y.startsAfterNonDisjoint(m)&&g++)}return p||new It}contains(c){let d=this._intervals.length,f=0,p=d-1;for(;f<=p;){let _=f+p>>1,x=this._intervals[_],g=x.a;if(x.b<c)f=_+1;else if(g>c)p=_-1;else return!0}return!1}get isNil(){return this._intervals==null||this._intervals.length===0}get maxElement(){if(this.isNil)throw new RangeError("set is empty");return this._intervals[this._intervals.length-1].b}get minElement(){if(this.isNil)throw new RangeError("set is empty");return this._intervals[0].a}get intervals(){return this._intervals}hashCode(){let c=o.MurmurHash.initialize();for(let d of this._intervals)c=o.MurmurHash.update(c,d.a),c=o.MurmurHash.update(c,d.b);return c=o.MurmurHash.finish(c,this._intervals.length*2),c}equals(c){return c==null||!(c instanceof It)?!1:e.ArrayEqualityComparator.INSTANCE.equals(this._intervals,c._intervals)}toString(c=!1){let d="";if(this._intervals==null||this._intervals.length===0)return"{}";this.size>1&&(d+="{");let f=!0;for(let p of this._intervals){f?f=!1:d+=", ";let _=p.a,x=p.b;_===x?_===l.Token.EOF?d+="<EOF>":c?d+="'"+String.fromCodePoint(_)+"'":d+=_:c?d+="'"+String.fromCodePoint(_)+"'..'"+String.fromCodePoint(x)+"'":d+=_+".."+x}return this.size>1&&(d+="}"),d}toStringVocabulary(c){if(this._intervals==null||this._intervals.length===0)return"{}";let d="";this.size>1&&(d+="{");let f=!0;for(let p of this._intervals){f?f=!1:d+=", ";let _=p.a,x=p.b;if(_===x)d+=this.elementName(c,_);else for(let g=_;g<=x;g++)g>_&&(d+=", "),d+=this.elementName(c,g)}return this.size>1&&(d+="}"),d}elementName(c,d){return d===l.Token.EOF?"<EOF>":d===l.Token.EPSILON?"<EPSILON>":c.getDisplayName(d)}get size(){let c=0,d=this._intervals.length;if(d===1){let f=this._intervals[0];return f.b-f.a+1}for(let f=0;f<d;f++){let p=this._intervals[f];c+=p.b-p.a+1}return c}toIntegerList(){let c=new i.IntegerList(this.size),d=this._intervals.length;for(let f=0;f<d;f++){let p=this._intervals[f],_=p.a,x=p.b;for(let g=_;g<=x;g++)c.add(g)}return c}toSet(){let c=new Set;for(let d of this._intervals){let f=d.a,p=d.b;for(let _=f;_<=p;_++)c.add(_)}return c}toArray(){let c=new Array,d=this._intervals.length;for(let f=0;f<d;f++){let p=this._intervals[f],_=p.a,x=p.b;for(let g=_;g<=x;g++)c.push(g)}return c}remove(c){if(this.readonly)throw new Error("can't alter readonly IntervalSet");let d=this._intervals.length;for(let f=0;f<d;f++){let p=this._intervals[f],_=p.a,x=p.b;if(c<_)break;if(c===_&&c===x){this._intervals.splice(f,1);break}if(c===_){this._intervals[f]=n.Interval.of(p.a+1,p.b);break}if(c===x){this._intervals[f]=n.Interval.of(p.a,p.b-1);break}if(c>_&&c<x){let g=p.b;this._intervals[f]=n.Interval.of(p.a,c-1),this.add(c+1,g)}}}get isReadonly(){return this.readonly}setReadonly(c){if(this.readonly&&!c)throw new Error("can't alter readonly IntervalSet");this.readonly=c}};return r([a.Override],u.prototype,"addAll",null),r([a.Override],u.prototype,"complement",null),r([a.Override],u.prototype,"subtract",null),r([a.Override],u.prototype,"or",null),r([a.Override],u.prototype,"and",null),r([a.Override],u.prototype,"contains",null),r([a.Override],u.prototype,"isNil",null),r([a.Override],u.prototype,"hashCode",null),r([a.Override],u.prototype,"equals",null),r([t(0,a.NotNull)],u.prototype,"toStringVocabulary",null),r([a.NotNull,t(0,a.NotNull)],u.prototype,"elementName",null),r([a.Override],u.prototype,"size",null),r([a.Override],u.prototype,"remove",null),r([a.NotNull],u,"of",null),r([a.NotNull],u,"subtract",null),Zs.IntervalSet=u,Zs}var lo={},uo={},Ba={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Pw=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.ATNDeserializationOptions=void 0;const Dw=G;class gi{constructor(t){this.readOnly=!1,t?(this.verifyATN=t.verifyATN,this.generateRuleBypassTransitions=t.generateRuleBypassTransitions,this.optimize=t.optimize):(this.verifyATN=!0,this.generateRuleBypassTransitions=!1,this.optimize=!0)}static get defaultOptions(){return gi._defaultOptions==null&&(gi._defaultOptions=new gi,gi._defaultOptions.makeReadOnly()),gi._defaultOptions}get isReadOnly(){return this.readOnly}makeReadOnly(){this.readOnly=!0}get isVerifyATN(){return this.verifyATN}set isVerifyATN(t){this.throwIfReadOnly(),this.verifyATN=t}get isGenerateRuleBypassTransitions(){return this.generateRuleBypassTransitions}set isGenerateRuleBypassTransitions(t){this.throwIfReadOnly(),this.generateRuleBypassTransitions=t}get isOptimize(){return this.optimize}set isOptimize(t){this.throwIfReadOnly(),this.optimize=t}throwIfReadOnly(){if(this.isReadOnly)throw new Error("The object is read only.")}}Pw([Dw.NotNull],gi,"defaultOptions",null);Ba.ATNDeserializationOptions=gi;var ho={},Ma={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ka=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Ow=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.ActionTransition=void 0;const Ua=G,Fw=ar;let cn=class extends Fw.Transition{constructor(t,e,i=-1,n=!1){super(t),this.ruleIndex=e,this.actionIndex=i,this.isCtxDependent=n}get serializationType(){return 6}get isEpsilon(){return!0}matches(t,e,i){return!1}toString(){return"action_"+this.ruleIndex+":"+this.actionIndex}};ka([Ua.Override],cn.prototype,"serializationType",null);ka([Ua.Override],cn.prototype,"isEpsilon",null);ka([Ua.Override],cn.prototype,"matches",null);ka([Ua.Override],cn.prototype,"toString",null);cn=ka([Ow(0,Ua.NotNull)],cn);Ma.ActionTransition=cn;var Ha={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ja=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Lw=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.AtomTransition=void 0;const Bw=Dn(),dn=G,Mw=ar;let fn=class extends Mw.Transition{constructor(t,e){super(t),this._label=e}get serializationType(){return 5}get label(){return Bw.IntervalSet.of(this._label)}matches(t,e,i){return this._label===t}toString(){return String(this.label)}};ja([dn.Override],fn.prototype,"serializationType",null);ja([dn.Override,dn.NotNull],fn.prototype,"label",null);ja([dn.Override],fn.prototype,"matches",null);ja([dn.Override,dn.NotNull],fn.prototype,"toString",null);fn=ja([Lw(0,dn.NotNull)],fn);Ha.AtomTransition=fn;var $u={},On={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(On,"__esModule",{value:!0});On.BlockStartState=void 0;const kw=Dr;class Uw extends kw.DecisionState{}On.BlockStartState=Uw;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Hw=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty($u,"__esModule",{value:!0});$u.BasicBlockStartState=void 0;const jw=re,$w=On,Gw=G;class V_ extends $w.BlockStartState{get stateType(){return jw.ATNStateType.BLOCK_START}}Hw([Gw.Override],V_.prototype,"stateType",null);$u.BasicBlockStartState=V_;var Gu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var zw=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.BlockEndState=void 0;const Vw=Ir,Xw=re,Ww=G;class X_ extends Vw.ATNState{get stateType(){return Xw.ATNStateType.BLOCK_END}}zw([Ww.Override],X_.prototype,"stateType",null);Gu.BlockEndState=X_;var zu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var $a=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Yw=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(zu,"__esModule",{value:!0});zu.EpsilonTransition=void 0;const Es=G,qw=ar;let pn=class extends qw.Transition{constructor(t,e=-1){super(t),this._outermostPrecedenceReturn=e}get outermostPrecedenceReturn(){return this._outermostPrecedenceReturn}get serializationType(){return 1}get isEpsilon(){return!0}matches(t,e,i){return!1}toString(){return"epsilon"}};$a([Es.Override],pn.prototype,"serializationType",null);$a([Es.Override],pn.prototype,"isEpsilon",null);$a([Es.Override],pn.prototype,"matches",null);$a([Es.Override,Es.NotNull],pn.prototype,"toString",null);pn=$a([Yw(0,Es.NotNull)],pn);zu.EpsilonTransition=pn;var Vu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Os=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Kw=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.LexerChannelAction=void 0;const Dl=jt,xn=G;class ai{constructor(t){this._channel=t}get channel(){return this._channel}get actionType(){return 0}get isPositionDependent(){return!1}execute(t){t.channel=this._channel}hashCode(){let t=Dl.MurmurHash.initialize();return t=Dl.MurmurHash.update(t,this.actionType),t=Dl.MurmurHash.update(t,this._channel),Dl.MurmurHash.finish(t,2)}equals(t){return t===this?!0:t instanceof ai?this._channel===t._channel:!1}toString(){return`channel(${this._channel})`}}Os([xn.Override],ai.prototype,"actionType",null);Os([xn.Override],ai.prototype,"isPositionDependent",null);Os([xn.Override,Kw(0,xn.NotNull)],ai.prototype,"execute",null);Os([xn.Override],ai.prototype,"hashCode",null);Os([xn.Override],ai.prototype,"equals",null);Os([xn.Override],ai.prototype,"toString",null);Vu.LexerChannelAction=ai;var Xu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ga=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Zw=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.LexerCustomAction=void 0;const co=jt,Ts=G;class Fi{constructor(t,e){this._ruleIndex=t,this._actionIndex=e}get ruleIndex(){return this._ruleIndex}get actionIndex(){return this._actionIndex}get actionType(){return 1}get isPositionDependent(){return!0}execute(t){t.action(void 0,this._ruleIndex,this._actionIndex)}hashCode(){let t=co.MurmurHash.initialize();return t=co.MurmurHash.update(t,this.actionType),t=co.MurmurHash.update(t,this._ruleIndex),t=co.MurmurHash.update(t,this._actionIndex),co.MurmurHash.finish(t,3)}equals(t){return t===this?!0:t instanceof Fi?this._ruleIndex===t._ruleIndex&&this._actionIndex===t._actionIndex:!1}}Ga([Ts.Override],Fi.prototype,"actionType",null);Ga([Ts.Override],Fi.prototype,"isPositionDependent",null);Ga([Ts.Override,Zw(0,Ts.NotNull)],Fi.prototype,"execute",null);Ga([Ts.Override],Fi.prototype,"hashCode",null);Ga([Ts.Override],Fi.prototype,"equals",null);Xu.LexerCustomAction=Fi;var Wu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Fs=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Qw=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.LexerModeAction=void 0;const Ol=jt,mn=G;class li{constructor(t){this._mode=t}get mode(){return this._mode}get actionType(){return 2}get isPositionDependent(){return!1}execute(t){t.mode(this._mode)}hashCode(){let t=Ol.MurmurHash.initialize();return t=Ol.MurmurHash.update(t,this.actionType),t=Ol.MurmurHash.update(t,this._mode),Ol.MurmurHash.finish(t,2)}equals(t){return t===this?!0:t instanceof li?this._mode===t._mode:!1}toString(){return`mode(${this._mode})`}}Fs([mn.Override],li.prototype,"actionType",null);Fs([mn.Override],li.prototype,"isPositionDependent",null);Fs([mn.Override,Qw(0,mn.NotNull)],li.prototype,"execute",null);Fs([mn.Override],li.prototype,"hashCode",null);Fs([mn.Override],li.prototype,"equals",null);Fs([mn.Override],li.prototype,"toString",null);Wu.LexerModeAction=li;var W_={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c},e=A&&A.__param||function(o,a){return function(l,u){a(l,u,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerMoreAction=void 0;const i=jt,n=G;class s{constructor(){}get actionType(){return 3}get isPositionDependent(){return!1}execute(a){a.more()}hashCode(){let a=i.MurmurHash.initialize();return a=i.MurmurHash.update(a,this.actionType),i.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"more"}}t([n.Override],s.prototype,"actionType",null),t([n.Override],s.prototype,"isPositionDependent",null),t([n.Override,e(0,n.NotNull)],s.prototype,"execute",null),t([n.Override],s.prototype,"hashCode",null),t([n.Override],s.prototype,"equals",null),t([n.Override],s.prototype,"toString",null),r.LexerMoreAction=s,function(o){o.INSTANCE=new o}(s=r.LexerMoreAction||(r.LexerMoreAction={}))})(W_);var Y_={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c},e=A&&A.__param||function(o,a){return function(l,u){a(l,u,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerPopModeAction=void 0;const i=jt,n=G;class s{constructor(){}get actionType(){return 4}get isPositionDependent(){return!1}execute(a){a.popMode()}hashCode(){let a=i.MurmurHash.initialize();return a=i.MurmurHash.update(a,this.actionType),i.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"popMode"}}t([n.Override],s.prototype,"actionType",null),t([n.Override],s.prototype,"isPositionDependent",null),t([n.Override,e(0,n.NotNull)],s.prototype,"execute",null),t([n.Override],s.prototype,"hashCode",null),t([n.Override],s.prototype,"equals",null),t([n.Override],s.prototype,"toString",null),r.LexerPopModeAction=s,function(o){o.INSTANCE=new o}(s=r.LexerPopModeAction||(r.LexerPopModeAction={}))})(Y_);var Yu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ls=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Jw=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.LexerPushModeAction=void 0;const Fl=jt,_n=G;class ui{constructor(t){this._mode=t}get mode(){return this._mode}get actionType(){return 5}get isPositionDependent(){return!1}execute(t){t.pushMode(this._mode)}hashCode(){let t=Fl.MurmurHash.initialize();return t=Fl.MurmurHash.update(t,this.actionType),t=Fl.MurmurHash.update(t,this._mode),Fl.MurmurHash.finish(t,2)}equals(t){return t===this?!0:t instanceof ui?this._mode===t._mode:!1}toString(){return`pushMode(${this._mode})`}}Ls([_n.Override],ui.prototype,"actionType",null);Ls([_n.Override],ui.prototype,"isPositionDependent",null);Ls([_n.Override,Jw(0,_n.NotNull)],ui.prototype,"execute",null);Ls([_n.Override],ui.prototype,"hashCode",null);Ls([_n.Override],ui.prototype,"equals",null);Ls([_n.Override],ui.prototype,"toString",null);Yu.LexerPushModeAction=ui;var q_={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c},e=A&&A.__param||function(o,a){return function(l,u){a(l,u,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerSkipAction=void 0;const i=jt,n=G;class s{constructor(){}get actionType(){return 6}get isPositionDependent(){return!1}execute(a){a.skip()}hashCode(){let a=i.MurmurHash.initialize();return a=i.MurmurHash.update(a,this.actionType),i.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"skip"}}t([n.Override],s.prototype,"actionType",null),t([n.Override],s.prototype,"isPositionDependent",null),t([n.Override,e(0,n.NotNull)],s.prototype,"execute",null),t([n.Override],s.prototype,"hashCode",null),t([n.Override],s.prototype,"equals",null),t([n.Override],s.prototype,"toString",null),r.LexerSkipAction=s,function(o){o.INSTANCE=new o}(s=r.LexerSkipAction||(r.LexerSkipAction={}))})(q_);var qu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Bs=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},tN=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(qu,"__esModule",{value:!0});qu.LexerTypeAction=void 0;const Ll=jt,gn=G;class hi{constructor(t){this._type=t}get type(){return this._type}get actionType(){return 7}get isPositionDependent(){return!1}execute(t){t.type=this._type}hashCode(){let t=Ll.MurmurHash.initialize();return t=Ll.MurmurHash.update(t,this.actionType),t=Ll.MurmurHash.update(t,this._type),Ll.MurmurHash.finish(t,2)}equals(t){return t===this?!0:t instanceof hi?this._type===t._type:!1}toString(){return`type(${this._type})`}}Bs([gn.Override],hi.prototype,"actionType",null);Bs([gn.Override],hi.prototype,"isPositionDependent",null);Bs([gn.Override,tN(0,gn.NotNull)],hi.prototype,"execute",null);Bs([gn.Override],hi.prototype,"hashCode",null);Bs([gn.Override],hi.prototype,"equals",null);Bs([gn.Override],hi.prototype,"toString",null);qu.LexerTypeAction=hi;var za={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var eN=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(za,"__esModule",{value:!0});za.LoopEndState=void 0;const rN=Ir,iN=re,nN=G;class K_ extends rN.ATNState{get stateType(){return iN.ATNStateType.LOOP_END}}eN([nN.Override],K_.prototype,"stateType",null);za.LoopEndState=K_;var fo={},Ku={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Z_=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.ConflictInfo=void 0;const Q_=G,sN=Qt;class Va{constructor(t,e){this._conflictedAlts=t,this.exact=e}get conflictedAlts(){return this._conflictedAlts}get isExact(){return this.exact}equals(t){return t===this?!0:t instanceof Va?this.isExact===t.isExact&&sN.equals(this.conflictedAlts,t.conflictedAlts):!1}hashCode(){return this.conflictedAlts.hashCode()}}Z_([Q_.Override],Va.prototype,"equals",null);Z_([Q_.Override],Va.prototype,"hashCode",null);Ku.ConflictInfo=Va;var po={},Li={},cr={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Lr=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(cr,"__esModule",{value:!0});cr.TerminalNode=void 0;const oN=de,Br=G,aN=St;class dr{constructor(t){this._symbol=t}getChild(t){throw new RangeError("Terminal Node has no children.")}get symbol(){return this._symbol}get parent(){return this._parent}setParent(t){this._parent=t}get payload(){return this._symbol}get sourceInterval(){let t=this._symbol.tokenIndex;return new oN.Interval(t,t)}get childCount(){return 0}accept(t){return t.visitTerminal(this)}get text(){return this._symbol.text||""}toStringTree(t){return this.toString()}toString(){return this._symbol.type===aN.Token.EOF?"<EOF>":this._symbol.text||""}}Lr([Br.Override],dr.prototype,"getChild",null);Lr([Br.Override],dr.prototype,"parent",null);Lr([Br.Override],dr.prototype,"setParent",null);Lr([Br.Override],dr.prototype,"payload",null);Lr([Br.Override],dr.prototype,"sourceInterval",null);Lr([Br.Override],dr.prototype,"childCount",null);Lr([Br.Override],dr.prototype,"accept",null);Lr([Br.Override],dr.prototype,"text",null);Lr([Br.Override],dr.prototype,"toStringTree",null);Lr([Br.Override],dr.prototype,"toString",null);cr.TerminalNode=dr;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var lN=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Li,"__esModule",{value:!0});Li.ErrorNode=void 0;const uN=G,hN=cr;class J_ extends hN.TerminalNode{constructor(t){super(t)}accept(t){return t.visitErrorNode(this)}}lN([uN.Override],J_.prototype,"accept",null);Li.ErrorNode=J_;var xo={},Bi={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Bi,"__esModule",{value:!0});Bi.RuleNode=void 0;class cN{}Bi.RuleNode=cN;var mo={},d0;function Mi(){if(d0)return mo;d0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(f,p,_,x){var g=arguments.length,v=g<3?p:x===null?x=Object.getOwnPropertyDescriptor(p,_):x,m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(f,p,_,x);else for(var y=f.length-1;y>=0;y--)(m=f[y])&&(v=(g<3?m(v):g>3?m(p,_,v):m(p,_))||v);return g>3&&v&&Object.defineProperty(p,_,v),v},t=A&&A.__param||function(f,p){return function(_,x){p(_,x,f)}};Object.defineProperty(mo,"__esModule",{value:!0}),mo.Trees=void 0;const e=Fr(),i=Ri,n=Li,s=G,o=il(),a=fr(),l=Bi,u=cr,h=St,c=Qt;let d=class _i{static toStringTree(p,_){let x;_ instanceof o.Parser?x=_.ruleNames:x=_;let g=c.escapeWhitespace(this.getNodeText(p,x),!1);if(p.childCount===0)return g;let v="";v+="(",g=c.escapeWhitespace(this.getNodeText(p,x),!1),v+=g,v+=" ";for(let m=0;m<p.childCount;m++)m>0&&(v+=" "),v+=this.toStringTree(p.getChild(m),x);return v+=")",v}static getNodeText(p,_){let x;if(_ instanceof o.Parser)x=_.ruleNames;else if(_)x=_;else{let g=p.payload;return typeof g.text=="string"?g.text:p.payload.toString()}if(p instanceof l.RuleNode){let g=p.ruleContext,v=g.ruleIndex,m=x[v],y=g.altNumber;return y!==e.ATN.INVALID_ALT_NUMBER?m+":"+y:m}else{if(p instanceof n.ErrorNode)return p.toString();if(p instanceof u.TerminalNode)return p.symbol.text||""}throw new TypeError("Unexpected node type")}static getChildren(p){let _=[];for(let x=0;x<p.childCount;x++)_.push(p.getChild(x));return _}static getAncestors(p){let _=[],x=p.parent;for(;x;)_.unshift(x),x=x.parent;return _}static isAncestorOf(p,_){if(!p||!_||!p.parent)return!1;let x=_.parent;for(;x;){if(p===x)return!0;x=x.parent}return!1}static findAllTokenNodes(p,_){return _i.findAllNodes(p,_,!0)}static findAllRuleNodes(p,_){return _i.findAllNodes(p,_,!1)}static findAllNodes(p,_,x){let g=[];return _i._findAllNodes(p,_,x,g),g}static _findAllNodes(p,_,x,g){x&&p instanceof u.TerminalNode?p.symbol.type===_&&g.push(p):!x&&p instanceof a.ParserRuleContext&&p.ruleIndex===_&&g.push(p);for(let v=0;v<p.childCount;v++)_i._findAllNodes(p.getChild(v),_,x,g)}static getDescendants(p){let _=[];function x(g){_.push(g);const v=g.childCount;for(let m=0;m<v;m++)x(g.getChild(m))}return x(p),_}static getRootOfSubtreeEnclosingRegion(p,_,x){let g=p.childCount;for(let v=0;v<g;v++){let m=p.getChild(v),y=_i.getRootOfSubtreeEnclosingRegion(m,_,x);if(y)return y}if(p instanceof a.ParserRuleContext){let v=p.stop;if(_>=p.start.tokenIndex&&(v==null||x<=v.tokenIndex))return p}}static stripChildrenOutOfRange(p,_,x,g){if(!p)return;let v=p.childCount;for(let m=0;m<v;m++){let y=p.getChild(m),S=y.sourceInterval;if(y instanceof a.ParserRuleContext&&(S.b<x||S.a>g)&&_i.isAncestorOf(y,_)){let E=new i.CommonToken(h.Token.INVALID_TYPE,"...");p.children[m]=new u.TerminalNode(E)}}}static findNodeSuchThat(p,_){if(_(p))return p;let x=p.childCount;for(let g=0;g<x;g++){let v=_i.findNodeSuchThat(p.getChild(g),_);if(v!==void 0)return v}}};return r([t(0,s.NotNull)],d,"toStringTree",null),r([s.NotNull,t(0,s.NotNull)],d,"getAncestors",null),r([t(0,s.NotNull)],d,"getRootOfSubtreeEnclosingRegion",null),mo.Trees=d,mo}var f0;function af(){if(f0)return xo;f0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(u,h,c,d){var f=arguments.length,p=f<3?h:d===null?d=Object.getOwnPropertyDescriptor(h,c):d,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(u,h,c,d);else for(var x=u.length-1;x>=0;x--)(_=u[x])&&(p=(f<3?_(p):f>3?_(h,c,p):_(h,c))||p);return f>3&&p&&Object.defineProperty(h,c,p),p};Object.defineProperty(xo,"__esModule",{value:!0}),xo.RuleContext=void 0;const t=Fr(),e=Ii,i=Bi,n=de,s=G,o=Mi(),a=fr();let l=class tg extends i.RuleNode{constructor(h,c){super(),this._parent=h,this.invokingState=c??-1}static getChildContext(h,c){return new tg(h,c)}depth(){let h=0,c=this;for(;c;)c=c._parent,h++;return h}get isEmpty(){return this.invokingState===-1}get sourceInterval(){return n.Interval.INVALID}get ruleContext(){return this}get parent(){return this._parent}setParent(h){this._parent=h}get payload(){return this}get text(){if(this.childCount===0)return"";let h="";for(let c=0;c<this.childCount;c++)h+=this.getChild(c).text;return h.toString()}get ruleIndex(){return-1}get altNumber(){return t.ATN.INVALID_ALT_NUMBER}set altNumber(h){}getChild(h){throw new RangeError("i must be greater than or equal to 0 and less than childCount")}get childCount(){return 0}accept(h){return h.visitChildren(this)}toStringTree(h){return o.Trees.toStringTree(this,h)}toString(h,c){const d=h instanceof e.Recognizer?h.ruleNames:h;c=c||a.ParserRuleContext.emptyContext();let f="",p=this;for(f+="[";p&&p!==c;){if(!d)p.isEmpty||(f+=p.invokingState);else{let _=p.ruleIndex,x=_>=0&&_<d.length?d[_]:_.toString();f+=x}p._parent&&(d||!p._parent.isEmpty)&&(f+=" "),p=p._parent}return f+="]",f.toString()}};return r([s.Override],l.prototype,"sourceInterval",null),r([s.Override],l.prototype,"ruleContext",null),r([s.Override],l.prototype,"parent",null),r([s.Override],l.prototype,"setParent",null),r([s.Override],l.prototype,"payload",null),r([s.Override],l.prototype,"text",null),r([s.Override],l.prototype,"getChild",null),r([s.Override],l.prototype,"childCount",null),r([s.Override],l.prototype,"accept",null),r([s.Override],l.prototype,"toStringTree",null),xo.RuleContext=l,xo}var p0;function fr(){if(p0)return po;p0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(a,l,u,h){var c=arguments.length,d=c<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,u):h,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(a,l,u,h);else for(var p=a.length-1;p>=0;p--)(f=a[p])&&(d=(c<3?f(d):c>3?f(l,u,d):f(l,u))||d);return c>3&&d&&Object.defineProperty(l,u,d),d};Object.defineProperty(po,"__esModule",{value:!0}),po.ParserRuleContext=void 0;const t=Li,e=de,i=G,n=af(),s=cr;let o=class xd extends n.RuleContext{constructor(l,u){u==null?super():super(l,u)}static emptyContext(){return xd.EMPTY}copyFrom(l){if(this._parent=l._parent,this.invokingState=l.invokingState,this._start=l._start,this._stop=l._stop,l.children){this.children=[];for(let u of l.children)u instanceof t.ErrorNode&&this.addChild(u)}}enterRule(l){}exitRule(l){}addAnyChild(l){return this.children?this.children.push(l):this.children=[l],l}addChild(l){if(l instanceof s.TerminalNode){l.setParent(this),this.addAnyChild(l);return}else if(l instanceof n.RuleContext){this.addAnyChild(l);return}else return l=new s.TerminalNode(l),this.addAnyChild(l),l.setParent(this),l}addErrorNode(l){if(l instanceof t.ErrorNode){const u=l;return u.setParent(this),this.addAnyChild(u)}else{const u=l;let h=new t.ErrorNode(u);return this.addAnyChild(h),h.setParent(this),h}}removeLastChild(){this.children&&this.children.pop()}get parent(){let l=super.parent;if(l===void 0||l instanceof xd)return l;throw new TypeError("Invalid parent type for ParserRuleContext")}getChild(l,u){if(!this.children||l<0||l>=this.children.length)throw new RangeError("index parameter must be between >= 0 and <= number of children.");if(u==null)return this.children[l];let h=this.tryGetChild(l,u);if(h===void 0)throw new Error("The specified node does not exist");return h}tryGetChild(l,u){if(!this.children||l<0||l>=this.children.length)return;let h=-1;for(let c of this.children)if(c instanceof u&&(h++,h===l))return c}getToken(l,u){let h=this.tryGetToken(l,u);if(h===void 0)throw new Error("The specified token does not exist");return h}tryGetToken(l,u){if(!this.children||u<0||u>=this.children.length)return;let h=-1;for(let c of this.children)if(c instanceof s.TerminalNode&&c.symbol.type===l&&(h++,h===u))return c}getTokens(l){let u=[];if(!this.children)return u;for(let h of this.children)h instanceof s.TerminalNode&&h.symbol.type===l&&u.push(h);return u}get ruleContext(){return this}getRuleContext(l,u){return this.getChild(l,u)}tryGetRuleContext(l,u){return this.tryGetChild(l,u)}getRuleContexts(l){let u=[];if(!this.children)return u;for(let h of this.children)h instanceof l&&u.push(h);return u}get childCount(){return this.children?this.children.length:0}get sourceInterval(){return this._start?!this._stop||this._stop.tokenIndex<this._start.tokenIndex?e.Interval.of(this._start.tokenIndex,this._start.tokenIndex-1):e.Interval.of(this._start.tokenIndex,this._stop.tokenIndex):e.Interval.INVALID}get start(){return this._start}get stop(){return this._stop}toInfoString(l){return"ParserRuleContext"+l.getRuleInvocationStack(this).reverse()+"{start="+this._start+", stop="+this._stop+"}"}};return o.EMPTY=new o,r([i.Override],o.prototype,"parent",null),r([i.Override],o.prototype,"childCount",null),r([i.Override],o.prototype,"sourceInterval",null),po.ParserRuleContext=o,po}var eg={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c};Object.defineProperty(r,"__esModule",{value:!0}),r.PredictionMode=void 0;const e=si,i=jt,n=G,s=Di;(function(o){o[o.SLL=0]="SLL",o[o.LL=1]="LL",o[o.LL_EXACT_AMBIG_DETECTION=2]="LL_EXACT_AMBIG_DETECTION"})(r.PredictionMode||(r.PredictionMode={})),function(o){class a extends e.Array2DHashMap{constructor(){super(l.INSTANCE)}}class l{AltAndContextConfigEqualityComparator(){}hashCode(d){let f=i.MurmurHash.initialize(7);return f=i.MurmurHash.update(f,d.state.stateNumber),f=i.MurmurHash.update(f,d.context),f=i.MurmurHash.finish(f,2),f}equals(d,f){return d===f?!0:d==null||f==null?!1:d.state.stateNumber===f.state.stateNumber&&d.context.equals(f.context)}}l.INSTANCE=new l,t([n.Override],l.prototype,"hashCode",null),t([n.Override],l.prototype,"equals",null);function u(c){for(let d of c)if(d.state instanceof s.RuleStopState)return!0;return!1}o.hasConfigInRuleStopState=u;function h(c){for(let d of c)if(!(d.state instanceof s.RuleStopState))return!1;return!0}o.allConfigsInRuleStopStates=h}(r.PredictionMode||(r.PredictionMode={}))})(eg);var _o={},x0;function rg(){if(x0)return _o;x0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=A&&A.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(_o,"__esModule",{value:!0}),_o.SimulatorState=void 0;const e=G,i=fr();let n=class{constructor(o,a,l,u){this.outerContext=o??i.ParserRuleContext.emptyContext(),this.s0=a,this.useContext=l,this.remainingOuterContext=u}};return n=r([t(1,e.NotNull)],n),_o.SimulatorState=n,_o}var m0;function Xa(){if(m0)return fo;m0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(fe,w,R,P){var H=arguments.length,j=H<3?w:P===null?P=Object.getOwnPropertyDescriptor(w,R):P,B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(fe,w,R,P);else for(var z=fe.length-1;z>=0;z--)(B=fe[z])&&(j=(H<3?B(j):H>3?B(w,R,j):B(w,R))||j);return H>3&&j&&Object.defineProperty(w,R,j),j},t=A&&A.__param||function(fe,w){return function(R,P){w(R,P,fe)}};Object.defineProperty(fo,"__esModule",{value:!0}),fo.ParserATNSimulator=void 0;const e=Na,i=Ma,n=lr,s=Pu,o=Fr(),a=wn,l=Ra(),u=Bu(),h=re,c=Ha,d=hr,f=Ku,p=Dr,_=Lu(),x=Rs,g=de,v=ni,m=G,y=ef(),S=ch(),E=Me,b=fr(),T=ur(),C=Jd(),D=eg,I=Di,L=Ds,M=Sn,k=tf(),q=rg(),ht=St,it=oi,at=Be,Dt=65535,Tt=-(1<<31>>>0);let ft=class bt extends u.ATNSimulator{constructor(w,R){super(w),this.predictionMode=D.PredictionMode.LL,this.force_global_context=!1,this.always_try_local_context=!0,this.enable_global_context_dfa=!1,this.optimize_unique_closure=!0,this.optimize_ll1=!0,this.optimize_tail_calls=!0,this.tail_call_preserves_sll=!0,this.treat_sllk1_conflict_as_ambiguity=!1,this.reportAmbiguities=!1,this.userWantsCtxSensitive=!0,this._parser=R}getPredictionMode(){return this.predictionMode}setPredictionMode(w){this.predictionMode=w}reset(){}adaptivePredict(w,R,P,H){H===void 0&&(H=!1);let j=this.atn.decisionToDFA[R];if(at(j!=null),this.optimize_ll1&&!j.isPrecedenceDfa&&!j.isEmpty){let rt=w.LA(1);if(rt>=0&&rt<=65535){let Q=(R<<16>>>0)+rt,F=this.atn.LL1Table.get(Q);if(F!=null)return F}}this.dfa=j,this.force_global_context?H=!0:this.always_try_local_context||(H=H||j.isContextSensitive),this.userWantsCtxSensitive=H||this.predictionMode!==D.PredictionMode.SLL&&P!=null&&!this.atn.decisionToState[R].sll,P==null&&(P=b.ParserRuleContext.emptyContext());let B;j.isEmpty||(B=this.getStartState(j,w,P,H)),B==null&&(P==null&&(P=b.ParserRuleContext.emptyContext()),bt.debug&&console.log("ATN decision "+j.decision+" exec LA(1)=="+this.getLookaheadName(w)+", outerContext="+P.toString(this._parser)),B=this.computeStartState(j,P,H));let z=w.mark(),et=w.index;try{let rt=this.execDFA(j,w,et,B);return bt.debug&&console.log("DFA after predictATN: "+j.toString(this._parser.vocabulary,this._parser.ruleNames)),rt}finally{this.dfa=void 0,w.seek(et),w.release(z)}}getStartState(w,R,P,H){if(!H)if(w.isPrecedenceDfa){let z=w.getPrecedenceStartState(this._parser.precedence,!1);return z==null?void 0:new q.SimulatorState(P,z,!1,P)}else return w.s0==null?void 0:new q.SimulatorState(P,w.s0,!1,P);if(!this.enable_global_context_dfa)return;let j=P;at(P!=null);let B;for(w.isPrecedenceDfa?B=w.getPrecedenceStartState(this._parser.precedence,!0):B=w.s0full;j!=null&&B!=null&&B.isContextSensitive;)j=this.skipTailCalls(j),B=B.getContextTarget(this.getReturnState(j)),j.isEmpty?at(B==null||!B.isContextSensitive):j=j.parent;if(B!=null)return new q.SimulatorState(P,B,H,j)}execDFA(w,R,P,H){let j=H.outerContext;bt.dfa_debug&&console.log("DFA decision "+w.decision+" exec LA(1)=="+this.getLookaheadName(R)+", outerContext="+j.toString(this._parser)),bt.dfa_debug&&console.log(w.toString(this._parser.vocabulary,this._parser.ruleNames));let B=H.s0,z=R.LA(1),et=H.remainingOuterContext;for(;;){if(bt.dfa_debug&&console.log("DFA state "+B.stateNumber+" LA(1)=="+this.getLookaheadName(R)),H.useContext)for(;B.isContextSymbol(z);){let F;if(et!=null&&(et=this.skipTailCalls(et),F=B.getContextTarget(this.getReturnState(et))),F==null){let O=new q.SimulatorState(H.outerContext,B,H.useContext,et);return this.execATN(w,R,P,O)}at(et!=null),et=et.parent,B=F}if(this.isAcceptState(B,H.useContext)){B.predicates!=null?bt.dfa_debug&&console.log("accept "+B):bt.dfa_debug&&console.log("accept; predict "+B.prediction+" in state "+B.stateNumber);break}at(!this.isAcceptState(B,H.useContext));let Q=this.getExistingTargetState(B,z);if(Q==null){bt.dfa_debug&&z>=0&&console.log("no edge for "+this._parser.vocabulary.getDisplayName(z));let F;if(bt.dfa_debug){let $=g.Interval.of(P,this._parser.inputStream.index);console.log("ATN exec upon "+this._parser.inputStream.getText($)+" at DFA state "+B.stateNumber)}let O=new q.SimulatorState(j,B,H.useContext,et);return F=this.execATN(w,R,P,O),bt.dfa_debug&&console.log("back from DFA update, alt="+F+`, dfa=
`+w.toString(this._parser.vocabulary,this._parser.ruleNames)),bt.dfa_debug&&console.log("DFA decision "+w.decision+" predicts "+F),F}else if(Q===u.ATNSimulator.ERROR){let F=new q.SimulatorState(j,B,H.useContext,et);return this.handleNoViableAlt(R,P,F)}B=Q,!this.isAcceptState(B,H.useContext)&&z!==v.IntStream.EOF&&(R.consume(),z=R.LA(1))}if(!H.useContext&&B.configs.conflictInfo!=null&&w.atnStartState instanceof p.DecisionState&&!(!this.userWantsCtxSensitive||!B.configs.dipsIntoOuterContext&&B.configs.isExactConflict||this.treat_sllk1_conflict_as_ambiguity&&R.index===P)){at(!H.useContext);let Q,F=B.predicates;if(F!=null){let O=R.index;if(O!==P&&R.seek(P),Q=this.evalSemanticContext(F,j,!0),Q.cardinality()===1)return Q.nextSetBit(0);O!==P&&R.seek(O)}if(this.reportAmbiguities){let O=new q.SimulatorState(j,B,H.useContext,et);this.reportAttemptingFullContext(w,Q,O,P,R.index)}return R.seek(P),this.adaptivePredict(R,w.decision,j,!0)}let rt=B.predicates;if(rt!=null){let Q=R.index;P!==Q&&R.seek(P);let F=this.evalSemanticContext(rt,j,this.reportAmbiguities&&this.predictionMode===D.PredictionMode.LL_EXACT_AMBIG_DETECTION);switch(F.cardinality()){case 0:throw this.noViableAlt(R,j,B.configs,P);case 1:return F.nextSetBit(0);default:return P!==Q&&R.seek(Q),this.reportAmbiguity(w,B,P,Q,B.configs.isExactConflict,F,B.configs),F.nextSetBit(0)}}return bt.dfa_debug&&console.log("DFA decision "+w.decision+" predicts "+B.prediction),B.prediction}isAcceptState(w,R){return w.isAcceptState?w.configs.conflictingAlts==null?!0:R&&this.predictionMode===D.PredictionMode.LL_EXACT_AMBIG_DETECTION?w.configs.isExactConflict:!0:!1}execATN(w,R,P,H){bt.debug&&console.log("execATN decision "+w.decision+" exec LA(1)=="+this.getLookaheadName(R));let j=H.outerContext,B=H.useContext,z=R.LA(1),et=H,rt=new C.PredictionContextCache;for(;;){let Q=this.computeReachSet(w,et,z,rt);if(Q==null)return this.setDFAEdge(et.s0,R.LA(1),u.ATNSimulator.ERROR),this.handleNoViableAlt(R,P,et);let F=Q.s0;if(at(F.isAcceptState||F.prediction===o.ATN.INVALID_ALT_NUMBER),at(F.isAcceptState||F.configs.conflictInfo==null),this.isAcceptState(F,B)){let O=F.configs.conflictingAlts,$=O==null?F.prediction:o.ATN.INVALID_ALT_NUMBER;if($!==o.ATN.INVALID_ALT_NUMBER){if(this.optimize_ll1&&R.index===P&&!w.isPrecedenceDfa&&Q.outerContext===Q.remainingOuterContext&&w.decision>=0&&!F.configs.hasSemanticContext&&z>=0&&z<=Dt){let Z=(w.decision<<16>>>0)+z;this.atn.LL1Table.set(Z,$)}B&&this.always_try_local_context&&this.reportContextSensitivity(w,$,Q,P,R.index)}$=F.prediction;let X=O!=null&&this.userWantsCtxSensitive;if(X&&(X=!B&&(F.configs.dipsIntoOuterContext||!F.configs.isExactConflict)&&(!this.treat_sllk1_conflict_as_ambiguity||R.index!==P)),F.configs.hasSemanticContext){let Z=F.predicates;if(Z!=null){let tt=R.index;switch(tt!==P&&R.seek(P),O=this.evalSemanticContext(Z,j,X||this.reportAmbiguities),O.cardinality()){case 0:throw this.noViableAlt(R,j,F.configs,P);case 1:return O.nextSetBit(0)}tt!==P&&R.seek(tt)}}if(X){at(!B),at(this.isAcceptState(F,!1)),bt.debug&&console.log("RETRY with outerContext="+j);let Z=this.computeStartState(w,j,!0);return this.reportAmbiguities&&this.reportAttemptingFullContext(w,O,Q,P,R.index),R.seek(P),this.execATN(w,R,P,Z)}else return O!=null&&(this.reportAmbiguities&&O.cardinality()>1&&this.reportAmbiguity(w,F,P,R.index,F.configs.isExactConflict,O,F.configs),$=O.nextSetBit(0)),$}et=Q,z!==v.IntStream.EOF&&(R.consume(),z=R.LA(1))}}handleNoViableAlt(w,R,P){if(P.s0!=null){let H=new d.BitSet,j=0;for(let B of P.s0.configs)(B.reachesIntoOuterContext||B.state instanceof I.RuleStopState)&&(H.set(B.alt),j=Math.max(j,B.alt));switch(H.cardinality()){case 0:break;case 1:return H.nextSetBit(0);default:if(!P.s0.configs.hasSemanticContext)return H.nextSetBit(0);let B=new l.ATNConfigSet;for(let et of P.s0.configs)(et.reachesIntoOuterContext||et.state instanceof I.RuleStopState)&&B.add(et);let z=this.getPredsForAmbigAlts(H,B,j);if(z!=null){let et=this.getPredicatePredictions(H,z);if(et!=null){let rt=w.index;try{w.seek(R);let Q=this.evalSemanticContext(et,P.outerContext,!1);if(!Q.isEmpty)return Q.nextSetBit(0)}finally{w.seek(rt)}}}return H.nextSetBit(0)}}throw this.noViableAlt(w,P.outerContext,P.s0.configs,R)}computeReachSet(w,R,P,H){let j=R.useContext,B=R.remainingOuterContext,z=R.s0;if(j)for(;z.isContextSymbol(P);){let Q;if(B!=null&&(B=this.skipTailCalls(B),Q=z.getContextTarget(this.getReturnState(B))),Q==null)break;at(B!=null),B=B.parent,z=Q}if(at(!this.isAcceptState(z,j)),this.isAcceptState(z,j))return new q.SimulatorState(R.outerContext,z,j,B);let et=z,rt=this.getExistingTargetState(et,P);if(rt==null){let Q=this.computeTargetState(w,et,B,P,j,H);rt=Q[0],B=Q[1]}if(rt!==u.ATNSimulator.ERROR)return at(!j||!rt.configs.dipsIntoOuterContext),new q.SimulatorState(R.outerContext,rt,j,B)}getExistingTargetState(w,R){return w.getTarget(R)}computeTargetState(w,R,P,H,j,B){let z=R.configs.toArray(),et,rt=new l.ATNConfigSet,Q;do{let O=!j||P!=null;O||(rt.isOutermostConfigSet=!0);let $=new l.ATNConfigSet,X;for(let lt of z){if(bt.debug&&console.log("testing "+this.getTokenName(H)+" at "+lt.toString()),lt.state instanceof I.RuleStopState){at(lt.context.isEmpty),(j&&!lt.reachesIntoOuterContext||H===v.IntStream.EOF)&&(X==null&&(X=[]),X.push(lt));continue}let V=lt.state.numberOfOptimizedTransitions;for(let gt=0;gt<V;gt++){let Ft=lt.state.getOptimizedTransition(gt),qt=this.getReachableTarget(lt,Ft,H);qt!=null&&$.add(lt.transform(qt,!1),B)}}if(this.optimize_unique_closure&&X==null&&H!==ht.Token.EOF&&$.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER){$.isOutermostConfigSet=rt.isOutermostConfigSet,rt=$;break}let Z=!1,tt=H===ht.Token.EOF;if(this.closure($,rt,Z,O,B,tt),Q=rt.dipsIntoOuterContext,H===v.IntStream.EOF&&(rt=this.removeAllConfigsNotInRuleStopState(rt,B)),X!=null&&(!j||!D.PredictionMode.hasConfigInRuleStopState(rt))){at(X.length>0);for(let lt of X)rt.add(lt,B)}if(j&&Q){rt.clear(),P=P,P=this.skipTailCalls(P);let lt=this.getReturnState(P);if(et==null&&(et=new x.IntegerList),P.isEmpty?P=void 0:P=P.parent,et.add(lt),lt!==T.PredictionContext.EMPTY_FULL_STATE_KEY)for(let V=0;V<z.length;V++)z[V]=z[V].appendContext(lt,B)}}while(j&&Q);return rt.isEmpty?(this.setDFAEdge(R,H,u.ATNSimulator.ERROR),[u.ATNSimulator.ERROR,P]):[this.addDFAEdge(w,R,H,et,rt,B),P]}removeAllConfigsNotInRuleStopState(w,R){if(D.PredictionMode.allConfigsInRuleStopStates(w))return w;let P=new l.ATNConfigSet;for(let H of w)H.state instanceof I.RuleStopState&&P.add(H,R);return P}computeStartState(w,R,P){let H=w.isPrecedenceDfa?w.getPrecedenceStartState(this._parser.precedence,P):P?w.s0full:w.s0;if(H!=null){if(!P)return new q.SimulatorState(R,H,P,R);H.setContextSensitive(this.atn)}w.decision;let j=w.atnStartState,B=0,z=R,et=P?T.PredictionContext.EMPTY_FULL:T.PredictionContext.EMPTY_LOCAL,rt=new C.PredictionContextCache;if(P){if(!this.enable_global_context_dfa)for(;z!=null;)z.isEmpty?(B=T.PredictionContext.EMPTY_FULL_STATE_KEY,z=void 0):(B=this.getReturnState(z),et=et.appendSingleContext(B,rt),z=z.parent);for(;H!=null&&H.isContextSensitive&&z!=null;){let F;if(z=this.skipTailCalls(z),z.isEmpty?(F=H.getContextTarget(T.PredictionContext.EMPTY_FULL_STATE_KEY),B=T.PredictionContext.EMPTY_FULL_STATE_KEY,z=void 0):(B=this.getReturnState(z),F=H.getContextTarget(B),et=et.appendSingleContext(B,rt),z=z.parent),F==null)break;H=F}}if(H!=null&&!H.isContextSensitive)return new q.SimulatorState(R,H,P,z);let Q=new l.ATNConfigSet;for(;;){let F=new l.ATNConfigSet,O=j.numberOfTransitions;for(let V=0;V<O;V++){let gt=j.transition(V).target;F.add(a.ATNConfig.create(gt,V+1,et))}let $=z!=null;$||(Q.isOutermostConfigSet=!0);let X=!0;this.closure(F,Q,X,$,rt,!1);let Z=Q.dipsIntoOuterContext,tt;if(P&&!this.enable_global_context_dfa){H=this.addDFAState(w,Q,rt);break}else H==null?w.isPrecedenceDfa?(Q=this.applyPrecedenceFilter(Q,R,rt),tt=this.addDFAState(w,Q,rt),w.setPrecedenceStartState(this._parser.precedence,P,tt)):(tt=this.addDFAState(w,Q,rt),P?w.s0full?tt=w.s0full:w.s0full=tt:w.s0?tt=w.s0:w.s0=tt):(w.isPrecedenceDfa&&(Q=this.applyPrecedenceFilter(Q,R,rt)),tt=this.addDFAState(w,Q,rt),H.setContextTarget(B,tt));if(H=tt,!P||!Z)break;tt.setContextSensitive(this.atn),z=z,Q.clear(),z=this.skipTailCalls(z);let lt=this.getReturnState(z);z.isEmpty?z=void 0:z=z.parent,lt!==T.PredictionContext.EMPTY_FULL_STATE_KEY&&(et=et.appendSingleContext(lt,rt)),B=lt}return new q.SimulatorState(R,H,P,z)}applyPrecedenceFilter(w,R,P){let H=new Map,j=new l.ATNConfigSet;for(let B of w){if(B.alt!==1)continue;let z=B.semanticContext.evalPrecedence(this._parser,R);z!=null&&(H.set(B.state.stateNumber,B.context),z!==B.semanticContext?j.add(B.transform(B.state,!1,z),P):j.add(B,P))}for(let B of w)if(B.alt!==1){if(!B.isPrecedenceFilterSuppressed){let z=H.get(B.state.stateNumber);if(z!=null&&z.equals(B.context))continue}j.add(B,P)}return j}getReachableTarget(w,R,P){if(R.matches(P,0,this.atn.maxTokenType))return R.target}predicateDFAState(w,R,P){let H=this.getConflictingAltsFromConfigSet(R);if(!H)throw new Error("This unhandled scenario is intended to be unreachable, but I'm currently not sure of why we know that's the case.");bt.debug&&console.log("predicateDFAState "+w);let j=this.getPredsForAmbigAlts(H,R,P),B;return j!=null&&(B=this.getPredicatePredictions(H,j),w.predicates=B),B}getPredsForAmbigAlts(w,R,P){let H=new Array(P+1),j=H.length;for(let et of R)w.get(et.alt)&&(H[et.alt]=M.SemanticContext.or(H[et.alt],et.semanticContext));let B=0;for(let et=0;et<j;et++)H[et]==null?H[et]=M.SemanticContext.NONE:H[et]!==M.SemanticContext.NONE&&B++;let z=H;return B===0&&(z=void 0),bt.debug&&console.log("getPredsForAmbigAlts result "+(z?s.Arrays.toString(z):"undefined")),z}getPredicatePredictions(w,R){let P=[],H=!1;for(let j=1;j<R.length;j++){let B=R[j];at(B!=null),w!=null&&w.get(j)&&B===M.SemanticContext.NONE?P.push(new _.DFAState.PredPrediction(B,j)):B!==M.SemanticContext.NONE&&(H=!0,P.push(new _.DFAState.PredPrediction(B,j)))}if(H)return P}evalSemanticContext(w,R,P){let H=new d.BitSet;for(let j of w){if(j.pred===M.SemanticContext.NONE){if(H.set(j.alt),!P)break;continue}let B=this.evalSemanticContextImpl(j.pred,R,j.alt);if((bt.debug||bt.dfa_debug)&&console.log("eval pred "+j+"="+B),B&&((bt.debug||bt.dfa_debug)&&console.log("PREDICT "+j.alt),H.set(j.alt),!P))break}return H}evalSemanticContextImpl(w,R,P){return w.eval(this._parser,R)}closure(w,R,P,H,j,B){j==null&&(j=C.PredictionContextCache.UNCACHED);let z=w,et=new n.Array2DHashSet(E.ObjectEqualityComparator.INSTANCE);for(;z.size>0;){let rt=new l.ATNConfigSet;for(let Q of z)this.closureImpl(Q,R,rt,et,P,H,j,0,B);z=rt}}closureImpl(w,R,P,H,j,B,z,et,rt){if(bt.debug&&console.log("closure("+w.toString(this._parser,!0)+")"),w.state instanceof I.RuleStopState)if(w.context.isEmpty)if(B)bt.debug&&console.log("FALLING off rule "+this.getRuleName(w.state.ruleIndex)),w.context===T.PredictionContext.EMPTY_FULL?w=w.transform(w.state,!1,T.PredictionContext.EMPTY_LOCAL):!w.reachesIntoOuterContext&&T.PredictionContext.isEmptyLocal(w.context)&&R.add(w,z);else{R.add(w,z);return}else{let F=w.context.hasEmpty,O=w.context.size-(F?1:0);for(let $=0;$<O;$++){let X=w.context.getParent($),Z=this.atn.states[w.context.getReturnState($)],tt=a.ATNConfig.create(Z,w.alt,X,w.semanticContext);tt.outerContextDepth=w.outerContextDepth,tt.isPrecedenceFilterSuppressed=w.isPrecedenceFilterSuppressed,at(et>Tt),this.closureImpl(tt,R,P,H,j,B,z,et-1,rt)}if(!F||!B)return;w=w.transform(w.state,!1,T.PredictionContext.EMPTY_LOCAL)}let Q=w.state;Q.onlyHasEpsilonTransitions||(R.add(w,z),bt.debug&&console.log("added config "+R));for(let F=0;F<Q.numberOfOptimizedTransitions;F++){if(F===0&&Q.stateType===h.ATNStateType.STAR_LOOP_ENTRY&&Q.precedenceRuleDecision&&!w.context.hasEmpty){let Z=Q,tt=!0;for(let lt=0;lt<w.context.size;lt++)if(!Z.precedenceLoopbackStates.get(w.context.getReturnState(lt))){tt=!1;break}if(tt)continue}let O=Q.getOptimizedTransition(F),$=!(O instanceof i.ActionTransition)&&j,X=this.getEpsilonTarget(w,O,$,et===0,z,rt);if(X!=null){if(O instanceof L.RuleTransition&&P!=null&&!j){P.add(X,z);continue}let Z=et;if(w.state instanceof I.RuleStopState){if(this.dfa!=null&&this.dfa.isPrecedenceDfa&&O.outermostPrecedenceReturn===this.dfa.atnStartState.ruleIndex&&(X.isPrecedenceFilterSuppressed=!0),X.outerContextDepth=X.outerContextDepth+1,!H.add(X))continue;at(Z>Tt),Z--,bt.debug&&console.log("dips into outer ctx: "+X)}else if(O instanceof L.RuleTransition)this.optimize_tail_calls&&O.optimizedTailCall&&(!this.tail_call_preserves_sll||!T.PredictionContext.isEmptyLocal(w.context))?(at(X.context===w.context),Z===0&&(Z--,!this.tail_call_preserves_sll&&T.PredictionContext.isEmptyLocal(w.context)&&(X.outerContextDepth=X.outerContextDepth+1))):Z>=0&&Z++;else if(!O.isEpsilon&&!H.add(X))continue;this.closureImpl(X,R,P,H,$,B,z,Z,rt)}}}getRuleName(w){return this._parser!=null&&w>=0?this._parser.ruleNames[w]:"<rule "+w+">"}getEpsilonTarget(w,R,P,H,j,B){switch(R.serializationType){case 3:return this.ruleTransition(w,R,j);case 10:return this.precedenceTransition(w,R,P,H);case 4:return this.predTransition(w,R,P,H);case 6:return this.actionTransition(w,R);case 1:return w.transform(R.target,!1);case 5:case 2:case 7:return B&&R.matches(ht.Token.EOF,0,1)?w.transform(R.target,!1):void 0;default:return}}actionTransition(w,R){return bt.debug&&console.log("ACTION edge "+R.ruleIndex+":"+R.actionIndex),w.transform(R.target,!1)}precedenceTransition(w,R,P,H){bt.debug&&(console.log("PRED (collectPredicates="+P+") "+R.precedence+">=_p, ctx dependent=true"),this._parser!=null&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack()));let j;if(P&&H){let B=M.SemanticContext.and(w.semanticContext,R.predicate);j=w.transform(R.target,!1,B)}else j=w.transform(R.target,!1);return bt.debug&&console.log("config from pred transition="+j),j}predTransition(w,R,P,H){bt.debug&&(console.log("PRED (collectPredicates="+P+") "+R.ruleIndex+":"+R.predIndex+", ctx dependent="+R.isCtxDependent),this._parser!=null&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack()));let j;if(P&&(!R.isCtxDependent||R.isCtxDependent&&H)){let B=M.SemanticContext.and(w.semanticContext,R.predicate);j=w.transform(R.target,!1,B)}else j=w.transform(R.target,!1);return bt.debug&&console.log("config from pred transition="+j),j}ruleTransition(w,R,P){bt.debug&&console.log("CALL rule "+this.getRuleName(R.target.ruleIndex)+", ctx="+w.context);let H=R.followState,j;return this.optimize_tail_calls&&R.optimizedTailCall&&(!this.tail_call_preserves_sll||!T.PredictionContext.isEmptyLocal(w.context))?j=w.context:P!=null?j=P.getChild(w.context,H.stateNumber):j=w.context.getChild(H.stateNumber),w.transform(R.target,!1,j)}isConflicted(w,R){if(w.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER||w.size<=1)return;let P=w.toArray();P.sort(bt.STATE_ALT_SORT_COMPARATOR);let H=!w.dipsIntoOuterContext,j=new d.BitSet,B=P[0].alt;j.set(B);let z=P[0].state.nonStopStateNumber;for(let O of P){let $=O.state.nonStopStateNumber;if($!==z){if(O.alt!==B)return;z=$}}let et;if(H){z=P[0].state.nonStopStateNumber,et=new d.BitSet;let O=B;for(let X of P){if(X.state.nonStopStateNumber!==z)break;let Z=X.alt;et.set(Z),O=Z}z=P[0].state.nonStopStateNumber;let $=B;for(let X of P){let Z=X.state.nonStopStateNumber,tt=X.alt;if(Z!==z){if($!==O){H=!1;break}z=Z,$=B}else if(tt!==$){if(tt!==et.nextSetBit($+1)){H=!1;break}$=tt}}}z=P[0].state.nonStopStateNumber;let rt=0,Q=0,F=P[0].context;for(let O=1;O<P.length;O++){let $=P[O];if($.alt!==B||$.state.nonStopStateNumber!==z)break;Q=O,F=R.join(F,P[O].context)}for(let O=Q+1;O<P.length;O++){let $=P[O],X=$.state;if(j.set($.alt),X.nonStopStateNumber!==z){z=X.nonStopStateNumber,rt=O,Q=O,F=$.context;for(let gt=rt+1;gt<P.length;gt++){let Ft=P[gt];if(Ft.alt!==B||Ft.state.nonStopStateNumber!==z)break;Q=gt,F=R.join(F,Ft.context)}O=Q;continue}let Z=$.context,tt=$.alt,lt=O;for(let gt=lt+1;gt<P.length;gt++){let Ft=P[gt];if(Ft.alt!==tt||Ft.state.nonStopStateNumber!==z)break;lt=gt,Z=R.join(Z,Ft.context)}O=lt;let V=R.join(F,Z);if(!F.equals(V))return;H=H&&F.equals(Z)}return new f.ConflictInfo(j,H)}getConflictingAltsFromConfigSet(w){let R=w.conflictingAlts;return R==null&&w.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER&&(R=new d.BitSet,R.set(w.uniqueAlt)),R}getTokenName(w){if(w===ht.Token.EOF)return"EOF";let P=(this._parser!=null?this._parser.vocabulary:it.VocabularyImpl.EMPTY_VOCABULARY).getDisplayName(w);return P===String(w)?P:P+"<"+w+">"}getLookaheadName(w){return this.getTokenName(w.LA(1))}dumpDeadEndConfigs(w){console.log("dead end configs: ");let R=w.deadEndConfigs;if(R)for(let P of R){let H="no edges";if(P.state.numberOfOptimizedTransitions>0){let j=P.state.getOptimizedTransition(0);j instanceof c.AtomTransition?H="Atom "+this.getTokenName(j._label):j instanceof k.SetTransition&&(H=(j instanceof y.NotSetTransition?"~":"")+"Set "+j.set.toString())}console.log(P.toString(this._parser,!0)+":"+H)}}noViableAlt(w,R,P,H){return new S.NoViableAltException(this._parser,w,w.get(H),w.LT(1),P,R)}getUniqueAlt(w){let R=o.ATN.INVALID_ALT_NUMBER;for(let P of w)if(R===o.ATN.INVALID_ALT_NUMBER)R=P.alt;else if(P.alt!==R)return o.ATN.INVALID_ALT_NUMBER;return R}configWithAltAtStopState(w,R){for(let P of w)if(P.alt===R&&P.state instanceof I.RuleStopState)return!0;return!1}addDFAEdge(w,R,P,H,j,B){at(H==null||H.isEmpty||w.isContextSensitive);let z=R,et=this.addDFAState(w,j,B);if(H!=null)for(let rt of H.toArray()){if(rt===T.PredictionContext.EMPTY_FULL_STATE_KEY&&z.configs.isOutermostConfigSet)continue;z.setContextSensitive(this.atn),z.setContextSymbol(P);let Q=z.getContextTarget(rt);if(Q!=null){z=Q;continue}Q=this.addDFAContextState(w,z.configs,rt,B),at(rt!==T.PredictionContext.EMPTY_FULL_STATE_KEY||Q.configs.isOutermostConfigSet),z.setContextTarget(rt,Q),z=Q}return bt.debug&&console.log("EDGE "+z+" -> "+et+" upon "+this.getTokenName(P)),this.setDFAEdge(z,P,et),bt.debug&&console.log(`DFA=
`+w.toString(this._parser!=null?this._parser.vocabulary:it.VocabularyImpl.EMPTY_VOCABULARY,this._parser!=null?this._parser.ruleNames:void 0)),et}setDFAEdge(w,R,P){w!=null&&w.setTarget(R,P)}addDFAContextState(w,R,P,H){if(P!==T.PredictionContext.EMPTY_FULL_STATE_KEY){let j=new l.ATNConfigSet;for(let B of R)j.add(B.appendContext(P,H));return this.addDFAState(w,j,H)}else return at(!R.isOutermostConfigSet,"Shouldn't be adding a duplicate edge."),R=R.clone(!0),R.isOutermostConfigSet=!0,this.addDFAState(w,R,H)}addDFAState(w,R,P){let H=this.enable_global_context_dfa||!R.isOutermostConfigSet;if(H){R.isReadOnly||R.optimizeConfigs(this);let rt=this.createDFAState(w,R),Q=w.states.get(rt);if(Q!=null)return Q}R.isReadOnly||R.conflictInfo==null&&(R.conflictInfo=this.isConflicted(R,P));let j=this.createDFAState(w,R.clone(!0)),B=this.atn.getDecisionState(w.decision),z=this.getUniqueAlt(R);if(z!==o.ATN.INVALID_ALT_NUMBER)j.acceptStateInfo=new e.AcceptStateInfo(z);else if(R.conflictingAlts!=null){let rt=R.conflictingAlts;rt&&(j.acceptStateInfo=new e.AcceptStateInfo(rt.nextSetBit(0)))}if(j.isAcceptState&&R.hasSemanticContext&&this.predicateDFAState(j,R,B.numberOfTransitions),!H)return j;let et=w.addState(j);return bt.debug&&et===j&&console.log("adding new DFA state: "+j),et}createDFAState(w,R){return new _.DFAState(R)}reportAttemptingFullContext(w,R,P,H,j){if(bt.debug||bt.retry_debug){let B=g.Interval.of(H,j);console.log("reportAttemptingFullContext decision="+w.decision+":"+P.s0.configs+", input="+this._parser.inputStream.getText(B))}if(this._parser!=null){let B=this._parser.getErrorListenerDispatch();B.reportAttemptingFullContext&&B.reportAttemptingFullContext(this._parser,w,H,j,R,P)}}reportContextSensitivity(w,R,P,H,j){if(bt.debug||bt.retry_debug){let B=g.Interval.of(H,j);console.log("reportContextSensitivity decision="+w.decision+":"+P.s0.configs+", input="+this._parser.inputStream.getText(B))}if(this._parser!=null){let B=this._parser.getErrorListenerDispatch();B.reportContextSensitivity&&B.reportContextSensitivity(this._parser,w,H,j,R,P)}}reportAmbiguity(w,R,P,H,j,B,z){if(bt.debug||bt.retry_debug){let et=g.Interval.of(P,H);console.log("reportAmbiguity "+B+":"+z+", input="+this._parser.inputStream.getText(et))}if(this._parser!=null){let et=this._parser.getErrorListenerDispatch();et.reportAmbiguity&&et.reportAmbiguity(this._parser,w,P,H,j,B,z)}}getReturnState(w){return w.isEmpty?T.PredictionContext.EMPTY_FULL_STATE_KEY:this.atn.states[w.invokingState].transition(0).followState.stateNumber}skipTailCalls(w){if(!this.optimize_tail_calls)return w;for(;!w.isEmpty;){let R=this.atn.states[w.invokingState];if(at(R.numberOfTransitions===1&&R.transition(0).serializationType===3),!R.transition(0).tailCall)break;w=w.parent}return w}get parser(){return this._parser}};return ft.debug=!1,ft.dfa_debug=!1,ft.retry_debug=!1,ft.STATE_ALT_SORT_COMPARATOR=(fe,w)=>{let R=fe.state.nonStopStateNumber-w.state.nonStopStateNumber;return R!==0||(R=fe.alt-w.alt,R!==0)?R:0},r([m.NotNull],ft.prototype,"predictionMode",void 0),r([m.NotNull],ft.prototype,"getPredictionMode",null),r([t(0,m.NotNull)],ft.prototype,"setPredictionMode",null),r([m.Override],ft.prototype,"reset",null),r([t(0,m.NotNull)],ft.prototype,"adaptivePredict",null),r([t(0,m.NotNull),t(1,m.NotNull),t(2,m.NotNull)],ft.prototype,"getStartState",null),r([t(0,m.NotNull),t(1,m.NotNull),t(3,m.NotNull)],ft.prototype,"execDFA",null),r([t(0,m.NotNull),t(1,m.NotNull),t(3,m.NotNull)],ft.prototype,"execATN",null),r([t(0,m.NotNull),t(2,m.NotNull)],ft.prototype,"handleNoViableAlt",null),r([t(0,m.NotNull)],ft.prototype,"getExistingTargetState",null),r([m.NotNull,t(0,m.NotNull),t(1,m.NotNull)],ft.prototype,"computeTargetState",null),r([m.NotNull,t(0,m.NotNull)],ft.prototype,"removeAllConfigsNotInRuleStopState",null),r([m.NotNull],ft.prototype,"computeStartState",null),r([m.NotNull,t(0,m.NotNull)],ft.prototype,"applyPrecedenceFilter",null),r([t(0,m.NotNull),t(1,m.NotNull)],ft.prototype,"getReachableTarget",null),r([t(0,m.NotNull),t(1,m.NotNull)],ft.prototype,"getPredsForAmbigAlts",null),r([t(0,m.NotNull)],ft.prototype,"evalSemanticContext",null),r([t(0,m.NotNull)],ft.prototype,"evalSemanticContextImpl",null),r([t(1,m.NotNull),t(4,m.Nullable)],ft.prototype,"closure",null),r([t(0,m.NotNull),t(1,m.NotNull),t(2,m.Nullable),t(3,m.NotNull),t(6,m.NotNull)],ft.prototype,"closureImpl",null),r([m.NotNull],ft.prototype,"getRuleName",null),r([t(0,m.NotNull),t(1,m.NotNull)],ft.prototype,"getEpsilonTarget",null),r([m.NotNull,t(0,m.NotNull),t(1,m.NotNull)],ft.prototype,"actionTransition",null),r([m.Nullable,t(0,m.NotNull),t(1,m.NotNull)],ft.prototype,"precedenceTransition",null),r([m.Nullable,t(0,m.NotNull),t(1,m.NotNull)],ft.prototype,"predTransition",null),r([m.NotNull,t(0,m.NotNull),t(1,m.NotNull),t(2,m.Nullable)],ft.prototype,"ruleTransition",null),r([t(0,m.NotNull)],ft.prototype,"isConflicted",null),r([m.NotNull],ft.prototype,"getTokenName",null),r([t(0,m.NotNull)],ft.prototype,"dumpDeadEndConfigs",null),r([m.NotNull,t(0,m.NotNull),t(1,m.NotNull),t(2,m.NotNull)],ft.prototype,"noViableAlt",null),r([t(0,m.NotNull)],ft.prototype,"getUniqueAlt",null),r([t(0,m.NotNull)],ft.prototype,"configWithAltAtStopState",null),r([m.NotNull,t(0,m.NotNull),t(1,m.NotNull),t(4,m.NotNull)],ft.prototype,"addDFAEdge",null),r([t(0,m.Nullable),t(2,m.Nullable)],ft.prototype,"setDFAEdge",null),r([m.NotNull,t(0,m.NotNull),t(1,m.NotNull)],ft.prototype,"addDFAContextState",null),r([m.NotNull,t(0,m.NotNull),t(1,m.NotNull)],ft.prototype,"addDFAState",null),r([m.NotNull,t(0,m.NotNull),t(1,m.NotNull)],ft.prototype,"createDFAState",null),r([t(0,m.NotNull),t(2,m.NotNull)],ft.prototype,"reportAttemptingFullContext",null),r([t(0,m.NotNull),t(2,m.NotNull)],ft.prototype,"reportContextSensitivity",null),r([t(0,m.NotNull),t(5,m.NotNull),t(6,m.NotNull)],ft.prototype,"reportAmbiguity",null),ft=r([t(0,m.NotNull)],ft),fo.ParserATNSimulator=ft,fo}var Zu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var dN=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.PlusBlockStartState=void 0;const fN=re,pN=On,xN=G;class ig extends pN.BlockStartState{get stateType(){return fN.ATNStateType.PLUS_BLOCK_START}}dN([xN.Override],ig.prototype,"stateType",null);Zu.PlusBlockStartState=ig;var Qu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var mN=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.PlusLoopbackState=void 0;const _N=re,gN=Dr,yN=G;class ng extends gN.DecisionState{get stateType(){return _N.ATNStateType.PLUS_LOOP_BACK}}mN([yN.Override],ng.prototype,"stateType",null);Qu.PlusLoopbackState=ng;var Ju={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Wa=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},vN=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.PrecedencePredicateTransition=void 0;const EN=Ns,Ya=G,TN=Sn;let yn=class extends EN.AbstractPredicateTransition{constructor(t,e){super(t),this.precedence=e}get serializationType(){return 10}get isEpsilon(){return!0}matches(t,e,i){return!1}get predicate(){return new TN.SemanticContext.PrecedencePredicate(this.precedence)}toString(){return this.precedence+" >= _p"}};Wa([Ya.Override],yn.prototype,"serializationType",null);Wa([Ya.Override],yn.prototype,"isEpsilon",null);Wa([Ya.Override],yn.prototype,"matches",null);Wa([Ya.Override],yn.prototype,"toString",null);yn=Wa([vN(0,Ya.NotNull)],yn);Ju.PrecedencePredicateTransition=yn;var th={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var qa=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},AN=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(th,"__esModule",{value:!0});th.RangeTransition=void 0;const SN=Dn(),vn=G,bN=ar;let En=class extends bN.Transition{constructor(t,e,i){super(t),this.from=e,this.to=i}get serializationType(){return 2}get label(){return SN.IntervalSet.of(this.from,this.to)}matches(t,e,i){return t>=this.from&&t<=this.to}toString(){return"'"+String.fromCodePoint(this.from)+"'..'"+String.fromCodePoint(this.to)+"'"}};qa([vn.Override],En.prototype,"serializationType",null);qa([vn.Override,vn.NotNull],En.prototype,"label",null);qa([vn.Override],En.prototype,"matches",null);qa([vn.Override,vn.NotNull],En.prototype,"toString",null);En=qa([AN(0,vn.NotNull)],En);th.RangeTransition=En;var eh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var CN=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(eh,"__esModule",{value:!0});eh.RuleStartState=void 0;const wN=Ir,NN=re,RN=G;class sg extends wN.ATNState{constructor(){super(...arguments),this.isPrecedenceRule=!1,this.leftFactored=!1}get stateType(){return NN.ATNStateType.RULE_START}}CN([RN.Override],sg.prototype,"stateType",null);eh.RuleStartState=sg;var rh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var IN=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(rh,"__esModule",{value:!0});rh.StarBlockStartState=void 0;const PN=re,DN=On,ON=G;class og extends DN.BlockStartState{get stateType(){return PN.ATNStateType.STAR_BLOCK_START}}IN([ON.Override],og.prototype,"stateType",null);rh.StarBlockStartState=og;var ih={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var FN=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(ih,"__esModule",{value:!0});ih.StarLoopbackState=void 0;const LN=Ir,BN=re,MN=G;class ag extends LN.ATNState{get loopEntryState(){return this.transition(0).target}get stateType(){return BN.ATNStateType.STAR_LOOP_BACK}}FN([MN.Override],ag.prototype,"stateType",null);ih.StarLoopbackState=ag;var nh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var kN=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(nh,"__esModule",{value:!0});nh.TokensStartState=void 0;const UN=re,HN=Dr,jN=G;class lg extends HN.DecisionState{get stateType(){return UN.ATNStateType.TOKEN_START}}kN([jN.Override],lg.prototype,"stateType",null);nh.TokensStartState=lg;var sh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(sh,"__esModule",{value:!0});sh.UUID=void 0;const $N=jt;class cu{constructor(t,e,i,n){this.data=new Uint32Array(4),this.data[0]=t,this.data[1]=e,this.data[2]=i,this.data[3]=n}static fromString(t){if(!/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/.test(t))throw new Error("Incorrectly formatted UUID");let e=t.split("-"),i=parseInt(e[0],16),n=(parseInt(e[1],16)<<16>>>0)+parseInt(e[2],16),s=(parseInt(e[3],16)<<16>>>0)+parseInt(e[4].substr(0,4),16),o=parseInt(e[4].substr(-8),16);return new cu(i,n,s,o)}hashCode(){return $N.MurmurHash.hashCode([this.data[0],this.data[1],this.data[2],this.data[3]])}equals(t){return t===this?!0:t instanceof cu?this.data[0]===t.data[0]&&this.data[1]===t.data[1]&&this.data[2]===t.data[2]&&this.data[3]===t.data[3]:!1}toString(){return("00000000"+this.data[0].toString(16)).substr(-8)+"-"+("0000"+(this.data[1]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[1].toString(16)).substr(-4)+"-"+("0000"+(this.data[2]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[2].toString(16)).substr(-4)+("00000000"+this.data[3].toString(16)).substr(-8)}}sh.UUID=cu;var _0;function lf(){if(_0)return ho;_0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(Q,F,O,$){var X=arguments.length,Z=X<3?F:$===null?$=Object.getOwnPropertyDescriptor(F,O):$,tt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Z=Reflect.decorate(Q,F,O,$);else for(var lt=Q.length-1;lt>=0;lt--)(tt=Q[lt])&&(Z=(X<3?tt(Z):X>3?tt(F,O,Z):tt(F,O))||Z);return X>3&&Z&&Object.defineProperty(F,O,Z),Z},t=A&&A.__param||function(Q,F){return function(O,$){F(O,$,Q)}};Object.defineProperty(ho,"__esModule",{value:!0}),ho.ATNDeserializer=void 0;const e=Ma,i=lr,n=Fr(),s=Ba,o=re,a=Ha,l=$u,u=Oa,h=hr,c=Gu,d=On,f=Dr,p=k_(),_=zu,x=Dn(),g=Da,v=Vu,m=Xu,y=Wu,S=W_,E=Y_,b=Yu,T=q_,C=qu,D=za,I=G,L=ef(),M=Xa(),k=Zu,q=Qu,ht=Ju,it=Sa,at=th,Dt=eh,Tt=Di,ft=Ds,fe=tf(),w=rh,R=ih,P=Ps,H=St,j=nh,B=sh,z=La;var et;(function(Q){Q[Q.UNICODE_BMP=0]="UNICODE_BMP",Q[Q.UNICODE_SMP=1]="UNICODE_SMP"})(et||(et={}));let rt=class ct{constructor(F){F===void 0&&(F=s.ATNDeserializationOptions.defaultOptions),this.deserializationOptions=F}static get SERIALIZED_VERSION(){return 3}static isFeatureSupported(F,O){let $=ct.SUPPORTED_UUIDS.findIndex(X=>X.equals(F));return $<0?!1:ct.SUPPORTED_UUIDS.findIndex(X=>X.equals(O))>=$}static getUnicodeDeserializer(F){return F===0?{readUnicode:(O,$)=>ct.toInt(O[$]),size:1}:{readUnicode:(O,$)=>ct.toInt32(O,$),size:2}}deserialize(F){F=F.slice(0);for(let W=1;W<F.length;W++)F[W]=F[W]-2&65535;let O=0,$=ct.toInt(F[O++]);if($!==ct.SERIALIZED_VERSION){let W=`Could not deserialize ATN with version ${$} (expected ${ct.SERIALIZED_VERSION}).`;throw new Error(W)}let X=ct.toUUID(F,O);if(O+=8,ct.SUPPORTED_UUIDS.findIndex(W=>W.equals(X))<0){let W=`Could not deserialize ATN with UUID ${X} (expected ${ct.SERIALIZED_UUID} or a legacy UUID).`;throw new Error(W)}let Z=ct.isFeatureSupported(ct.ADDED_LEXER_ACTIONS,X),tt=ct.toInt(F[O++]),lt=ct.toInt(F[O++]),V=new n.ATN(tt,lt),gt=[],Ft=[],qt=ct.toInt(F[O++]);for(let W=0;W<qt;W++){let yt=ct.toInt(F[O++]);if(yt===o.ATNStateType.INVALID_TYPE){V.addState(new g.InvalidState);continue}let Ct=ct.toInt(F[O++]);Ct===65535&&(Ct=-1);let wt=this.stateFactory(yt,Ct);if(yt===o.ATNStateType.LOOP_END){let Xt=ct.toInt(F[O++]);gt.push([wt,Xt])}else if(wt instanceof d.BlockStartState){let Xt=ct.toInt(F[O++]);Ft.push([wt,Xt])}V.addState(wt)}for(let W of gt)W[0].loopBackState=V.states[W[1]];for(let W of Ft)W[0].endState=V.states[W[1]];let Lt=ct.toInt(F[O++]);for(let W=0;W<Lt;W++){let yt=ct.toInt(F[O++]);V.states[yt].nonGreedy=!0}let Ur=ct.toInt(F[O++]);for(let W=0;W<Ur;W++){let yt=ct.toInt(F[O++]);V.states[yt].sll=!0}let pr=ct.toInt(F[O++]);for(let W=0;W<pr;W++){let yt=ct.toInt(F[O++]);V.states[yt].isPrecedenceRule=!0}let ol=ct.toInt(F[O++]);V.grammarType===0&&(V.ruleToTokenType=new Int32Array(ol)),V.ruleToStartState=new Array(ol);for(let W=0;W<ol;W++){let yt=ct.toInt(F[O++]),Ct=V.states[yt];if(Ct.leftFactored=ct.toInt(F[O++])!==0,V.ruleToStartState[W]=Ct,V.grammarType===0){let wt=ct.toInt(F[O++]);wt===65535&&(wt=H.Token.EOF),V.ruleToTokenType[W]=wt,ct.isFeatureSupported(ct.ADDED_LEXER_ACTIONS,X)||ct.toInt(F[O++])}}V.ruleToStopState=new Array(ol);for(let W of V.states)W instanceof Tt.RuleStopState&&(V.ruleToStopState[W.ruleIndex]=W,V.ruleToStartState[W.ruleIndex].stopState=W);let bh=ct.toInt(F[O++]);for(let W=0;W<bh;W++){let yt=ct.toInt(F[O++]);V.modeToStartState.push(V.states[yt])}V.modeToDFA=new Array(bh);for(let W=0;W<bh;W++)V.modeToDFA[W]=new p.DFA(V.modeToStartState[W]);let Ch=[];O=this.deserializeSets(F,O,Ch,ct.getUnicodeDeserializer(0)),ct.isFeatureSupported(ct.ADDED_UNICODE_SMP,X)&&(O=this.deserializeSets(F,O,Ch,ct.getUnicodeDeserializer(1)));let jg=ct.toInt(F[O++]);for(let W=0;W<jg;W++){let yt=ct.toInt(F[O]),Ct=ct.toInt(F[O+1]),wt=ct.toInt(F[O+2]),Xt=ct.toInt(F[O+3]),ci=ct.toInt(F[O+4]),ie=ct.toInt(F[O+5]),Ue=this.edgeFactory(V,wt,yt,Ct,Xt,ci,ie,Ch);V.states[yt].addTransition(Ue),O+=6}let $g=new i.Array2DHashSet({hashCode:W=>W.stopState^W.returnState^W.outermostPrecedenceReturn,equals:(W,yt)=>W.stopState===yt.stopState&&W.returnState===yt.returnState&&W.outermostPrecedenceReturn===yt.outermostPrecedenceReturn}),_f=[];for(let W of V.states){let yt=W.ruleIndex>=0&&V.ruleToStartState[W.ruleIndex].leftFactored;for(let Ct=0;Ct<W.numberOfTransitions;Ct++){let wt=W.transition(Ct);if(!(wt instanceof ft.RuleTransition))continue;let Xt=wt;if(!V.ruleToStartState[Xt.target.ruleIndex].leftFactored&&yt)continue;let ie=-1;V.ruleToStartState[Xt.target.ruleIndex].isPrecedenceRule&&Xt.precedence===0&&(ie=Xt.target.ruleIndex);let Ue={stopState:Xt.target.ruleIndex,returnState:Xt.followState.stateNumber,outermostPrecedenceReturn:ie};$g.add(Ue)&&_f.push(Ue)}}for(let W of _f){let yt=new _.EpsilonTransition(V.states[W.returnState],W.outermostPrecedenceReturn);V.ruleToStopState[W.stopState].addTransition(yt)}for(let W of V.states){if(W instanceof d.BlockStartState){if(W.endState===void 0)throw new Error("IllegalStateException");if(W.endState.startState!==void 0)throw new Error("IllegalStateException");W.endState.startState=W}if(W instanceof q.PlusLoopbackState){let yt=W;for(let Ct=0;Ct<yt.numberOfTransitions;Ct++){let wt=yt.transition(Ct).target;wt instanceof k.PlusBlockStartState&&(wt.loopBackState=yt)}}else if(W instanceof R.StarLoopbackState){let yt=W;for(let Ct=0;Ct<yt.numberOfTransitions;Ct++){let wt=yt.transition(Ct).target;wt instanceof P.StarLoopEntryState&&(wt.loopBackState=yt)}}}let wh=ct.toInt(F[O++]);for(let W=1;W<=wh;W++){let yt=ct.toInt(F[O++]),Ct=V.states[yt];V.decisionToState.push(Ct),Ct.decision=W-1}if(V.grammarType===0)if(Z){V.lexerActions=new Array(ct.toInt(F[O++]));for(let W=0;W<V.lexerActions.length;W++){let yt=ct.toInt(F[O++]),Ct=ct.toInt(F[O++]);Ct===65535&&(Ct=-1);let wt=ct.toInt(F[O++]);wt===65535&&(wt=-1);let Xt=this.lexerActionFactory(yt,Ct,wt);V.lexerActions[W]=Xt}}else{let W=[];for(let yt of V.states)for(let Ct=0;Ct<yt.numberOfTransitions;Ct++){let wt=yt.transition(Ct);if(!(wt instanceof e.ActionTransition))continue;let Xt=wt.ruleIndex,ci=wt.actionIndex,ie=new m.LexerCustomAction(Xt,ci);yt.setTransition(Ct,new e.ActionTransition(wt.target,Xt,W.length,!1)),W.push(ie)}V.lexerActions=W}this.markPrecedenceDecisions(V),V.decisionToDFA=new Array(wh);for(let W=0;W<wh;W++)V.decisionToDFA[W]=new p.DFA(V.decisionToState[W],W);if(this.deserializationOptions.isVerifyATN&&this.verifyATN(V),this.deserializationOptions.isGenerateRuleBypassTransitions&&V.grammarType===1){V.ruleToTokenType=new Int32Array(V.ruleToStartState.length);for(let W=0;W<V.ruleToStartState.length;W++)V.ruleToTokenType[W]=V.maxTokenType+W+1;for(let W=0;W<V.ruleToStartState.length;W++){let yt=new l.BasicBlockStartState;yt.ruleIndex=W,V.addState(yt);let Ct=new c.BlockEndState;Ct.ruleIndex=W,V.addState(Ct),yt.endState=Ct,V.defineDecisionState(yt),Ct.startState=yt;let wt,Xt;if(V.ruleToStartState[W].isPrecedenceRule){wt=void 0;for(let ie of V.states){if(ie.ruleIndex!==W||!(ie instanceof P.StarLoopEntryState))continue;let Ue=ie.transition(ie.numberOfTransitions-1).target;if(Ue instanceof D.LoopEndState&&Ue.epsilonOnlyTransitions&&Ue.transition(0).target instanceof Tt.RuleStopState){wt=ie;break}}if(!wt)throw new Error("Couldn't identify final state of the precedence rule prefix section.");Xt=wt.loopBackState.transition(0)}else wt=V.ruleToStopState[W];for(let ie of V.states)for(let Ue=0;Ue<ie.numberOfTransitions;Ue++){let al=ie.transition(Ue);al!==Xt&&al.target===wt&&(al.target=Ct)}for(;V.ruleToStartState[W].numberOfTransitions>0;){let ie=V.ruleToStartState[W].removeTransition(V.ruleToStartState[W].numberOfTransitions-1);yt.addTransition(ie)}V.ruleToStartState[W].addTransition(new _.EpsilonTransition(yt)),Ct.addTransition(new _.EpsilonTransition(wt));let ci=new u.BasicState;V.addState(ci),ci.addTransition(new a.AtomTransition(Ct,V.ruleToTokenType[W])),yt.addTransition(new _.EpsilonTransition(ci))}this.deserializationOptions.isVerifyATN&&this.verifyATN(V)}if(this.deserializationOptions.isOptimize){for(;;){let W=0;W+=ct.inlineSetRules(V),W+=ct.combineChainedEpsilons(V);let yt=V.grammarType===0;if(W+=ct.optimizeSets(V,yt),W===0)break}this.deserializationOptions.isVerifyATN&&this.verifyATN(V)}return ct.identifyTailCalls(V),V}deserializeSets(F,O,$,X){let Z=ct.toInt(F[O++]);for(let tt=0;tt<Z;tt++){let lt=ct.toInt(F[O]);O++;let V=new x.IntervalSet;$.push(V),ct.toInt(F[O++])!==0&&V.add(-1);for(let Ft=0;Ft<lt;Ft++){let qt=X.readUnicode(F,O);O+=X.size;let Lt=X.readUnicode(F,O);O+=X.size,V.add(qt,Lt)}}return O}markPrecedenceDecisions(F){let O=new Map;for(let $ of F.states)if($ instanceof P.StarLoopEntryState&&F.ruleToStartState[$.ruleIndex].isPrecedenceRule){let X=$.transition($.numberOfTransitions-1).target;X instanceof D.LoopEndState&&X.epsilonOnlyTransitions&&X.transition(0).target instanceof Tt.RuleStopState&&(O.set($.ruleIndex,$),$.precedenceRuleDecision=!0,$.precedenceLoopbackStates=new h.BitSet(F.states.length))}for(let $ of O)for(let X of F.ruleToStopState[$[0]].getTransitions())X.serializationType!==1||X.outermostPrecedenceReturn!==-1||$[1].precedenceLoopbackStates.set(X.target.stateNumber)}verifyATN(F){for(let O of F.states)if(this.checkCondition(O!==void 0,"ATN states should not be undefined."),O.stateType!==o.ATNStateType.INVALID_TYPE){if(this.checkCondition(O.onlyHasEpsilonTransitions||O.numberOfTransitions<=1),O instanceof k.PlusBlockStartState&&this.checkCondition(O.loopBackState!==void 0),O instanceof P.StarLoopEntryState){let $=O;if(this.checkCondition($.loopBackState!==void 0),this.checkCondition($.numberOfTransitions===2),$.transition(0).target instanceof w.StarBlockStartState)this.checkCondition($.transition(1).target instanceof D.LoopEndState),this.checkCondition(!$.nonGreedy);else if($.transition(0).target instanceof D.LoopEndState)this.checkCondition($.transition(1).target instanceof w.StarBlockStartState),this.checkCondition($.nonGreedy);else throw new Error("IllegalStateException")}if(O instanceof R.StarLoopbackState&&(this.checkCondition(O.numberOfTransitions===1),this.checkCondition(O.transition(0).target instanceof P.StarLoopEntryState)),O instanceof D.LoopEndState&&this.checkCondition(O.loopBackState!==void 0),O instanceof Dt.RuleStartState&&this.checkCondition(O.stopState!==void 0),O instanceof d.BlockStartState&&this.checkCondition(O.endState!==void 0),O instanceof c.BlockEndState&&this.checkCondition(O.startState!==void 0),O instanceof f.DecisionState){let $=O;this.checkCondition($.numberOfTransitions<=1||$.decision>=0)}else this.checkCondition(O.numberOfTransitions<=1||O instanceof Tt.RuleStopState)}}checkCondition(F,O){if(!F)throw new Error("IllegalStateException: "+O)}static inlineSetRules(F){let O=0,$=new Array(F.ruleToStartState.length);for(let X=0;X<F.ruleToStartState.length;X++){let tt=F.ruleToStartState[X];for(;tt.onlyHasEpsilonTransitions&&tt.numberOfOptimizedTransitions===1&&tt.getOptimizedTransition(0).serializationType===1;)tt=tt.getOptimizedTransition(0).target;if(tt.numberOfOptimizedTransitions!==1)continue;let lt=tt.getOptimizedTransition(0),V=lt.target;if(!(lt.isEpsilon||!V.onlyHasEpsilonTransitions||V.numberOfOptimizedTransitions!==1||!(V.getOptimizedTransition(0).target instanceof Tt.RuleStopState)))switch(lt.serializationType){case 5:case 2:case 7:$[X]=lt;break;case 8:case 9:continue;default:continue}}for(let X of F.states){if(X.ruleIndex<0)continue;let Z;for(let tt=0;tt<X.numberOfOptimizedTransitions;tt++){let lt=X.getOptimizedTransition(tt);if(!(lt instanceof ft.RuleTransition)){Z!==void 0&&Z.push(lt);continue}let V=lt,gt=$[V.target.ruleIndex];if(gt===void 0){Z!==void 0&&Z.push(lt);continue}if(Z===void 0){Z=[];for(let Lt=0;Lt<tt;Lt++)Z.push(X.getOptimizedTransition(tt))}O++;let Ft=V.followState,qt=new u.BasicState;switch(qt.setRuleIndex(Ft.ruleIndex),F.addState(qt),Z.push(new _.EpsilonTransition(qt)),gt.serializationType){case 5:qt.addTransition(new a.AtomTransition(Ft,gt._label));break;case 2:qt.addTransition(new at.RangeTransition(Ft,gt.from,gt.to));break;case 7:qt.addTransition(new fe.SetTransition(Ft,gt.label));break;default:throw new Error("UnsupportedOperationException")}}if(Z!==void 0){if(X.isOptimized)for(;X.numberOfOptimizedTransitions>0;)X.removeOptimizedTransition(X.numberOfOptimizedTransitions-1);for(let tt of Z)X.addOptimizedTransition(tt)}}return M.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+O+" rule invocations by inlining sets."),O}static combineChainedEpsilons(F){let O=0;for(let $ of F.states){if(!$.onlyHasEpsilonTransitions||$ instanceof Tt.RuleStopState)continue;let X;t:for(let Z=0;Z<$.numberOfOptimizedTransitions;Z++){let tt=$.getOptimizedTransition(Z),lt=tt.target;if(tt.serializationType!==1||tt.outermostPrecedenceReturn!==-1||lt.stateType!==o.ATNStateType.BASIC||!lt.onlyHasEpsilonTransitions){X!==void 0&&X.push(tt);continue t}for(let V=0;V<lt.numberOfOptimizedTransitions;V++)if(lt.getOptimizedTransition(V).serializationType!==1||lt.getOptimizedTransition(V).outermostPrecedenceReturn!==-1){X!==void 0&&X.push(tt);continue t}if(O++,X===void 0){X=[];for(let V=0;V<Z;V++)X.push($.getOptimizedTransition(V))}for(let V=0;V<lt.numberOfOptimizedTransitions;V++){let gt=lt.getOptimizedTransition(V).target;X.push(new _.EpsilonTransition(gt))}}if(X!==void 0){if($.isOptimized)for(;$.numberOfOptimizedTransitions>0;)$.removeOptimizedTransition($.numberOfOptimizedTransitions-1);for(let Z of X)$.addOptimizedTransition(Z)}}return M.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+O+" transitions by combining chained epsilon transitions."),O}static optimizeSets(F,O){if(O)return 0;let $=0,X=F.decisionToState;for(let Z of X){let tt=new x.IntervalSet;for(let Lt=0;Lt<Z.numberOfOptimizedTransitions;Lt++){let Ur=Z.getOptimizedTransition(Lt);if(!(Ur instanceof _.EpsilonTransition)||Ur.target.numberOfOptimizedTransitions!==1)continue;let pr=Ur.target.getOptimizedTransition(0);pr.target instanceof c.BlockEndState&&(pr instanceof L.NotSetTransition||(pr instanceof a.AtomTransition||pr instanceof at.RangeTransition||pr instanceof fe.SetTransition)&&tt.add(Lt))}if(tt.size<=1)continue;let lt=[];for(let Lt=0;Lt<Z.numberOfOptimizedTransitions;Lt++)tt.contains(Lt)||lt.push(Z.getOptimizedTransition(Lt));let V=Z.getOptimizedTransition(tt.minElement).target.getOptimizedTransition(0).target,gt=new x.IntervalSet;for(let Lt of tt.intervals)for(let Ur=Lt.a;Ur<=Lt.b;Ur++){let pr=Z.getOptimizedTransition(Ur).target.getOptimizedTransition(0);if(pr instanceof L.NotSetTransition)throw new Error("Not yet implemented.");gt.addAll(pr.label)}let Ft;if(gt.intervals.length===1)if(gt.size===1)Ft=new a.AtomTransition(V,gt.minElement);else{let Lt=gt.intervals[0];Ft=new at.RangeTransition(V,Lt.a,Lt.b)}else Ft=new fe.SetTransition(V,gt);let qt=new u.BasicState;if(qt.setRuleIndex(Z.ruleIndex),F.addState(qt),qt.addTransition(Ft),lt.push(new _.EpsilonTransition(qt)),$+=Z.numberOfOptimizedTransitions-lt.length,Z.isOptimized)for(;Z.numberOfOptimizedTransitions>0;)Z.removeOptimizedTransition(Z.numberOfOptimizedTransitions-1);for(let Lt of lt)Z.addOptimizedTransition(Lt)}return M.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+$+" paths by collapsing sets."),$}static identifyTailCalls(F){for(let O of F.states){for(let $=0;$<O.numberOfTransitions;$++){let X=O.transition($);X instanceof ft.RuleTransition&&(X.tailCall=this.testTailCall(F,X,!1),X.optimizedTailCall=this.testTailCall(F,X,!0))}if(O.isOptimized)for(let $=0;$<O.numberOfOptimizedTransitions;$++){let X=O.getOptimizedTransition($);X instanceof ft.RuleTransition&&(X.tailCall=this.testTailCall(F,X,!1),X.optimizedTailCall=this.testTailCall(F,X,!0))}}}static testTailCall(F,O,$){if(!$&&O.tailCall||$&&O.optimizedTailCall)return!0;let X=new h.BitSet(F.states.length),Z=[];for(Z.push(O.followState);;){let tt=Z.pop();if(!tt)break;if(X.get(tt.stateNumber)||tt instanceof Tt.RuleStopState)continue;if(!tt.onlyHasEpsilonTransitions)return!1;let lt=$?tt.numberOfOptimizedTransitions:tt.numberOfTransitions;for(let V=0;V<lt;V++){let gt=$?tt.getOptimizedTransition(V):tt.transition(V);if(gt.serializationType!==1)return!1;Z.push(gt.target)}}return!0}static toInt(F){return F}static toInt32(F,O){return(F[O]|F[O+1]<<16)>>>0}static toUUID(F,O){let $=ct.toInt32(F,O),X=ct.toInt32(F,O+2),Z=ct.toInt32(F,O+4),tt=ct.toInt32(F,O+6);return new B.UUID(tt,Z,X,$)}edgeFactory(F,O,$,X,Z,tt,lt,V){let gt=F.states[X];switch(O){case 1:return new _.EpsilonTransition(gt);case 2:return lt!==0?new at.RangeTransition(gt,H.Token.EOF,tt):new at.RangeTransition(gt,Z,tt);case 3:return new ft.RuleTransition(F.states[Z],tt,lt,gt);case 4:return new it.PredicateTransition(gt,Z,tt,lt!==0);case 10:return new ht.PrecedencePredicateTransition(gt,Z);case 5:return lt!==0?new a.AtomTransition(gt,H.Token.EOF):new a.AtomTransition(gt,Z);case 6:return new e.ActionTransition(gt,Z,tt,lt!==0);case 7:return new fe.SetTransition(gt,V[Z]);case 8:return new L.NotSetTransition(gt,V[Z]);case 9:return new z.WildcardTransition(gt)}throw new Error("The specified transition type is not valid.")}stateFactory(F,O){let $;switch(F){case o.ATNStateType.INVALID_TYPE:return new g.InvalidState;case o.ATNStateType.BASIC:$=new u.BasicState;break;case o.ATNStateType.RULE_START:$=new Dt.RuleStartState;break;case o.ATNStateType.BLOCK_START:$=new l.BasicBlockStartState;break;case o.ATNStateType.PLUS_BLOCK_START:$=new k.PlusBlockStartState;break;case o.ATNStateType.STAR_BLOCK_START:$=new w.StarBlockStartState;break;case o.ATNStateType.TOKEN_START:$=new j.TokensStartState;break;case o.ATNStateType.RULE_STOP:$=new Tt.RuleStopState;break;case o.ATNStateType.BLOCK_END:$=new c.BlockEndState;break;case o.ATNStateType.STAR_LOOP_BACK:$=new R.StarLoopbackState;break;case o.ATNStateType.STAR_LOOP_ENTRY:$=new P.StarLoopEntryState;break;case o.ATNStateType.PLUS_LOOP_BACK:$=new q.PlusLoopbackState;break;case o.ATNStateType.LOOP_END:$=new D.LoopEndState;break;default:let X=`The specified state type ${F} is not valid.`;throw new Error(X)}return $.ruleIndex=O,$}lexerActionFactory(F,O,$){switch(F){case 0:return new v.LexerChannelAction(O);case 1:return new m.LexerCustomAction(O,$);case 2:return new y.LexerModeAction(O);case 3:return S.LexerMoreAction.INSTANCE;case 4:return E.LexerPopModeAction.INSTANCE;case 5:return new b.LexerPushModeAction(O);case 6:return T.LexerSkipAction.INSTANCE;case 7:return new C.LexerTypeAction(O);default:let X=`The specified lexer action type ${F} is not valid.`;throw new Error(X)}}};return rt.BASE_SERIALIZED_UUID=B.UUID.fromString("E4178468-DF95-44D0-AD87-F22A5D5FB6D3"),rt.ADDED_LEXER_ACTIONS=B.UUID.fromString("AB35191A-1603-487E-B75A-479B831EAF6D"),rt.ADDED_UNICODE_SMP=B.UUID.fromString("C23FEA89-0605-4f51-AFB8-058BCAB8C91B"),rt.SUPPORTED_UUIDS=[rt.BASE_SERIALIZED_UUID,rt.ADDED_LEXER_ACTIONS,rt.ADDED_UNICODE_SMP],rt.SERIALIZED_UUID=rt.ADDED_UNICODE_SMP,r([I.NotNull],rt.prototype,"deserializationOptions",void 0),r([t(0,I.NotNull)],rt.prototype,"deserialize",null),r([t(0,I.NotNull)],rt.prototype,"markPrecedenceDecisions",null),r([I.NotNull,t(0,I.NotNull)],rt.prototype,"edgeFactory",null),ho.ATNDeserializer=rt,ho}var oh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var uf=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},GN=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(oh,"__esModule",{value:!0});oh.ParseInfo=void 0;const hf=G;let ya=class{constructor(t){this.atnSimulator=t}getDecisionInfo(){return this.atnSimulator.getDecisionInfo()}getLLDecisions(){let t=this.atnSimulator.getDecisionInfo(),e=[];for(let i=0;i<t.length;i++)t[i].LL_Fallback>0&&e.push(i);return e}getTotalTimeInPrediction(){let t=this.atnSimulator.getDecisionInfo(),e=0;for(let i of t)e+=i.timeInPrediction;return e}getTotalSLLLookaheadOps(){let t=this.atnSimulator.getDecisionInfo(),e=0;for(let i of t)e+=i.SLL_TotalLook;return e}getTotalLLLookaheadOps(){let t=this.atnSimulator.getDecisionInfo(),e=0;for(let i of t)e+=i.LL_TotalLook;return e}getTotalSLLATNLookaheadOps(){let t=this.atnSimulator.getDecisionInfo(),e=0;for(let i of t)e+=i.SLL_ATNTransitions;return e}getTotalLLATNLookaheadOps(){let t=this.atnSimulator.getDecisionInfo(),e=0;for(let i of t)e+=i.LL_ATNTransitions;return e}getTotalATNLookaheadOps(){let t=this.atnSimulator.getDecisionInfo(),e=0;for(let i of t)e+=i.SLL_ATNTransitions,e+=i.LL_ATNTransitions;return e}getDFASize(t){if(t)return this.atnSimulator.atn.decisionToDFA[t].states.size;{let e=0,i=this.atnSimulator.atn.decisionToDFA;for(let n=0;n<i.length;n++)e+=this.getDFASize(n);return e}}};uf([hf.NotNull],ya.prototype,"getDecisionInfo",null);uf([hf.NotNull],ya.prototype,"getLLDecisions",null);ya=uf([GN(0,hf.NotNull)],ya);oh.ParseInfo=ya;var Ka={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var cf=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.ProxyParserErrorListener=void 0;const zN=Is,df=G;class ah extends zN.ProxyErrorListener{constructor(t){super(t)}reportAmbiguity(t,e,i,n,s,o,a){this.getDelegates().forEach(l=>{l.reportAmbiguity&&l.reportAmbiguity(t,e,i,n,s,o,a)})}reportAttemptingFullContext(t,e,i,n,s,o){this.getDelegates().forEach(a=>{a.reportAttemptingFullContext&&a.reportAttemptingFullContext(t,e,i,n,s,o)})}reportContextSensitivity(t,e,i,n,s,o){this.getDelegates().forEach(a=>{a.reportContextSensitivity&&a.reportContextSensitivity(t,e,i,n,s,o)})}}cf([df.Override],ah.prototype,"reportAmbiguity",null);cf([df.Override],ah.prototype,"reportAttemptingFullContext",null);cf([df.Override],ah.prototype,"reportContextSensitivity",null);Ka.ProxyParserErrorListener=ah;var vc={},lh={},ff={},Ti={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ti,"__esModule",{value:!0});Ti.isSupplementaryCodePoint=Ti.isLowSurrogate=Ti.isHighSurrogate=void 0;function VN(r){return r>=55296&&r<=56319}Ti.isHighSurrogate=VN;function XN(r){return r>=56320&&r<=57343}Ti.isLowSurrogate=XN;function WN(r){return r>=65536}Ti.isSupplementaryCodePoint=WN;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.CodePointBuffer=void 0;const t=Be,e=Ti;class i{constructor(s,o){this.buffer=s,this._position=0,this._size=o}static withArray(s){return new i(s,s.length)}get position(){return this._position}set position(s){if(s<0||s>this._size)throw new RangeError;this._position=s}get remaining(){return this._size-this.position}get(s){return this.buffer[s]}array(){return this.buffer.slice(0,this._size)}static builder(s){return new i.Builder(s)}}r.CodePointBuffer=i,function(n){let s;(function(a){a[a.BYTE=0]="BYTE",a[a.CHAR=1]="CHAR",a[a.INT=2]="INT"})(s||(s={}));class o{constructor(l){this.type=0,this.buffer=new Uint8Array(l),this.prevHighSurrogate=-1,this.position=0}build(){return new n(this.buffer,this.position)}static roundUpToNextPowerOfTwo(l){let u=32-Math.clz32(l-1);return Math.pow(2,u)}ensureRemaining(l){switch(this.type){case 0:if(this.buffer.length-this.position<l){let u=o.roundUpToNextPowerOfTwo(this.buffer.length+l),h=new Uint8Array(u);h.set(this.buffer.subarray(0,this.position),0),this.buffer=h}break;case 1:if(this.buffer.length-this.position<l){let u=o.roundUpToNextPowerOfTwo(this.buffer.length+l),h=new Uint16Array(u);h.set(this.buffer.subarray(0,this.position),0),this.buffer=h}break;case 2:if(this.buffer.length-this.position<l){let u=o.roundUpToNextPowerOfTwo(this.buffer.length+l),h=new Int32Array(u);h.set(this.buffer.subarray(0,this.position),0),this.buffer=h}break}}append(l){this.ensureRemaining(l.length),this.appendArray(l)}appendArray(l){switch(this.type){case 0:this.appendArrayByte(l);break;case 1:this.appendArrayChar(l);break;case 2:this.appendArrayInt(l);break}}appendArrayByte(l){t(this.prevHighSurrogate===-1);let u=l,h=0,c=l.length,d=this.buffer,f=this.position;for(;h<c;){let p=u[h];if(p<=255)d[f]=p;else if(l=l.subarray(h,c),this.position=f,e.isHighSurrogate(p)){this.byteToIntBuffer(l.length),this.appendArrayInt(l);return}else{this.byteToCharBuffer(l.length),this.appendArrayChar(l);return}h++,f++}this.position=f}appendArrayChar(l){t(this.prevHighSurrogate===-1);let u=l,h=0,c=l.length,d=this.buffer,f=this.position;for(;h<c;){let p=u[h];if(!e.isHighSurrogate(p))d[f]=p;else{l=l.subarray(h,c),this.position=f,this.charToIntBuffer(l.length),this.appendArrayInt(l);return}h++,f++}this.position=f}appendArrayInt(l){let u=l,h=0,c=l.length,d=this.buffer,f=this.position;for(;h<c;){let p=u[h];h++,this.prevHighSurrogate!==-1?e.isLowSurrogate(p)?(d[f]=String.fromCharCode(this.prevHighSurrogate,p).codePointAt(0),f++,this.prevHighSurrogate=-1):(d[f]=this.prevHighSurrogate,f++,e.isHighSurrogate(p)?this.prevHighSurrogate=p:(d[f]=p,f++,this.prevHighSurrogate=-1)):e.isHighSurrogate(p)?this.prevHighSurrogate=p:(d[f]=p,f++)}this.prevHighSurrogate!==-1&&(d[f]=this.prevHighSurrogate,f++),this.position=f}byteToCharBuffer(l){let u=new Uint16Array(Math.max(this.position+l,this.buffer.length>>1));u.set(this.buffer.subarray(0,this.position),0),this.type=1,this.buffer=u}byteToIntBuffer(l){let u=new Int32Array(Math.max(this.position+l,this.buffer.length>>2));u.set(this.buffer.subarray(0,this.position),0),this.type=2,this.buffer=u}charToIntBuffer(l){let u=new Int32Array(Math.max(this.position+l,this.buffer.length>>1));u.set(this.buffer.subarray(0,this.position),0),this.type=2,this.buffer=u}}n.Builder=o}(i=r.CodePointBuffer||(r.CodePointBuffer={}))})(ff);var Za={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Mr=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Za,"__esModule",{value:!0});Za.CodePointCharStream=void 0;const g0=Be,Bl=ni,YN=de,kr=G;class ke{constructor(t,e,i,n){g0(e===0),this._array=t,this._size=i,this._name=n,this._position=0}get internalStorage(){return this._array}static fromBuffer(t,e){return(e===void 0||e.length===0)&&(e=Bl.IntStream.UNKNOWN_SOURCE_NAME),new ke(t.array(),t.position,t.remaining,e)}consume(){if(this._size-this._position===0)throw g0(this.LA(1)===Bl.IntStream.EOF),new RangeError("cannot consume EOF");this._position++}get index(){return this._position}get size(){return this._size}mark(){return-1}release(t){}seek(t){this._position=t}get sourceName(){return this._name}toString(){return this.getText(YN.Interval.of(0,this.size-1))}LA(t){let e;switch(Math.sign(t)){case-1:return e=this.index+t,e<0?Bl.IntStream.EOF:this._array[e];case 0:return 0;case 1:return e=this.index+t-1,e>=this.size?Bl.IntStream.EOF:this._array[e]}throw new RangeError("Not reached")}getText(t){const e=Math.min(t.a,this.size),i=Math.min(t.b-t.a+1,this.size-e);return this._array instanceof Int32Array?String.fromCodePoint(...Array.from(this._array.subarray(e,e+i))):String.fromCharCode(...Array.from(this._array.subarray(e,e+i)))}}Mr([kr.Override],ke.prototype,"consume",null);Mr([kr.Override],ke.prototype,"index",null);Mr([kr.Override],ke.prototype,"size",null);Mr([kr.Override],ke.prototype,"mark",null);Mr([kr.Override],ke.prototype,"release",null);Mr([kr.Override],ke.prototype,"seek",null);Mr([kr.Override],ke.prototype,"sourceName",null);Mr([kr.Override],ke.prototype,"toString",null);Mr([kr.Override],ke.prototype,"LA",null);Mr([kr.Override],ke.prototype,"getText",null);Za.CodePointCharStream=ke;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.CharStreams=void 0;const t=ff,e=Za,i=ni;(function(n){function s(o,a){(a===void 0||a.length===0)&&(a=i.IntStream.UNKNOWN_SOURCE_NAME);let l=t.CodePointBuffer.builder(o.length),u=new Uint16Array(o.length);for(let h=0;h<o.length;h++)u[h]=o.charCodeAt(h);return l.append(u),e.CodePointCharStream.fromBuffer(l.build(),a)}n.fromString=s})(r.CharStreams||(r.CharStreams={}))})(lh);var Ms={},Qa={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ee=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},qN=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.BufferedTokenStream=void 0;const y0=Be,v0=Ri,Ec=de,Tc=Oi(),te=G,ji=St;let ce=class{constructor(t){if(this.tokens=[],this.p=-1,this.fetchedEOF=!1,t==null)throw new Error("tokenSource cannot be null");this._tokenSource=t}get tokenSource(){return this._tokenSource}set tokenSource(t){this._tokenSource=t,this.tokens.length=0,this.p=-1,this.fetchedEOF=!1}get index(){return this.p}mark(){return 0}release(t){}seek(t){this.lazyInit(),this.p=this.adjustSeekIndex(t)}get size(){return this.tokens.length}consume(){let t;if(this.p>=0?this.fetchedEOF?t=this.p<this.tokens.length-1:t=this.p<this.tokens.length:t=!1,!t&&this.LA(1)===ji.Token.EOF)throw new Error("cannot consume EOF");this.sync(this.p+1)&&(this.p=this.adjustSeekIndex(this.p+1))}sync(t){y0(t>=0);let e=t-this.tokens.length+1;return e>0?this.fetch(e)>=e:!0}fetch(t){if(this.fetchedEOF)return 0;for(let e=0;e<t;e++){let i=this.tokenSource.nextToken();if(this.isWritableToken(i)&&(i.tokenIndex=this.tokens.length),this.tokens.push(i),i.type===ji.Token.EOF)return this.fetchedEOF=!0,e+1}return t}get(t){if(t<0||t>=this.tokens.length)throw new RangeError("token index "+t+" out of range 0.."+(this.tokens.length-1));return this.tokens[t]}getRange(t,e){if(t<0||e<0)return[];this.lazyInit();let i=new Array;e>=this.tokens.length&&(e=this.tokens.length-1);for(let n=t;n<=e;n++){let s=this.tokens[n];if(s.type===ji.Token.EOF)break;i.push(s)}return i}LA(t){let e=this.LT(t);return e?e.type:ji.Token.INVALID_TYPE}tryLB(t){if(!(this.p-t<0))return this.tokens[this.p-t]}LT(t){let e=this.tryLT(t);if(e===void 0)throw new RangeError("requested lookback index out of range");return e}tryLT(t){if(this.lazyInit(),t===0)throw new RangeError("0 is not a valid lookahead index");if(t<0)return this.tryLB(-t);let e=this.p+t-1;return this.sync(e),e>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[e]}adjustSeekIndex(t){return t}lazyInit(){this.p===-1&&this.setup()}setup(){this.sync(0),this.p=this.adjustSeekIndex(0)}getTokens(t,e,i){if(this.lazyInit(),t===void 0)return y0(e===void 0&&i===void 0),this.tokens;if(e===void 0&&(e=this.tokens.length-1),t<0||e>=this.tokens.length||e<0||t>=this.tokens.length)throw new RangeError("start "+t+" or stop "+e+" not in 0.."+(this.tokens.length-1));if(t>e)return[];if(i===void 0)return this.tokens.slice(t,e+1);typeof i=="number"&&(i=new Set().add(i));let n=i,s=this.tokens.slice(t,e+1);return s=s.filter(o=>n.has(o.type)),s}nextTokenOnChannel(t,e){if(this.sync(t),t>=this.size)return this.size-1;let i=this.tokens[t];for(;i.channel!==e;){if(i.type===ji.Token.EOF)return t;t++,this.sync(t),i=this.tokens[t]}return t}previousTokenOnChannel(t,e){if(this.sync(t),t>=this.size)return this.size-1;for(;t>=0;){let i=this.tokens[t];if(i.type===ji.Token.EOF||i.channel===e)return t;t--}return t}getHiddenTokensToRight(t,e=-1){if(this.lazyInit(),t<0||t>=this.tokens.length)throw new RangeError(t+" not in 0.."+(this.tokens.length-1));let i=this.nextTokenOnChannel(t+1,Tc.Lexer.DEFAULT_TOKEN_CHANNEL),n,s=t+1;return i===-1?n=this.size-1:n=i,this.filterForChannel(s,n,e)}getHiddenTokensToLeft(t,e=-1){if(this.lazyInit(),t<0||t>=this.tokens.length)throw new RangeError(t+" not in 0.."+(this.tokens.length-1));if(t===0)return[];let i=this.previousTokenOnChannel(t-1,Tc.Lexer.DEFAULT_TOKEN_CHANNEL);if(i===t-1)return[];let n=i+1,s=t-1;return this.filterForChannel(n,s,e)}filterForChannel(t,e,i){let n=new Array;for(let s=t;s<=e;s++){let o=this.tokens[s];i===-1?o.channel!==Tc.Lexer.DEFAULT_TOKEN_CHANNEL&&n.push(o):o.channel===i&&n.push(o)}return n}get sourceName(){return this.tokenSource.sourceName}getText(t){t===void 0?t=Ec.Interval.of(0,this.size-1):t instanceof Ec.Interval||(t=t.sourceInterval);let e=t.a,i=t.b;if(e<0||i<0)return"";this.fill(),i>=this.tokens.length&&(i=this.tokens.length-1);let n="";for(let s=e;s<=i;s++){let o=this.tokens[s];if(o.type===ji.Token.EOF)break;n+=o.text}return n.toString()}getTextFromRange(t,e){return this.isToken(t)&&this.isToken(e)?this.getText(Ec.Interval.of(t.tokenIndex,e.tokenIndex)):""}fill(){this.lazyInit();const t=1e3;for(;;)if(this.fetch(t)<t)return}isWritableToken(t){return t instanceof v0.CommonToken}isToken(t){return t instanceof v0.CommonToken}};Ee([te.NotNull],ce.prototype,"_tokenSource",void 0);Ee([te.Override],ce.prototype,"tokenSource",null);Ee([te.Override],ce.prototype,"index",null);Ee([te.Override],ce.prototype,"mark",null);Ee([te.Override],ce.prototype,"release",null);Ee([te.Override],ce.prototype,"seek",null);Ee([te.Override],ce.prototype,"size",null);Ee([te.Override],ce.prototype,"consume",null);Ee([te.Override],ce.prototype,"get",null);Ee([te.Override],ce.prototype,"LA",null);Ee([te.NotNull,te.Override],ce.prototype,"LT",null);Ee([te.Override],ce.prototype,"sourceName",null);Ee([te.NotNull,te.Override],ce.prototype,"getText",null);Ee([te.NotNull,te.Override],ce.prototype,"getTextFromRange",null);ce=Ee([qN(0,te.NotNull)],ce);Qa.BufferedTokenStream=ce;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var uh=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},KN=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.CommonTokenStream=void 0;const ZN=Qa,hh=G,E0=St;let As=class extends ZN.BufferedTokenStream{constructor(t,e=E0.Token.DEFAULT_CHANNEL){super(t),this.channel=e}adjustSeekIndex(t){return this.nextTokenOnChannel(t,this.channel)}tryLB(t){if(this.p-t<0)return;let e=this.p,i=1;for(;i<=t&&e>0;)e=this.previousTokenOnChannel(e-1,this.channel),i++;if(!(e<0))return this.tokens[e]}tryLT(t){if(this.lazyInit(),t===0)throw new RangeError("0 is not a valid lookahead index");if(t<0)return this.tryLB(-t);let e=this.p,i=1;for(;i<t;)this.sync(e+1)&&(e=this.nextTokenOnChannel(e+1,this.channel)),i++;return this.tokens[e]}getNumberOfOnChannelTokens(){let t=0;this.fill();for(let e of this.tokens)if(e.channel===this.channel&&t++,e.type===E0.Token.EOF)break;return t}};uh([hh.Override],As.prototype,"adjustSeekIndex",null);uh([hh.Override],As.prototype,"tryLB",null);uh([hh.Override],As.prototype,"tryLT",null);As=uh([KN(0,hh.NotNull)],As);Ms.CommonTokenStream=As;var Ja={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Fn=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},ug=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.ListTokenSource=void 0;const QN=Fu,Kr=G,Ac=St;let ti=class{constructor(t,e){if(this.i=0,this._factory=QN.CommonTokenFactory.DEFAULT,t==null)throw new Error("tokens cannot be null");this.tokens=t,this._sourceName=e}get charPositionInLine(){if(this.i<this.tokens.length)return this.tokens[this.i].charPositionInLine;if(this.eofToken!=null)return this.eofToken.charPositionInLine;if(this.tokens.length>0){let t=this.tokens[this.tokens.length-1],e=t.text;if(e!=null){let i=e.lastIndexOf(`
`);if(i>=0)return e.length-i-1}return t.charPositionInLine+t.stopIndex-t.startIndex+1}return 0}nextToken(){if(this.i>=this.tokens.length){if(this.eofToken==null){let e=-1;if(this.tokens.length>0){let n=this.tokens[this.tokens.length-1].stopIndex;n!==-1&&(e=n+1)}let i=Math.max(-1,e-1);this.eofToken=this._factory.create({source:this,stream:this.inputStream},Ac.Token.EOF,"EOF",Ac.Token.DEFAULT_CHANNEL,e,i,this.line,this.charPositionInLine)}return this.eofToken}let t=this.tokens[this.i];return this.i===this.tokens.length-1&&t.type===Ac.Token.EOF&&(this.eofToken=t),this.i++,t}get line(){if(this.i<this.tokens.length)return this.tokens[this.i].line;if(this.eofToken!=null)return this.eofToken.line;if(this.tokens.length>0){let t=this.tokens[this.tokens.length-1],e=t.line,i=t.text;if(i!=null)for(let n=0;n<i.length;n++)i.charAt(n)===`
`&&e++;return e}return 1}get inputStream(){if(this.i<this.tokens.length)return this.tokens[this.i].inputStream;if(this.eofToken!=null)return this.eofToken.inputStream;if(this.tokens.length>0)return this.tokens[this.tokens.length-1].inputStream}get sourceName(){if(this._sourceName)return this._sourceName;let t=this.inputStream;return t!=null?t.sourceName:"List"}set tokenFactory(t){this._factory=t}get tokenFactory(){return this._factory}};Fn([Kr.Override],ti.prototype,"charPositionInLine",null);Fn([Kr.Override],ti.prototype,"nextToken",null);Fn([Kr.Override],ti.prototype,"line",null);Fn([Kr.Override],ti.prototype,"inputStream",null);Fn([Kr.Override],ti.prototype,"sourceName",null);Fn([Kr.Override,Kr.NotNull,ug(0,Kr.NotNull)],ti.prototype,"tokenFactory",null);ti=Fn([ug(0,Kr.NotNull)],ti);Ja.ListTokenSource=ti;var go={},T0;function JN(){if(T0)return go;T0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(go,"__esModule",{value:!0}),go.MultiMap=void 0;let r=class extends Map{constructor(){super()}map(e,i){let n=super.get(e);n||(n=[],super.set(e,n)),n.push(i)}getPairs(){let e=[];return this.forEach((i,n)=>{i.forEach(s=>{e.push([n,s])})}),e}};return go.MultiMap=r,go}var tl={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(tl,"__esModule",{value:!0});tl.ParseCancellationException=void 0;class tR extends Error{constructor(t){super(t.message),this.cause=t,this.stack=t.stack}getCause(){return this.cause}}tl.ParseCancellationException=tR;var yo={},el={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var eR=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(el,"__esModule",{value:!0});el.InterpreterRuleContext=void 0;const rR=G,iR=fr();class hg extends iR.ParserRuleContext{constructor(t,e,i){i!==void 0?super(e,i):super(),this._ruleIndex=t}get ruleIndex(){return this._ruleIndex}}eR([rR.Override],hg.prototype,"ruleIndex",null);el.InterpreterRuleContext=hg;var A0;function cg(){if(A0)return yo;A0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(g,v,m,y){var S=arguments.length,E=S<3?v:y===null?y=Object.getOwnPropertyDescriptor(v,m):y,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(g,v,m,y);else for(var T=g.length-1;T>=0;T--)(b=g[T])&&(E=(S<3?b(E):S>3?b(v,m,E):b(v,m))||E);return S>3&&E&&Object.defineProperty(v,m,E),E},t=A&&A.__param||function(g,v){return function(m,y){v(m,y,g)}};Object.defineProperty(yo,"__esModule",{value:!0}),yo.ParserInterpreter=void 0;const e=Ir,i=re,n=hr,s=ws,o=Cn,a=el,l=za,u=G,h=G,c=il(),d=Xa(),f=Pr,p=Ps,_=St;let x=class md extends c.Parser{constructor(v,m,y,S,E){if(super(v instanceof md?v.inputStream:E),this._parentContextStack=[],this.overrideDecision=-1,this.overrideDecisionInputIndex=-1,this.overrideDecisionAlt=-1,this.overrideDecisionReached=!1,this._overrideDecisionRoot=void 0,v instanceof md){let b=v;this._grammarFileName=b._grammarFileName,this._atn=b._atn,this.pushRecursionContextStates=b.pushRecursionContextStates,this._ruleNames=b._ruleNames,this._vocabulary=b._vocabulary,this.interpreter=new d.ParserATNSimulator(this._atn,this)}else{m=m,y=y,S=S,this._grammarFileName=v,this._atn=S,this._ruleNames=y.slice(0),this._vocabulary=m,this.pushRecursionContextStates=new n.BitSet(S.states.length);for(let b of S.states)b instanceof p.StarLoopEntryState&&b.precedenceRuleDecision&&this.pushRecursionContextStates.set(b.stateNumber);this.interpreter=new d.ParserATNSimulator(S,this)}}reset(v){v===void 0?super.reset():super.reset(v),this.overrideDecisionReached=!1,this._overrideDecisionRoot=void 0}get atn(){return this._atn}get vocabulary(){return this._vocabulary}get ruleNames(){return this._ruleNames}get grammarFileName(){return this._grammarFileName}parse(v){let m=this._atn.ruleToStartState[v];for(this._rootContext=this.createInterpreterRuleContext(void 0,e.ATNState.INVALID_STATE_NUMBER,v),m.isPrecedenceRule?this.enterRecursionRule(this._rootContext,m.stateNumber,v,0):this.enterRule(this._rootContext,m.stateNumber,v);;){let y=this.atnState;switch(y.stateType){case i.ATNStateType.RULE_STOP:if(this._ctx.isEmpty)if(m.isPrecedenceRule){let S=this._ctx,E=this._parentContextStack.pop();return this.unrollRecursionContexts(E[0]),S}else return this.exitRule(),this._rootContext;this.visitRuleStopState(y);break;default:try{this.visitState(y)}catch(S){if(S instanceof f.RecognitionException)this.state=this._atn.ruleToStopState[y.ruleIndex].stateNumber,this.context.exception=S,this.errorHandler.reportError(this,S),this.recover(S);else throw S}break}}}enterRecursionRule(v,m,y,S){this._parentContextStack.push([this._ctx,v.invokingState]),super.enterRecursionRule(v,m,y,S)}get atnState(){return this._atn.states[this.state]}visitState(v){let m=1;v.numberOfTransitions>1&&(m=this.visitDecisionState(v));let y=v.transition(m-1);switch(y.serializationType){case 1:if(this.pushRecursionContextStates.get(v.stateNumber)&&!(y.target instanceof l.LoopEndState)){let D=this._parentContextStack[this._parentContextStack.length-1],I=this.createInterpreterRuleContext(D[0],D[1],this._ctx.ruleIndex);this.pushNewRecursionContext(I,this._atn.ruleToStartState[v.ruleIndex].stateNumber,this._ctx.ruleIndex)}break;case 5:this.match(y._label);break;case 2:case 7:case 8:y.matches(this._input.LA(1),_.Token.MIN_USER_TOKEN_TYPE,65535)||this.recoverInline(),this.matchWildcard();break;case 9:this.matchWildcard();break;case 3:let S=y.target,E=S.ruleIndex,b=this.createInterpreterRuleContext(this._ctx,v.stateNumber,E);S.isPrecedenceRule?this.enterRecursionRule(b,S.stateNumber,E,y.precedence):this.enterRule(b,y.target.stateNumber,E);break;case 4:let T=y;if(!this.sempred(this._ctx,T.ruleIndex,T.predIndex))throw new s.FailedPredicateException(this);break;case 6:let C=y;this.action(this._ctx,C.ruleIndex,C.actionIndex);break;case 10:if(!this.precpred(this._ctx,y.precedence)){let D=y.precedence;throw new s.FailedPredicateException(this,`precpred(_ctx, ${D})`)}break;default:throw new Error("UnsupportedOperationException: Unrecognized ATN transition type.")}this.state=y.target.stateNumber}visitDecisionState(v){let m;this.errorHandler.sync(this);let y=v.decision;return y===this.overrideDecision&&this._input.index===this.overrideDecisionInputIndex&&!this.overrideDecisionReached?(m=this.overrideDecisionAlt,this.overrideDecisionReached=!0):m=this.interpreter.adaptivePredict(this._input,y,this._ctx),m}createInterpreterRuleContext(v,m,y){return new a.InterpreterRuleContext(y,v,m)}visitRuleStopState(v){if(this._atn.ruleToStartState[v.ruleIndex].isPrecedenceRule){let S=this._parentContextStack.pop();this.unrollRecursionContexts(S[0]),this.state=S[1]}else this.exitRule();let y=this._atn.states[this.state].transition(0);this.state=y.followState.stateNumber}addDecisionOverride(v,m,y){this.overrideDecision=v,this.overrideDecisionInputIndex=m,this.overrideDecisionAlt=y}get overrideDecisionRoot(){return this._overrideDecisionRoot}recover(v){let m=this._input.index;if(this.errorHandler.recover(this,v),this._input.index===m){let y=v.getOffendingToken();if(!y)throw new Error("Expected exception to have an offending token");let S=y.tokenSource,E=S!==void 0?S.inputStream:void 0,b={source:S,stream:E};if(v instanceof o.InputMismatchException){let T=v.expectedTokens;if(T===void 0)throw new Error("Expected the exception to provide expected tokens");let C=_.Token.INVALID_TYPE;T.isNil||(C=T.minElement);let D=this.tokenFactory.create(b,C,y.text,_.Token.DEFAULT_CHANNEL,-1,-1,y.line,y.charPositionInLine);this._ctx.addErrorNode(this.createErrorNode(this._ctx,D))}else{y.tokenSource;let T=this.tokenFactory.create(b,_.Token.INVALID_TYPE,y.text,_.Token.DEFAULT_CHANNEL,-1,-1,y.line,y.charPositionInLine);this._ctx.addErrorNode(this.createErrorNode(this._ctx,T))}}}recoverInline(){return this._errHandler.recoverInline(this)}get rootContext(){return this._rootContext}};return r([u.NotNull],x.prototype,"_vocabulary",void 0),r([h.Override],x.prototype,"reset",null),r([h.Override],x.prototype,"atn",null),r([h.Override],x.prototype,"vocabulary",null),r([h.Override],x.prototype,"ruleNames",null),r([h.Override],x.prototype,"grammarFileName",null),r([h.Override],x.prototype,"enterRecursionRule",null),x=r([t(1,u.NotNull)],x),yo.ParserInterpreter=x,yo}var vo={},S0;function nR(){if(S0)return vo;S0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(n,s,o,a){var l=arguments.length,u=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,s,o,a);else for(var c=n.length-1;c>=0;c--)(h=n[c])&&(u=(l<3?h(u):l>3?h(s,o,u):h(s,o))||u);return l>3&&u&&Object.defineProperty(s,o,u),u},t=A&&A.__param||function(n,s){return function(o,a){s(o,a,n)}};Object.defineProperty(vo,"__esModule",{value:!0}),vo.ParseTreeMatch=void 0;const e=G;let i=class{constructor(s,o,a,l){if(!s)throw new Error("tree cannot be null");if(!o)throw new Error("pattern cannot be null");if(!a)throw new Error("labels cannot be null");this._tree=s,this._pattern=o,this._labels=a,this._mismatchedNode=l}get(s){let o=this._labels.get(s);if(!(!o||o.length===0))return o[o.length-1]}getAll(s){const o=this._labels.get(s);return o||[]}get labels(){return this._labels}get mismatchedNode(){return this._mismatchedNode}get succeeded(){return!this._mismatchedNode}get pattern(){return this._pattern}get tree(){return this._tree}toString(){return`Match ${this.succeeded?"succeeded":"failed"}; found ${this.labels.size} labels`}};return r([e.NotNull,t(0,e.NotNull)],i.prototype,"getAll",null),r([e.NotNull],i.prototype,"labels",null),r([e.NotNull],i.prototype,"pattern",null),r([e.NotNull],i.prototype,"tree",null),r([e.Override],i.prototype,"toString",null),i=r([t(0,e.NotNull),t(1,e.NotNull),t(2,e.NotNull)],i),vo.ParseTreeMatch=i,vo}var Eo={},To={},Ao={},b0;function sR(){if(b0)return Ao;b0=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.XPathLexer=void 0;const r=lf(),t=Oi(),e=ju(),i=oi,n=Qt;let s=class Pe extends t.Lexer{constructor(a){super(a),this._interp=new e.LexerATNSimulator(Pe._ATN,this)}get vocabulary(){return Pe.VOCABULARY}get grammarFileName(){return"XPathLexer.g4"}get ruleNames(){return Pe.ruleNames}get serializedATN(){return Pe._serializedATN}get channelNames(){return Pe.channelNames}get modeNames(){return Pe.modeNames}action(a,l,u){switch(l){case 4:this.ID_action(a,u);break}}ID_action(a,l){switch(l){case 0:let u=this.text;u.charAt(0)===u.charAt(0).toUpperCase()?this.type=Pe.TOKEN_REF:this.type=Pe.RULE_REF;break}}static get _ATN(){return Pe.__ATN||(Pe.__ATN=new r.ATNDeserializer().deserialize(n.toCharArray(Pe._serializedATN))),Pe.__ATN}};return Ao.XPathLexer=s,s.TOKEN_REF=1,s.RULE_REF=2,s.ANYWHERE=3,s.ROOT=4,s.WILDCARD=5,s.BANG=6,s.ID=7,s.STRING=8,s.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],s.modeNames=["DEFAULT_MODE"],s.ruleNames=["ANYWHERE","ROOT","WILDCARD","BANG","ID","NameChar","NameStartChar","STRING"],s._LITERAL_NAMES=[void 0,void 0,void 0,"'//'","'/'","'*'","'!'"],s._SYMBOLIC_NAMES=[void 0,"TOKEN_REF","RULE_REF","ANYWHERE","ROOT","WILDCARD","BANG","ID","STRING"],s.VOCABULARY=new i.VocabularyImpl(s._LITERAL_NAMES,s._SYMBOLIC_NAMES,[]),s._serializedATNSegments=2,s._serializedATNSegment0=`
2\b					\x07	\x07\b	\b			\x07
\f"\v\x07\x07\b\b		\x07	,
	\f		/\v			-
\x07\x07	\b\v	\r

2;C\\aac|\r(*<>?AOR_\uD801\uDA02\uDA38\uDA3D\uDA6E\uDA77\uDA77\uDA86\uDA86\uDA9D\uDAA1\uDAA3\uDAB1"C\\c|\r(*<>?AOR_`,s._serializedATNSegment1=`1\x07	\v\x07	\v\r%')\x071\x071\x071\x07,\b\x1B\x07#\x1B
 \b\r\x07"  !!#" #$\b$\f%&	&'(	()-\x07)*,\v+*,/-.-+.0/-01\x07)1 -`,s._serializedATN=n.join([s._serializedATNSegment0,s._serializedATNSegment1],""),Ao}var So={},C0;function oR(){if(C0)return So;C0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(i,n,s,o){var a=arguments.length,l=a<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,s):o,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,n,s,o);else for(var h=i.length-1;h>=0;h--)(u=i[h])&&(l=(a<3?u(l):a>3?u(n,s,l):u(n,s))||l);return a>3&&l&&Object.defineProperty(n,s,l),l};Object.defineProperty(So,"__esModule",{value:!0}),So.XPathLexerErrorListener=void 0;const t=G;let e=class{syntaxError(n,s,o,a,l,u){}};return r([t.Override],e.prototype,"syntaxError",null),So.XPathLexerErrorListener=e,So}var bo={},Co={},w0;function ks(){if(w0)return Co;w0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(i,n,s,o){var a=arguments.length,l=a<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,s):o,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,n,s,o);else for(var h=i.length-1;h>=0;h--)(u=i[h])&&(l=(a<3?u(l):a>3?u(n,s,l):u(n,s))||l);return a>3&&l&&Object.defineProperty(n,s,l),l};Object.defineProperty(Co,"__esModule",{value:!0}),Co.XPathElement=void 0;const t=G;let e=class{constructor(n){this.nodeName=n,this.invert=!1}toString(){let n=this.invert?"!":"";return Object.constructor.name+"["+n+this.nodeName+"]"}};return r([t.Override],e.prototype,"toString",null),Co.XPathElement=e,Co}var N0;function aR(){if(N0)return bo;N0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h};Object.defineProperty(bo,"__esModule",{value:!0}),bo.XPathRuleAnywhereElement=void 0;const t=G,e=Mi(),i=ks();let n=class extends i.XPathElement{constructor(o,a){super(o),this.ruleIndex=a}evaluate(o){return e.Trees.findAllRuleNodes(o,this.ruleIndex)}};return r([t.Override],n.prototype,"evaluate",null),bo.XPathRuleAnywhereElement=n,bo}var wo={},R0;function lR(){if(R0)return wo;R0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c};Object.defineProperty(wo,"__esModule",{value:!0}),wo.XPathRuleElement=void 0;const t=fr(),e=G,i=Mi(),n=ks();let s=class extends n.XPathElement{constructor(a,l){super(a),this.ruleIndex=l}evaluate(a){let l=[];for(let u of i.Trees.getChildren(a))u instanceof t.ParserRuleContext&&(u.ruleIndex===this.ruleIndex&&!this.invert||u.ruleIndex!==this.ruleIndex&&this.invert)&&l.push(u);return l}};return r([e.Override],s.prototype,"evaluate",null),wo.XPathRuleElement=s,wo}var No={},I0;function uR(){if(I0)return No;I0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h};Object.defineProperty(No,"__esModule",{value:!0}),No.XPathTokenAnywhereElement=void 0;const t=G,e=Mi(),i=ks();let n=class extends i.XPathElement{constructor(o,a){super(o),this.tokenType=a}evaluate(o){return e.Trees.findAllTokenNodes(o,this.tokenType)}};return r([t.Override],n.prototype,"evaluate",null),No.XPathTokenAnywhereElement=n,No}var Ro={},P0;function hR(){if(P0)return Ro;P0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c};Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.XPathTokenElement=void 0;const t=G,e=cr,i=Mi(),n=ks();let s=class extends n.XPathElement{constructor(a,l){super(a),this.tokenType=l}evaluate(a){let l=[];for(let u of i.Trees.getChildren(a))u instanceof e.TerminalNode&&(u.symbol.type===this.tokenType&&!this.invert||u.symbol.type!==this.tokenType&&this.invert)&&l.push(u);return l}};return r([t.Override],s.prototype,"evaluate",null),Ro.XPathTokenElement=s,Ro}var Io={},D0;function cR(){if(D0)return Io;D0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c};Object.defineProperty(Io,"__esModule",{value:!0}),Io.XPathWildcardAnywhereElement=void 0;const t=G,e=Mi(),i=pf(),n=ks();let s=class extends n.XPathElement{constructor(){super(i.XPath.WILDCARD)}evaluate(a){return this.invert?[]:e.Trees.getDescendants(a)}};return r([t.Override],s.prototype,"evaluate",null),Io.XPathWildcardAnywhereElement=s,Io}var Po={},O0;function dR(){if(O0)return Po;O0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c};Object.defineProperty(Po,"__esModule",{value:!0}),Po.XPathWildcardElement=void 0;const t=G,e=Mi(),i=pf(),n=ks();let s=class extends n.XPathElement{constructor(){super(i.XPath.WILDCARD)}evaluate(a){let l=[];if(this.invert)return l;for(let u of e.Trees.getChildren(a))l.push(u);return l}};return r([t.Override],s.prototype,"evaluate",null),Po.XPathWildcardElement=s,Po}var F0;function pf(){if(F0)return To;F0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(To,"__esModule",{value:!0}),To.XPath=void 0;const r=lh,t=Ms,e=Pn,i=fr(),n=St,s=sR(),o=oR(),a=aR(),l=lR(),u=uR(),h=hR(),c=cR(),d=dR();let f=class dg{constructor(_,x){this.parser=_,this.path=x,this.elements=this.split(x)}split(_){let x=new s.XPathLexer(r.CharStreams.fromString(_));x.recover=E=>{throw E},x.removeErrorListeners(),x.addErrorListener(new o.XPathLexerErrorListener);let g=new t.CommonTokenStream(x);try{g.fill()}catch(E){if(E instanceof e.LexerNoViableAltException){let T="Invalid tokens or characters at index "+x.charPositionInLine+" in path '"+_+"' -- "+E.message;throw new RangeError(T)}throw E}let v=g.getTokens(),m=[],y=v.length,S=0;t:for(;S<y;){let E=v[S],b;switch(E.type){case s.XPathLexer.ROOT:case s.XPathLexer.ANYWHERE:let T=E.type===s.XPathLexer.ANYWHERE;S++,b=v[S];let C=b.type===s.XPathLexer.BANG;C&&(S++,b=v[S]);let D=this.getXPathElement(b,T);D.invert=C,m.push(D),S++;break;case s.XPathLexer.TOKEN_REF:case s.XPathLexer.RULE_REF:case s.XPathLexer.WILDCARD:m.push(this.getXPathElement(E,!1)),S++;break;case n.Token.EOF:break t;default:throw new Error("Unknowth path element "+E)}}return m}getXPathElement(_,x){if(_.type===n.Token.EOF)throw new Error("Missing path element at end of path");let g=_.text;if(g==null)throw new Error("Expected wordToken to have text content.");let v=this.parser.getTokenType(g),m=this.parser.getRuleIndex(g);switch(_.type){case s.XPathLexer.WILDCARD:return x?new c.XPathWildcardAnywhereElement:new d.XPathWildcardElement;case s.XPathLexer.TOKEN_REF:case s.XPathLexer.STRING:if(v===n.Token.INVALID_TYPE)throw new Error(g+" at index "+_.startIndex+" isn't a valid token name");return x?new u.XPathTokenAnywhereElement(g,v):new h.XPathTokenElement(g,v);default:if(m===-1)throw new Error(g+" at index "+_.startIndex+" isn't a valid rule name");return x?new a.XPathRuleAnywhereElement(g,m):new l.XPathRuleElement(g,m)}}static findAll(_,x,g){return new dg(g,x).evaluate(_)}evaluate(_){let x=new i.ParserRuleContext;x.addChild(_);let g=new Set([x]),v=0;for(;v<this.elements.length;){let m=new Set;for(let y of g)y.childCount>0&&this.elements[v].evaluate(y).forEach(m.add,m);v++,g=m}return g}};return To.XPath=f,f.WILDCARD="*",f.NOT="!",To}var L0;function fR(){if(L0)return Eo;L0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=A&&A.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.ParseTreePattern=void 0;const e=G,i=pf();let n=class{constructor(o,a,l,u){this._matcher=o,this._patternRuleIndex=l,this._pattern=a,this._patternTree=u}match(o){return this._matcher.match(o,this)}matches(o){return this._matcher.match(o,this).succeeded}findAll(o,a){let l=i.XPath.findAll(o,a,this._matcher.parser),u=[];for(let h of l){let c=this.match(h);c.succeeded&&u.push(c)}return u}get matcher(){return this._matcher}get pattern(){return this._pattern}get patternRuleIndex(){return this._patternRuleIndex}get patternTree(){return this._patternTree}};return r([e.NotNull],n.prototype,"_pattern",void 0),r([e.NotNull],n.prototype,"_patternTree",void 0),r([e.NotNull],n.prototype,"_matcher",void 0),r([e.NotNull,t(0,e.NotNull)],n.prototype,"match",null),r([t(0,e.NotNull)],n.prototype,"matches",null),r([e.NotNull,t(0,e.NotNull),t(1,e.NotNull)],n.prototype,"findAll",null),r([e.NotNull],n.prototype,"matcher",null),r([e.NotNull],n.prototype,"pattern",null),r([e.NotNull],n.prototype,"patternTree",null),n=r([t(0,e.NotNull),t(1,e.NotNull),t(3,e.NotNull)],n),Eo.ParseTreePattern=n,Eo}var Do={},B0;function pR(){if(B0)return Do;B0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=A&&A.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(Do,"__esModule",{value:!0}),Do.RuleTagToken=void 0;const e=G,i=St;let n=class{constructor(o,a,l){if(o==null||o.length===0)throw new Error("ruleName cannot be null or empty.");this._ruleName=o,this.bypassTokenType=a,this._label=l}get ruleName(){return this._ruleName}get label(){return this._label}get channel(){return i.Token.DEFAULT_CHANNEL}get text(){return this._label!=null?"<"+this._label+":"+this._ruleName+">":"<"+this._ruleName+">"}get type(){return this.bypassTokenType}get line(){return 0}get charPositionInLine(){return-1}get tokenIndex(){return-1}get startIndex(){return-1}get stopIndex(){return-1}get tokenSource(){}get inputStream(){}toString(){return this._ruleName+":"+this.bypassTokenType}};return r([e.NotNull],n.prototype,"ruleName",null),r([e.Override],n.prototype,"channel",null),r([e.Override],n.prototype,"text",null),r([e.Override],n.prototype,"type",null),r([e.Override],n.prototype,"line",null),r([e.Override],n.prototype,"charPositionInLine",null),r([e.Override],n.prototype,"tokenIndex",null),r([e.Override],n.prototype,"startIndex",null),r([e.Override],n.prototype,"stopIndex",null),r([e.Override],n.prototype,"tokenSource",null),r([e.Override],n.prototype,"inputStream",null),r([e.Override],n.prototype,"toString",null),n=r([t(0,e.NotNull)],n),Do.RuleTagToken=n,Do}var Oo={},Fo={},M0;function fg(){if(M0)return Fo;M0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.Chunk=void 0;let r=class{};return Fo.Chunk=r,Fo}var k0;function xR(){if(k0)return Oo;k0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(n,s,o,a){var l=arguments.length,u=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,s,o,a);else for(var c=n.length-1;c>=0;c--)(h=n[c])&&(u=(l<3?h(u):l>3?h(s,o,u):h(s,o))||u);return l>3&&u&&Object.defineProperty(s,o,u),u};Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.TagChunk=void 0;const t=fg(),e=G;let i=class extends t.Chunk{constructor(s,o){if(super(),s==null||s.length===0)throw new Error("tag cannot be null or empty");this._tag=s,this._label=o}get tag(){return this._tag}get label(){return this._label}toString(){return this._label!=null?this._label+":"+this._tag:this._tag}};return r([e.NotNull],i.prototype,"tag",null),r([e.Override],i.prototype,"toString",null),Oo.TagChunk=i,Oo}var Lo={},U0;function mR(){if(U0)return Lo;U0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=A&&A.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.TextChunk=void 0;const e=fg(),i=G;let n=class extends e.Chunk{constructor(o){if(super(),o==null)throw new Error("text cannot be null");this._text=o}get text(){return this._text}toString(){return"'"+this._text+"'"}};return r([i.NotNull],n.prototype,"_text",void 0),r([i.NotNull],n.prototype,"text",null),r([i.Override],n.prototype,"toString",null),n=r([t(0,i.NotNull)],n),Lo.TextChunk=n,Lo}var Bo={},H0;function _R(){if(H0)return Bo;H0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=A&&A.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.TokenTagToken=void 0;const e=Ri,i=G;let n=class extends e.CommonToken{constructor(o,a,l){super(a),this._tokenName=o,this._label=l}get tokenName(){return this._tokenName}get label(){return this._label}get text(){return this._label!=null?"<"+this._label+":"+this._tokenName+">":"<"+this._tokenName+">"}toString(){return this._tokenName+":"+this.type}};return r([i.NotNull],n.prototype,"_tokenName",void 0),r([i.NotNull],n.prototype,"tokenName",null),r([i.Override],n.prototype,"text",null),r([i.Override],n.prototype,"toString",null),n=r([t(0,i.NotNull)],n),Bo.TokenTagToken=n,Bo}var j0;function gR(){return j0||(j0=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__decorate||function(b,T,C,D){var I=arguments.length,L=I<3?T:D===null?D=Object.getOwnPropertyDescriptor(T,C):D,M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(b,T,C,D);else for(var k=b.length-1;k>=0;k--)(M=b[k])&&(L=(I<3?M(L):I>3?M(T,C,L):M(T,C))||L);return I>3&&L&&Object.defineProperty(T,C,L),L},e=A&&A.__param||function(b,T){return function(C,D){T(C,D,b)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ParseTreePatternMatcher=void 0;const i=pg(),n=lh,s=Ms,o=Ja,a=JN(),l=G,u=tl,h=cg(),c=fr(),d=nR(),f=fR(),p=Pr,_=Bi,x=pR(),g=xR(),v=cr,m=mR(),y=St,S=_R();class E{constructor(T,C){this.start="<",this.stop=">",this.escape="\\",this.escapeRE=/\\/g,this._lexer=T,this._parser=C}setDelimiters(T,C,D){if(!T)throw new Error("start cannot be null or empty");if(!C)throw new Error("stop cannot be null or empty");this.start=T,this.stop=C,this.escape=D,this.escapeRE=new RegExp(D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g")}matches(T,C,D=0){if(typeof C=="string"){let I=this.compile(C,D);return this.matches(T,I)}else{let I=new a.MultiMap;return!this.matchImpl(T,C.patternTree,I)}}match(T,C,D=0){if(typeof C=="string"){let I=this.compile(C,D);return this.match(T,I)}else{let I=new a.MultiMap,L=this.matchImpl(T,C.patternTree,I);return new d.ParseTreeMatch(T,C,I,L)}}compile(T,C){let D=this.tokenize(T),I=new o.ListTokenSource(D),L=new s.CommonTokenStream(I);const M=this._parser;let k=new h.ParserInterpreter(M.grammarFileName,M.vocabulary,M.ruleNames,M.getATNWithBypassAlts(),L),q;try{k.errorHandler=new i.BailErrorStrategy,q=k.parse(C)}catch(ht){throw ht instanceof u.ParseCancellationException?ht.getCause():ht instanceof p.RecognitionException?ht:ht instanceof Error?new E.CannotInvokeStartRule(ht):ht}if(L.LA(1)!==y.Token.EOF)throw new E.StartRuleDoesNotConsumeFullPattern;return new f.ParseTreePattern(this,T,C,q)}get lexer(){return this._lexer}get parser(){return this._parser}matchImpl(T,C,D){if(!T)throw new TypeError("tree cannot be null");if(!C)throw new TypeError("patternTree cannot be null");if(T instanceof v.TerminalNode&&C instanceof v.TerminalNode){let I;if(T.symbol.type===C.symbol.type)if(C.symbol instanceof S.TokenTagToken){let L=C.symbol;D.map(L.tokenName,T);const M=L.label;M&&D.map(M,T)}else T.text===C.text||I||(I=T);else I||(I=T);return I}if(T instanceof c.ParserRuleContext&&C instanceof c.ParserRuleContext){let I,L=this.getRuleTagToken(C);if(L){if(T.ruleContext.ruleIndex===C.ruleContext.ruleIndex){D.map(L.ruleName,T);const k=L.label;k&&D.map(k,T)}else I||(I=T);return I}if(T.childCount!==C.childCount)return I||(I=T),I;let M=T.childCount;for(let k=0;k<M;k++){let q=this.matchImpl(T.getChild(k),C.getChild(k),D);if(q)return q}return I}return T}getRuleTagToken(T){if(T instanceof _.RuleNode&&T.childCount===1&&T.getChild(0)instanceof v.TerminalNode){let C=T.getChild(0);if(C.symbol instanceof x.RuleTagToken)return C.symbol}}tokenize(T){let C=this.split(T),D=[];for(let I of C)if(I instanceof g.TagChunk){let L=I;const M=L.tag.substr(0,1);if(M===M.toUpperCase()){let k=this._parser.getTokenType(L.tag);if(k===y.Token.INVALID_TYPE)throw new Error("Unknown token "+L.tag+" in pattern: "+T);let q=new S.TokenTagToken(L.tag,k,L.label);D.push(q)}else if(M===M.toLowerCase()){let k=this._parser.getRuleIndex(L.tag);if(k===-1)throw new Error("Unknown rule "+L.tag+" in pattern: "+T);let q=this._parser.getATNWithBypassAlts().ruleToTokenType[k];D.push(new x.RuleTagToken(L.tag,q,L.label))}else throw new Error("invalid tag: "+L.tag+" in pattern: "+T)}else{let L=I;this._lexer.inputStream=n.CharStreams.fromString(L.text);let M=this._lexer.nextToken();for(;M.type!==y.Token.EOF;)D.push(M),M=this._lexer.nextToken()}return D}split(T){let C=0,D=T.length,I=[],L=[],M=[];for(;C<D;)C===T.indexOf(this.escape+this.start,C)?C+=this.escape.length+this.start.length:C===T.indexOf(this.escape+this.stop,C)?C+=this.escape.length+this.stop.length:C===T.indexOf(this.start,C)?(L.push(C),C+=this.start.length):C===T.indexOf(this.stop,C)?(M.push(C),C+=this.stop.length):C++;if(L.length>M.length)throw new Error("unterminated tag in pattern: "+T);if(L.length<M.length)throw new Error("missing start tag in pattern: "+T);let k=L.length;for(let q=0;q<k;q++)if(L[q]>=M[q])throw new Error("tag delimiters out of order in pattern: "+T);if(k===0){let q=T.substring(0,D);I.push(new m.TextChunk(q))}if(k>0&&L[0]>0){let q=T.substring(0,L[0]);I.push(new m.TextChunk(q))}for(let q=0;q<k;q++){let ht=T.substring(L[q]+this.start.length,M[q]),it=ht,at,Dt=ht.indexOf(":");if(Dt>=0&&(at=ht.substring(0,Dt),it=ht.substring(Dt+1,ht.length)),I.push(new g.TagChunk(it,at)),q+1<k){let Tt=T.substring(M[q]+this.stop.length,L[q+1]);I.push(new m.TextChunk(Tt))}}if(k>0){let q=M[k-1]+this.stop.length;if(q<D){let ht=T.substring(q,D);I.push(new m.TextChunk(ht))}}for(let q=0;q<I.length;q++){let ht=I[q];if(ht instanceof m.TextChunk){let it=ht.text.replace(this.escapeRE,"");it.length<ht.text.length&&(I[q]=new m.TextChunk(it))}}return I}}t([l.NotNull,e(1,l.NotNull)],E.prototype,"match",null),t([l.NotNull],E.prototype,"lexer",null),t([l.NotNull],E.prototype,"parser",null),t([e(0,l.NotNull),e(1,l.NotNull),e(2,l.NotNull)],E.prototype,"matchImpl",null),r.ParseTreePatternMatcher=E,function(b){class T extends Error{constructor(I){super(`CannotInvokeStartRule: ${I}`),this.error=I}}b.CannotInvokeStartRule=T;class C extends Error{constructor(){super("StartRuleDoesNotConsumeFullPattern")}}b.StartRuleDoesNotConsumeFullPattern=C}(E=r.ParseTreePatternMatcher||(r.ParseTreePatternMatcher={}))}(vc)),vc}var Mo={},ko={},Uo={},$0;function rl(){if($0)return Uo;$0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(n,s,o,a){var l=arguments.length,u=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,s,o,a);else for(var c=n.length-1;c>=0;c--)(h=n[c])&&(u=(l<3?h(u):l>3?h(s,o,u):h(s,o))||u);return l>3&&u&&Object.defineProperty(s,o,u),u},t=A&&A.__param||function(n,s){return function(o,a){s(o,a,n)}};Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.DecisionEventInfo=void 0;const e=G;let i=class{constructor(s,o,a,l,u,h){this.decision=s,this.fullCtx=h,this.stopIndex=u,this.input=a,this.startIndex=l,this.state=o}};return r([e.NotNull],i.prototype,"input",void 0),i=r([t(2,e.NotNull)],i),Uo.DecisionEventInfo=i,Uo}var G0;function yR(){if(G0)return ko;G0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=A&&A.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(ko,"__esModule",{value:!0}),ko.AmbiguityInfo=void 0;const e=rl(),i=G;let n=class extends e.DecisionEventInfo{constructor(o,a,l,u,h,c){super(o,a,u,h,c,a.useContext),this.ambigAlts=l}get ambiguousAlternatives(){return this.ambigAlts}};return r([i.NotNull],n.prototype,"ambigAlts",void 0),r([i.NotNull],n.prototype,"ambiguousAlternatives",null),n=r([t(1,i.NotNull),t(2,i.NotNull),t(3,i.NotNull)],n),ko.AmbiguityInfo=n,ko}var Ho={},z0;function vR(){if(z0)return Ho;z0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=A&&A.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.ContextSensitivityInfo=void 0;const e=rl(),i=G;let n=class extends e.DecisionEventInfo{constructor(o,a,l,u,h){super(o,a,l,u,h,!0)}};return n=r([t(1,i.NotNull),t(2,i.NotNull)],n),Ho.ContextSensitivityInfo=n,Ho}var jo={},V0;function ER(){if(V0)return jo;V0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(i,n,s,o){var a=arguments.length,l=a<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,s):o,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,n,s,o);else for(var h=i.length-1;h>=0;h--)(u=i[h])&&(l=(a<3?u(l):a>3?u(n,s,l):u(n,s))||l);return a>3&&l&&Object.defineProperty(n,s,l),l};Object.defineProperty(jo,"__esModule",{value:!0}),jo.DecisionInfo=void 0;const t=G;let e=class{constructor(n){this.invocations=0,this.timeInPrediction=0,this.SLL_TotalLook=0,this.SLL_MinLook=0,this.SLL_MaxLook=0,this.LL_TotalLook=0,this.LL_MinLook=0,this.LL_MaxLook=0,this.contextSensitivities=[],this.errors=[],this.ambiguities=[],this.predicateEvals=[],this.SLL_ATNTransitions=0,this.SLL_DFATransitions=0,this.LL_Fallback=0,this.LL_ATNTransitions=0,this.LL_DFATransitions=0,this.decision=n}toString(){return"{decision="+this.decision+", contextSensitivities="+this.contextSensitivities.length+", errors="+this.errors.length+", ambiguities="+this.ambiguities.length+", SLL_lookahead="+this.SLL_TotalLook+", SLL_ATNTransitions="+this.SLL_ATNTransitions+", SLL_DFATransitions="+this.SLL_DFATransitions+", LL_Fallback="+this.LL_Fallback+", LL_lookahead="+this.LL_TotalLook+", LL_ATNTransitions="+this.LL_ATNTransitions+"}"}};return r([t.Override],e.prototype,"toString",null),jo.DecisionInfo=e,jo}var $o={},X0;function TR(){if(X0)return $o;X0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=A&&A.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty($o,"__esModule",{value:!0}),$o.ErrorInfo=void 0;const e=rl(),i=G;let n=class extends e.DecisionEventInfo{constructor(o,a,l,u,h){super(o,a,l,u,h,a.useContext)}};return n=r([t(1,i.NotNull),t(2,i.NotNull)],n),$o.ErrorInfo=n,$o}var Go={},W0;function AR(){if(W0)return Go;W0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=A&&A.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(Go,"__esModule",{value:!0}),Go.LookaheadEventInfo=void 0;const e=rl(),i=G;let n=class extends e.DecisionEventInfo{constructor(o,a,l,u,h,c,d){super(o,a,u,h,c,d),this.predictedAlt=l}};return n=r([t(3,i.NotNull)],n),Go.LookaheadEventInfo=n,Go}var zo={},Y0;function SR(){if(Y0)return zo;Y0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=A&&A.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(zo,"__esModule",{value:!0}),zo.PredicateEvalInfo=void 0;const e=rl(),i=G;let n=class extends e.DecisionEventInfo{constructor(o,a,l,u,h,c,d,f){super(a,o,l,u,h,o.useContext),this.semctx=c,this.evalResult=d,this.predictedAlt=f}};return n=r([t(0,i.NotNull),t(2,i.NotNull),t(5,i.NotNull)],n),zo.PredicateEvalInfo=n,zo}var q0;function K0(){if(q0)return Mo;q0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(_,x,g,v){var m=arguments.length,y=m<3?x:v===null?v=Object.getOwnPropertyDescriptor(x,g):v,S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(_,x,g,v);else for(var E=_.length-1;E>=0;E--)(S=_[E])&&(y=(m<3?S(y):m>3?S(x,g,y):S(x,g))||y);return m>3&&y&&Object.defineProperty(x,g,y),y},t=A&&A.__param||function(_,x){return function(g,v){x(g,v,_)}};Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.ProfilingATNSimulator=void 0;const e=yR(),i=Fr(),n=Bu(),s=vR(),o=ER(),a=TR(),l=G,u=AR(),h=Xa(),c=SR(),d=Sn,f=rg();let p=class extends h.ParserATNSimulator{constructor(x){super(x.interpreter.atn,x),this._startIndex=0,this._sllStopIndex=0,this._llStopIndex=0,this.currentDecision=0,this.conflictingAltResolvedBySLL=0,this.optimize_ll1=!1,this.reportAmbiguities=!0,this.numDecisions=this.atn.decisionToState.length,this.decisions=[];for(let g=0;g<this.numDecisions;g++)this.decisions.push(new o.DecisionInfo(g))}adaptivePredict(x,g,v,m){if(m!==void 0)return super.adaptivePredict(x,g,v,m);try{this._input=x,this._startIndex=x.index,this._sllStopIndex=this._startIndex-1,this._llStopIndex=-1,this.currentDecision=g,this.currentState=void 0,this.conflictingAltResolvedBySLL=i.ATN.INVALID_ALT_NUMBER;let y=ss.hrtime(),S=super.adaptivePredict(x,g,v),E=ss.hrtime(),b=(E[0]-y[0])*1e9;b===0?b=E[1]-y[1]:b+=1e9-y[1]+E[1],this.decisions[g].timeInPrediction+=b,this.decisions[g].invocations++;let T=this._sllStopIndex-this._startIndex+1;if(this.decisions[g].SLL_TotalLook+=T,this.decisions[g].SLL_MinLook=this.decisions[g].SLL_MinLook===0?T:Math.min(this.decisions[g].SLL_MinLook,T),T>this.decisions[g].SLL_MaxLook&&(this.decisions[g].SLL_MaxLook=T,this.decisions[g].SLL_MaxLookEvent=new u.LookaheadEventInfo(g,void 0,S,x,this._startIndex,this._sllStopIndex,!1)),this._llStopIndex>=0){let C=this._llStopIndex-this._startIndex+1;this.decisions[g].LL_TotalLook+=C,this.decisions[g].LL_MinLook=this.decisions[g].LL_MinLook===0?C:Math.min(this.decisions[g].LL_MinLook,C),C>this.decisions[g].LL_MaxLook&&(this.decisions[g].LL_MaxLook=C,this.decisions[g].LL_MaxLookEvent=new u.LookaheadEventInfo(g,void 0,S,x,this._startIndex,this._llStopIndex,!0))}return S}finally{this._input=void 0,this.currentDecision=-1}}getStartState(x,g,v,m){let y=super.getStartState(x,g,v,m);return this.currentState=y,y}computeStartState(x,g,v){let m=super.computeStartState(x,g,v);return this.currentState=m,m}computeReachSet(x,g,v,m){if(this._input===void 0)throw new Error("Invalid state");let y=super.computeReachSet(x,g,v,m);return y==null&&this.decisions[this.currentDecision].errors.push(new a.ErrorInfo(this.currentDecision,g,this._input,this._startIndex,this._input.index)),this.currentState=y,y}getExistingTargetState(x,g){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");this.currentState.useContext?this._llStopIndex=this._input.index:this._sllStopIndex=this._input.index;let v=super.getExistingTargetState(x,g);if(v!=null&&(this.currentState=new f.SimulatorState(this.currentState.outerContext,v,this.currentState.useContext,this.currentState.remainingOuterContext),this.currentState.useContext?this.decisions[this.currentDecision].LL_DFATransitions++:this.decisions[this.currentDecision].SLL_DFATransitions++,v===n.ATNSimulator.ERROR)){let m=new f.SimulatorState(this.currentState.outerContext,x,this.currentState.useContext,this.currentState.remainingOuterContext);this.decisions[this.currentDecision].errors.push(new a.ErrorInfo(this.currentDecision,m,this._input,this._startIndex,this._input.index))}return v}computeTargetState(x,g,v,m,y,S){let E=super.computeTargetState(x,g,v,m,y,S);return y?this.decisions[this.currentDecision].LL_ATNTransitions++:this.decisions[this.currentDecision].SLL_ATNTransitions++,E}evalSemanticContextImpl(x,g,v){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");let m=super.evalSemanticContextImpl(x,g,v);if(!(x instanceof d.SemanticContext.PrecedencePredicate)){let S=this._llStopIndex>=0?this._llStopIndex:this._sllStopIndex;this.decisions[this.currentDecision].predicateEvals.push(new c.PredicateEvalInfo(this.currentState,this.currentDecision,this._input,this._startIndex,S,x,m,v))}return m}reportContextSensitivity(x,g,v,m,y){if(this._input===void 0)throw new Error("Invalid state");g!==this.conflictingAltResolvedBySLL&&this.decisions[this.currentDecision].contextSensitivities.push(new s.ContextSensitivityInfo(this.currentDecision,v,this._input,m,y)),super.reportContextSensitivity(x,g,v,m,y)}reportAttemptingFullContext(x,g,v,m,y){g!=null?this.conflictingAltResolvedBySLL=g.nextSetBit(0):this.conflictingAltResolvedBySLL=v.s0.configs.getRepresentedAlternatives().nextSetBit(0),this.decisions[this.currentDecision].LL_Fallback++,super.reportAttemptingFullContext(x,g,v,m,y)}reportAmbiguity(x,g,v,m,y,S,E){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");let b;S!=null?b=S.nextSetBit(0):b=E.getRepresentedAlternatives().nextSetBit(0),this.conflictingAltResolvedBySLL!==i.ATN.INVALID_ALT_NUMBER&&b!==this.conflictingAltResolvedBySLL&&this.decisions[this.currentDecision].contextSensitivities.push(new s.ContextSensitivityInfo(this.currentDecision,this.currentState,this._input,v,m)),this.decisions[this.currentDecision].ambiguities.push(new e.AmbiguityInfo(this.currentDecision,this.currentState,S,this._input,v,m)),super.reportAmbiguity(x,g,v,m,y,S,E)}getDecisionInfo(){return this.decisions}getCurrentState(){return this.currentState}};return r([l.Override,t(0,l.NotNull)],p.prototype,"adaptivePredict",null),r([l.Override],p.prototype,"getStartState",null),r([l.Override],p.prototype,"computeStartState",null),r([l.Override],p.prototype,"computeReachSet",null),r([l.Override],p.prototype,"getExistingTargetState",null),r([l.Override],p.prototype,"computeTargetState",null),r([l.Override],p.prototype,"evalSemanticContextImpl",null),r([l.Override],p.prototype,"reportContextSensitivity",null),r([l.Override],p.prototype,"reportAttemptingFullContext",null),r([l.Override,t(0,l.NotNull),t(5,l.NotNull),t(6,l.NotNull)],p.prototype,"reportAmbiguity",null),Mo.ProfilingATNSimulator=p,Mo}var Z0;function il(){if(Z0)return uo;Z0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(m,y,S,E){var b=arguments.length,T=b<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,S):E,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(m,y,S,E);else for(var D=m.length-1;D>=0;D--)(C=m[D])&&(T=(b<3?C(T):b>3?C(y,S,T):C(y,S))||T);return b>3&&T&&Object.defineProperty(y,S,T),T},t=A&&A.__param||function(m,y){return function(S,E){y(S,E,m)}},e=A&&A.__awaiter||function(m,y,S,E){function b(T){return T instanceof S?T:new S(function(C){C(T)})}return new(S||(S=Promise))(function(T,C){function D(M){try{L(E.next(M))}catch(k){C(k)}}function I(M){try{L(E.throw(M))}catch(k){C(k)}}function L(M){M.done?T(M.value):b(M.value).then(D,I)}L((E=E.apply(m,y||[])).next())})};Object.defineProperty(uo,"__esModule",{value:!0}),uo.Parser=void 0;const i=Qt,n=Ba,s=lf(),o=xf(),a=Li,l=wa,u=Oi(),h=G,c=oh,d=Xa(),f=Ka,p=Ii,_=cr,x=St;class g{constructor(y,S){this.ruleNames=y,this.tokenStream=S}enterEveryRule(y){console.log("enter   "+this.ruleNames[y.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}exitEveryRule(y){console.log("exit    "+this.ruleNames[y.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}visitErrorNode(y){}visitTerminal(y){let S=y.parent.ruleContext,E=y.symbol;console.log("consume "+E+" rule "+this.ruleNames[S.ruleIndex])}}r([h.Override],g.prototype,"enterEveryRule",null),r([h.Override],g.prototype,"exitEveryRule",null),r([h.Override],g.prototype,"visitErrorNode",null),r([h.Override],g.prototype,"visitTerminal",null);let v=class Xl extends p.Recognizer{constructor(y){super(),this._errHandler=new o.DefaultErrorStrategy,this._precedenceStack=new l.IntegerStack,this._buildParseTrees=!0,this._parseListeners=[],this._syntaxErrors=0,this.matchedEOF=!1,this._precedenceStack.push(0),this.inputStream=y}reset(y){(y===void 0||y)&&this.inputStream.seek(0),this._errHandler.reset(this),this._ctx=void 0,this._syntaxErrors=0,this.matchedEOF=!1,this.isTrace=!1,this._precedenceStack.clear(),this._precedenceStack.push(0);let S=this.interpreter;S!=null&&S.reset()}match(y){let S=this.currentToken;return S.type===y?(y===x.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):(S=this._errHandler.recoverInline(this),this._buildParseTrees&&S.tokenIndex===-1&&this._ctx.addErrorNode(this.createErrorNode(this._ctx,S))),S}matchWildcard(){let y=this.currentToken;return y.type>0?(this._errHandler.reportMatch(this),this.consume()):(y=this._errHandler.recoverInline(this),this._buildParseTrees&&y.tokenIndex===-1&&this._ctx.addErrorNode(this.createErrorNode(this._ctx,y))),y}set buildParseTree(y){this._buildParseTrees=y}get buildParseTree(){return this._buildParseTrees}getParseListeners(){return this._parseListeners}addParseListener(y){if(y==null)throw new TypeError("listener cannot be null");this._parseListeners.push(y)}removeParseListener(y){let S=this._parseListeners.findIndex(E=>E===y);S!==-1&&this._parseListeners.splice(S,1)}removeParseListeners(){this._parseListeners.length=0}triggerEnterRuleEvent(){for(let y of this._parseListeners)y.enterEveryRule&&y.enterEveryRule(this._ctx),this._ctx.enterRule(y)}triggerExitRuleEvent(){for(let y=this._parseListeners.length-1;y>=0;y--){let S=this._parseListeners[y];this._ctx.exitRule(S),S.exitEveryRule&&S.exitEveryRule(this._ctx)}}get numberOfSyntaxErrors(){return this._syntaxErrors}get tokenFactory(){return this._input.tokenSource.tokenFactory}getATNWithBypassAlts(){let y=this.serializedATN;if(y==null)throw new Error("The current parser does not support an ATN with bypass alternatives.");let S=Xl.bypassAltsAtnCache.get(y);if(S==null){let E=new n.ATNDeserializationOptions;E.isGenerateRuleBypassTransitions=!0,S=new s.ATNDeserializer(E).deserialize(i.toCharArray(y)),Xl.bypassAltsAtnCache.set(y,S)}return S}compileParseTreePattern(y,S,E){return e(this,void 0,void 0,function*(){if(!E){if(this.inputStream){let D=this.inputStream.tokenSource;D instanceof u.Lexer&&(E=D)}if(!E)throw new Error("Parser can't discover a lexer to use")}let b=E,T=yield Promise.resolve().then(()=>gR());return new T.ParseTreePatternMatcher(b,this).compile(y,S)})}get errorHandler(){return this._errHandler}set errorHandler(y){this._errHandler=y}get inputStream(){return this._input}set inputStream(y){this.reset(!1),this._input=y}get currentToken(){return this._input.LT(1)}notifyErrorListeners(y,S,E){S===void 0?S=this.currentToken:S===null&&(S=void 0),this._syntaxErrors++;let b=-1,T=-1;S!=null&&(b=S.line,T=S.charPositionInLine);let C=this.getErrorListenerDispatch();C.syntaxError&&C.syntaxError(this,S,b,T,y,E)}consume(){let y=this.currentToken;y.type!==Xl.EOF&&this.inputStream.consume();let S=this._parseListeners.length!==0;if(this._buildParseTrees||S)if(this._errHandler.inErrorRecoveryMode(this)){let E=this._ctx.addErrorNode(this.createErrorNode(this._ctx,y));if(S)for(let b of this._parseListeners)b.visitErrorNode&&b.visitErrorNode(E)}else{let E=this.createTerminalNode(this._ctx,y);if(this._ctx.addChild(E),S)for(let b of this._parseListeners)b.visitTerminal&&b.visitTerminal(E)}return y}createTerminalNode(y,S){return new _.TerminalNode(S)}createErrorNode(y,S){return new a.ErrorNode(S)}addContextToParseTree(){let y=this._ctx._parent;y!=null&&y.addChild(this._ctx)}enterRule(y,S,E){this.state=S,this._ctx=y,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}enterLeftFactoredRule(y,S,E){if(this.state=S,this._buildParseTrees){let b=this._ctx.getChild(this._ctx.childCount-1);this._ctx.removeLastChild(),b._parent=y,y.addChild(b)}this._ctx=y,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}exitRule(){this.matchedEOF?this._ctx._stop=this._input.LT(1):this._ctx._stop=this._input.tryLT(-1),this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx._parent}enterOuterAlt(y,S){if(y.altNumber=S,this._buildParseTrees&&this._ctx!==y){let E=this._ctx._parent;E!=null&&(E.removeLastChild(),E.addChild(y))}this._ctx=y}get precedence(){return this._precedenceStack.isEmpty?-1:this._precedenceStack.peek()}enterRecursionRule(y,S,E,b){this.state=S,this._precedenceStack.push(b),this._ctx=y,this._ctx._start=this._input.LT(1),this.triggerEnterRuleEvent()}pushNewRecursionContext(y,S,E){let b=this._ctx;b._parent=y,b.invokingState=S,b._stop=this._input.tryLT(-1),this._ctx=y,this._ctx._start=b._start,this._buildParseTrees&&this._ctx.addChild(b),this.triggerEnterRuleEvent()}unrollRecursionContexts(y){this._precedenceStack.pop(),this._ctx._stop=this._input.tryLT(-1);let S=this._ctx;if(this._parseListeners.length>0)for(;this._ctx!==y;)this.triggerExitRuleEvent(),this._ctx=this._ctx._parent;else this._ctx=y;S._parent=y,this._buildParseTrees&&y!=null&&y.addChild(S)}getInvokingContext(y){let S=this._ctx;for(;S&&S.ruleIndex!==y;)S=S._parent;return S}get context(){return this._ctx}set context(y){this._ctx=y}precpred(y,S){return S>=this._precedenceStack.peek()}getErrorListenerDispatch(){return new f.ProxyParserErrorListener(this.getErrorListeners())}inContext(y){return!1}isExpectedToken(y){let S=this.interpreter.atn,E=this._ctx,b=S.states[this.state],T=S.nextTokens(b);if(T.contains(y))return!0;if(!T.contains(x.Token.EPSILON))return!1;for(;E!=null&&E.invokingState>=0&&T.contains(x.Token.EPSILON);){let D=S.states[E.invokingState].transition(0);if(T=S.nextTokens(D.followState),T.contains(y))return!0;E=E._parent}return!!(T.contains(x.Token.EPSILON)&&y===x.Token.EOF)}get isMatchedEOF(){return this.matchedEOF}getExpectedTokens(){return this.atn.getExpectedTokens(this.state,this.context)}getExpectedTokensWithinCurrentRule(){let y=this.interpreter.atn,S=y.states[this.state];return y.nextTokens(S)}getRuleIndex(y){let S=this.getRuleIndexMap().get(y);return S??-1}get ruleContext(){return this._ctx}getRuleInvocationStack(y=this._ctx){let S=y,E=this.ruleNames,b=[];for(;S!=null;){let T=S.ruleIndex;T<0?b.push("n/a"):b.push(E[T]),S=S._parent}return b}getDFAStrings(){let y=[];for(let S of this._interp.atn.decisionToDFA)y.push(S.toString(this.vocabulary,this.ruleNames));return y}dumpDFA(){let y=!1;for(let S of this._interp.atn.decisionToDFA)S.isEmpty||(y&&console.log(),console.log("Decision "+S.decision+":"),ss.stdout.write(S.toString(this.vocabulary,this.ruleNames)),y=!0)}get sourceName(){return this._input.sourceName}get parseInfo(){return Promise.resolve().then(()=>K0()).then(y=>{let S=this.interpreter;if(S instanceof y.ProfilingATNSimulator)return new c.ParseInfo(S)})}setProfile(y){return e(this,void 0,void 0,function*(){let S=yield Promise.resolve().then(()=>K0()),E=this.interpreter;y?E instanceof S.ProfilingATNSimulator||(this.interpreter=new S.ProfilingATNSimulator(this)):E instanceof S.ProfilingATNSimulator&&(this.interpreter=new d.ParserATNSimulator(this.atn,this)),this.interpreter.setPredictionMode(E.getPredictionMode())})}set isTrace(y){y?(this._tracer?this.removeParseListener(this._tracer):this._tracer=new g(this.ruleNames,this._input),this.addParseListener(this._tracer)):this._tracer&&(this.removeParseListener(this._tracer),this._tracer=void 0)}get isTrace(){return this._tracer!=null}};return v.bypassAltsAtnCache=new Map,r([h.NotNull],v.prototype,"_errHandler",void 0),r([h.NotNull],v.prototype,"match",null),r([h.NotNull],v.prototype,"matchWildcard",null),r([h.NotNull],v.prototype,"getParseListeners",null),r([t(0,h.NotNull)],v.prototype,"addParseListener",null),r([h.NotNull],v.prototype,"getATNWithBypassAlts",null),r([h.NotNull,t(0,h.NotNull)],v.prototype,"errorHandler",null),r([h.Override],v.prototype,"inputStream",null),r([h.NotNull],v.prototype,"currentToken",null),r([t(0,h.NotNull)],v.prototype,"enterRule",null),r([h.Override,t(0,h.Nullable)],v.prototype,"precpred",null),r([h.Override],v.prototype,"getErrorListenerDispatch",null),r([h.NotNull],v.prototype,"getExpectedTokens",null),r([h.NotNull],v.prototype,"getExpectedTokensWithinCurrentRule",null),r([h.Override],v.prototype,"parseInfo",null),uo.Parser=v,uo}var Q0;function ch(){if(Q0)return lo;Q0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h};Object.defineProperty(lo,"__esModule",{value:!0}),lo.NoViableAltException=void 0;const t=il(),e=Pr,i=G;let n=class extends e.RecognitionException{constructor(o,a,l,u,h,c){o instanceof t.Parser&&(a===void 0&&(a=o.inputStream),l===void 0&&(l=o.currentToken),u===void 0&&(u=o.currentToken),c===void 0&&(c=o.context)),super(o,a,c),this._deadEndConfigs=h,this._startToken=l,this.setOffendingToken(o,u)}get startToken(){return this._startToken}get deadEndConfigs(){return this._deadEndConfigs}};return r([i.NotNull],n.prototype,"_startToken",void 0),lo.NoViableAltException=n,lo}var J0;function xf(){if(J0)return Ks;J0=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(d,f,p,_){var x=arguments.length,g=x<3?f:_===null?_=Object.getOwnPropertyDescriptor(f,p):_,v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(d,f,p,_);else for(var m=d.length-1;m>=0;m--)(v=d[m])&&(g=(x<3?v(g):x>3?v(f,p,g):v(f,p))||g);return x>3&&g&&Object.defineProperty(f,p,g),g},t=A&&A.__param||function(d,f){return function(p,_){f(p,_,d)}};Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.DefaultErrorStrategy=void 0;const e=Ir,i=re,n=ws,s=Cn,o=Dn(),a=ch(),l=ur(),u=St,h=G;let c=class{constructor(){this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.nextTokensState=e.ATNState.INVALID_STATE_NUMBER}reset(f){this.endErrorCondition(f)}beginErrorCondition(f){this.errorRecoveryMode=!0}inErrorRecoveryMode(f){return this.errorRecoveryMode}endErrorCondition(f){this.errorRecoveryMode=!1,this.lastErrorStates=void 0,this.lastErrorIndex=-1}reportMatch(f){this.endErrorCondition(f)}reportError(f,p){this.inErrorRecoveryMode(f)||(this.beginErrorCondition(f),p instanceof a.NoViableAltException?this.reportNoViableAlternative(f,p):p instanceof s.InputMismatchException?this.reportInputMismatch(f,p):p instanceof n.FailedPredicateException?this.reportFailedPredicate(f,p):(console.error(`unknown recognition error type: ${p}`),this.notifyErrorListeners(f,p.toString(),p)))}notifyErrorListeners(f,p,_){let x=_.getOffendingToken(f);x===void 0&&(x=null),f.notifyErrorListeners(p,x,_)}recover(f,p){this.lastErrorIndex===f.inputStream.index&&this.lastErrorStates&&this.lastErrorStates.contains(f.state)&&f.consume(),this.lastErrorIndex=f.inputStream.index,this.lastErrorStates||(this.lastErrorStates=new o.IntervalSet),this.lastErrorStates.add(f.state);let _=this.getErrorRecoverySet(f);this.consumeUntil(f,_)}sync(f){let p=f.interpreter.atn.states[f.state];if(this.inErrorRecoveryMode(f))return;let x=f.inputStream.LA(1),g=f.atn.nextTokens(p);if(g.contains(x)){this.nextTokensContext=void 0,this.nextTokensState=e.ATNState.INVALID_STATE_NUMBER;return}if(g.contains(u.Token.EPSILON)){this.nextTokensContext===void 0&&(this.nextTokensContext=f.context,this.nextTokensState=f.state);return}switch(p.stateType){case i.ATNStateType.BLOCK_START:case i.ATNStateType.STAR_BLOCK_START:case i.ATNStateType.PLUS_BLOCK_START:case i.ATNStateType.STAR_LOOP_ENTRY:if(this.singleTokenDeletion(f))return;throw new s.InputMismatchException(f);case i.ATNStateType.PLUS_LOOP_BACK:case i.ATNStateType.STAR_LOOP_BACK:this.reportUnwantedToken(f);let m=f.getExpectedTokens().or(this.getErrorRecoverySet(f));this.consumeUntil(f,m);break}}reportNoViableAlternative(f,p){let _=f.inputStream,x;_?p.startToken.type===u.Token.EOF?x="<EOF>":x=_.getTextFromRange(p.startToken,p.getOffendingToken()):x="<unknown input>";let g="no viable alternative at input "+this.escapeWSAndQuote(x);this.notifyErrorListeners(f,g,p)}reportInputMismatch(f,p){let _=p.expectedTokens,x=_?_.toStringVocabulary(f.vocabulary):"",g="mismatched input "+this.getTokenErrorDisplay(p.getOffendingToken(f))+" expecting "+x;this.notifyErrorListeners(f,g,p)}reportFailedPredicate(f,p){let x="rule "+f.ruleNames[f.context.ruleIndex]+" "+p.message;this.notifyErrorListeners(f,x,p)}reportUnwantedToken(f){if(this.inErrorRecoveryMode(f))return;this.beginErrorCondition(f);let p=f.currentToken,_=this.getTokenErrorDisplay(p),x=this.getExpectedTokens(f),g="extraneous input "+_+" expecting "+x.toStringVocabulary(f.vocabulary);f.notifyErrorListeners(g,p,void 0)}reportMissingToken(f){if(this.inErrorRecoveryMode(f))return;this.beginErrorCondition(f);let p=f.currentToken,x="missing "+this.getExpectedTokens(f).toStringVocabulary(f.vocabulary)+" at "+this.getTokenErrorDisplay(p);f.notifyErrorListeners(x,p,void 0)}recoverInline(f){let p=this.singleTokenDeletion(f);if(p)return f.consume(),p;if(this.singleTokenInsertion(f))return this.getMissingSymbol(f);throw this.nextTokensContext===void 0?new s.InputMismatchException(f):new s.InputMismatchException(f,this.nextTokensState,this.nextTokensContext)}singleTokenInsertion(f){let p=f.inputStream.LA(1),x=f.interpreter.atn.states[f.state].transition(0).target,g=f.interpreter.atn;return g.nextTokens(x,l.PredictionContext.fromRuleContext(g,f.context)).contains(p)?(this.reportMissingToken(f),!0):!1}singleTokenDeletion(f){let p=f.inputStream.LA(2);if(this.getExpectedTokens(f).contains(p)){this.reportUnwantedToken(f),f.consume();let x=f.currentToken;return this.reportMatch(f),x}}getMissingSymbol(f){let p=f.currentToken,_=this.getExpectedTokens(f),x=u.Token.INVALID_TYPE;_.isNil||(x=_.minElement);let g;x===u.Token.EOF?g="<missing EOF>":g="<missing "+f.vocabulary.getDisplayName(x)+">";let v=p,m=f.inputStream.tryLT(-1);return v.type===u.Token.EOF&&m!=null&&(v=m),this.constructToken(f.inputStream.tokenSource,x,g,v)}constructToken(f,p,_,x){let g=f.tokenFactory,v=x.tokenSource,m=v?v.inputStream:void 0;return g.create({source:f,stream:m},p,_,u.Token.DEFAULT_CHANNEL,-1,-1,x.line,x.charPositionInLine)}getExpectedTokens(f){return f.getExpectedTokens()}getTokenErrorDisplay(f){if(!f)return"<no token>";let p=this.getSymbolText(f);return p||(this.getSymbolType(f)===u.Token.EOF?p="<EOF>":p=`<${this.getSymbolType(f)}>`),this.escapeWSAndQuote(p)}getSymbolText(f){return f.text}getSymbolType(f){return f.type}escapeWSAndQuote(f){return f=f.replace(`
`,"\\n"),f=f.replace("\r","\\r"),f=f.replace("	","\\t"),"'"+f+"'"}getErrorRecoverySet(f){let p=f.interpreter.atn,_=f.context,x=new o.IntervalSet;for(;_&&_.invokingState>=0;){let v=p.states[_.invokingState].transition(0),m=p.nextTokens(v.followState);x.addAll(m),_=_._parent}return x.remove(u.Token.EPSILON),x}consumeUntil(f,p){let _=f.inputStream.LA(1);for(;_!==u.Token.EOF&&!p.contains(_);)f.consume(),_=f.inputStream.LA(1)}};return r([h.Override],c.prototype,"reset",null),r([t(0,h.NotNull)],c.prototype,"beginErrorCondition",null),r([h.Override],c.prototype,"inErrorRecoveryMode",null),r([t(0,h.NotNull)],c.prototype,"endErrorCondition",null),r([h.Override],c.prototype,"reportMatch",null),r([h.Override],c.prototype,"reportError",null),r([t(0,h.NotNull)],c.prototype,"notifyErrorListeners",null),r([h.Override],c.prototype,"recover",null),r([h.Override],c.prototype,"sync",null),r([t(0,h.NotNull),t(1,h.NotNull)],c.prototype,"reportNoViableAlternative",null),r([t(0,h.NotNull),t(1,h.NotNull)],c.prototype,"reportInputMismatch",null),r([t(0,h.NotNull),t(1,h.NotNull)],c.prototype,"reportFailedPredicate",null),r([t(0,h.NotNull)],c.prototype,"reportUnwantedToken",null),r([t(0,h.NotNull)],c.prototype,"reportMissingToken",null),r([h.Override],c.prototype,"recoverInline",null),r([t(0,h.NotNull)],c.prototype,"singleTokenInsertion",null),r([t(0,h.NotNull)],c.prototype,"singleTokenDeletion",null),r([h.NotNull,t(0,h.NotNull)],c.prototype,"getMissingSymbol",null),r([h.NotNull,t(0,h.NotNull)],c.prototype,"getExpectedTokens",null),r([t(0,h.NotNull)],c.prototype,"getSymbolText",null),r([t(0,h.NotNull)],c.prototype,"getSymbolType",null),r([h.NotNull,t(0,h.NotNull)],c.prototype,"escapeWSAndQuote",null),r([h.NotNull,t(0,h.NotNull)],c.prototype,"getErrorRecoverySet",null),r([t(0,h.NotNull),t(1,h.NotNull)],c.prototype,"consumeUntil",null),Ks.DefaultErrorStrategy=c,Ks}var tx;function pg(){if(tx)return qs;tx=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=A&&A.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c};Object.defineProperty(qs,"__esModule",{value:!0}),qs.BailErrorStrategy=void 0;const t=xf(),e=Cn,i=G,n=tl;let s=class extends t.DefaultErrorStrategy{recover(a,l){for(let u=a.context;u;u=u.parent)u.exception=l;throw new n.ParseCancellationException(l)}recoverInline(a){let l=new e.InputMismatchException(a);for(let u=a.context;u;u=u.parent)u.exception=l;throw new n.ParseCancellationException(l)}sync(a){}};return r([i.Override],s.prototype,"recover",null),r([i.Override],s.prototype,"recoverInline",null),r([i.Override],s.prototype,"sync",null),qs.BailErrorStrategy=s,qs}var xg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(xg,"__esModule",{value:!0});var mg={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.Dependents=void 0,function(t){t[t.SELF=0]="SELF",t[t.PARENTS=1]="PARENTS",t[t.CHILDREN=2]="CHILDREN",t[t.ANCESTORS=3]="ANCESTORS",t[t.DESCENDANTS=4]="DESCENDANTS",t[t.SIBLINGS=5]="SIBLINGS",t[t.PRECEEDING_SIBLINGS=6]="PRECEEDING_SIBLINGS",t[t.FOLLOWING_SIBLINGS=7]="FOLLOWING_SIBLINGS",t[t.PRECEEDING=8]="PRECEEDING",t[t.FOLLOWING=9]="FOLLOWING"}(r.Dependents||(r.Dependents={}))})(mg);var dh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Us=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Ge=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(dh,"__esModule",{value:!0});dh.DiagnosticErrorListener=void 0;const bR=hr,le=G,Sc=de;class Ln{constructor(t=!0){this.exactOnly=t,this.exactOnly=t}syntaxError(t,e,i,n,s,o){}reportAmbiguity(t,e,i,n,s,o,a){if(this.exactOnly&&!s)return;let l=this.getDecisionDescription(t,e),u=this.getConflictingAlts(o,a),h=t.inputStream.getText(Sc.Interval.of(i,n)),c=`reportAmbiguity d=${l}: ambigAlts=${u}, input='${h}'`;t.notifyErrorListeners(c)}reportAttemptingFullContext(t,e,i,n,s,o){let a=this.getDecisionDescription(t,e),l=t.inputStream.getText(Sc.Interval.of(i,n)),u=`reportAttemptingFullContext d=${a}, input='${l}'`;t.notifyErrorListeners(u)}reportContextSensitivity(t,e,i,n,s,o){let a=this.getDecisionDescription(t,e),l=t.inputStream.getText(Sc.Interval.of(i,n)),u=`reportContextSensitivity d=${a}, input='${l}'`;t.notifyErrorListeners(u)}getDecisionDescription(t,e){let i=e.decision,n=e.atnStartState.ruleIndex,s=t.ruleNames;if(n<0||n>=s.length)return i.toString();let o=s[n];return o?`${i} (${o})`:i.toString()}getConflictingAlts(t,e){if(t!=null)return t;let i=new bR.BitSet;for(let n of e)i.set(n.alt);return i}}Us([le.Override],Ln.prototype,"syntaxError",null);Us([le.Override,Ge(0,le.NotNull),Ge(1,le.NotNull),Ge(6,le.NotNull)],Ln.prototype,"reportAmbiguity",null);Us([le.Override,Ge(0,le.NotNull),Ge(1,le.NotNull),Ge(5,le.NotNull)],Ln.prototype,"reportAttemptingFullContext",null);Us([le.Override,Ge(0,le.NotNull),Ge(1,le.NotNull),Ge(5,le.NotNull)],Ln.prototype,"reportContextSensitivity",null);Us([Ge(0,le.NotNull),Ge(1,le.NotNull)],Ln.prototype,"getDecisionDescription",null);Us([le.NotNull,Ge(1,le.NotNull)],Ln.prototype,"getConflictingAlts",null);dh.DiagnosticErrorListener=Ln;var fh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ki=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},CR=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(fh,"__esModule",{value:!0});fh.LexerInterpreter=void 0;const wR=Oi(),NR=ju(),_g=G,Hs=G;let Cr=class extends wR.Lexer{constructor(t,e,i,n,s,o,a){if(super(a),o.grammarType!==0)throw new Error("IllegalArgumentException: The ATN must be a lexer ATN.");this._grammarFileName=t,this._atn=o,this._ruleNames=i.slice(0),this._channelNames=n.slice(0),this._modeNames=s.slice(0),this._vocabulary=e,this._interp=new NR.LexerATNSimulator(o,this)}get atn(){return this._atn}get grammarFileName(){return this._grammarFileName}get ruleNames(){return this._ruleNames}get channelNames(){return this._channelNames}get modeNames(){return this._modeNames}get vocabulary(){return this._vocabulary}};ki([_g.NotNull],Cr.prototype,"_vocabulary",void 0);ki([Hs.Override],Cr.prototype,"atn",null);ki([Hs.Override],Cr.prototype,"grammarFileName",null);ki([Hs.Override],Cr.prototype,"ruleNames",null);ki([Hs.Override],Cr.prototype,"channelNames",null);ki([Hs.Override],Cr.prototype,"modeNames",null);ki([Hs.Override],Cr.prototype,"vocabulary",null);Cr=ki([CR(1,_g.NotNull)],Cr);fh.LexerInterpreter=Cr;var gg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(gg,"__esModule",{value:!0});var ph={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var RR=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(ph,"__esModule",{value:!0});ph.RuleContextWithAltNum=void 0;const IR=Fr(),PR=G,DR=fr();class yg extends DR.ParserRuleContext{constructor(t,e){e!==void 0?super(t,e):super(),this._altNumber=IR.ATN.INVALID_ALT_NUMBER}get altNumber(){return this._altNumber}set altNumber(t){this._altNumber=t}}RR([PR.Override],yg.prototype,"altNumber",null);ph.RuleContextWithAltNum=yg;var xh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(xh,"__esModule",{value:!0});xh.RuleDependency=void 0;function OR(r){return(t,e,i)=>{}}xh.RuleDependency=OR;var mh={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(mh,"__esModule",{value:!0});mh.RuleVersion=void 0;function FR(r){return(t,e,i)=>{}}mh.RuleVersion=FR;var vg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(vg,"__esModule",{value:!0});var Eg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Eg,"__esModule",{value:!0});var Tg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Tg,"__esModule",{value:!0});var Ss={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var _h=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.RewriteOperation=Ss.TokenStreamRewriter=void 0;const ex=de,gh=G,Ag=St;class pe{constructor(t){this.tokens=t,this.programs=new Map,this.programs.set(pe.DEFAULT_PROGRAM_NAME,[]),this.lastRewriteTokenIndexes=new Map}getTokenStream(){return this.tokens}rollback(t,e=pe.DEFAULT_PROGRAM_NAME){let i=this.programs.get(e);i!=null&&this.programs.set(e,i.slice(pe.MIN_TOKEN_INDEX,t))}deleteProgram(t=pe.DEFAULT_PROGRAM_NAME){this.rollback(pe.MIN_TOKEN_INDEX,t)}insertAfter(t,e,i=pe.DEFAULT_PROGRAM_NAME){let n;typeof t=="number"?n=t:n=t.tokenIndex;let s=this.getProgram(i),o=new rx(this.tokens,n,s.length,e);s.push(o)}insertBefore(t,e,i=pe.DEFAULT_PROGRAM_NAME){let n;typeof t=="number"?n=t:n=t.tokenIndex;let s=this.getProgram(i),o=new Yi(this.tokens,n,s.length,e);s.push(o)}replaceSingle(t,e){typeof t=="number"?this.replace(t,t,e):this.replace(t,t,e)}replace(t,e,i,n=pe.DEFAULT_PROGRAM_NAME){if(typeof t!="number"&&(t=t.tokenIndex),typeof e!="number"&&(e=e.tokenIndex),t>e||t<0||e<0||e>=this.tokens.size)throw new RangeError(`replace: range invalid: ${t}..${e}(size=${this.tokens.size})`);let s=this.getProgram(n),o=new ts(this.tokens,t,e,s.length,i);s.push(o)}delete(t,e,i=pe.DEFAULT_PROGRAM_NAME){e===void 0&&(e=t),typeof t=="number"?this.replace(t,e,"",i):this.replace(t,e,"",i)}getLastRewriteTokenIndex(t=pe.DEFAULT_PROGRAM_NAME){let e=this.lastRewriteTokenIndexes.get(t);return e??-1}setLastRewriteTokenIndex(t,e){this.lastRewriteTokenIndexes.set(t,e)}getProgram(t){let e=this.programs.get(t);return e==null&&(e=this.initializeProgram(t)),e}initializeProgram(t){let e=[];return this.programs.set(t,e),e}getText(t,e=pe.DEFAULT_PROGRAM_NAME){let i;t instanceof ex.Interval?i=t:i=ex.Interval.of(0,this.tokens.size-1),typeof t=="string"&&(e=t);let n=this.programs.get(e),s=i.a,o=i.b;if(o>this.tokens.size-1&&(o=this.tokens.size-1),s<0&&(s=0),n==null||n.length===0)return this.tokens.getText(i);let a=[],l=this.reduceToSingleOperationPerIndex(n),u=s;for(;u<=o&&u<this.tokens.size;){let h=l.get(u);l.delete(u);let c=this.tokens.get(u);h==null?(c.type!==Ag.Token.EOF&&a.push(String(c.text)),u++):u=h.execute(a)}if(o===this.tokens.size-1)for(let h of l.values())h.index>=this.tokens.size-1&&a.push(h.text.toString());return a.join("")}reduceToSingleOperationPerIndex(t){for(let i=0;i<t.length;i++){let n=t[i];if(n==null||!(n instanceof ts))continue;let s=n,o=this.getKindOfOps(t,Yi,i);for(let l of o)l.index===s.index?(t[l.instructionIndex]=void 0,s.text=l.text.toString()+(s.text!=null?s.text.toString():"")):l.index>s.index&&l.index<=s.lastIndex&&(t[l.instructionIndex]=void 0);let a=this.getKindOfOps(t,ts,i);for(let l of a){if(l.index>=s.index&&l.lastIndex<=s.lastIndex){t[l.instructionIndex]=void 0;continue}let u=l.lastIndex<s.index||l.index>s.lastIndex;if(l.text==null&&s.text==null&&!u)t[l.instructionIndex]=void 0,s.index=Math.min(l.index,s.index),s.lastIndex=Math.max(l.lastIndex,s.lastIndex);else if(!u)throw new Error(`replace op boundaries of ${s} overlap with previous ${l}`)}}for(let i=0;i<t.length;i++){let n=t[i];if(n==null||!(n instanceof Yi))continue;let s=n,o=this.getKindOfOps(t,Yi,i);for(let l of o)l.index===s.index&&(l instanceof rx?(s.text=this.catOpText(l.text,s.text),t[l.instructionIndex]=void 0):l instanceof Yi&&(s.text=this.catOpText(s.text,l.text),t[l.instructionIndex]=void 0));let a=this.getKindOfOps(t,ts,i);for(let l of a){if(s.index===l.index){l.text=this.catOpText(s.text,l.text),t[i]=void 0;continue}if(s.index>=l.index&&s.index<=l.lastIndex)throw new Error(`insert op ${s} within boundaries of previous ${l}`)}}let e=new Map;for(let i of t)if(i!=null){if(e.get(i.index)!=null)throw new Error("should only be one op per index");e.set(i.index,i)}return e}catOpText(t,e){let i="",n="";return t!=null&&(i=t.toString()),e!=null&&(n=e.toString()),i+n}getKindOfOps(t,e,i){let n=[];for(let s=0;s<i&&s<t.length;s++){let o=t[s];o!=null&&o instanceof e&&n.push(o)}return n}}Ss.TokenStreamRewriter=pe;pe.DEFAULT_PROGRAM_NAME="default";pe.PROGRAM_INIT_SIZE=100;pe.MIN_TOKEN_INDEX=0;class yh{constructor(t,e,i,n){this.tokens=t,this.instructionIndex=i,this.index=e,this.text=n===void 0?"":n}execute(t){return this.index}toString(){let t=this.constructor.name,e=t.indexOf("$");return t=t.substring(e+1,t.length),"<"+t+"@"+this.tokens.get(this.index)+':"'+this.text+'">'}}_h([gh.Override],yh.prototype,"toString",null);Ss.RewriteOperation=yh;class Yi extends yh{constructor(t,e,i,n){super(t,e,i,n)}execute(t){return t.push(this.text.toString()),this.tokens.get(this.index).type!==Ag.Token.EOF&&t.push(String(this.tokens.get(this.index).text)),this.index+1}}_h([gh.Override],Yi.prototype,"execute",null);class rx extends Yi{constructor(t,e,i,n){super(t,e+1,i,n)}}class ts extends yh{constructor(t,e,i,n,s){super(t,e,n,s),this.lastIndex=i}execute(t){return this.text!=null&&t.push(this.text.toString()),this.lastIndex+1}toString(){return this.text==null?"<DeleteOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+">":"<ReplaceOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+':"'+this.text+'">'}}_h([gh.Override],ts.prototype,"execute",null);_h([gh.Override],ts.prototype,"toString",null);var Sg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Sg,"__esModule",{value:!0});var bg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(bg,"__esModule",{value:!0});(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s),Object.defineProperty(i,o,{enumerable:!0,get:function(){return n[s]}})}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),e=A&&A.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&t(n,i,s)};Object.defineProperty(r,"__esModule",{value:!0}),e(f_,r),e(p_,r),e(Nu,r),e(pg(),r),e(Qa,r),e(xg,r),e(lh,r),e(ff,r),e(Za,r),e(Ri,r),e(Fu,r),e(Ms,r),e(Ia,r),e(xf(),r),e(mg,r),e(dh,r),e(ws,r),e(Cn,r),e(el,r),e(ni,r),e(Oi(),r),e(fh,r),e(Pn,r),e(Ja,r),e(ch(),r),e(il(),r),e(gg,r),e(cg(),r),e(fr(),r),e(Is,r),e(Ka,r),e(Pr,r),e(Ii,r),e(af(),r),e(ph,r),e(xh,r),e(mh,r),e(St,r),e(vg,r),e(Eg,r),e(Tg,r),e(Ss,r),e(Sg,r),e(oi,r),e(bg,r)})(Zo);var Cg=Fr(),vh=lf(),wg=Oi(),Ng=ju();af();var ut;let LR=(ut=class extends wg.Lexer{get vocabulary(){return ut.VOCABULARY}constructor(t){super(t),this._interp=new Ng.LexerATNSimulator(ut._ATN,this)}get grammarFileName(){return"ScriptGrammar.g4"}get ruleNames(){return ut.ruleNames}get serializedATN(){return ut._serializedATN}get channelNames(){return ut.channelNames}get modeNames(){return ut.modeNames}static get _ATN(){return ut.__ATN||(ut.__ATN=new vh.ATNDeserializer().deserialize(ba(ut._serializedATN))),ut.__ATN}},N(ut,"T__0",1),N(ut,"T__1",2),N(ut,"T__2",3),N(ut,"T__3",4),N(ut,"T__4",5),N(ut,"T__5",6),N(ut,"T__6",7),N(ut,"T__7",8),N(ut,"T__8",9),N(ut,"T__9",10),N(ut,"T__10",11),N(ut,"INT",12),N(ut,"TAKE",13),N(ut,"STEPS",14),N(ut,"STEP",15),N(ut,"TO",16),N(ut,"THE",17),N(ut,"RIGHT",18),N(ut,"LEFT",19),N(ut,"UP",20),N(ut,"DOWN",21),N(ut,"IF",22),N(ut,"THEN",23),N(ut,"END",24),N(ut,"MULTIPLY",25),N(ut,"DIVIDE",26),N(ut,"BY",27),N(ut,"PLUS",28),N(ut,"MINUS",29),N(ut,"SET",30),N(ut,"REMAIND",31),N(ut,"CAN",32),N(ut,"GO",33),N(ut,"EQUAL",34),N(ut,"NOT",35),N(ut,"LESS",36),N(ut,"GREATER",37),N(ut,"THAN",38),N(ut,"OR",39),N(ut,"ID",40),N(ut,"WS",41),N(ut,"channelNames",["DEFAULT_TOKEN_CHANNEL","HIDDEN"]),N(ut,"modeNames",["DEFAULT_MODE"]),N(ut,"ruleNames",["T__0","T__1","T__2","T__3","T__4","T__5","T__6","T__7","T__8","T__9","T__10","INT","TAKE","STEPS","STEP","TO","THE","RIGHT","LEFT","UP","DOWN","IF","THEN","END","MULTIPLY","DIVIDE","BY","PLUS","MINUS","SET","REMAIND","CAN","GO","EQUAL","NOT","LESS","GREATER","THAN","OR","ID","WS"]),N(ut,"_LITERAL_NAMES",[void 0,"'*'","'/'","'%'","'+'","'-'","'=='","'!='","'>'","'<'","'>='","'<='",void 0,"'take'","'steps'","'step'","'to'","'the'","'right'","'left'","'up'","'down'","'if'","'then'","'end'","'multiply'","'divide'","'by'","'plus'","'minus'","'set'","'remaind'","'can'","'go'","'equal'","'not'","'less'","'greater'","'than'","'or'"]),N(ut,"_SYMBOLIC_NAMES",[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"INT","TAKE","STEPS","STEP","TO","THE","RIGHT","LEFT","UP","DOWN","IF","THEN","END","MULTIPLY","DIVIDE","BY","PLUS","MINUS","SET","REMAIND","CAN","GO","EQUAL","NOT","LESS","GREATER","THAN","OR","ID","WS"]),N(ut,"VOCABULARY",new Pa(ut._LITERAL_NAMES,ut._SYMBOLIC_NAMES,[])),N(ut,"_serializedATN",`+\b					\x07	\x07\b	\b			
	
\v	\v\f	\f\r	\r													\x1B	\x1B				 	 !	!"	"#	#$	$%	%&	&'	'(	()	)*	*\x07\x07\x07\b\b\b		

\v\v\v\f\f\f\r\rq
\r\r\r\rr\x1B\x1B\x1B\x1B\x1B\x1B\x1B        !!!!"""######$$$$%%%%%&&&&&&&&'''''((())\x07)
)\f))\v)**
*\r****+\x07	\v\x07\r\b	
\v\f\r\x1B!#%')+-/13\x1B579;= ?!A"C#E$G%I&K'M(O)Q*S+2;C\\aac|2;C\\aac|\v\f""\x07	\v\r\x1B!#%')+-/13579;=?ACEGIKMOQSUW\x07Y	[\v]\r_begilp\x1Bty!#%')+-/13579;=?ACEGIKMOQSUV\x07,VWX\x071XYZ\x07'Z\b[\\\x07-\\
]^\x07/^\f_\`\x07?\`a\x07?abc\x07#cd\x07?def\x07@fgh\x07>hij\x07@jk\x07?klm\x07>mn\x07?noq	poqrrprsstu\x07vuv\x07cvw\x07mwx\x07gxyz\x07uz{\x07v{|\x07g|}\x07r}~\x07u~\x07u\x07v\x07g\x07r \x07v\x07q"\x07v\x07j\x07g$\x07t\x07k\x07i\x07j\x07v&\x07n\x07g\x07h\x07v(\x07w\x07r*\x07f\x07q\x07y\x07p,\x07k\x07h.\x07v\x07j\x07g\x07p0\x07g\x07p\x07f2\x07o\x07w\x07n\x07v\x07k\x07r\x07n\x07{4\x07f\x07k\x07x\x07k\x07f\x07g6\x07d\x07{8\x07r\x07n\x07w\x07u:\x07o\x07k\x07p\x07w\x07u<\x07u\x07g\x07v>\x07t\x07g\x07o\x07c\x07k\x07p\x07f@\x07e\x07c\x07pB\x07i\x07qD\x07g\x07s\x07w\x07c\x07nF\x07p\x07q\x07vH\x07n\x07g\x07u\x07uJ\x07i\x07t\x07g\x07c\x07v\x07g\x07tL\x07v\x07j\x07c\x07pN\x07q\x07tP		R	\b*Tr\b`),N(ut,"__ATN"),ut);var du=ch(),Rg=il(),Ve=fr(),Ig=Xa(),Pg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Pg,"__esModule",{value:!0});var Dg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Dg,"__esModule",{value:!0});var U;let _t=(U=class extends Rg.Parser{get vocabulary(){return U.VOCABULARY}get grammarFileName(){return"ScriptGrammar.g4"}get ruleNames(){return U.ruleNames}get serializedATN(){return U._serializedATN}createFailedPredicateException(t,e){return new Kd(this,t,e)}constructor(t){super(t),this._interp=new Ig.ParserATNSimulator(U._ATN,this)}program(){let t=new BR(this._ctx,this.state);this.enterRule(t,0,U.RULE_program);let e;try{for(this.enterOuterAlt(t,1),this.state=15,this._errHandler.sync(this),e=this._input.LA(1);!(e&-32)&&1<<e&(1<<U.TAKE|1<<U.IF|1<<U.SET);)this.state=12,this.statement(),this.state=17,this._errHandler.sync(this),e=this._input.LA(1)}catch(i){if(i instanceof Oe)t.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return t}statement(){let t=new va(this._ctx,this.state);this.enterRule(t,2,U.RULE_statement);try{switch(this.state=21,this._errHandler.sync(this),this._input.LA(1)){case U.TAKE:this.enterOuterAlt(t,1),this.state=18,this.takeSteps();break;case U.IF:this.enterOuterAlt(t,2),this.state=19,this.condition();break;case U.SET:this.enterOuterAlt(t,3),this.state=20,this.local();break;default:throw new du.NoViableAltException(this)}}catch(e){if(e instanceof Oe)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t}takeSteps(){let t=new Eh(this._ctx,this.state);this.enterRule(t,4,U.RULE_takeSteps);let e;try{switch(this.state=35,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,2,this._ctx)){case 1:t=new MR(t),this.enterOuterAlt(t,1),this.state=23,this.match(U.TAKE),this.state=24,t._num=this.expression(0),this.state=25,this.match(U.STEPS),this.state=26,this.match(U.TO),this.state=27,this.match(U.THE),this.state=28,t._direction=this._input.LT(1),e=this._input.LA(1),!(e&-32)&&1<<e&(1<<U.RIGHT|1<<U.LEFT|1<<U.UP|1<<U.DOWN)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):t._direction=this._errHandler.recoverInline(this);break;case 2:t=new kR(t),this.enterOuterAlt(t,2),this.state=30,this.match(U.TAKE),this.state=31,this.match(U.STEP),this.state=32,this.match(U.TO),this.state=33,this.match(U.THE),this.state=34,t._direction=this._input.LT(1),e=this._input.LA(1),!(e&-32)&&1<<e&(1<<U.RIGHT|1<<U.LEFT|1<<U.UP|1<<U.DOWN)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):t._direction=this._errHandler.recoverInline(this);break}}catch(i){if(i instanceof Oe)t.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return t}condition(){let t=new Og(this._ctx,this.state);this.enterRule(t,6,U.RULE_condition);let e;try{this.enterOuterAlt(t,1);{for(this.state=37,this.match(U.IF),this.state=38,this.expression(0),this.state=39,this.match(U.THEN),this.state=43,this._errHandler.sync(this),e=this._input.LA(1);!(e&-32)&&1<<e&(1<<U.TAKE|1<<U.IF|1<<U.SET);)this.state=40,this.statement(),this.state=45,this._errHandler.sync(this),e=this._input.LA(1);this.state=46,this.match(U.END)}}catch(i){if(i instanceof Oe)t.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return t}expression(t){t===void 0&&(t=0);let e=this._ctx,i=this.state,n=new $t(this._ctx,i),s=n,o=8;this.enterRecursionRule(n,8,U.RULE_expression,t);let a;try{let l;this.enterOuterAlt(n,1);{switch(this.state=56,this._errHandler.sync(this),this._input.LA(1)){case U.CAN:n=new UR(n),this._ctx=n,s=n,this.state=49,this.match(U.CAN),this.state=50,this.match(U.GO),this.state=51,this.match(U.TO),this.state=52,this.match(U.THE),this.state=53,n._direction=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<U.RIGHT|1<<U.LEFT|1<<U.UP|1<<U.DOWN)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._direction=this._errHandler.recoverInline(this);break;case U.ID:n=new HR(n),this._ctx=n,s=n,this.state=54,this.match(U.ID);break;case U.INT:n=new jR(n),this._ctx=n,s=n,this.state=55,this.match(U.INT);break;default:throw new du.NoViableAltException(this)}for(this._ctx._stop=this._input.tryLT(-1),this.state=93,this._errHandler.sync(this),l=this.interpreter.adaptivePredict(this._input,6,this._ctx);l!==2&&l!==Cg.ATN.INVALID_ALT_NUMBER;){if(l===1)switch(this._parseListeners!=null&&this.triggerExitRuleEvent(),s=n,this.state=91,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,5,this._ctx)){case 1:{if(n=new bc(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,U.RULE_expression),this.state=58,!this.precpred(this._ctx,11))throw this.createFailedPredicateException("this.precpred(this._ctx, 11)");this.state=59,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<U.T__0|1<<U.T__1|1<<U.T__2)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=60,n._right=this.expression(12)}break;case 2:{if(n=new bc(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,U.RULE_expression),this.state=61,!this.precpred(this._ctx,10))throw this.createFailedPredicateException("this.precpred(this._ctx, 10)");this.state=62,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<U.MULTIPLY|1<<U.DIVIDE|1<<U.REMAIND)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=63,this.match(U.BY),this.state=64,n._right=this.expression(11)}break;case 3:{if(n=new bc(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,U.RULE_expression),this.state=65,!this.precpred(this._ctx,9))throw this.createFailedPredicateException("this.precpred(this._ctx, 9)");this.state=66,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<U.T__3|1<<U.T__4|1<<U.PLUS|1<<U.MINUS)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=67,n._right=this.expression(10)}break;case 4:{if(n=new Vo(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,U.RULE_expression),this.state=68,!this.precpred(this._ctx,8))throw this.createFailedPredicateException("this.precpred(this._ctx, 8)");this.state=69,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<U.T__5|1<<U.T__6|1<<U.T__7|1<<U.T__8|1<<U.T__9|1<<U.T__10)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=70,n._right=this.expression(9)}break;case 5:{if(n=new Vo(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,U.RULE_expression),this.state=71,!this.precpred(this._ctx,7))throw this.createFailedPredicateException("this.precpred(this._ctx, 7)");this.state=72,n._op=this.match(U.NOT),this.state=73,this.match(U.EQUAL),this.state=74,this.match(U.TO),this.state=75,n._right=this.expression(8)}break;case 6:{if(n=new Vo(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,U.RULE_expression),this.state=76,!this.precpred(this._ctx,6))throw this.createFailedPredicateException("this.precpred(this._ctx, 6)");this.state=77,n._op=this.match(U.EQUAL),this.state=78,this.match(U.TO),this.state=79,n._right=this.expression(7)}break;case 7:{if(n=new Vo(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,U.RULE_expression),this.state=80,!this.precpred(this._ctx,5))throw this.createFailedPredicateException("this.precpred(this._ctx, 5)");this.state=81,n._op=this._input.LT(1),a=this._input.LA(1),a===U.LESS||a===U.GREATER?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=82,this.match(U.THAN),this.state=83,n._right=this.expression(6)}break;case 8:{if(n=new Vo(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,U.RULE_expression),this.state=84,!this.precpred(this._ctx,4))throw this.createFailedPredicateException("this.precpred(this._ctx, 4)");this.state=85,n._op=this._input.LT(1),a=this._input.LA(1),a===U.LESS||a===U.GREATER?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=86,this.match(U.THAN),this.state=87,this.match(U.OR),this.state=88,n._eq=this.match(U.EQUAL),this.state=89,this.match(U.TO),this.state=90,n._right=this.expression(5)}break}this.state=95,this._errHandler.sync(this),l=this.interpreter.adaptivePredict(this._input,6,this._ctx)}}}catch(l){if(l instanceof Oe)n.exception=l,this._errHandler.reportError(this,l),this._errHandler.recover(this,l);else throw l}finally{this.unrollRecursionContexts(e)}return n}local(){let t=new Fg(this._ctx,this.state);this.enterRule(t,10,U.RULE_local);try{this.enterOuterAlt(t,1),this.state=96,this.match(U.SET),this.state=97,t._id=this.match(U.ID),this.state=98,this.match(U.TO),this.state=99,this.expression(0)}catch(e){if(e instanceof Oe)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t}sempred(t,e,i){switch(e){case 4:return this.expression_sempred(t,i)}return!0}expression_sempred(t,e){switch(e){case 0:return this.precpred(this._ctx,11);case 1:return this.precpred(this._ctx,10);case 2:return this.precpred(this._ctx,9);case 3:return this.precpred(this._ctx,8);case 4:return this.precpred(this._ctx,7);case 5:return this.precpred(this._ctx,6);case 6:return this.precpred(this._ctx,5);case 7:return this.precpred(this._ctx,4)}return!0}static get _ATN(){return U.__ATN||(U.__ATN=new vh.ATNDeserializer().deserialize(ba(U._serializedATN))),U.__ATN}},N(U,"T__0",1),N(U,"T__1",2),N(U,"T__2",3),N(U,"T__3",4),N(U,"T__4",5),N(U,"T__5",6),N(U,"T__6",7),N(U,"T__7",8),N(U,"T__8",9),N(U,"T__9",10),N(U,"T__10",11),N(U,"INT",12),N(U,"TAKE",13),N(U,"STEPS",14),N(U,"STEP",15),N(U,"TO",16),N(U,"THE",17),N(U,"RIGHT",18),N(U,"LEFT",19),N(U,"UP",20),N(U,"DOWN",21),N(U,"IF",22),N(U,"THEN",23),N(U,"END",24),N(U,"MULTIPLY",25),N(U,"DIVIDE",26),N(U,"BY",27),N(U,"PLUS",28),N(U,"MINUS",29),N(U,"SET",30),N(U,"REMAIND",31),N(U,"CAN",32),N(U,"GO",33),N(U,"EQUAL",34),N(U,"NOT",35),N(U,"LESS",36),N(U,"GREATER",37),N(U,"THAN",38),N(U,"OR",39),N(U,"ID",40),N(U,"WS",41),N(U,"RULE_program",0),N(U,"RULE_statement",1),N(U,"RULE_takeSteps",2),N(U,"RULE_condition",3),N(U,"RULE_expression",4),N(U,"RULE_local",5),N(U,"ruleNames",["program","statement","takeSteps","condition","expression","local"]),N(U,"_LITERAL_NAMES",[void 0,"'*'","'/'","'%'","'+'","'-'","'=='","'!='","'>'","'<'","'>='","'<='",void 0,"'take'","'steps'","'step'","'to'","'the'","'right'","'left'","'up'","'down'","'if'","'then'","'end'","'multiply'","'divide'","'by'","'plus'","'minus'","'set'","'remaind'","'can'","'go'","'equal'","'not'","'less'","'greater'","'than'","'or'"]),N(U,"_SYMBOLIC_NAMES",[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"INT","TAKE","STEPS","STEP","TO","THE","RIGHT","LEFT","UP","DOWN","IF","THEN","END","MULTIPLY","DIVIDE","BY","PLUS","MINUS","SET","REMAIND","CAN","GO","EQUAL","NOT","LESS","GREATER","THAN","OR","ID","WS"]),N(U,"VOCABULARY",new Pa(U._LITERAL_NAMES,U._SYMBOLIC_NAMES,[])),N(U,"_serializedATN",`+h					\x07	\x07\x07
\f\v
&
\x07,
\f/\v;
\x07^
\fa\v\x07\x07\x07\x07\x07\x07
\b\b
\f\b\x1B!!\x07\b\r&'p%\b'
:\fb\b\f\x07\x07\x1B
\x1B\x07\x07\x07	& !\x07!"\x07"#\x07#$\x07$&	%% &\x07'(\x07()
)-\x07*,+*,/-+-..0/-01\x071	23\b34\x07"45\x07#56\x0767\x077;	8;\x07*9;\x07:2:8:9;_<=\f\r=>	>^
?@\f\f@A	AB\x07B^
\rCD\f\vDE	E^
\fFG\f
GH	H^
\vIJ\f	JK\x07%KL\x07$LM\x07M^

NO\f\bOP\x07$PQ\x07Q^
	RS\f\x07ST	\x07TU\x07(U^
\bVW\fWX	\x07XY\x07(YZ\x07)Z[\x07$[\\\x07\\^
\x07]<]?]C]F]I]N]R]V^a_]_\`\`\va_bc\x07 cd\x07*de\x07ef
f\r	%-:]_`),N(U,"__ATN"),U),BR=class extends Ve.ParserRuleContext{statement(t){return t===void 0?this.getRuleContexts(va):this.getRuleContext(t,va)}constructor(t,e){super(t,e)}get ruleIndex(){return _t.RULE_program}enterRule(t){t.enterProgram&&t.enterProgram(this)}exitRule(t){t.exitProgram&&t.exitProgram(this)}accept(t){return t.visitProgram?t.visitProgram(this):t.visitChildren(this)}},va=class extends Ve.ParserRuleContext{takeSteps(){return this.tryGetRuleContext(0,Eh)}condition(){return this.tryGetRuleContext(0,Og)}local(){return this.tryGetRuleContext(0,Fg)}constructor(t,e){super(t,e)}get ruleIndex(){return _t.RULE_statement}enterRule(t){t.enterStatement&&t.enterStatement(this)}exitRule(t){t.exitStatement&&t.exitStatement(this)}accept(t){return t.visitStatement?t.visitStatement(this):t.visitChildren(this)}},Eh=class extends Ve.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return _t.RULE_takeSteps}copyFrom(t){super.copyFrom(t)}},MR=class extends Eh{constructor(e){super(e.parent,e.invokingState);N(this,"_num");N(this,"_direction");this.copyFrom(e)}TAKE(){return this.getToken(_t.TAKE,0)}STEPS(){return this.getToken(_t.STEPS,0)}TO(){return this.getToken(_t.TO,0)}THE(){return this.getToken(_t.THE,0)}expression(){return this.getRuleContext(0,$t)}RIGHT(){return this.tryGetToken(_t.RIGHT,0)}LEFT(){return this.tryGetToken(_t.LEFT,0)}UP(){return this.tryGetToken(_t.UP,0)}DOWN(){return this.tryGetToken(_t.DOWN,0)}enterRule(e){e.enterManySteps&&e.enterManySteps(this)}exitRule(e){e.exitManySteps&&e.exitManySteps(this)}accept(e){return e.visitManySteps?e.visitManySteps(this):e.visitChildren(this)}},kR=class extends Eh{constructor(e){super(e.parent,e.invokingState);N(this,"_direction");this.copyFrom(e)}TAKE(){return this.getToken(_t.TAKE,0)}STEP(){return this.getToken(_t.STEP,0)}TO(){return this.getToken(_t.TO,0)}THE(){return this.getToken(_t.THE,0)}RIGHT(){return this.tryGetToken(_t.RIGHT,0)}LEFT(){return this.tryGetToken(_t.LEFT,0)}UP(){return this.tryGetToken(_t.UP,0)}DOWN(){return this.tryGetToken(_t.DOWN,0)}enterRule(e){e.enterOneStep&&e.enterOneStep(this)}exitRule(e){e.exitOneStep&&e.exitOneStep(this)}accept(e){return e.visitOneStep?e.visitOneStep(this):e.visitChildren(this)}},Og=class extends Ve.ParserRuleContext{IF(){return this.getToken(_t.IF,0)}expression(){return this.getRuleContext(0,$t)}THEN(){return this.getToken(_t.THEN,0)}END(){return this.getToken(_t.END,0)}statement(t){return t===void 0?this.getRuleContexts(va):this.getRuleContext(t,va)}constructor(t,e){super(t,e)}get ruleIndex(){return _t.RULE_condition}enterRule(t){t.enterCondition&&t.enterCondition(this)}exitRule(t){t.exitCondition&&t.exitCondition(this)}accept(t){return t.visitCondition?t.visitCondition(this):t.visitChildren(this)}},$t=class extends Ve.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return _t.RULE_expression}copyFrom(t){super.copyFrom(t)}},bc=class extends $t{constructor(e){super(e.parent,e.invokingState);N(this,"_left");N(this,"_op");N(this,"_right");this.copyFrom(e)}expression(e){return e===void 0?this.getRuleContexts($t):this.getRuleContext(e,$t)}BY(){return this.tryGetToken(_t.BY,0)}MULTIPLY(){return this.tryGetToken(_t.MULTIPLY,0)}DIVIDE(){return this.tryGetToken(_t.DIVIDE,0)}REMAIND(){return this.tryGetToken(_t.REMAIND,0)}PLUS(){return this.tryGetToken(_t.PLUS,0)}MINUS(){return this.tryGetToken(_t.MINUS,0)}enterRule(e){e.enterBinaryExpression&&e.enterBinaryExpression(this)}exitRule(e){e.exitBinaryExpression&&e.exitBinaryExpression(this)}accept(e){return e.visitBinaryExpression?e.visitBinaryExpression(this):e.visitChildren(this)}},Vo=class extends $t{constructor(e){super(e.parent,e.invokingState);N(this,"_left");N(this,"_op");N(this,"_right");N(this,"_eq");this.copyFrom(e)}expression(e){return e===void 0?this.getRuleContexts($t):this.getRuleContext(e,$t)}EQUAL(){return this.tryGetToken(_t.EQUAL,0)}TO(){return this.tryGetToken(_t.TO,0)}NOT(){return this.tryGetToken(_t.NOT,0)}THAN(){return this.tryGetToken(_t.THAN,0)}GREATER(){return this.tryGetToken(_t.GREATER,0)}LESS(){return this.tryGetToken(_t.LESS,0)}OR(){return this.tryGetToken(_t.OR,0)}enterRule(e){e.enterLogicalExpression&&e.enterLogicalExpression(this)}exitRule(e){e.exitLogicalExpression&&e.exitLogicalExpression(this)}accept(e){return e.visitLogicalExpression?e.visitLogicalExpression(this):e.visitChildren(this)}},UR=class extends $t{constructor(e){super(e.parent,e.invokingState);N(this,"_direction");this.copyFrom(e)}CAN(){return this.getToken(_t.CAN,0)}GO(){return this.getToken(_t.GO,0)}TO(){return this.getToken(_t.TO,0)}THE(){return this.getToken(_t.THE,0)}RIGHT(){return this.tryGetToken(_t.RIGHT,0)}LEFT(){return this.tryGetToken(_t.LEFT,0)}UP(){return this.tryGetToken(_t.UP,0)}DOWN(){return this.tryGetToken(_t.DOWN,0)}enterRule(e){e.enterCanExpr&&e.enterCanExpr(this)}exitRule(e){e.exitCanExpr&&e.exitCanExpr(this)}accept(e){return e.visitCanExpr?e.visitCanExpr(this):e.visitChildren(this)}},HR=class extends $t{ID(){return this.getToken(_t.ID,0)}constructor(t){super(t.parent,t.invokingState),this.copyFrom(t)}enterRule(t){t.enterIdExpr&&t.enterIdExpr(this)}exitRule(t){t.exitIdExpr&&t.exitIdExpr(this)}accept(t){return t.visitIdExpr?t.visitIdExpr(this):t.visitChildren(this)}},jR=class extends $t{INT(){return this.getToken(_t.INT,0)}constructor(t){super(t.parent,t.invokingState),this.copyFrom(t)}enterRule(t){t.enterIntExpr&&t.enterIntExpr(this)}exitRule(t){t.exitIntExpr&&t.exitIntExpr(this)}accept(t){return t.visitIntExpr?t.visitIntExpr(this):t.visitChildren(this)}},Fg=class extends Ve.ParserRuleContext{constructor(e,i){super(e,i);N(this,"_id")}SET(){return this.getToken(_t.SET,0)}TO(){return this.getToken(_t.TO,0)}expression(){return this.getRuleContext(0,$t)}ID(){return this.getToken(_t.ID,0)}get ruleIndex(){return _t.RULE_local}enterRule(e){e.enterLocal&&e.enterLocal(this)}exitRule(e){e.exitLocal&&e.exitLocal(this)}accept(e){return e.visitLocal?e.visitLocal(this):e.visitChildren(this)}};var mf={},Th={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var nl=A&&A.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},sl=A&&A.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Th,"__esModule",{value:!0});Th.AbstractParseTreeVisitor=void 0;const ei=G;class js{visit(t){return t.accept(this)}visitChildren(t){let e=this.defaultResult(),i=t.childCount;for(let n=0;n<i&&this.shouldVisitNextChild(t,e);n++){let o=t.getChild(n).accept(this);e=this.aggregateResult(e,o)}return e}visitTerminal(t){return this.defaultResult()}visitErrorNode(t){return this.defaultResult()}aggregateResult(t,e){return e}shouldVisitNextChild(t,e){return!0}}nl([ei.Override,sl(0,ei.NotNull)],js.prototype,"visit",null);nl([ei.Override,sl(0,ei.NotNull)],js.prototype,"visitChildren",null);nl([ei.Override,sl(0,ei.NotNull)],js.prototype,"visitTerminal",null);nl([ei.Override,sl(0,ei.NotNull)],js.prototype,"visitErrorNode",null);nl([sl(0,ei.NotNull)],js.prototype,"shouldVisitNextChild",null);Th.AbstractParseTreeVisitor=js;var Lg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Lg,"__esModule",{value:!0});var Ah={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ah,"__esModule",{value:!0});Ah.ParseTreeProperty=void 0;class $R{constructor(t="ParseTreeProperty"){this._symbol=Symbol(t)}get(t){return t[this._symbol]}set(t,e){t[this._symbol]=e}removeFrom(t){let e=t[this._symbol];return delete t[this._symbol],e}}Ah.ParseTreeProperty=$R;var Bg={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.ParseTreeWalker=void 0;const t=Li,e=cr,i=Bi;class n{walk(o,a){let l=[],u=[],h=a,c=0;for(;h;){if(h instanceof t.ErrorNode?o.visitErrorNode&&o.visitErrorNode(h):h instanceof e.TerminalNode?o.visitTerminal&&o.visitTerminal(h):this.enterRule(o,h),h.childCount>0){l.push(h),u.push(c),c=0,h=h.getChild(0);continue}do{if(h instanceof i.RuleNode&&this.exitRule(o,h),l.length===0){h=void 0,c=0;break}let d=l[l.length-1];if(c++,h=c<d.childCount?d.getChild(c):void 0,h)break;h=l.pop(),c=u.pop()}while(h)}}enterRule(o,a){let l=a.ruleContext;o.enterEveryRule&&o.enterEveryRule(l),l.enterRule(o)}exitRule(o,a){let l=a.ruleContext;l.exitRule(o),o.exitEveryRule&&o.exitEveryRule(l)}}r.ParseTreeWalker=n,function(s){s.DEFAULT=new s}(n=r.ParseTreeWalker||(r.ParseTreeWalker={}))})(Bg);var Mg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Mg,"__esModule",{value:!0});var kg={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(kg,"__esModule",{value:!0});(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=A&&A.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s),Object.defineProperty(i,o,{enumerable:!0,get:function(){return n[s]}})}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),e=A&&A.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&t(n,i,s)};Object.defineProperty(r,"__esModule",{value:!0}),e(Th,r),e(Li,r),e(Lg,r),e(Pg,r),e(Ah,r),e(Dg,r),e(Bg,r),e(Bi,r),e(Mg,r),e(cr,r),e(kg,r),e(Mi(),r)})(mf);let GR=class extends mf.AbstractParseTreeVisitor{constructor(){super(...arguments);N(this,"names",[]);N(this,"code",[])}defaultResult(){return{}}getCode(){return this.code}visitBinaryExpression(e){const i=e._op.text;switch(this.visit(e._right),this.visit(e._left),i){case"*":case"multiply":this.code.push(new i_);break;case"/":case"divide":this.code.push(new r_);break;case"+":case"plus":this.code.push(new t_);break;case"-":case"minus":this.code.push(new e_);break}}visitLogicalExpression(e){const i=e._op.text,n=e._eq;if(this.visit(e._right),this.visit(e._left),n)switch(i){case">":case"greater":this.code.push(new u_);break;case"<":case"less":this.code.push(new l_);break}else switch(i){case"==":case"equal":this.code.push(new n_);break;case"!=":case"not":this.code.push(new s_);break;case">":case"greater":this.code.push(new a_);break;case"<":case"less":this.code.push(new o_);break}}visitCanExpr(e){let i=this.getDirectionIdx(e);this.code.push(new vi(i)),this.code.push(new cs(Ar.Can))}visitCondition(e){this.visit(e.expression());const i=new h_(0);this.code.push(i);for(const n of e.statement())this.visit(n);i.to=this.code.length}visitExpression(e){this.visit(e)}visitIdExpr(e){const i=e.ID().text;if(!this.hasName(i))throw new Error("The name doesn't exist");this.code.push(new d_(this.nameIdx(i)))}visitIntExpr(e){this.code.push(new vi(Number(e.INT().text)))}visitLocal(e){const i=e._id.text;this.hasName(i)||this.names.push(i);const n=this.nameIdx(i);this.visit(e.expression()),this.code.push(new c_(n))}visitManySteps(e){let i=this.getDirectionIdx(e);this.visit(e.expression()),this.code.push(new vi(i)),this.code.push(new cs(Ar.Step))}visitOneStep(e){let i=this.getDirectionIdx(e);this.code.push(new vi(i)),this.code.push(new cs(Ar.OneStep))}visitProgram(e){return this.visitChildren(e)}visitStatement(e){return this.visitChildren(e)}visitTakeSteps(e){return this.visitChildren(e)}hasName(e){return this.nameIdx(e)!=-1}nameIdx(e){return this.names.findIndex(i=>i===e)}getDirectionIdx(e){const i=e._direction.text;let n=0;switch(i){case"up":n=ne.Up;break;case"down":n=ne.Down;break;case"left":n=ne.Left;break;case"right":n=ne.Right;break}return n}};const Te=class extends wg.Lexer{get vocabulary(){return Te.VOCABULARY}constructor(t){super(t),this._interp=new Ng.LexerATNSimulator(Te._ATN,this)}get grammarFileName(){return"ScriptGrammar.g4"}get ruleNames(){return Te.ruleNames}get serializedATN(){return Te._serializedATN}get channelNames(){return Te.channelNames}get modeNames(){return Te.modeNames}static get _ATN(){return Te.__ATN||(Te.__ATN=new vh.ATNDeserializer().deserialize(ba(Te._serializedATN))),Te.__ATN}};let vt=Te;N(vt,"T__0",1),N(vt,"T__1",2),N(vt,"T__2",3),N(vt,"T__3",4),N(vt,"T__4",5),N(vt,"T__5",6),N(vt,"T__6",7),N(vt,"T__7",8),N(vt,"T__8",9),N(vt,"T__9",10),N(vt,"T__10",11),N(vt,"T__11",12),N(vt,"INT",13),N(vt,"TAKE",14),N(vt,"STEP",15),N(vt,"STEPS",16),N(vt,"RIGHT",17),N(vt,"LEFT",18),N(vt,"UP",19),N(vt,"DOWN",20),N(vt,"IF",21),N(vt,"THEN",22),N(vt,"END",23),N(vt,"MULTIPLY",24),N(vt,"DIVIDE",25),N(vt,"BY",26),N(vt,"PLUS",27),N(vt,"MINUS",28),N(vt,"SET",29),N(vt,"REMAIND",30),N(vt,"CAN",31),N(vt,"GO",32),N(vt,"EQUAL",33),N(vt,"NOT",34),N(vt,"LESS",35),N(vt,"GREATER",36),N(vt,"THAN",37),N(vt,"OR",38),N(vt,"ID",39),N(vt,"WS",40),N(vt,"channelNames",["DEFAULT_TOKEN_CHANNEL","HIDDEN"]),N(vt,"modeNames",["DEFAULT_MODE"]),N(vt,"ruleNames",["T__0","T__1","T__2","T__3","T__4","T__5","T__6","T__7","T__8","T__9","T__10","T__11","INT","TAKE","STEP","STEPS","RIGHT","LEFT","UP","DOWN","IF","THEN","END","MULTIPLY","DIVIDE","BY","PLUS","MINUS","SET","REMAIND","CAN","GO","EQUAL","NOT","LESS","GREATER","THAN","OR","ID","WS"]),N(vt,"_LITERAL_NAMES",[void 0,"'*'","'/'","'%'","'+'","'-'","'=='","'!='","'>'","'<'","'>='","'<='","''",void 0,"''","''",void 0,"''","''","''","''","''",void 0,"''","''","''","''","''","''","''","''","''","''",void 0,"''","''","''","''","''"]),N(vt,"_SYMBOLIC_NAMES",[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"INT","TAKE","STEP","STEPS","RIGHT","LEFT","UP","DOWN","IF","THEN","END","MULTIPLY","DIVIDE","BY","PLUS","MINUS","SET","REMAIND","CAN","GO","EQUAL","NOT","LESS","GREATER","THAN","OR","ID","WS"]),N(vt,"VOCABULARY",new Pa(Te._LITERAL_NAMES,Te._SYMBOLIC_NAMES,[])),N(vt,"_serializedATN",`*\b					\x07	\x07\b	\b			
	
\v	\v\f	\f\r	\r													\x1B	\x1B				 	 !	!"	"#	#$	$%	%&	&'	'(	()	)\x07\x07\x07\b\b\b		

\v\v\v\f\f\f\r\rq
\rr

\x1B\x1B\x1B      !!!!!!!"""""""""""
"###$$$$$$$%%%%%%%&&&&''''((\x07(
(\f((\v())
)\r))))*\x07	\v\x07\r\b	
\v\f\r\x1B!#%')+-/13\x1B579;= ?!A"C#E$G%I&K'M(O)Q*2;C\\aac|\x072;C\\aac|\v\f""\x07	\v\r\x1B!#%')+-/13579;=?ACEGIKMOQSU\x07W	Y\v[\r]\`cegjm\x1Bpt|!#%')+-/13579;=?ACEGIKMOQST\x07,TUV\x071VWX\x07'X\bYZ\x07-Z
[\\\x07/\\\f]^\x07?^_\x07?_\`a\x07#ab\x07?bcd\x07@def\x07>fgh\x07@hi\x07?ijk\x07>kl\x07?lmn\x07noq	poqrrprsstu\x07uv\x07vw\x07wx\x07xy\x07yz\x07z{\x07{|}\x07}~\x07~\x07 \x07\x07\x07\x07\x07\x07\x07\x07\x07"\x07\x07\x07\x07\x07\x07$\x07\x07\x07\x07\x07&\x07\x07\x07\x07\x07(\x07\x07\x07\x07*\x07\x07\x07\x07,\x07\x07\x07\x07\x07\x07\x07.\x07\x07\x07\x07\x070\x07\x07\x07\x07\x07\x07\x07\x072\x07\x07\x07\x07\x07\x074\x07\x076\x07\x07\x07\x078\x07\x07\x07\x07\x07:\x07\x07\x07\x07\x07\x07\x07\x07\x07\x07<\x07\x07\x07\x07\x07\x07\x07>\x07\x07\x07\x07\x07@\x07\x07\x07\x07\x07\x07B\x07\x07\x07\x07\x07\x07\x07\x07\x07\x07D\x07\x07F\x07\x07\x07\x07\x07\x07H\x07\x07\x07\x07\x07\x07J\x07\x07\x07L\x07\x07\x07N		P	\b)R	r\b`),N(vt,"__ATN");const J=class extends Rg.Parser{get vocabulary(){return J.VOCABULARY}get grammarFileName(){return"ScriptGrammar.g4"}get ruleNames(){return J.ruleNames}get serializedATN(){return J._serializedATN}createFailedPredicateException(t,e){return new Kd(this,t,e)}constructor(t){super(t),this._interp=new Ig.ParserATNSimulator(J._ATN,this)}program(){let t=new zR(this._ctx,this.state);this.enterRule(t,0,J.RULE_program);let e;try{for(this.enterOuterAlt(t,1),this.state=15,this._errHandler.sync(this),e=this._input.LA(1);!(e&-32)&&1<<e&(1<<J.TAKE|1<<J.IF|1<<J.SET);)this.state=12,this.statement(),this.state=17,this._errHandler.sync(this),e=this._input.LA(1)}catch(i){if(i instanceof Oe)t.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return t}statement(){let t=new Ea(this._ctx,this.state);this.enterRule(t,2,J.RULE_statement);try{switch(this.state=21,this._errHandler.sync(this),this._input.LA(1)){case J.TAKE:this.enterOuterAlt(t,1),this.state=18,this.takeSteps();break;case J.IF:this.enterOuterAlt(t,2),this.state=19,this.condition();break;case J.SET:this.enterOuterAlt(t,3),this.state=20,this.local();break;default:throw new du.NoViableAltException(this)}}catch(e){if(e instanceof Oe)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t}takeSteps(){let t=new Sh(this._ctx,this.state);this.enterRule(t,4,J.RULE_takeSteps);let e;try{switch(this.state=31,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,2,this._ctx)){case 1:t=new VR(t),this.enterOuterAlt(t,1),this.state=23,this.match(J.TAKE),this.state=24,t._num=this.expression(0),this.state=25,e=this._input.LA(1),e===J.STEP||e===J.STEPS?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=26,t._direction=this._input.LT(1),e=this._input.LA(1),!(e&-32)&&1<<e&(1<<J.RIGHT|1<<J.LEFT|1<<J.UP|1<<J.DOWN)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):t._direction=this._errHandler.recoverInline(this);break;case 2:t=new XR(t),this.enterOuterAlt(t,2),this.state=28,this.match(J.TAKE),this.state=29,this.match(J.STEP),this.state=30,t._direction=this._input.LT(1),e=this._input.LA(1),!(e&-32)&&1<<e&(1<<J.RIGHT|1<<J.LEFT|1<<J.UP|1<<J.DOWN)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):t._direction=this._errHandler.recoverInline(this);break}}catch(i){if(i instanceof Oe)t.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return t}condition(){let t=new Ug(this._ctx,this.state);this.enterRule(t,6,J.RULE_condition);let e;try{this.enterOuterAlt(t,1);{for(this.state=33,this.match(J.IF),this.state=34,this.expression(0),this.state=35,this.match(J.THEN),this.state=39,this._errHandler.sync(this),e=this._input.LA(1);!(e&-32)&&1<<e&(1<<J.TAKE|1<<J.IF|1<<J.SET);)this.state=36,this.statement(),this.state=41,this._errHandler.sync(this),e=this._input.LA(1);this.state=42,this.match(J.END)}}catch(i){if(i instanceof Oe)t.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return t}expression(t){t===void 0&&(t=0);let e=this._ctx,i=this.state,n=new Gt(this._ctx,i),s=n,o=8;this.enterRecursionRule(n,8,J.RULE_expression,t);let a;try{let l;this.enterOuterAlt(n,1);{switch(this.state=50,this._errHandler.sync(this),this._input.LA(1)){case J.CAN:n=new WR(n),this._ctx=n,s=n,this.state=45,this.match(J.CAN),this.state=46,this.match(J.GO),this.state=47,n._direction=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<J.RIGHT|1<<J.LEFT|1<<J.UP|1<<J.DOWN)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._direction=this._errHandler.recoverInline(this);break;case J.ID:n=new YR(n),this._ctx=n,s=n,this.state=48,this.match(J.ID);break;case J.INT:n=new qR(n),this._ctx=n,s=n,this.state=49,this.match(J.INT);break;default:throw new du.NoViableAltException(this)}for(this._ctx._stop=this._input.tryLT(-1),this.state=84,this._errHandler.sync(this),l=this.interpreter.adaptivePredict(this._input,6,this._ctx);l!==2&&l!==Cg.ATN.INVALID_ALT_NUMBER;){if(l===1)switch(this._parseListeners!=null&&this.triggerExitRuleEvent(),s=n,this.state=82,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,5,this._ctx)){case 1:{if(n=new Cc(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,J.RULE_expression),this.state=52,!this.precpred(this._ctx,11))throw this.createFailedPredicateException("this.precpred(this._ctx, 11)");this.state=53,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<J.T__0|1<<J.T__1|1<<J.T__2)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=54,n._right=this.expression(12)}break;case 2:{if(n=new Cc(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,J.RULE_expression),this.state=55,!this.precpred(this._ctx,10))throw this.createFailedPredicateException("this.precpred(this._ctx, 10)");this.state=56,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<J.MULTIPLY|1<<J.DIVIDE|1<<J.REMAIND)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=57,this.match(J.BY),this.state=58,n._right=this.expression(11)}break;case 3:{if(n=new Cc(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,J.RULE_expression),this.state=59,!this.precpred(this._ctx,9))throw this.createFailedPredicateException("this.precpred(this._ctx, 9)");this.state=60,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<J.T__3|1<<J.T__4|1<<J.PLUS|1<<J.MINUS)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=61,n._right=this.expression(10)}break;case 4:{if(n=new Xo(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,J.RULE_expression),this.state=62,!this.precpred(this._ctx,8))throw this.createFailedPredicateException("this.precpred(this._ctx, 8)");this.state=63,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<J.T__5|1<<J.T__6|1<<J.T__7|1<<J.T__8|1<<J.T__9|1<<J.T__10)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=64,n._right=this.expression(9)}break;case 5:{if(n=new Xo(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,J.RULE_expression),this.state=65,!this.precpred(this._ctx,7))throw this.createFailedPredicateException("this.precpred(this._ctx, 7)");this.state=66,n._op=this.match(J.NOT),this.state=67,this.match(J.EQUAL),this.state=68,n._right=this.expression(8)}break;case 6:{if(n=new Xo(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,J.RULE_expression),this.state=69,!this.precpred(this._ctx,6))throw this.createFailedPredicateException("this.precpred(this._ctx, 6)");this.state=70,n._op=this.match(J.EQUAL),this.state=71,n._right=this.expression(7)}break;case 7:{if(n=new Xo(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,J.RULE_expression),this.state=72,!this.precpred(this._ctx,5))throw this.createFailedPredicateException("this.precpred(this._ctx, 5)");this.state=73,n._op=this._input.LT(1),a=this._input.LA(1),a===J.LESS||a===J.GREATER?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=74,this.match(J.THAN),this.state=75,n._right=this.expression(6)}break;case 8:{if(n=new Xo(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,J.RULE_expression),this.state=76,!this.precpred(this._ctx,4))throw this.createFailedPredicateException("this.precpred(this._ctx, 4)");this.state=77,n._op=this._input.LT(1),a=this._input.LA(1),a===J.LESS||a===J.GREATER?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=78,this.match(J.THAN),this.state=79,this.match(J.OR),this.state=80,n._eq=this.match(J.EQUAL),this.state=81,n._right=this.expression(5)}break}this.state=86,this._errHandler.sync(this),l=this.interpreter.adaptivePredict(this._input,6,this._ctx)}}}catch(l){if(l instanceof Oe)n.exception=l,this._errHandler.reportError(this,l),this._errHandler.recover(this,l);else throw l}finally{this.unrollRecursionContexts(e)}return n}local(){let t=new Hg(this._ctx,this.state);this.enterRule(t,10,J.RULE_local);try{this.enterOuterAlt(t,1),this.state=87,this.match(J.SET),this.state=88,t._id=this.match(J.ID),this.state=89,this.match(J.T__11),this.state=90,this.expression(0)}catch(e){if(e instanceof Oe)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t}sempred(t,e,i){switch(e){case 4:return this.expression_sempred(t,i)}return!0}expression_sempred(t,e){switch(e){case 0:return this.precpred(this._ctx,11);case 1:return this.precpred(this._ctx,10);case 2:return this.precpred(this._ctx,9);case 3:return this.precpred(this._ctx,8);case 4:return this.precpred(this._ctx,7);case 5:return this.precpred(this._ctx,6);case 6:return this.precpred(this._ctx,5);case 7:return this.precpred(this._ctx,4)}return!0}static get _ATN(){return J.__ATN||(J.__ATN=new vh.ATNDeserializer().deserialize(ba(J._serializedATN))),J.__ATN}};let K=J;N(K,"T__0",1),N(K,"T__1",2),N(K,"T__2",3),N(K,"T__3",4),N(K,"T__4",5),N(K,"T__5",6),N(K,"T__6",7),N(K,"T__7",8),N(K,"T__8",9),N(K,"T__9",10),N(K,"T__10",11),N(K,"T__11",12),N(K,"INT",13),N(K,"TAKE",14),N(K,"STEP",15),N(K,"STEPS",16),N(K,"RIGHT",17),N(K,"LEFT",18),N(K,"UP",19),N(K,"DOWN",20),N(K,"IF",21),N(K,"THEN",22),N(K,"END",23),N(K,"MULTIPLY",24),N(K,"DIVIDE",25),N(K,"BY",26),N(K,"PLUS",27),N(K,"MINUS",28),N(K,"SET",29),N(K,"REMAIND",30),N(K,"CAN",31),N(K,"GO",32),N(K,"EQUAL",33),N(K,"NOT",34),N(K,"LESS",35),N(K,"GREATER",36),N(K,"THAN",37),N(K,"OR",38),N(K,"ID",39),N(K,"WS",40),N(K,"RULE_program",0),N(K,"RULE_statement",1),N(K,"RULE_takeSteps",2),N(K,"RULE_condition",3),N(K,"RULE_expression",4),N(K,"RULE_local",5),N(K,"ruleNames",["program","statement","takeSteps","condition","expression","local"]),N(K,"_LITERAL_NAMES",[void 0,"'*'","'/'","'%'","'+'","'-'","'=='","'!='","'>'","'<'","'>='","'<='","''",void 0,"''","''",void 0,"''","''","''","''","''",void 0,"''","''","''","''","''","''","''","''","''","''",void 0,"''","''","''","''","''"]),N(K,"_SYMBOLIC_NAMES",[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"INT","TAKE","STEP","STEPS","RIGHT","LEFT","UP","DOWN","IF","THEN","END","MULTIPLY","DIVIDE","BY","PLUS","MINUS","SET","REMAIND","CAN","GO","EQUAL","NOT","LESS","GREATER","THAN","OR","ID","WS"]),N(K,"VOCABULARY",new Pa(J._LITERAL_NAMES,J._SYMBOLIC_NAMES,[])),N(K,"_serializedATN",`*_					\x07	\x07\x07
\f\v
"
\x07(
\f+\v5
\x07U
\fX\v\x07\x07\x07\x07\x07\x07
\b\b
\f	\x1B  \x07\b\r%&g!\b#
4\fY\b\f\x07\x07\x1B
\x1B		"\x07 \x07 "	!!"\x07#$\x07$%
%)\x07&('&(+)')**,+),-\x07-	./\b/0\x07!01\x07"15	25\x07)35\x074.42435V67\f\r78	8U
9:\f\f:;	;<\x07<U
\r=>\f\v>?	?U
\f@A\f
AB	\x07BU
\vCD\f	DE\x07$EF\x07#FU

GH\f\bHI\x07#IU
	JK\f\x07KL	\bLM\x07'MU
\bNO\fOP	\bPQ\x07'QR\x07(RS\x07#SU
\x07T6T9T=T@TCTGTJTNUXVTVWW\vXVYZ\x07Z[\x07)[\\\x07\\]
]\r	!)4TV`),N(K,"__ATN");class zR extends Ve.ParserRuleContext{statement(t){return t===void 0?this.getRuleContexts(Ea):this.getRuleContext(t,Ea)}constructor(t,e){super(t,e)}get ruleIndex(){return K.RULE_program}enterRule(t){t.enterProgram&&t.enterProgram(this)}exitRule(t){t.exitProgram&&t.exitProgram(this)}accept(t){return t.visitProgram?t.visitProgram(this):t.visitChildren(this)}}class Ea extends Ve.ParserRuleContext{takeSteps(){return this.tryGetRuleContext(0,Sh)}condition(){return this.tryGetRuleContext(0,Ug)}local(){return this.tryGetRuleContext(0,Hg)}constructor(t,e){super(t,e)}get ruleIndex(){return K.RULE_statement}enterRule(t){t.enterStatement&&t.enterStatement(this)}exitRule(t){t.exitStatement&&t.exitStatement(this)}accept(t){return t.visitStatement?t.visitStatement(this):t.visitChildren(this)}}class Sh extends Ve.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return K.RULE_takeSteps}copyFrom(t){super.copyFrom(t)}}class VR extends Sh{constructor(e){super(e.parent,e.invokingState);N(this,"_num");N(this,"_direction");this.copyFrom(e)}TAKE(){return this.getToken(K.TAKE,0)}expression(){return this.getRuleContext(0,Gt)}STEPS(){return this.tryGetToken(K.STEPS,0)}STEP(){return this.tryGetToken(K.STEP,0)}RIGHT(){return this.tryGetToken(K.RIGHT,0)}LEFT(){return this.tryGetToken(K.LEFT,0)}UP(){return this.tryGetToken(K.UP,0)}DOWN(){return this.tryGetToken(K.DOWN,0)}enterRule(e){e.enterManySteps&&e.enterManySteps(this)}exitRule(e){e.exitManySteps&&e.exitManySteps(this)}accept(e){return e.visitManySteps?e.visitManySteps(this):e.visitChildren(this)}}class XR extends Sh{constructor(e){super(e.parent,e.invokingState);N(this,"_direction");this.copyFrom(e)}TAKE(){return this.getToken(K.TAKE,0)}STEP(){return this.getToken(K.STEP,0)}RIGHT(){return this.tryGetToken(K.RIGHT,0)}LEFT(){return this.tryGetToken(K.LEFT,0)}UP(){return this.tryGetToken(K.UP,0)}DOWN(){return this.tryGetToken(K.DOWN,0)}enterRule(e){e.enterOneStep&&e.enterOneStep(this)}exitRule(e){e.exitOneStep&&e.exitOneStep(this)}accept(e){return e.visitOneStep?e.visitOneStep(this):e.visitChildren(this)}}class Ug extends Ve.ParserRuleContext{IF(){return this.getToken(K.IF,0)}expression(){return this.getRuleContext(0,Gt)}THEN(){return this.getToken(K.THEN,0)}END(){return this.getToken(K.END,0)}statement(t){return t===void 0?this.getRuleContexts(Ea):this.getRuleContext(t,Ea)}constructor(t,e){super(t,e)}get ruleIndex(){return K.RULE_condition}enterRule(t){t.enterCondition&&t.enterCondition(this)}exitRule(t){t.exitCondition&&t.exitCondition(this)}accept(t){return t.visitCondition?t.visitCondition(this):t.visitChildren(this)}}class Gt extends Ve.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return K.RULE_expression}copyFrom(t){super.copyFrom(t)}}class Cc extends Gt{constructor(e){super(e.parent,e.invokingState);N(this,"_left");N(this,"_op");N(this,"_right");this.copyFrom(e)}expression(e){return e===void 0?this.getRuleContexts(Gt):this.getRuleContext(e,Gt)}BY(){return this.tryGetToken(K.BY,0)}MULTIPLY(){return this.tryGetToken(K.MULTIPLY,0)}DIVIDE(){return this.tryGetToken(K.DIVIDE,0)}REMAIND(){return this.tryGetToken(K.REMAIND,0)}PLUS(){return this.tryGetToken(K.PLUS,0)}MINUS(){return this.tryGetToken(K.MINUS,0)}enterRule(e){e.enterBinaryExpression&&e.enterBinaryExpression(this)}exitRule(e){e.exitBinaryExpression&&e.exitBinaryExpression(this)}accept(e){return e.visitBinaryExpression?e.visitBinaryExpression(this):e.visitChildren(this)}}class Xo extends Gt{constructor(e){super(e.parent,e.invokingState);N(this,"_left");N(this,"_op");N(this,"_right");N(this,"_eq");this.copyFrom(e)}expression(e){return e===void 0?this.getRuleContexts(Gt):this.getRuleContext(e,Gt)}EQUAL(){return this.tryGetToken(K.EQUAL,0)}NOT(){return this.tryGetToken(K.NOT,0)}THAN(){return this.tryGetToken(K.THAN,0)}GREATER(){return this.tryGetToken(K.GREATER,0)}LESS(){return this.tryGetToken(K.LESS,0)}OR(){return this.tryGetToken(K.OR,0)}enterRule(e){e.enterLogicalExpression&&e.enterLogicalExpression(this)}exitRule(e){e.exitLogicalExpression&&e.exitLogicalExpression(this)}accept(e){return e.visitLogicalExpression?e.visitLogicalExpression(this):e.visitChildren(this)}}class WR extends Gt{constructor(e){super(e.parent,e.invokingState);N(this,"_direction");this.copyFrom(e)}CAN(){return this.getToken(K.CAN,0)}GO(){return this.getToken(K.GO,0)}RIGHT(){return this.tryGetToken(K.RIGHT,0)}LEFT(){return this.tryGetToken(K.LEFT,0)}UP(){return this.tryGetToken(K.UP,0)}DOWN(){return this.tryGetToken(K.DOWN,0)}enterRule(e){e.enterCanExpr&&e.enterCanExpr(this)}exitRule(e){e.exitCanExpr&&e.exitCanExpr(this)}accept(e){return e.visitCanExpr?e.visitCanExpr(this):e.visitChildren(this)}}class YR extends Gt{ID(){return this.getToken(K.ID,0)}constructor(t){super(t.parent,t.invokingState),this.copyFrom(t)}enterRule(t){t.enterIdExpr&&t.enterIdExpr(this)}exitRule(t){t.exitIdExpr&&t.exitIdExpr(this)}accept(t){return t.visitIdExpr?t.visitIdExpr(this):t.visitChildren(this)}}class qR extends Gt{INT(){return this.getToken(K.INT,0)}constructor(t){super(t.parent,t.invokingState),this.copyFrom(t)}enterRule(t){t.enterIntExpr&&t.enterIntExpr(this)}exitRule(t){t.exitIntExpr&&t.exitIntExpr(this)}accept(t){return t.visitIntExpr?t.visitIntExpr(this):t.visitChildren(this)}}class Hg extends Ve.ParserRuleContext{constructor(e,i){super(e,i);N(this,"_id")}SET(){return this.getToken(K.SET,0)}expression(){return this.getRuleContext(0,Gt)}ID(){return this.getToken(K.ID,0)}get ruleIndex(){return K.RULE_local}enterRule(e){e.enterLocal&&e.enterLocal(this)}exitRule(e){e.exitLocal&&e.exitLocal(this)}accept(e){return e.visitLocal?e.visitLocal(this):e.visitChildren(this)}}class KR extends mf.AbstractParseTreeVisitor{constructor(){super(...arguments);N(this,"names",[]);N(this,"code",[])}defaultResult(){return{}}getCode(){return this.code}visitBinaryExpression(e){const i=e._op.text;switch(this.visit(e._right),this.visit(e._left),i){case"*":case"":this.code.push(new i_);break;case"/":case"":this.code.push(new r_);break;case"+":case"":this.code.push(new t_);break;case"-":case"":this.code.push(new e_);break}}visitLogicalExpression(e){const i=e._op.text,n=e._eq;if(this.visit(e._right),this.visit(e._left),n)switch(i){case">":case"":this.code.push(new u_);break;case"<":case"":this.code.push(new l_);break}else switch(i){case"==":case"":this.code.push(new n_);break;case"!=":case"":this.code.push(new s_);break;case">":case"":this.code.push(new a_);break;case"<":case"":this.code.push(new o_);break}}visitCanExpr(e){let i=this.getDirectionIdx(e);this.code.push(new vi(i)),this.code.push(new cs(Ar.Can))}visitCondition(e){this.visit(e.expression());const i=new h_(0);this.code.push(i);for(const n of e.statement())this.visit(n);i.to=this.code.length}visitExpression(e){this.visit(e)}visitIdExpr(e){const i=e.ID().text;if(!this.hasName(i))throw new Error("The name doesn't exist");this.code.push(new d_(this.nameIdx(i)))}visitIntExpr(e){this.code.push(new vi(Number(e.INT().text)))}visitLocal(e){const i=e._id.text;this.hasName(i)||this.names.push(i);const n=this.nameIdx(i);this.visit(e.expression()),this.code.push(new c_(n))}visitManySteps(e){let i=this.getDirectionIdx(e);this.visit(e.expression()),this.code.push(new vi(i)),this.code.push(new cs(Ar.Step))}visitOneStep(e){let i=this.getDirectionIdx(e);this.code.push(new vi(i)),this.code.push(new cs(Ar.OneStep))}visitProgram(e){return this.visitChildren(e)}visitStatement(e){return this.visitChildren(e)}visitTakeSteps(e){return this.visitChildren(e)}hasName(e){return this.nameIdx(e)!=-1}nameIdx(e){return this.names.findIndex(i=>i===e)}getDirectionIdx(e){const i=e._direction.text;let n=0;switch(i){case"":n=ne.Up;break;case"":n=ne.Down;break;case"":n=ne.Left;break;case"":n=ne.Right;break}return n}}function ZR(r){let t,e,i,n,s,o,a,l,u;return{c(){t=$s("main"),e=$s("div"),i=yf(),n=$s("div"),s=$s("div"),o=yf(),a=$s("button"),a.textContent="compile & run",Mn(e,"id","game"),Mn(s,"id","editor_text"),Mn(s,"class","svelte-1wgc70b"),Mn(n,"id","editor"),Mn(n,"class","svelte-1wgc70b"),Mn(t,"class","svelte-1wgc70b")},m(h,c){Wg(h,t,c),Bn(t,e),Bn(t,i),Bn(t,n),Bn(n,s),Bn(n,o),Bn(n,a),l||(u=qg(a,"click",r[0]),l=!0)},p:es,i:es,o:es,d(h){h&&sx(t),l=!1,u()}}}const fi=10,QR=1;function JR(r){const t=new Md({});t.ticker.speed=1e-4;let e;ot.SCALE_MODE=yr.NEAREST,Qg(()=>{e=ace.edit("editor_text"),e.setTheme("ace/theme/monokai"),e.session.setMode("ace/mode/plain_text");const a=document.querySelector("#game");a.children.length===0&&a.appendChild(t.view)});const i=Cs.from(Jb);i.x=40,i.y=40,i.anchor.x=.5,i.anchor.y=.5,i.scale.set(5),t.stage.addChild(i);let n=[];n[Ar.Step]=function(){const a=this.stack.pop(),l=this.stack.pop();let u=0;switch(a){case ne.Up:{const h=()=>{u>=l&&(t.ticker.remove(h),this.canExecute=!0),i.y-=fi,u++};t.ticker.add(h)}break;case ne.Down:{const h=()=>{u>=l&&(t.ticker.remove(h),this.canExecute=!0),i.y+=fi,u++};t.ticker.add(h)}break;case ne.Left:{const h=()=>{u>=l&&(t.ticker.remove(h),this.canExecute=!0),i.x-=fi,u++};t.ticker.add(h)}break;case ne.Right:{const h=()=>{u>=l&&(t.ticker.remove(h),this.canExecute=!0),i.x+=fi,u++};t.ticker.add(h)}break}},n[Ar.Can]=function(){this.stack.pop(),this.stack.push(1),this.canExecute=!0},n[Ar.OneStep]=function(){switch(this.stack.pop()){case ne.Up:i.y=i.y-fi;break;case ne.Down:i.y=i.y+fi;break;case ne.Left:i.x=i.x-fi;break;case ne.Right:i.x=i.x+fi;break}this.canExecute=!0};let s=new tC;return s.SetTraps(n),t.ticker.add(()=>{}),t.ticker.add(()=>{for(let a=0;a<QR;a++)s.ExecuteOneInstruction()},{},on.HIGH),[()=>{let a=e.getValue();if(document.documentElement.lang=="en"){let l=Zo.CharStreams.fromString(a),u=new LR(l),h=new Zo.CommonTokenStream(u),d=new _t(h).program(),f=new GR;f.visit(d);const p=f.getCode();i.x=40,i.y=40,console.log(p),s.LoadCode(p),s.SetIP(0)}else if(document.documentElement.lang=="ru"){let l=Zo.CharStreams.fromString(a),u=new vt(l),h=new Zo.CommonTokenStream(u),d=new K(h).program(),f=new KR;f.visit(d);const p=f.getCode();i.x=40,i.y=40,console.log(p),s.LoadCode(p),s.SetIP(0)}}]}class t3 extends uy{constructor(t){super(),ly(this,t,JR,ZR,Vg,{})}}new t3({target:document.getElementById("app")});
