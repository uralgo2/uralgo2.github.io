var R_=Object.defineProperty;var I_=(r,t,e)=>t in r?R_(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var w=(r,t,e)=>(I_(r,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();function In(){}function Sp(r){return r()}function td(){return Object.create(null)}function Dl(r){r.forEach(Sp)}function bp(r){return typeof r=="function"}function P_(r,t){return r!=r?t==t:r!==t||r&&typeof r=="object"||typeof r=="function"}function D_(r){return Object.keys(r).length===0}function pn(r,t){r.appendChild(t)}function O_(r,t,e){r.insertBefore(t,e||null)}function Cp(r){r.parentNode&&r.parentNode.removeChild(r)}function ds(r){return document.createElement(r)}function F_(r){return document.createTextNode(r)}function ed(){return F_(" ")}function L_(r,t,e,i){return r.addEventListener(t,e,i),()=>r.removeEventListener(t,e,i)}function xn(r,t,e){e==null?r.removeAttribute(t):r.getAttribute(t)!==e&&r.setAttribute(t,e)}function B_(r){return Array.from(r.childNodes)}let No;function Co(r){No=r}function M_(){if(!No)throw new Error("Function called outside component initialization");return No}function k_(r){M_().$$.on_mount.push(r)}const yn=[],rd=[];let Pn=[];const id=[],U_=Promise.resolve();let Oh=!1;function H_(){Oh||(Oh=!0,U_.then(Np))}function Fh(r){Pn.push(r)}const ju=new Set;let _n=0;function Np(){if(_n!==0)return;const r=No;do{try{for(;_n<yn.length;){const t=yn[_n];_n++,Co(t),j_(t.$$)}}catch(t){throw yn.length=0,_n=0,t}for(Co(null),yn.length=0,_n=0;rd.length;)rd.pop()();for(let t=0;t<Pn.length;t+=1){const e=Pn[t];ju.has(e)||(ju.add(e),e())}Pn.length=0}while(yn.length);for(;id.length;)id.pop()();Oh=!1,ju.clear(),Co(r)}function j_(r){if(r.fragment!==null){r.update(),Dl(r.before_update);const t=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,t),r.after_update.forEach(Fh)}}function G_(r){const t=[],e=[];Pn.forEach(i=>r.indexOf(i)===-1?t.push(i):e.push(i)),e.forEach(i=>i()),Pn=t}const $_=new Set;function z_(r,t){r&&r.i&&($_.delete(r),r.i(t))}function X_(r,t,e,i){const{fragment:n,after_update:s}=r.$$;n&&n.m(t,e),i||Fh(()=>{const o=r.$$.on_mount.map(Sp).filter(bp);r.$$.on_destroy?r.$$.on_destroy.push(...o):Dl(o),r.$$.on_mount=[]}),s.forEach(Fh)}function V_(r,t){const e=r.$$;e.fragment!==null&&(G_(e.after_update),Dl(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function W_(r,t){r.$$.dirty[0]===-1&&(yn.push(r),H_(),r.$$.dirty.fill(0)),r.$$.dirty[t/31|0]|=1<<t%31}function q_(r,t,e,i,n,s,o,a=[-1]){const l=No;Co(r);const u=r.$$={fragment:null,ctx:[],props:s,update:In,not_equal:n,bound:td(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:td(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};o&&o(u.root);let h=!1;if(u.ctx=e?e(r,t.props||{},(c,d,...f)=>{const p=f.length?f[0]:d;return u.ctx&&n(u.ctx[c],u.ctx[c]=p)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](p),h&&W_(r,c)),d}):[],u.update(),h=!0,Dl(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const c=B_(t.target);u.fragment&&u.fragment.l(c),c.forEach(Cp)}else u.fragment&&u.fragment.c();t.intro&&z_(r.$$.fragment),X_(r,t.target,t.anchor,t.customElement),Np()}Co(l)}class Y_{$destroy(){V_(this,1),this.$destroy=In}$on(t,e){if(!bp(e))return In;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const n=i.indexOf(e);n!==-1&&i.splice(n,1)}}$set(t){this.$$set&&!D_(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var tn=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(tn||{}),wp=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(wp||{}),Lh=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(Lh||{}),Tt=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(Tt||{}),dr=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(dr||{}),st=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(st||{}),Dn=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(Dn||{}),_t=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(_t||{}),Bh=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(Bh||{}),fr=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(fr||{}),oi=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(oi||{}),mr=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(mr||{}),Je=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(Je||{}),hr=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(hr||{}),yc=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(yc||{}),Be=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(Be||{}),Kt=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(Kt||{}),Ht=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(Ht||{}),pr=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(pr||{});const K_={createCanvas:(r,t)=>{const e=document.createElement("canvas");return e.width=r,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},lt={ADAPTER:K_,RESOLUTION:1,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,clearBeforeRender:!0,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,hello:!1},CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Gu=/iPhone/i,nd=/iPod/i,sd=/iPad/i,od=/\biOS-universal(?:.+)Mac\b/i,$u=/\bAndroid(?:.+)Mobile\b/i,ad=/Android/i,mn=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Pa=/Silk/i,Dr=/Windows Phone/i,ld=/\bWindows(?:.+)ARM\b/i,ud=/BlackBerry/i,hd=/BB10/i,cd=/Opera Mini/i,dd=/\b(CriOS|Chrome)(?:.+)Mobile/i,fd=/Mobile(?:.+)Firefox\b/i,pd=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function Z_(r){return function(t){return t.test(r)}}function Q_(r){var t={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?t.userAgent=r:r&&r.userAgent&&(t={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var e=t.userAgent,i=e.split("[FBAN");typeof i[1]<"u"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]<"u"&&(e=i[0]);var n=Z_(e),s={apple:{phone:n(Gu)&&!n(Dr),ipod:n(nd),tablet:!n(Gu)&&(n(sd)||pd(t))&&!n(Dr),universal:n(od),device:(n(Gu)||n(nd)||n(sd)||n(od)||pd(t))&&!n(Dr)},amazon:{phone:n(mn),tablet:!n(mn)&&n(Pa),device:n(mn)||n(Pa)},android:{phone:!n(Dr)&&n(mn)||!n(Dr)&&n($u),tablet:!n(Dr)&&!n(mn)&&!n($u)&&(n(Pa)||n(ad)),device:!n(Dr)&&(n(mn)||n(Pa)||n($u)||n(ad))||n(/\bokhttp\b/i)},windows:{phone:n(Dr),tablet:n(ld),device:n(Dr)||n(ld)},other:{blackberry:n(ud),blackberry10:n(hd),opera:n(cd),firefox:n(fd),chrome:n(dd),device:n(ud)||n(hd)||n(cd)||n(fd)||n(dd)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Lr=Q_(globalThis.navigator);lt.RETINA_PREFIX=/@([0-9\.]+)x/;lt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function J_(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function i(){if(this instanceof i){var n=[null];n.push.apply(n,arguments);var s=Function.bind.apply(t,n);return new s}return t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}),e}var Li={},tm={get exports(){return Li},set exports(r){Li=r}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function n(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,c,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new n(h,c||l,d),p=e?e+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,c;if(this._eventsCount===0)return u;for(c in h=this._events)t.call(h,c)&&u.push(e?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=e?e+u:u,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,f=c.length,p=new Array(f);d<f;d++)p[d]=c[d].fn;return p},a.prototype.listenerCount=function(u){var h=e?e+u:u,c=this._events[h];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,h,c,d,f,p){var m=e?e+u:u;if(!this._events[m])return!1;var x=this._events[m],v=arguments.length,g,_;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,c),!0;case 4:return x.fn.call(x.context,h,c,d),!0;case 5:return x.fn.call(x.context,h,c,d,f),!0;case 6:return x.fn.call(x.context,h,c,d,f,p),!0}for(_=1,g=new Array(v-1);_<v;_++)g[_-1]=arguments[_];x.fn.apply(x.context,g)}else{var y=x.length,A;for(_=0;_<y;_++)switch(x[_].once&&this.removeListener(u,x[_].fn,void 0,!0),v){case 1:x[_].fn.call(x[_].context);break;case 2:x[_].fn.call(x[_].context,h);break;case 3:x[_].fn.call(x[_].context,h,c);break;case 4:x[_].fn.call(x[_].context,h,c,d);break;default:if(!g)for(A=1,g=new Array(v-1);A<v;A++)g[A-1]=arguments[A];x[_].fn.apply(x[_].context,g)}}return!0},a.prototype.on=function(u,h,c){return s(this,u,h,c,!1)},a.prototype.once=function(u,h,c){return s(this,u,h,c,!0)},a.prototype.removeListener=function(u,h,c,d){var f=e?e+u:u;if(!this._events[f])return this;if(!h)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===h&&(!d||p.once)&&(!c||p.context===c)&&o(this,f);else{for(var m=0,x=[],v=p.length;m<v;m++)(p[m].fn!==h||d&&!p[m].once||c&&p[m].context!==c)&&x.push(p[m]);x.length?this._events[f]=x.length===1?x[0]:x:o(this,f)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=e?e+u:u,this._events[h]&&o(this,h)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(tm);var pl={},em={get exports(){return pl},set exports(r){pl=r}};em.exports=Ol;pl.default=Ol;function Ol(r,t,e){e=e||2;var i=t&&t.length,n=i?t[0]*e:r.length,s=Rp(r,0,n,e,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,h,c,d,f;if(i&&(s=om(r,t,s,e)),r.length>80*e){a=u=r[0],l=h=r[1];for(var p=e;p<n;p+=e)c=r[p],d=r[p+1],c<a&&(a=c),d<l&&(l=d),c>u&&(u=c),d>h&&(h=d);f=Math.max(u-a,h-l),f=f!==0?32767/f:0}return wo(s,o,e,a,l,f,0),o}function Rp(r,t,e,i,n){var s,o;if(n===Uh(r,t,e,i)>0)for(s=t;s<e;s+=i)o=xd(s,r[s],r[s+1],o);else for(s=e-i;s>=t;s-=i)o=xd(s,r[s],r[s+1],o);return o&&Fl(o,o.next)&&(Io(o),o=o.next),o}function Bi(r,t){if(!r)return r;t||(t=r);var e=r,i;do if(i=!1,!e.steiner&&(Fl(e,e.next)||kt(e.prev,e,e.next)===0)){if(Io(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function wo(r,t,e,i,n,s,o){if(r){!o&&s&&cm(r,i,n,s);for(var a=r,l,u;r.prev!==r.next;){if(l=r.prev,u=r.next,s?im(r,i,n,s):rm(r)){t.push(l.i/e|0),t.push(r.i/e|0),t.push(u.i/e|0),Io(r),r=u.next,a=u.next;continue}if(r=u,r===a){o?o===1?(r=nm(Bi(r),t,e),wo(r,t,e,i,n,s,2)):o===2&&sm(r,t,e,i,n,s):wo(Bi(r),t,e,i,n,s,1);break}}}}function rm(r){var t=r.prev,e=r,i=r.next;if(kt(t,e,i)>=0)return!1;for(var n=t.x,s=e.x,o=i.x,a=t.y,l=e.y,u=i.y,h=n<s?n<o?n:o:s<o?s:o,c=a<l?a<u?a:u:l<u?l:u,d=n>s?n>o?n:o:s>o?s:o,f=a>l?a>u?a:u:l>u?l:u,p=i.next;p!==t;){if(p.x>=h&&p.x<=d&&p.y>=c&&p.y<=f&&bn(n,a,s,l,o,u,p.x,p.y)&&kt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function im(r,t,e,i){var n=r.prev,s=r,o=r.next;if(kt(n,s,o)>=0)return!1;for(var a=n.x,l=s.x,u=o.x,h=n.y,c=s.y,d=o.y,f=a<l?a<u?a:u:l<u?l:u,p=h<c?h<d?h:d:c<d?c:d,m=a>l?a>u?a:u:l>u?l:u,x=h>c?h>d?h:d:c>d?c:d,v=Mh(f,p,t,e,i),g=Mh(m,x,t,e,i),_=r.prevZ,y=r.nextZ;_&&_.z>=v&&y&&y.z<=g;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=x&&_!==n&&_!==o&&bn(a,h,l,c,u,d,_.x,_.y)&&kt(_.prev,_,_.next)>=0||(_=_.prevZ,y.x>=f&&y.x<=m&&y.y>=p&&y.y<=x&&y!==n&&y!==o&&bn(a,h,l,c,u,d,y.x,y.y)&&kt(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;_&&_.z>=v;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=x&&_!==n&&_!==o&&bn(a,h,l,c,u,d,_.x,_.y)&&kt(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;y&&y.z<=g;){if(y.x>=f&&y.x<=m&&y.y>=p&&y.y<=x&&y!==n&&y!==o&&bn(a,h,l,c,u,d,y.x,y.y)&&kt(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function nm(r,t,e){var i=r;do{var n=i.prev,s=i.next.next;!Fl(n,s)&&Ip(n,i,i.next,s)&&Ro(n,s)&&Ro(s,n)&&(t.push(n.i/e|0),t.push(i.i/e|0),t.push(s.i/e|0),Io(i),Io(i.next),i=r=s),i=i.next}while(i!==r);return Bi(i)}function sm(r,t,e,i,n,s){var o=r;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&pm(o,a)){var l=Pp(o,a);o=Bi(o,o.next),l=Bi(l,l.next),wo(o,t,e,i,n,s,0),wo(l,t,e,i,n,s,0);return}a=a.next}o=o.next}while(o!==r)}function om(r,t,e,i){var n=[],s,o,a,l,u;for(s=0,o=t.length;s<o;s++)a=t[s]*i,l=s<o-1?t[s+1]*i:r.length,u=Rp(r,a,l,i,!1),u===u.next&&(u.steiner=!0),n.push(fm(u));for(n.sort(am),s=0;s<n.length;s++)e=lm(n[s],e);return e}function am(r,t){return r.x-t.x}function lm(r,t){var e=um(r,t);if(!e)return t;var i=Pp(e,r);return Bi(i,i.next),Bi(e,e.next)}function um(r,t){var e=t,i=r.x,n=r.y,s=-1/0,o;do{if(n<=e.y&&n>=e.next.y&&e.next.y!==e.y){var a=e.x+(n-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=i&&a>s&&(s=a,o=e.x<e.next.x?e:e.next,a===i))return o}e=e.next}while(e!==t);if(!o)return null;var l=o,u=o.x,h=o.y,c=1/0,d;e=o;do i>=e.x&&e.x>=u&&i!==e.x&&bn(n<h?i:s,n,u,h,n<h?s:i,n,e.x,e.y)&&(d=Math.abs(n-e.y)/(i-e.x),Ro(e,r)&&(d<c||d===c&&(e.x>o.x||e.x===o.x&&hm(o,e)))&&(o=e,c=d)),e=e.next;while(e!==l);return o}function hm(r,t){return kt(r.prev,r,t.prev)<0&&kt(t.next,r,r.next)<0}function cm(r,t,e,i){var n=r;do n.z===0&&(n.z=Mh(n.x,n.y,t,e,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==r);n.prevZ.nextZ=null,n.prevZ=null,dm(n)}function dm(r){var t,e,i,n,s,o,a,l,u=1;do{for(e=r,r=null,s=null,o=0;e;){for(o++,i=e,a=0,t=0;t<u&&(a++,i=i.nextZ,!!i);t++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||e.z<=i.z)?(n=e,e=e.nextZ,a--):(n=i,i=i.nextZ,l--),s?s.nextZ=n:r=n,n.prevZ=s,s=n;e=i}s.nextZ=null,u*=2}while(o>1);return r}function Mh(r,t,e,i,n){return r=(r-e)*n|0,t=(t-i)*n|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function fm(r){var t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function bn(r,t,e,i,n,s,o,a){return(n-o)*(t-a)>=(r-o)*(s-a)&&(r-o)*(i-a)>=(e-o)*(t-a)&&(e-o)*(s-a)>=(n-o)*(i-a)}function pm(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!xm(r,t)&&(Ro(r,t)&&Ro(t,r)&&_m(r,t)&&(kt(r.prev,r,t.prev)||kt(r,t.prev,t))||Fl(r,t)&&kt(r.prev,r,r.next)>0&&kt(t.prev,t,t.next)>0)}function kt(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function Fl(r,t){return r.x===t.x&&r.y===t.y}function Ip(r,t,e,i){var n=Oa(kt(r,t,e)),s=Oa(kt(r,t,i)),o=Oa(kt(e,i,r)),a=Oa(kt(e,i,t));return!!(n!==s&&o!==a||n===0&&Da(r,e,t)||s===0&&Da(r,i,t)||o===0&&Da(e,r,i)||a===0&&Da(e,t,i))}function Da(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function Oa(r){return r>0?1:r<0?-1:0}function xm(r,t){var e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&Ip(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function Ro(r,t){return kt(r.prev,r,r.next)<0?kt(r,t,r.next)>=0&&kt(r,r.prev,t)>=0:kt(r,t,r.prev)<0||kt(r,r.next,t)<0}function _m(r,t){var e=r,i=!1,n=(r.x+t.x)/2,s=(r.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&n<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==r);return i}function Pp(r,t){var e=new kh(r.i,r.x,r.y),i=new kh(t.i,t.x,t.y),n=r.next,s=t.prev;return r.next=t,t.prev=r,e.next=n,n.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function xd(r,t,e,i){var n=new kh(r,t,e);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Io(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function kh(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Ol.deviation=function(r,t,e,i){var n=t&&t.length,s=n?t[0]*e:r.length,o=Math.abs(Uh(r,0,s,e));if(n)for(var a=0,l=t.length;a<l;a++){var u=t[a]*e,h=a<l-1?t[a+1]*e:r.length;o-=Math.abs(Uh(r,u,h,e))}var c=0;for(a=0;a<i.length;a+=3){var d=i[a]*e,f=i[a+1]*e,p=i[a+2]*e;c+=Math.abs((r[d]-r[p])*(r[f+1]-r[d+1])-(r[d]-r[f])*(r[p+1]-r[d+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function Uh(r,t,e,i){for(var n=0,s=t,o=e-i;s<e;s+=i)n+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return n}Ol.flatten=function(r){for(var t=r[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,n=0;n<r.length;n++){for(var s=0;s<r[n].length;s++)for(var o=0;o<t;o++)e.vertices.push(r[n][s][o]);n>0&&(i+=r[n-1].length,e.holes.push(i))}return e};var xl={},mm={get exports(){return xl},set exports(r){xl=r}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(r,t){(function(e){var i=t&&!t.nodeType&&t,n=r&&!r.nodeType&&r,s=typeof S=="object"&&S;(s.global===s||s.window===s||s.self===s)&&(e=s);var o,a=2147483647,l=36,u=1,h=26,c=38,d=700,f=72,p=128,m="-",x=/^xn--/,v=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=l-u,A=Math.floor,T=String.fromCharCode,b;function E(Y){throw RangeError(_[Y])}function N(Y,Q){for(var Et=Y.length,C=[];Et--;)C[Et]=Q(Y[Et]);return C}function D(Y,Q){var Et=Y.split("@"),C="";Et.length>1&&(C=Et[0]+"@",Y=Et[1]),Y=Y.replace(g,".");var R=Y.split("."),I=N(R,Q).join(".");return C+I}function P(Y){for(var Q=[],Et=0,C=Y.length,R,I;Et<C;)R=Y.charCodeAt(Et++),R>=55296&&R<=56319&&Et<C?(I=Y.charCodeAt(Et++),(I&64512)==56320?Q.push(((R&1023)<<10)+(I&1023)+65536):(Q.push(R),Et--)):Q.push(R);return Q}function B(Y){return N(Y,function(Q){var Et="";return Q>65535&&(Q-=65536,Et+=T(Q>>>10&1023|55296),Q=56320|Q&1023),Et+=T(Q),Et}).join("")}function M(Y){return Y-48<10?Y-22:Y-65<26?Y-65:Y-97<26?Y-97:l}function H(Y,Q){return Y+22+75*(Y<26)-((Q!=0)<<5)}function Z(Y,Q,Et){var C=0;for(Y=Et?A(Y/d):Y>>1,Y+=A(Y/Q);Y>y*h>>1;C+=l)Y=A(Y/y);return A(C+(y+1)*Y/(Y+c))}function at(Y){var Q=[],Et=Y.length,C,R=0,I=p,k=f,U,L,$,tt,K,q,F,O,G;for(U=Y.lastIndexOf(m),U<0&&(U=0),L=0;L<U;++L)Y.charCodeAt(L)>=128&&E("not-basic"),Q.push(Y.charCodeAt(L));for($=U>0?U+1:0;$<Et;){for(tt=R,K=1,q=l;$>=Et&&E("invalid-input"),F=M(Y.charCodeAt($++)),(F>=l||F>A((a-R)/K))&&E("overflow"),R+=F*K,O=q<=k?u:q>=k+h?h:q-k,!(F<O);q+=l)G=l-O,K>A(a/G)&&E("overflow"),K*=G;C=Q.length+1,k=Z(R-tt,C,tt==0),A(R/C)>a-I&&E("overflow"),I+=A(R/C),R%=C,Q.splice(R++,0,I)}return B(Q)}function nt(Y){var Q,Et,C,R,I,k,U,L,$,tt,K,q=[],F,O,G,V;for(Y=P(Y),F=Y.length,Q=p,Et=0,I=f,k=0;k<F;++k)K=Y[k],K<128&&q.push(T(K));for(C=R=q.length,R&&q.push(m);C<F;){for(U=a,k=0;k<F;++k)K=Y[k],K>=Q&&K<U&&(U=K);for(O=C+1,U-Q>A((a-Et)/O)&&E("overflow"),Et+=(U-Q)*O,Q=U,k=0;k<F;++k)if(K=Y[k],K<Q&&++Et>a&&E("overflow"),K==Q){for(L=Et,$=l;tt=$<=I?u:$>=I+h?h:$-I,!(L<tt);$+=l)V=L-tt,G=l-tt,q.push(T(H(tt+V%G,0))),L=A(V/G);q.push(T(H(L,0))),I=Z(Et,O,C==R),Et=0,++C}++Et,++Q}return q.join("")}function ut(Y){return D(Y,function(Q){return x.test(Q)?at(Q.slice(4).toLowerCase()):Q})}function Rt(Y){return D(Y,function(Q){return v.test(Q)?"xn--"+nt(Q):Q})}if(o={version:"1.3.2",ucs2:{decode:P,encode:B},decode:at,encode:nt,toASCII:Rt,toUnicode:ut},i&&n)if(r.exports==i)n.exports=o;else for(b in o)o.hasOwnProperty(b)&&(i[b]=o[b]);else e.punycode=o})(S)})(mm,xl);var gm={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}},Po={};function vm(r,t){return Object.prototype.hasOwnProperty.call(r,t)}var ym=function(r,t,e,i){t=t||"&",e=e||"=";var n={};if(typeof r!="string"||r.length===0)return n;var s=/\+/g;r=r.split(t);var o=1e3;i&&typeof i.maxKeys=="number"&&(o=i.maxKeys);var a=r.length;o>0&&a>o&&(a=o);for(var l=0;l<a;++l){var u=r[l].replace(s,"%20"),h=u.indexOf(e),c,d,f,p;h>=0?(c=u.substr(0,h),d=u.substr(h+1)):(c=u,d=""),f=decodeURIComponent(c),p=decodeURIComponent(d),vm(n,f)?Array.isArray(n[f])?n[f].push(p):n[f]=[n[f],p]:n[f]=p}return n},fs=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}},Tm=function(r,t,e,i){return t=t||"&",e=e||"=",r===null&&(r=void 0),typeof r=="object"?Object.keys(r).map(function(n){var s=encodeURIComponent(fs(n))+e;return Array.isArray(r[n])?r[n].map(function(o){return s+encodeURIComponent(fs(o))}).join(t):s+encodeURIComponent(fs(r[n]))}).join(t):i?encodeURIComponent(fs(i))+e+encodeURIComponent(fs(r)):""};Po.decode=Po.parse=ym;Po.encode=Po.stringify=Tm;var Em=xl,cr=gm,Am=Ll,Sm=Lm,bm=Fm;function Ye(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Cm=/^([a-z0-9.+-]+:)/i,Nm=/:[0-9]*$/,wm=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Rm=["<",">",'"',"`"," ","\r",`
`,"	"],Im=["{","}","|","\\","^","`"].concat(Rm),Hh=["'"].concat(Im),_d=["%","/","?",";","#"].concat(Hh),md=["/","?","#"],Pm=255,gd=/^[+a-z0-9A-Z_-]{0,63}$/,Dm=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Om={javascript:!0,"javascript:":!0},jh={javascript:!0,"javascript:":!0},On={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Gh=Po;function Ll(r,t,e){if(r&&cr.isObject(r)&&r instanceof Ye)return r;var i=new Ye;return i.parse(r,t,e),i}Ye.prototype.parse=function(r,t,e){if(!cr.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),n=i!==-1&&i<r.indexOf("#")?"?":"#",s=r.split(n),o=/\\/g;s[0]=s[0].replace(o,"/"),r=s.join(n);var a=r;if(a=a.trim(),!e&&r.split("#").length===1){var l=wm.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=Gh.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=Cm.exec(a);if(u){u=u[0];var h=u.toLowerCase();this.protocol=h,a=a.substr(u.length)}if(e||u||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c=a.substr(0,2)==="//";c&&!(u&&jh[u])&&(a=a.substr(2),this.slashes=!0)}if(!jh[u]&&(c||u&&!On[u])){for(var d=-1,f=0;f<md.length;f++){var p=a.indexOf(md[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var m,x;d===-1?x=a.lastIndexOf("@"):x=a.lastIndexOf("@",d),x!==-1&&(m=a.slice(0,x),a=a.slice(x+1),this.auth=decodeURIComponent(m)),d=-1;for(var f=0;f<_d.length;f++){var p=a.indexOf(_d[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var g=this.hostname.split(/\./),f=0,_=g.length;f<_;f++){var y=g[f];if(y&&!y.match(gd)){for(var A="",T=0,b=y.length;T<b;T++)y.charCodeAt(T)>127?A+="x":A+=y[T];if(!A.match(gd)){var E=g.slice(0,f),N=g.slice(f+1),D=y.match(Dm);D&&(E.push(D[1]),N.unshift(D[2])),N.length&&(a="/"+N.join(".")+a),this.hostname=E.join(".");break}}}this.hostname.length>Pm?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=Em.toASCII(this.hostname));var P=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+P,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!Om[h])for(var f=0,_=Hh.length;f<_;f++){var M=Hh[f];if(a.indexOf(M)!==-1){var H=encodeURIComponent(M);H===M&&(H=escape(M)),a=a.split(M).join(H)}}var Z=a.indexOf("#");Z!==-1&&(this.hash=a.substr(Z),a=a.slice(0,Z));var at=a.indexOf("?");if(at!==-1?(this.search=a.substr(at),this.query=a.substr(at+1),t&&(this.query=Gh.parse(this.query)),a=a.slice(0,at)):t&&(this.search="",this.query={}),a&&(this.pathname=a),On[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",nt=this.search||"";this.path=P+nt}return this.href=this.format(),this};function Fm(r){return cr.isString(r)&&(r=Ll(r)),r instanceof Ye?r.format():Ye.prototype.format.call(r)}Ye.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var t=this.protocol||"",e=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=r+this.host:this.hostname&&(n=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&cr.isObject(this.query)&&Object.keys(this.query).length&&(s=Gh.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||On[t])&&n!==!1?(n="//"+(n||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),e=e.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+n+e+o+i};function Lm(r,t){return Ll(r,!1,!0).resolve(t)}Ye.prototype.resolve=function(r){return this.resolveObject(Ll(r,!1,!0)).format()};Ye.prototype.resolveObject=function(r){if(cr.isString(r)){var t=new Ye;t.parse(r,!1,!0),r=t}for(var e=new Ye,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];e[s]=this[s]}if(e.hash=r.hash,r.href==="")return e.href=e.format(),e;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(e[l]=r[l])}return On[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(r.protocol&&r.protocol!==e.protocol){if(!On[r.protocol]){for(var u=Object.keys(r),h=0;h<u.length;h++){var c=u[h];e[c]=r[c]}return e.href=e.format(),e}if(e.protocol=r.protocol,!r.host&&!jh[r.protocol]){for(var _=(r.pathname||"").split("/");_.length&&!(r.host=_.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),e.pathname=_.join("/")}else e.pathname=r.pathname;if(e.search=r.search,e.query=r.query,e.host=r.host||"",e.auth=r.auth,e.hostname=r.hostname||r.host,e.port=r.port,e.pathname||e.search){var d=e.pathname||"",f=e.search||"";e.path=d+f}return e.slashes=e.slashes||r.slashes,e.href=e.format(),e}var p=e.pathname&&e.pathname.charAt(0)==="/",m=r.host||r.pathname&&r.pathname.charAt(0)==="/",x=m||p||e.host&&r.pathname,v=x,g=e.pathname&&e.pathname.split("/")||[],_=r.pathname&&r.pathname.split("/")||[],y=e.protocol&&!On[e.protocol];if(y&&(e.hostname="",e.port=null,e.host&&(g[0]===""?g[0]=e.host:g.unshift(e.host)),e.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(_[0]===""?_[0]=r.host:_.unshift(r.host)),r.host=null),x=x&&(_[0]===""||g[0]==="")),m)e.host=r.host||r.host===""?r.host:e.host,e.hostname=r.hostname||r.hostname===""?r.hostname:e.hostname,e.search=r.search,e.query=r.query,g=_;else if(_.length)g||(g=[]),g.pop(),g=g.concat(_),e.search=r.search,e.query=r.query;else if(!cr.isNullOrUndefined(r.search)){if(y){e.hostname=e.host=g.shift();var A=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;A&&(e.auth=A.shift(),e.host=e.hostname=A.shift())}return e.search=r.search,e.query=r.query,(!cr.isNull(e.pathname)||!cr.isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!g.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var T=g.slice(-1)[0],b=(e.host||r.host||g.length>1)&&(T==="."||T==="..")||T==="",E=0,N=g.length;N>=0;N--)T=g[N],T==="."?g.splice(N,1):T===".."?(g.splice(N,1),E++):E&&(g.splice(N,1),E--);if(!x&&!v)for(;E--;E)g.unshift("..");x&&g[0]!==""&&(!g[0]||g[0].charAt(0)!=="/")&&g.unshift(""),b&&g.join("/").substr(-1)!=="/"&&g.push("");var D=g[0]===""||g[0]&&g[0].charAt(0)==="/";if(y){e.hostname=e.host=D?"":g.length?g.shift():"";var A=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;A&&(e.auth=A.shift(),e.host=e.hostname=A.shift())}return x=x||e.host&&g.length,x&&!D&&g.unshift(""),g.length?e.pathname=g.join("/"):(e.pathname=null,e.path=null),(!cr.isNull(e.pathname)||!cr.isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=r.auth||e.auth,e.slashes=e.slashes||r.slashes,e.href=e.format(),e};Ye.prototype.parseHost=function(){var r=this.host,t=Nm.exec(r);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)};const Bm={parse:Am,format:bm,resolve:Sm};function He(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function ps(r){return r.split("?")[0].split("#")[0]}function Mm(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function km(r,t,e){return r.replace(new RegExp(Mm(t),"g"),e)}function Um(r,t){let e="",i=0,n=-1,s=0,o=-1;for(let a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(n===a-1||s===1))if(n!==a-1&&s===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",i=0):(e=e.slice(0,l),i=e.length-1-e.lastIndexOf("/")),n=a,s=0;continue}}else if(e.length===2||e.length===1){e="",i=0,n=a,s=0;continue}}t&&(e.length>0?e+="/..":e="..",i=2)}else e.length>0?e+=`/${r.slice(n+1,a)}`:e=r.slice(n+1,a),i=a-n-1;n=a,s=0}else o===46&&s!==-1?++s:s=-1}return e}const le={toPosix(r){return km(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},hasProtocol(r){return/^[^/:]+:\//.test(this.toPosix(r))},getProtocol(r){He(r),r=this.toPosix(r);let t="";const e=/^file:\/\/\//.exec(r),i=/^[^/:]+:\/\//.exec(r),n=/^[^/:]+:\//.exec(r);if(e||i||n){const s=(e==null?void 0:e[0])||(i==null?void 0:i[0])||(n==null?void 0:n[0]);t=s,r=r.slice(s.length)}return t},toAbsolute(r,t,e){if(this.isDataUrl(r))return r;const i=ps(this.toPosix(t??lt.ADAPTER.getBaseUrl())),n=ps(this.toPosix(e??this.rootname(i)));return He(r),r=this.toPosix(r),r.startsWith("/")?le.join(n,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(r=this.toPosix(r),He(r),r.length===0)return".";let t="";const e=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));const i=r.endsWith("/");return r=Um(r,!1),r.length>0&&i&&(r+="/"),e?`/${r}`:t+r},isAbsolute(r){return He(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let t;for(let e=0;e<r.length;++e){const i=r[e];if(He(i),i.length>0)if(t===void 0)t=i;else{const n=r[e-1]??"";this.extname(n)?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(He(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0);const e=t===47;let i=-1,n=!0;const s=this.getProtocol(r),o=r;r=r.slice(s.length);for(let a=r.length-1;a>=1;--a)if(t=r.charCodeAt(a),t===47){if(!n){i=a;break}}else n=!1;return i===-1?e?"/":this.isUrl(o)?s+r:s:e&&i===1?"//":s+r.slice(0,i)},rootname(r){He(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){const e=r.indexOf("/",t.length);e!==-1?t=r.slice(0,e):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){He(r),t&&He(t),r=ps(this.toPosix(r));let e=0,i=-1,n=!0,s;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let o=t.length-1,a=-1;for(s=r.length-1;s>=0;--s){const l=r.charCodeAt(s);if(l===47){if(!n){e=s+1;break}}else a===-1&&(n=!1,a=s+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return e===i?i=a:i===-1&&(i=r.length),r.slice(e,i)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!n){e=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":r.slice(e,i)},extname(r){He(r),r=ps(this.toPosix(r));let t=-1,e=0,i=-1,n=!0,s=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===47){if(!n){e=o+1;break}continue}i===-1&&(n=!1,i=o+1),a===46?t===-1?t=o:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===e+1?"":r.slice(t,i)},parse(r){He(r);const t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=ps(this.toPosix(r));let e=r.charCodeAt(0);const i=this.isAbsolute(r);let n;t.root=this.rootname(r),i||this.hasProtocol(r)?n=1:n=0;let s=-1,o=0,a=-1,l=!0,u=r.length-1,h=0;for(;u>=n;--u){if(e=r.charCodeAt(u),e===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),e===46?s===-1?s=u:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&i?t.base=t.name=r.slice(1,a):t.base=t.name=r.slice(o,a)):(o===0&&i?(t.name=r.slice(1,s),t.base=r.slice(1,a)):(t.name=r.slice(o,s),t.base=r.slice(o,a)),t.ext=r.slice(s,a)),t.dir=this.dirname(r),t},sep:"/",delimiter:":"},vd={};function Dt(r,t,e=3){if(vd[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`),console.warn(i))),vd[t]=!0}let zu;function Hm(){return typeof zu>"u"&&(zu=function(){var e;const t={stencil:!0,failIfMajorPerformanceCaveat:lt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!lt.ADAPTER.getWebGLRenderingContext())return!1;const i=lt.ADAPTER.createCanvas();let n=i.getContext("webgl",t)||i.getContext("experimental-webgl",t);const s=!!((e=n==null?void 0:n.getContextAttributes())!=null&&e.stencil);if(n){const o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,s}catch{return!1}}()),zu}var jm="#f0f8ff",Gm="#faebd7",$m="#00ffff",zm="#7fffd4",Xm="#f0ffff",Vm="#f5f5dc",Wm="#ffe4c4",qm="#000000",Ym="#ffebcd",Km="#0000ff",Zm="#8a2be2",Qm="#a52a2a",Jm="#deb887",tg="#5f9ea0",eg="#7fff00",rg="#d2691e",ig="#ff7f50",ng="#6495ed",sg="#fff8dc",og="#dc143c",ag="#00ffff",lg="#00008b",ug="#008b8b",hg="#b8860b",cg="#a9a9a9",dg="#006400",fg="#a9a9a9",pg="#bdb76b",xg="#8b008b",_g="#556b2f",mg="#ff8c00",gg="#9932cc",vg="#8b0000",yg="#e9967a",Tg="#8fbc8f",Eg="#483d8b",Ag="#2f4f4f",Sg="#2f4f4f",bg="#00ced1",Cg="#9400d3",Ng="#ff1493",wg="#00bfff",Rg="#696969",Ig="#696969",Pg="#1e90ff",Dg="#b22222",Og="#fffaf0",Fg="#228b22",Lg="#ff00ff",Bg="#dcdcdc",Mg="#f8f8ff",kg="#daa520",Ug="#ffd700",Hg="#808080",jg="#008000",Gg="#adff2f",$g="#808080",zg="#f0fff0",Xg="#ff69b4",Vg="#cd5c5c",Wg="#4b0082",qg="#fffff0",Yg="#f0e68c",Kg="#fff0f5",Zg="#e6e6fa",Qg="#7cfc00",Jg="#fffacd",tv="#add8e6",ev="#f08080",rv="#e0ffff",iv="#fafad2",nv="#d3d3d3",sv="#90ee90",ov="#d3d3d3",av="#ffb6c1",lv="#ffa07a",uv="#20b2aa",hv="#87cefa",cv="#778899",dv="#778899",fv="#b0c4de",pv="#ffffe0",xv="#00ff00",_v="#32cd32",mv="#faf0e6",gv="#ff00ff",vv="#800000",yv="#66cdaa",Tv="#0000cd",Ev="#ba55d3",Av="#9370db",Sv="#3cb371",bv="#7b68ee",Cv="#00fa9a",Nv="#48d1cc",wv="#c71585",Rv="#191970",Iv="#f5fffa",Pv="#ffe4e1",Dv="#ffe4b5",Ov="#ffdead",Fv="#000080",Lv="#fdf5e6",Bv="#808000",Mv="#6b8e23",kv="#ffa500",Uv="#ff4500",Hv="#da70d6",jv="#eee8aa",Gv="#98fb98",$v="#afeeee",zv="#db7093",Xv="#ffefd5",Vv="#ffdab9",Wv="#cd853f",qv="#ffc0cb",Yv="#dda0dd",Kv="#b0e0e6",Zv="#800080",Qv="#663399",Jv="#ff0000",ty="#bc8f8f",ey="#4169e1",ry="#8b4513",iy="#fa8072",ny="#f4a460",sy="#2e8b57",oy="#fff5ee",ay="#a0522d",ly="#c0c0c0",uy="#87ceeb",hy="#6a5acd",cy="#708090",dy="#708090",fy="#fffafa",py="#00ff7f",xy="#4682b4",_y="#d2b48c",my="#008080",gy="#d8bfd8",vy="#ff6347",yy="#40e0d0",Ty="#ee82ee",Ey="#f5deb3",Ay="#ffffff",Sy="#f5f5f5",by="#ffff00",Cy="#9acd32",Ny={aliceblue:jm,antiquewhite:Gm,aqua:$m,aquamarine:zm,azure:Xm,beige:Vm,bisque:Wm,black:qm,blanchedalmond:Ym,blue:Km,blueviolet:Zm,brown:Qm,burlywood:Jm,cadetblue:tg,chartreuse:eg,chocolate:rg,coral:ig,cornflowerblue:ng,cornsilk:sg,crimson:og,cyan:ag,darkblue:lg,darkcyan:ug,darkgoldenrod:hg,darkgray:cg,darkgreen:dg,darkgrey:fg,darkkhaki:pg,darkmagenta:xg,darkolivegreen:_g,darkorange:mg,darkorchid:gg,darkred:vg,darksalmon:yg,darkseagreen:Tg,darkslateblue:Eg,darkslategray:Ag,darkslategrey:Sg,darkturquoise:bg,darkviolet:Cg,deeppink:Ng,deepskyblue:wg,dimgray:Rg,dimgrey:Ig,dodgerblue:Pg,firebrick:Dg,floralwhite:Og,forestgreen:Fg,fuchsia:Lg,gainsboro:Bg,ghostwhite:Mg,goldenrod:kg,gold:Ug,gray:Hg,green:jg,greenyellow:Gg,grey:$g,honeydew:zg,hotpink:Xg,indianred:Vg,indigo:Wg,ivory:qg,khaki:Yg,lavenderblush:Kg,lavender:Zg,lawngreen:Qg,lemonchiffon:Jg,lightblue:tv,lightcoral:ev,lightcyan:rv,lightgoldenrodyellow:iv,lightgray:nv,lightgreen:sv,lightgrey:ov,lightpink:av,lightsalmon:lv,lightseagreen:uv,lightskyblue:hv,lightslategray:cv,lightslategrey:dv,lightsteelblue:fv,lightyellow:pv,lime:xv,limegreen:_v,linen:mv,magenta:gv,maroon:vv,mediumaquamarine:yv,mediumblue:Tv,mediumorchid:Ev,mediumpurple:Av,mediumseagreen:Sv,mediumslateblue:bv,mediumspringgreen:Cv,mediumturquoise:Nv,mediumvioletred:wv,midnightblue:Rv,mintcream:Iv,mistyrose:Pv,moccasin:Dv,navajowhite:Ov,navy:Fv,oldlace:Lv,olive:Bv,olivedrab:Mv,orange:kv,orangered:Uv,orchid:Hv,palegoldenrod:jv,palegreen:Gv,paleturquoise:$v,palevioletred:zv,papayawhip:Xv,peachpuff:Vv,peru:Wv,pink:qv,plum:Yv,powderblue:Kv,purple:Zv,rebeccapurple:Qv,red:Jv,rosybrown:ty,royalblue:ey,saddlebrown:ry,salmon:iy,sandybrown:ny,seagreen:sy,seashell:oy,sienna:ay,silver:ly,skyblue:uy,slateblue:hy,slategray:cy,slategrey:dy,snow:fy,springgreen:py,steelblue:xy,tan:_y,teal:my,thistle:gy,tomato:vy,turquoise:yy,violet:Ty,wheat:Ey,white:Ay,whitesmoke:Sy,yellow:by,yellowgreen:Cy};function Do(r,t=[]){return t[0]=(r>>16&255)/255,t[1]=(r>>8&255)/255,t[2]=(r&255)/255,t}function Dp(r){let t=r.toString(16);return t="000000".substring(0,6-t.length)+t,`#${t}`}function Tc(r){if(typeof r=="string"&&(r=Ny[r.toLowerCase()]||r,r[0]==="#"&&(r=r.slice(1)),r.length===3)){const[t,e,i]=r;r=t+t+e+e+i+i}return parseInt(r,16)}function wy(){const r=[],t=[];for(let i=0;i<32;i++)r[i]=i,t[i]=i;r[Tt.NORMAL_NPM]=Tt.NORMAL,r[Tt.ADD_NPM]=Tt.ADD,r[Tt.SCREEN_NPM]=Tt.SCREEN,t[Tt.NORMAL]=Tt.NORMAL_NPM,t[Tt.ADD]=Tt.ADD_NPM,t[Tt.SCREEN]=Tt.SCREEN_NPM;const e=[];return e.push(t),e.push(r),e}const Op=wy();function Fp(r,t){return Op[t?1:0][r]}function Ry(r,t,e,i){return e=e||new Float32Array(4),i||i===void 0?(e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t):(e[0]=r[0],e[1]=r[1],e[2]=r[2]),e[3]=t,e}function Ec(r,t){if(t===1)return(t*255<<24)+r;if(t===0)return 0;let e=r>>16&255,i=r>>8&255,n=r&255;return e=e*t+.5|0,i=i*t+.5|0,n=n*t+.5|0,(t*255<<24)+(e<<16)+(i<<8)+n}function Lp(r,t,e,i){return e=e||new Float32Array(4),e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255,(i||i===void 0)&&(e[0]*=t,e[1]*=t,e[2]*=t),e[3]=t,e}function Iy(r,t=null){const e=r*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let i=0,n=0;i<e;i+=6,n+=4)t[i+0]=n+0,t[i+1]=n+1,t[i+2]=n+2,t[i+3]=n+0,t[i+4]=n+2,t[i+5]=n+3;return t}function Bp(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function _l(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function yd(r){return!(r&r-1)&&!!r}function Td(r){let t=(r>65535?1:0)<<4;r>>>=t;let e=(r>255?1:0)<<3;return r>>>=e,t|=e,e=(r>15?1:0)<<2,r>>>=e,t|=e,e=(r>3?1:0)<<1,r>>>=e,t|=e,t|r>>1}function Fn(r,t,e){const i=r.length;let n;if(t>=i||e===0)return;e=t+e>i?i-t:e;const s=i-e;for(n=t;n<s;++n)r[n]=r[n+e];r.length=s}function Cn(r){return r===0?0:r<0?-1:1}let Py=0;function Mi(){return++Py}const Mp=class{constructor(r,t,e,i){this.left=r,this.top=t,this.right=e,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let $h=Mp;$h.EMPTY=new Mp(0,0,0,0);const Ed={},ur=Object.create(null),Jr=Object.create(null);class Ad{constructor(t,e,i){this._canvas=lt.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||lt.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Sd(r,t,e){for(let i=0,n=4*e*t;i<t;++i,n+=4)if(r[n+3]!==0)return!1;return!0}function bd(r,t,e,i,n){const s=4*t;for(let o=i,a=i*s+4*e;o<=n;++o,a+=s)if(r[a+3]!==0)return!1;return!0}function Dy(r){const{width:t,height:e}=r,i=r.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const s=i.getImageData(0,0,t,e).data;let o=0,a=0,l=t-1,u=e-1;for(;a<e&&Sd(s,t,a);)++a;if(a===e)return $h.EMPTY;for(;Sd(s,t,u);)--u;for(;bd(s,t,o,a,u);)++o;for(;bd(s,t,l,a,u);)--l;return++l,++u,new $h(o,a,l,u)}function Oy(r){const t=Dy(r),{width:e,height:i}=t;let n=null;if(!t.isEmpty()){const s=r.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");n=s.getImageData(t.left,t.top,e,i)}return{width:e,height:i,data:n}}let Fa;function Fy(r,t=globalThis.location){if(r.startsWith("data:"))return"";t=t||globalThis.location,Fa||(Fa=document.createElement("a")),Fa.href=r;const e=Bm.parse(Fa.href),i=!e.port&&t.port===""||e.port===t.port;return e.hostname!==t.hostname||!i||e.protocol!==t.protocol?"anonymous":""}function li(r,t=1){var i;const e=(i=lt.RETINA_PREFIX)==null?void 0:i.exec(r);return e?parseFloat(e[1]):t}var ot=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(ot||{});const zh=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},Cd=(r,t)=>zh(r).priority??t,xt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(zh).forEach(t=>{t.type.forEach(e=>{var i,n;return(n=(i=this._removeHandlers)[e])==null?void 0:n.call(i,t)})}),this},add(...r){return r.map(zh).forEach(t=>{t.type.forEach(e=>{const i=this._addHandlers,n=this._queue;i[e]?i[e](t):(n[e]=n[e]||[],n[e].push(t))})}),this},handle(r,t,e){const i=this._addHandlers,n=this._removeHandlers;if(i[r]||n[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=t,n[r]=e;const s=this._queue;return s[r]&&(s[r].forEach(o=>t(o)),delete s[r]),this},handleByMap(r,t){return this.handle(r,e=>{t[e.name]=e.ref},e=>{delete t[e.name]})},handleByList(r,t,e=-1){return this.handle(r,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((n,s)=>Cd(s,e)-Cd(n,e)))},i=>{const n=t.indexOf(i.ref);n!==-1&&t.splice(n,1)})}};class Xh{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const Ly=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function By(r){let t="";for(let e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+=`if(test == ${e}.0){}`);return t}function My(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const i=Ly.replace(/%forloop%/gi,By(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}const Xu=0,Vu=1,Wu=2,qu=3,Yu=4,Ku=5;class zr{constructor(){this.data=0,this.blendMode=Tt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Xu)}set blend(t){!!(this.data&1<<Xu)!==t&&(this.data^=1<<Xu)}get offsets(){return!!(this.data&1<<Vu)}set offsets(t){!!(this.data&1<<Vu)!==t&&(this.data^=1<<Vu)}get culling(){return!!(this.data&1<<Wu)}set culling(t){!!(this.data&1<<Wu)!==t&&(this.data^=1<<Wu)}get depthTest(){return!!(this.data&1<<qu)}set depthTest(t){!!(this.data&1<<qu)!==t&&(this.data^=1<<qu)}get depthMask(){return!!(this.data&1<<Ku)}set depthMask(t){!!(this.data&1<<Ku)!==t&&(this.data^=1<<Ku)}get clockwiseFrontFace(){return!!(this.data&1<<Yu)}set clockwiseFrontFace(t){!!(this.data&1<<Yu)!==t&&(this.data^=1<<Yu)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==Tt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new zr;return t.depthTest=!1,t.blend=!0,t}}const Vh=[];function kp(r,t){if(!r)return null;let e="";if(typeof r=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(let i=Vh.length-1;i>=0;--i){const n=Vh[i];if(n.test&&n.test(r,e))return new n(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Ke{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,i,n,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:h}=this;this._aliasCount++;for(let c=0,d=h.length;c<d;c++)h[c][u](t,e,i,n,s,o,a,l);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Ke.prototype,{dispatch:{value:Ke.prototype.emit},run:{value:Ke.prototype.emit}});class Oo{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Ke("setRealSize"),this.onUpdate=new Ke("update"),this.onError=new Ke("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class Xo extends Oo{constructor(t,e){const{width:i,height:n}=e||{};if(!i||!n)throw new Error("BufferResource width or height invalid");super(i,n),this.data=t}upload(t,e,i){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Je.UNPACK);const s=e.realWidth,o=e.realHeight;return i.width===s&&i.height===o?n.texSubImage2D(e.target,0,0,0,s,o,e.format,i.type,this.data):(i.width=s,i.height=o,n.texImage2D(e.target,0,i.internalFormat,s,o,0,e.format,i.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const ky={scaleMode:fr.NEAREST,format:st.RGBA,alphaMode:Je.NPM},Tn=class extends Li{constructor(r=null,t=null){super(),t=Object.assign({},Tn.defaultOptions,t);const{alphaMode:e,mipmap:i,anisotropicLevel:n,scaleMode:s,width:o,height:a,wrapMode:l,format:u,type:h,target:c,resolution:d,resourceOptions:f}=t;r&&!(r instanceof Oo)&&(r=kp(r,f),r.internal=!0),this.resolution=d||lt.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=n,this._wrapMode=l,this._scaleMode=s,this.format=u,this.type=h,this.target=c,this.alphaMode=e,this.uid=Mi(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(r)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)}setStyle(r,t){let e;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,e=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,e=!0),e&&this.dirtyStyleId++,this}setSize(r,t,e){return e=e||this.resolution,this.setRealSize(r*e,t*e,e)}setRealSize(r,t,e){return this.resolution=e||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=yd(this.realWidth)&&yd(this.realHeight)}setResolution(r){const t=this.resolution;return t===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*t)/r,this.height=Math.round(this.height*t)/r,this.emit("update",this)),this._refreshPOT(),this)}setResource(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(r){this.emit("error",this,r)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Jr[this.cacheId],delete ur[this.cacheId],this.cacheId=null),this.dispose(),Tn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(r,t,e=lt.STRICT_TEXTURE_CACHE){const i=typeof r=="string";let n=null;if(i)n=r;else{if(!r._pixiId){const o=(t==null?void 0:t.pixiIdPrefix)||"pixiid";r._pixiId=`${o}_${Mi()}`}n=r._pixiId}let s=Jr[n];if(i&&e&&!s)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return s||(s=new Tn(r,t),s.cacheId=n,Tn.addToCache(s,n)),s}static fromBuffer(r,t,e,i){r=r||new Float32Array(t*e*4);const n=new Xo(r,{width:t,height:e}),s=r instanceof Float32Array?_t.FLOAT:_t.UNSIGNED_BYTE;return new Tn(n,Object.assign({},ky,i||{width:t,height:e,type:s}))}static addToCache(r,t){t&&(r.textureCacheIds.includes(t)||r.textureCacheIds.push(t),Jr[t]&&Jr[t]!==r&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),Jr[t]=r)}static removeFromCache(r){if(typeof r=="string"){const t=Jr[r];if(t){const e=t.textureCacheIds.indexOf(r);return e>-1&&t.textureCacheIds.splice(e,1),delete Jr[r],t}}else if(r!=null&&r.textureCacheIds){for(let t=0;t<r.textureCacheIds.length;++t)delete Jr[r.textureCacheIds[t]];return r.textureCacheIds.length=0,r}return null}};let At=Tn;At.defaultOptions={mipmap:mr.POW2,anisotropicLevel:0,scaleMode:fr.LINEAR,wrapMode:oi.CLAMP,alphaMode:Je.UNPACK,target:Dn.TEXTURE_2D,format:st.RGBA,type:_t.UNSIGNED_BYTE};At._globalBatch=0;class Wh{constructor(){this.texArray=null,this.blend=0,this.type=dr.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Uy=0;class zt{constructor(t,e=!0,i=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=Uy++,this.disposeRunner=new Ke("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?pr.ELEMENT_ARRAY_BUFFER:pr.ARRAY_BUFFER}get index(){return this.type===pr.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new zt(t)}}class ml{constructor(t,e=0,i=!1,n=_t.FLOAT,s,o,a,l=1){this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,e,i,n,s){return new ml(t,e,i,n,s)}}const Hy={Float32Array,Uint32Array,Int32Array,Uint8Array};function jy(r,t){let e=0,i=0;const n={};for(let l=0;l<r.length;l++)i+=t[l],e+=r[l].length;const s=new ArrayBuffer(e*4);let o=null,a=0;for(let l=0;l<r.length;l++){const u=t[l],h=r[l],c=Bp(h);n[c]||(n[c]=new Hy[c](s)),o=n[c];for(let d=0;d<h.length;d++){const f=(d/u|0)*i+a,p=d%u;o[f+p]=h[d]}a+=u}return new Float32Array(s)}const Nd={5126:4,5123:2,5121:1};let Gy=0;const $y={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class ui{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Gy++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ke("disposeGeometry"),this.refCount=0}addAttribute(t,e,i=0,n=!1,s,o,a,l=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof zt||(e instanceof Array&&(e=new Float32Array(e)),e=new zt(e));const u=t.split("|");if(u.length>1){for(let c=0;c<u.length;c++)this.addAttribute(u[c],e,i,n,s);return this}let h=this.buffers.indexOf(e);return h===-1&&(this.buffers.push(e),h=this.buffers.length-1),this.attributes[t]=new ml(h,i,n,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof zt||(t instanceof Array&&(t=new Uint16Array(t)),t=new zt(t)),t.type=pr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],i=new zt;let n;for(n in this.attributes){const s=this.attributes[n],o=this.buffers[s.buffer];t.push(o.data),e.push(s.size*Nd[s.type]/4),s.buffer=0}for(i.data=jy(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new ui;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new zt(this.buffers[e].data.slice(0));for(const e in this.attributes){const i=this.attributes[e];t.attributes[e]=new ml(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=pr.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new ui,i=[],n=[],s=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)n[l]=n[l]||0,n[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new $y[Bp(o.buffers[a].data)](n[a]),e.buffers[a]=new zt(i[a]);for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=pr.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,h=0;for(let c=0;c<o.buffers.length;c++)if(o.buffers[c]!==o.indexBuffer){h=c;break}for(const c in o.attributes){const d=o.attributes[c];(d.buffer|0)===h&&(l+=d.size*Nd[d.type]/4)}for(let c=0;c<t.length;c++){const d=t[c].indexBuffer.data;for(let f=0;f<d.length;f++)e.indexBuffer.data[f+u]+=a;a+=t[c].buffers[h].data.length/l,u+=d.length}}return e}}class Up extends ui{constructor(t=!1){super(),this._buffer=new zt(null,t,!1),this._indexBuffer=new zt(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,_t.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,_t.FLOAT).addAttribute("aColor",this._buffer,4,!0,_t.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,_t.FLOAT).addIndex(this._indexBuffer)}}const gl=Math.PI*2,zy=180/Math.PI,Xy=Math.PI/180;var se=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(se||{});class It{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new It(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const La=[new It,new It,new It,new It];class wt{constructor(t=0,e=0,i=0,n=0){this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=se.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new wt(0,0,0,0)}clone(){return new wt(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const E=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=E)return!1;const D=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>D}const i=this.left,n=this.right,s=this.top,o=this.bottom;if(n<=i||o<=s)return!1;const a=La[0].set(t.left,t.top),l=La[1].set(t.left,t.bottom),u=La[2].set(t.right,t.top),h=La[3].set(t.right,t.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const c=Math.sign(e.a*e.d-e.b*e.c);if(c===0||(e.apply(a,a),e.apply(l,l),e.apply(u,u),e.apply(h,h),Math.max(a.x,l.x,u.x,h.x)<=i||Math.min(a.x,l.x,u.x,h.x)>=n||Math.max(a.y,l.y,u.y,h.y)<=s||Math.min(a.y,l.y,u.y,h.y)>=o))return!1;const d=c*(l.y-a.y),f=c*(a.x-l.x),p=d*i+f*s,m=d*n+f*s,x=d*i+f*o,v=d*n+f*o;if(Math.max(p,m,x,v)<=d*a.x+f*a.y||Math.min(p,m,x,v)>=d*h.x+f*h.y)return!1;const g=c*(a.y-u.y),_=c*(u.x-a.x),y=g*i+_*s,A=g*n+_*s,T=g*i+_*o,b=g*n+_*o;return!(Math.max(y,A,T,b)<=g*a.x+_*a.y||Math.min(y,A,T,b)>=g*h.x+_*h.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Ac{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.radius=i,this.type=se.CIRC}clone(){return new Ac(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let n=this.x-t,s=this.y-e;return n*=n,s*=s,n+s<=i}getBounds(){return new wt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Sc{constructor(t=0,e=0,i=0,n=0){this.x=t,this.y=e,this.width=i,this.height=n,this.type=se.ELIP}clone(){return new Sc(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1}getBounds(){return new wt(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Ln{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let n=0,s=e.length;n<s;n++)i.push(e[n].x,e[n].y);e=i}this.points=e,this.type=se.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new Ln(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let i=!1;const n=this.points.length/2;for(let s=0,o=n-1;s<n;o=s++){const a=this.points[s*2],l=this.points[s*2+1],u=this.points[o*2],h=this.points[o*2+1];l>e!=h>e&&t<(u-a)*((e-l)/(h-l))+a&&(i=!i)}return i}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}}class bc{constructor(t=0,e=0,i=0,n=0,s=20){this.x=t,this.y=e,this.width=i,this.height=n,this.radius=s,this.type=se.RREC}clone(){return new bc(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let n=t-(this.x+i),s=e-(this.y+i);const o=i*i;if(n*n+s*s<=o||(n=t-(this.x+this.width-i),n*n+s*s<=o)||(s=e-(this.y+this.height-i),n*n+s*s<=o)||(n=t-(this.x+i),n*n+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class Bt{constructor(t=1,e=0,i=0,n=1,s=0,o=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,n,s,o){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new It;const i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e}applyInverse(t,e){e=e||new It;const i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,o=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this}append(t){const e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this}setTransform(t,e,i,n,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,n=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-n,s),l=Math.atan2(i,e),u=Math.abs(a+l);return u<1e-5||Math.abs(gl-u)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*i+o.y*s),t}invert(){const t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,o=t*n-e*i;return this.a=n/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*s)/o,this.ty=-(t*this.ty-e*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Bt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Bt}static get TEMP_MATRIX(){return new Bt}}const Ci=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ni=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],wi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ri=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],qh=[],Hp=[],Ba=Math.sign;function Vy(){for(let r=0;r<16;r++){const t=[];qh.push(t);for(let e=0;e<16;e++){const i=Ba(Ci[r]*Ci[e]+wi[r]*Ni[e]),n=Ba(Ni[r]*Ci[e]+Ri[r]*Ni[e]),s=Ba(Ci[r]*wi[e]+wi[r]*Ri[e]),o=Ba(Ni[r]*wi[e]+Ri[r]*Ri[e]);for(let a=0;a<16;a++)if(Ci[a]===i&&Ni[a]===n&&wi[a]===s&&Ri[a]===o){t.push(a);break}}}for(let r=0;r<16;r++){const t=new Bt;t.set(Ci[r],Ni[r],wi[r],Ri[r],0,0),Hp.push(t)}}Vy();const Mt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Ci[r],uY:r=>Ni[r],vX:r=>wi[r],vY:r=>Ri[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>qh[r][t],sub:(r,t)=>qh[r][Mt.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?Mt.S:Mt.N:Math.abs(t)*2<=Math.abs(r)?r>0?Mt.E:Mt.W:t>0?r>0?Mt.SE:Mt.SW:r>0?Mt.NE:Mt.NW,matrixAppendRotationInv:(r,t,e=0,i=0)=>{const n=Hp[Mt.inv(t)];n.tx=e,n.ty=i,r.append(n)}};class ni{constructor(t,e,i=0,n=0){this._x=i,this._y=n,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new ni(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=${0} y=${0} scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const jp=class{constructor(){this.worldTransform=new Bt,this.localTransform=new Bt,this.position=new ni(this.onChange,this,0,0),this.scale=new ni(this.onChange,this,1,1),this.pivot=new ni(this.onChange,this,0,0),this.skew=new ni(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const e=r.worldTransform,i=this.worldTransform;i.a=t.a*e.a+t.b*e.c,i.b=t.a*e.b+t.b*e.d,i.c=t.c*e.a+t.d*e.c,i.d=t.c*e.b+t.d*e.d,i.tx=t.tx*e.a+t.ty*e.c+e.tx,i.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};let Cc=jp;Cc.IDENTITY=new jp;var Wy=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,qy=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function wd(r,t,e){const i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function Zu(r){const t=new Array(r);for(let e=0;e<t.length;e++)t[e]=!1;return t}function Gp(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Zu(2*t);case"bvec3":return Zu(3*t);case"bvec4":return Zu(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Bn=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,t)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(t==null||t.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,t)=>r.type==="mat3"&&r.size===1&&!r.isArray&&t.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,t)=>r.type==="vec2"&&r.size===1&&!r.isArray&&t.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],Yy={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},Ky={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Zy(r,t){var i;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in r.uniforms){const s=t[n];if(!s){(i=r.uniforms[n])!=null&&i.group&&(r.uniforms[n].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=r.uniforms[n];let a=!1;for(let l=0;l<Bn.length;l++)if(Bn[l].test(s,o)){e.push(Bn[l].code(n,o)),a=!0;break}if(!a){const u=(s.size===1&&!s.isArray?Yy:Ky)[s.type].replace("location",`ud["${n}"].location`);e.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${u};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const $p={};let gn=$p;function Qy(){if(gn===$p||gn!=null&&gn.isContextLost()){const r=lt.ADAPTER.createCanvas();let t;lt.PREFER_ENV>=tn.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),gn=t}return gn}let Ma;function Jy(){if(!Ma){Ma=Be.MEDIUM;const r=Qy();r&&r.getShaderPrecisionFormat&&(Ma=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?Be.HIGH:Be.MEDIUM)}return Ma}function Rd(r,t){const e=r.getShaderSource(t).split(`
`).map((u,h)=>`${h}: ${u}`),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},o=n.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!s[u]?(s[u]=!0,!0):!1),a=[""];o.forEach(u=>{e[u-1]=`%c${e[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=e.join(`
`);a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function tT(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||Rd(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||Rd(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}const eT={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function zp(r){return eT[r]}let ka=null;const Id={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Xp(r,t){if(!ka){const e=Object.keys(Id);ka={};for(let i=0;i<e.length;++i){const n=e[i];ka[r[n]]=Id[n]}}return ka[t]}function Pd(r,t,e){if(r.substring(0,9)!=="precision"){let i=t;return t===Be.HIGH&&e!==Be.HIGH&&(i=Be.MEDIUM),`precision ${i} float;
${r}`}else if(e!==Be.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let xs;function rT(){if(typeof xs=="boolean")return xs;try{xs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{xs=!1}return xs}let iT=0;const Ua={},En=class{constructor(r,t,e="pixi-shader",i={}){this.extra={},this.id=iT++,this.vertexSrc=r||En.defaultVertexSrc,this.fragmentSrc=t||En.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(e=e.replace(/\s+/g,"-"),Ua[e]?(Ua[e]++,e+=`-${Ua[e]}`):Ua[e]=1,this.vertexSrc=`#define SHADER_NAME ${e}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${e}
${this.fragmentSrc}`,this.vertexSrc=Pd(this.vertexSrc,En.defaultVertexPrecision,Be.HIGH),this.fragmentSrc=Pd(this.fragmentSrc,En.defaultFragmentPrecision,Jy())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return qy}static get defaultFragmentSrc(){return Wy}static from(r,t,e){const i=r+t;let n=Ed[i];return n||(Ed[i]=n=new En(r,t,e)),n}};let qe=En;qe.defaultVertexPrecision=Be.HIGH;qe.defaultFragmentPrecision=Lr.apple.device?Be.HIGH:Be.MEDIUM;let nT=0;class Ze{constructor(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=nT++,this.static=!!e,this.ubo=!!i,t instanceof zt?(this.buffer=t,this.buffer.type=pr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new zt(new Float32Array(1)),this.buffer.type=pr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,i){if(!this.ubo)this.uniforms[t]=new Ze(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,i){return new Ze(t,e,i)}static uboFrom(t,e){return new Ze(t,e??!0,!0)}}class xr{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Ze?this.uniformGroup=e:this.uniformGroup=new Ze(e):this.uniformGroup=new Ze({}),this.disposeRunner=new Ke("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const i in e.uniforms){const n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,i){const n=qe.from(t,e);return new xr(n,i)}}class sT{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const i=new Int32Array(t);for(let s=0;s<t;s++)i[s]=s;this.defaultGroupCache[t]=Ze.from({uSamplers:i},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${t}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new qe(this.vertexSrc,n)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new Bt,default:this.defaultGroupCache[t]};return new xr(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+=`if(vTextureId < ${i}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}}class Yh{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function oT(){return!Lr.apple.device}function aT(r){let t=!0;const e=lt.ADAPTER.getNavigator();if(Lr.tablet||Lr.phone){if(Lr.apple.device){const i=e.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(t=!1)}if(Lr.android.device){const i=e.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?r:4}class Bl{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var lT=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,uT=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Ge=class extends Bl{constructor(r){super(r),this.setShaderGenerator(),this.geometryClass=Up,this.vertexSize=6,this.state=zr.for2d(),this.size=Ge.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),r.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??aT(32),this._defaultMaxTextures}static set defaultMaxTextures(r){this._defaultMaxTextures=r}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??oT(),this._canUploadSameBuffer}static set canUploadSameBuffer(r){this._canUploadSameBuffer=r}get MAX_TEXTURES(){return Dt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return uT}static get defaultFragmentTemplate(){return lT}setShaderGenerator({vertex:r=Ge.defaultVertexSrc,fragment:t=Ge.defaultFragmentTemplate}={}){this.shaderGenerator=new sT(r,t)}contextChange(){const r=this.renderer.gl;lt.PREFER_ENV===tn.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),Ge.defaultMaxTextures),this.maxTextures=My(this.maxTextures,r)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:r,_textureArrayPool:t}=Ge,e=this.size/4,i=Math.floor(e/this.maxTextures)+1;for(;r.length<e;)r.push(new Wh);for(;t.length<i;)t.push(new Yh);for(let n=0;n<this.maxTextures;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(r){r._texture.valid&&(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)}buildTexturesAndDrawCalls(){const{_bufferedTextures:r,maxTextures:t}=this,e=Ge._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++At._globalBatch,a=0,l=e[0],u=0;i.copyBoundTextures(n,t);for(let h=0;h<this._bufferSize;++h){const c=r[h];r[h]=null,c._batchEnabled!==o&&(l.count>=t&&(i.boundArray(l,n,o,t),this.buildDrawCalls(l,u,h),u=h,l=e[++a],++o),c._batchEnabled=o,c.touched=s,l.elements[l.count++]=c)}l.count>0&&(i.boundArray(l,n,o,t),this.buildDrawCalls(l,u,this._bufferSize),++a,++o);for(let h=0;h<n.length;h++)n[h]=null;At._globalBatch=o}buildDrawCalls(r,t,e){const{_bufferedElements:i,_attributeBuffer:n,_indexBuffer:s,vertexSize:o}=this,a=Ge._drawCallPool;let l=this._dcIndex,u=this._aIndex,h=this._iIndex,c=a[l];c.start=this._iIndex,c.texArray=r;for(let d=t;d<e;++d){const f=i[d],p=f._texture.baseTexture,m=Op[p.alphaMode?1:0][f.blendMode];i[d]=null,t<d&&c.blend!==m&&(c.size=h-c.start,t=d,c=a[++l],c.texArray=r,c.start=h),this.packInterleavedGeometry(f,n,s,u,h),u+=f.vertexData.length/2*o,h+=f.indices.length,c.blend=m}t<e&&(c.size=h-c.start,++l),this._dcIndex=l,this._aIndex=u,this._iIndex=h}bindAndClearTexArray(r){const t=this.renderer.texture;for(let e=0;e<r.count;e++)t.bind(r.elements[e],r.ids[e]),r.elements[e]=null;r.count=0}updateGeometry(){const{_packedGeometries:r,_attributeBuffer:t,_indexBuffer:e}=this;Ge.canUploadSameBuffer?(r[this._flushId]._buffer.update(t.rawBinaryData),r[this._flushId]._indexBuffer.update(e),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,r[this._flushId]=new this.geometryClass),r[this._flushId]._buffer.update(t.rawBinaryData),r[this._flushId]._indexBuffer.update(e),this.renderer.geometry.bind(r[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const r=this._dcIndex,{gl:t,state:e}=this.renderer,i=Ge._drawCallPool;let n=null;for(let s=0;s<r;s++){const{texArray:o,type:a,size:l,start:u,blend:h}=i[s];n!==o&&(n=o,this.bindAndClearTexArray(o)),this.state.blendMode=h,e.set(this.state),t.drawElements(a,l,t.UNSIGNED_SHORT,u*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Ge.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(r){const t=_l(Math.ceil(r/8)),e=Td(t),i=t*8;this._aBuffers.length<=e&&(this._iBuffers.length=e+1);let n=this._aBuffers[i];return n||(this._aBuffers[i]=n=new Xh(i*this.vertexSize*4)),n}getIndexBuffer(r){const t=_l(Math.ceil(r/12)),e=Td(t),i=t*12;this._iBuffers.length<=e&&(this._iBuffers.length=e+1);let n=this._iBuffers[e];return n||(this._iBuffers[e]=n=new Uint16Array(i)),n}packInterleavedGeometry(r,t,e,i,n){const{uint32View:s,float32View:o}=t,a=i/this.vertexSize,l=r.uvs,u=r.indices,h=r.vertexData,c=r._texture.baseTexture._batchLocation,d=Math.min(r.worldAlpha,1),f=d<1&&r._texture.baseTexture.alphaMode?Ec(r._tintRGB,d):r._tintRGB+(d*255<<24);for(let p=0;p<h.length;p+=2)o[i++]=h[p],o[i++]=h[p+1],o[i++]=l[p],o[i++]=l[p+1],s[i++]=f,o[i++]=c;for(let p=0;p<u.length;p++)e[n++]=a+u[p]}};let Ve=Ge;Ve.defaultBatchSize=4096;Ve.extension={name:"batch",type:ot.RendererPlugin};Ve._drawCallPool=[];Ve._textureArrayPool=[];xt.add(Ve);var hT=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,cT=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const mo=class extends xr{constructor(r,t,e){const i=qe.from(r||mo.defaultVertexSrc,t||mo.defaultFragmentSrc);super(i,e),this.padding=0,this.resolution=mo.defaultResolution,this.multisample=mo.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new zr}apply(r,t,e,i,n){r.applyFilter(this,t,e,i)}get blendMode(){return this.state.blendMode}set blendMode(r){this.state.blendMode=r}get resolution(){return this._resolution}set resolution(r){this._resolution=r}static get defaultVertexSrc(){return cT}static get defaultFragmentSrc(){return hT}};let oe=mo;oe.defaultResolution=1;oe.defaultMultisample=Ht.NONE;class Vp{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender,t.color&&(this.color=typeof t.color=="string"?Tc(t.color):t.color),this.alpha=t.alpha}get color(){return this._backgroundColor}set color(t){this._backgroundColor=t,this._backgroundColorString=Dp(t),Do(t,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(t){this._backgroundColorRgba[3]=t}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}Vp.extension={type:[ot.RendererSystem,ot.CanvasRendererSystem],name:"background"};xt.add(Vp);class Wp{constructor(t){this.renderer=t,this.emptyRenderer=new Bl(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:i}=this.renderer.texture;for(let n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,e,i,n){const{elements:s,ids:o,count:a}=t;let l=0;for(let u=0;u<a;u++){const h=s[u],c=h._batchLocation;if(c>=0&&c<n&&e[c]===h){o[u]=c;continue}for(;l<n;){const d=e[l];if(d&&d._batchEnabled===i&&d._batchLocation===l){l++;continue}o[u]=l,h._batchLocation=l,e[l]=h;break}}}destroy(){this.renderer=null}}Wp.extension={type:ot.RendererSystem,name:"batch"};xt.add(Wp);let Dd=0;class qp{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Dd++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,i=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:i,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Dd++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let i;if(lt.PREFER_ENV>=tn.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}qp.extension={type:ot.RendererSystem,name:"context"};xt.add(qp);class dT extends Xo{upload(t,e,i){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Je.UNPACK);const s=e.realWidth,o=e.realHeight;return i.width===s&&i.height===o?n.texSubImage2D(e.target,0,0,0,s,o,e.format,i.type,this.data):(i.width=s,i.height=o,n.texImage2D(e.target,0,i.internalFormat,s,o,0,e.format,i.type,this.data)),!0}}class Kh{constructor(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ke("disposeFramebuffer"),this.multisample=Ht.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new At(null,{scaleMode:fr.NEAREST,resolution:1,mipmap:mr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new At(new dT(null,{width:this.width,height:this.height}),{scaleMode:fr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:mr.OFF,format:st.DEPTH_COMPONENT,type:_t.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Yp extends At{constructor(t={}){if(typeof t=="number"){const e=arguments[0],i=arguments[1],n=arguments[2],s=arguments[3];t={width:e,height:i,scaleMode:n,resolution:s}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=Ht.NONE),super(null,t),this.mipmap=mr.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new Kh(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class hi extends Oo{constructor(t){const e=t,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;super(i,n),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,i){i===void 0&&!e.startsWith("data:")?t.crossOrigin=Fy(e):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}upload(t,e,i,n){const s=t.gl,o=e.realWidth,a=e.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1&&n.buffered.length===0)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Je.UNPACK),!this.noSubImage&&e.target===s.TEXTURE_2D&&i.width===o&&i.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,e.format,i.type,n):(i.width=o,i.height=a,s.texImage2D(e.target,0,i.internalFormat,e.format,i.type,n)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(e,i),super.update()}dispose(){this.source=null}}class Kp extends hi{constructor(t,e){if(e=e||{},typeof t=="string"){const i=new Image;hi.crossOrigin(i,t,e.crossorigin),i.src=t,t=i}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??lt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,i)=>{const n=this.source;this.url=n.src;const s=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.resize(n.width,n.height),this._load=null,this.createBitmap?e(this.process()):e(this))};n.complete&&n.src?s():(n.onload=s,n.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,i=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then(n=>n.blob()).then(n=>e(n,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Je.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,i){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,i,this.bitmap),!this.preserveBitmap){let n=!0;const s=e._glTextures;for(const o in s){const a=s[o];if(a!==i&&a.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class Zp{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,i){const n=e.width,s=e.height;if(i){const o=t.width/2/n,a=t.height/2/s,l=t.x/n+o,u=t.y/s+a;i=Mt.add(i,Mt.NW),this.x0=l+o*Mt.uX(i),this.y0=u+a*Mt.uY(i),i=Mt.add(i,2),this.x1=l+o*Mt.uX(i),this.y1=u+a*Mt.uY(i),i=Mt.add(i,2),this.x2=l+o*Mt.uX(i),this.y2=u+a*Mt.uY(i),i=Mt.add(i,2),this.x3=l+o*Mt.uX(i),this.y3=u+a*Mt.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Od=new Zp;function Ha(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}class pt extends Li{constructor(t,e,i,n,s,o){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new wt(0,0,1,1)),t instanceof pt&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this._uvs=Od,this.uvMatrix=null,this.orig=i||e,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new It(o.x,o.y):new It(0,0),this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&ur[e.url]&&pt.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,pt.removeFromCache(this),this.textureCacheIds=null}clone(){var n;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),i=new pt(this.baseTexture,!this.noFrame&&t,e,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=t),i}updateUvs(){this._uvs===Od&&(this._uvs=new Zp),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},i=lt.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let s=null;if(n)s=t;else if(t instanceof At){if(!t.cacheId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${Mi()}`,At.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${Mi()}`}s=t._pixiId}let o=ur[s];if(n&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(t instanceof At)?(e.resolution||(e.resolution=li(t)),o=new pt(new At(t,e)),o.baseTexture.cacheId=s,At.addToCache(o.baseTexture,s),pt.addToCache(o,s)):!o&&t instanceof At&&(o=new pt(t),pt.addToCache(o,s)),o}static fromURL(t,e){const i=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),n=pt.from(t,Object.assign({resourceOptions:i},e),!1),s=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):s.load().then(()=>Promise.resolve(n))}static fromBuffer(t,e,i,n){return new pt(At.fromBuffer(t,e,i,n))}static fromLoader(t,e,i,n){const s=new At(t,Object.assign({scaleMode:At.defaultOptions.scaleMode,resolution:li(e)},n)),{resource:o}=s;o instanceof Kp&&(o.url=e);const a=new pt(s);return i||(i=e),At.addToCache(a.baseTexture,i),pt.addToCache(a,i),i!==e&&(At.addToCache(a.baseTexture,e),pt.addToCache(a,e)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),ur[e]&&ur[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),ur[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=ur[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete ur[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)ur[t.textureCacheIds[e]]===t&&delete ur[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:i,width:n,height:s}=t,o=e+n>this.baseTexture.width,a=i+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",u=`X: ${e} + ${n} = ${e+n} > ${this.baseTexture.width}`,h=`Y: ${i} + ${s} = ${i+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${h}`)}this.valid=n&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return pt._EMPTY||(pt._EMPTY=new pt(new At),Ha(pt._EMPTY),Ha(pt._EMPTY.baseTexture)),pt._EMPTY}static get WHITE(){if(!pt._WHITE){const t=lt.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),pt._WHITE=new pt(At.from(t)),Ha(pt._WHITE),Ha(pt._WHITE.baseTexture)}return pt._WHITE}}class ci extends pt{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,i=!0){const n=this.baseTexture.resolution,s=Math.round(t*n)/n,o=Math.round(e*n)/n;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new ci(new Yp(t))}}class Qp{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,i=Ht.NONE){const n=new Yp(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new ci(n)}getOptimalTexture(t,e,i=1,n=Ht.NONE){let s;t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=_l(t),e=_l(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(t,e,n)),o.filterPoolKey=s,o.setResolution(i),o}getFilterTexture(t,e,i){const n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||Ht.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const i=this.texturePool[e];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const i=this.texturePool[e];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Qp.SCREEN_KEY=-1;class fT extends ui{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Jp extends ui{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new zt(this.vertices),this.uvBuffer=new zt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class pT{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Ht.NONE,this.sourceFrame=new wt,this.destinationFrame=new wt,this.bindingSourceFrame=new wt,this.bindingDestinationFrame=new wt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const ja=[new It,new It,new It,new It],Qu=new Bt;class t0{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Qp,this.statePool=[],this.quad=new fT,this.quadUv=new Jp,this.tempRect=new wt,this.activeState={},this.globalUniforms=new Ze({outputFrame:new wt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new pT,o=this.renderer.renderTexture;let a=e[0].resolution,l=e[0].multisample,u=e[0].padding,h=e[0].autoFit,c=e[0].legacy??!0;for(let p=1;p<e.length;p++){const m=e[p];a=Math.min(a,m.resolution),l=Math.min(l,m.multisample),u=this.useMaxPadding?Math.max(u,m.padding):u+m.padding,h=h&&m.autoFit,c=c||(m.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),n.push(s),s.resolution=a,s.multisample=l,s.legacy=c,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u);const d=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(Qu.copyFrom(i.projection.transform).invert(),d),h?(s.sourceFrame.fit(d),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(d)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,l),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const f=this.tempRect;f.x=0,f.y=0,f.width=s.sourceFrame.width,f.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,f),i.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;const n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;const s=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*e.resolution),o[1]=Math.round(s[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*s[2]-.5*o[2],a[3]=e.sourceFrame.height*s[3]-.5*o[3],e.legacy){const u=n.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,l.renderTexture,hr.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let u=e.renderTexture,h=this.getOptimalFilterTexture(u.width,u.height,e.resolution);h.filterFrame=u.filterFrame;let c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(h=this.getOptimalFilterTexture(u.width,u.height,e.resolution),h.filterFrame=u.filterFrame),i[c].apply(this,u,h,hr.CLEAR,e);const d=u;u=h,h=d}i[c].apply(this,u,l.renderTexture,hr.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=hr.CLEAR){const{renderTexture:i,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t!=null&&t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,i.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=n.stateId&1||this.forceClear;(e===hr.CLEAR||e===hr.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,i,n){const s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(dr.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(dr.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:i,destinationFrame:n}=this.activeState,{orig:s}=e._texture,o=t.set(n.width,0,0,n.height,i.x,i.y),a=e.worldTransform.copyTo(Bt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(e.anchor.x,e.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,i=1,n=Ht.NONE){return this.texturePool.getOptimalTexture(t,e,i,n)}getFilterTexture(t,e,i){if(typeof t=="number"){const s=t;t=e,e=s}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||Ht.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const i=ja[0],n=ja[1],s=ja[2],o=ja[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(o,o);const a=Math.min(i.x,n.x,s.x,o.x),l=Math.min(i.y,n.y,s.y,o.y),u=Math.max(i.x,n.x,s.x,o.x),h=Math.max(i.y,n.y,s.y,o.y);e.x=a,e.y=l,e.width=u-a,e.height=h-l}roundFrame(t,e,i,n,s){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(s){const{a:o,b:a,c:l,d:u}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}s=s?Qu.copyFrom(s):Qu.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)}}}t0.extension={type:ot.RendererSystem,name:"filter"};xt.add(t0);class xT{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Ht.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const _T=new wt;class e0{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Kh(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new wt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;lt.PREFER_ENV===tn.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=n=>e.drawBuffersWEBGL(n):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,i=0){const{gl:n}=this;if(t){const s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const o=e.width>>i,a=e.height>>i,l=o/e.width;this.setViewport(e.x*l,e.y*l,o,a)}else{const o=t.width>>i,a=t.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,i,n){const s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,i,n,s=Lh.COLOR|Lh.DEPTH){const{gl:o}=this;o.clearColor(t,e,i,n),o.clear(s)}initFramebuffer(t){const{gl:e}=this,i=new xT(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i}resizeFramebuffer(t){const{gl:e}=this,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));const n=t.colorTextures;let s=n.length;e.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=n[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:i}=this,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures;let o=s.length;i.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer():n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=s[l],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),l===0&&n.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,u.target,h._glTextures[this.CONTEXT_UID].texture,e),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const u=t.depthTexture;this.renderer.texture.bind(u,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,e)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let i=Ht.NONE;if(t<=1||e===null)return i;for(let n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=Ht.NONE),i}blit(t,e,i){const{current:n,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!n)return;const l=n.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;const h=n.colorTextures[0];if(!h)return;l.blitFramebuffer||(l.blitFramebuffer=new Kh(n.width,n.height),l.blitFramebuffer.addColorTexture(0,h)),t=l.blitFramebuffer,t.colorTextures[0]!==h&&(t.colorTextures[0]=h,t.dirtyId++,t.dirtyFormat++),(t.width!==n.width||t.height!==n.height)&&(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}e||(e=_T,e.width=n.width,e.height=n.height),i||(i=e);const u=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR)}disposeFramebuffer(t,e){const i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!i)return;delete t.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil)return;t.stencil=!0;const i=t.width,n=t.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new wt}destroy(){this.renderer=null}}e0.extension={type:ot.RendererSystem,name:"framebuffer"};xt.add(e0);const Ju={5126:4,5123:2,5121:1};class r0{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;lt.PREFER_ENV===tn.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=()=>i.createVertexArrayOES(),t.bindVertexArray=n=>i.bindVertexArrayOES(n),t.deleteVertexArray=n=>i.deleteVertexArrayOES(n)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=(n,s)=>i.vertexAttribDivisorANGLE(n,s),t.drawElementsInstanced=(n,s,o,a,l)=>i.drawElementsInstancedANGLE(n,s,o,a,l),t.drawArraysInstanced=(n,s,o,a)=>i.drawArraysInstancedANGLE(n,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:i}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);const o=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let i=0;i<t.buffers.length;i++){const n=t.buffers[i];e.update(n)}}checkCompatibility(t,e){const i=t.attributes,n=e.attributeData;for(const s in n)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(t,e){const i=t.attributes,n=e.attributeData,s=["g",t.id];for(const o in i)n[o]&&s.push(o,n[o].location);return s.join("-")}initGeometryVao(t,e,i=!0){const n=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);const l=this.getSignature(t,a),u=t.glVertexArrayObjects[this.CONTEXT_UID];let h=u[l];if(h)return u[a.id]=h,h;const c=t.buffers,d=t.attributes,f={},p={};for(const m in c)f[m]=0,p[m]=0;for(const m in d)!d[m].size&&a.attributeData[m]?d[m].size=a.attributeData[m].size:d[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[m].buffer]+=d[m].size*Ju[d[m].type];for(const m in d){const x=d[m],v=x.size;x.stride===void 0&&(f[x.buffer]===v*Ju[x.type]?x.stride=0:x.stride=f[x.buffer]),x.start===void 0&&(x.start=p[x.buffer],p[x.buffer]+=v*Ju[x.type])}h=n.createVertexArray(),n.bindVertexArray(h);for(let m=0;m<c.length;m++){const x=c[m];o.bind(x),i&&x._glBuffers[s].refCount++}return this.activateVao(t,a),u[a.id]=h,u[l]=h,n.bindVertexArray(null),o.unbind(pr.ARRAY_BUFFER),h}disposeGeometry(t,e){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const i=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,s=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!i){if(o)for(let l=0;l<s.length;l++){const u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(s[l],e))}if(!e){for(const l in i)if(l[0]==="g"){const u=i[l];this._activeVao===u&&this.unbind(),n.deleteVertexArray(u)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)}activateVao(t,e){const i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);let l=null;for(const u in a){const h=a[u],c=o[h.buffer],d=c._glBuffers[n];if(e.attributeData[u]){l!==d&&(s.bind(c),l=d);const f=e.attributeData[u].location;if(i.enableVertexAttribArray(f),i.vertexAttribPointer(f,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)i.vertexAttribDivisor(f,h.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,i,n){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(t,e||o.indexBuffer.data.length,l,(i||0)*a,n||1):s.drawElements(t,e||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(t,i,e||o.getSize(),n||1):s.drawArrays(t,i,e||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}r0.extension={type:ot.RendererSystem,name:"geometry"};xt.add(r0);const Fd=new Bt;class i0{constructor(t,e){this._texture=t,this.mapCoord=new Bt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let n=0;n<t.length;n+=2){const s=t[n],o=t[n+1];e[n]=s*i.a+o*i.c+i.tx,e[n+1]=s*i.b+o*i.d+i.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const n=e.orig,s=e.trim;s&&(Fd.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Fd));const o=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+l+u)/o.width,a[1]=(e._frame.y+l+u)/o.height,a[2]=(e._frame.x+e._frame.width-l+u)/o.width,a[3]=(e._frame.y+e._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0}}var mT=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,gT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class vT extends oe{constructor(t,e,i){let n=null;typeof t!="string"&&e===void 0&&i===void 0&&(n=t,t=void 0,e=void 0,i=void 0),super(t||gT,e||mT,i),this.maskSprite=n,this.maskMatrix=new Bt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,i,n){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new i0(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,i,n))}}class yT{constructor(t=null){this.type=Kt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=oe.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Kt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class n0{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let i=e;if(!i.isMaskData){const s=this.maskDataPool.pop()||new yT;s.pooled=!0,s.maskObject=e,i=s}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(n),i._colorMask=n?n._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==Kt.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Kt.SCISSOR:this.renderer.scissor.push(i);break;case Kt.STENCIL:this.renderer.stencil.push(i);break;case Kt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Kt.COLOR:this.pushColorMask(i);break}i.type===Kt.SPRITE&&this.maskStack.push(i)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case Kt.SCISSOR:this.renderer.scissor.pop(e);break;case Kt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Kt.SPRITE:this.popSpriteMask(e);break;case Kt.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===Kt.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=Kt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Kt.SCISSOR:t.type=Kt.STENCIL:t.type=Kt.COLOR}pushSpriteMask(t){const{maskObject:e}=t,i=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new vT]));const s=this.renderer,o=s.renderTexture;let a,l;if(o.current){const h=o.current;a=t.resolution||h.resolution,l=t.multisample??h.multisample}else a=t.resolution||s.resolution,l=t.multisample??s.multisample;n[0].resolution=a,n[0].multisample=l,n[0].maskSprite=e;const u=i.filterArea;i.filterArea=e.getBounds(!0),s.filter.push(i,n),i.filterArea=u,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,i=t._colorMask=e&t.colorMask;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(t){const e=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}n0.extension={type:ot.RendererSystem,name:"mask"};xt.add(n0);class s0{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,i=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Ld=new Bt,Bd=[],sl=class extends s0{constructor(r){super(r),this.glConst=lt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0}calcScissorRect(r){if(r._scissorRectLocal)return;const t=r._scissorRect,{maskObject:e}=r,{renderer:i}=this,n=i.renderTexture,s=e.getBounds(!0,Bd.pop()??new wt);this.roundFrameToPixels(s,n.current?n.current.resolution:i.resolution,n.sourceFrame,n.destinationFrame,i.projection.transform),t&&s.fit(t),r._scissorRectLocal=s}static isMatrixRotated(r){if(!r)return!1;const{a:t,b:e,c:i,d:n}=r;return(Math.abs(e)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(n)>1e-4)}testScissor(r){const{maskObject:t}=r;if(!t.isFastRect||!t.isFastRect()||sl.isMatrixRotated(t.worldTransform)||sl.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(r);const e=r._scissorRectLocal;return e.width>0&&e.height>0}roundFrameToPixels(r,t,e,i,n){sl.isMatrixRotated(n)||(n=n?Ld.copyFrom(n):Ld.identity(),n.translate(-e.x,-e.y).scale(i.width/e.width,i.height/e.height).translate(i.x,i.y),this.renderer.filter.transformAABB(n,r),r.fit(i),r.x=Math.round(r.x*t),r.y=Math.round(r.y*t),r.width=Math.round(r.width*t),r.height=Math.round(r.height*t))}push(r){r._scissorRectLocal||this.calcScissorRect(r);const{gl:t}=this.renderer;r._scissorRect||t.enable(t.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=r._scissorRectLocal,this._useCurrent()}pop(r){const{gl:t}=this.renderer;r&&Bd.push(r._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const r=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=r.y:t=this.renderer.height-r.height-r.y,this.renderer.gl.scissor(r.x,t,r.width,r.height)}};let o0=sl;o0.extension={type:ot.RendererSystem,name:"scissor"};xt.add(o0);class a0 extends s0{constructor(t){super(t),this.glConst=lt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:i}=this.renderer,n=t._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;const s=t._colorMask;s!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,n,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(t._colorMask=s,i.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=i?i._colorMask:15;n!==0&&(i._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,n!==0&&(i._colorMask=n,e.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}a0.extension={type:ot.RendererSystem,name:"stencil"};xt.add(a0);class l0{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Dt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return Dt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return Dt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(t){for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}l0.extension={type:[ot.RendererSystem,ot.CanvasRendererSystem],name:"_plugin"};xt.add(l0);class u0{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Bt,this.transform=null}update(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(t,e,i,n){const s=this.projectionMatrix,o=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=o*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-o-e.y*s.d}setTransform(t){}destroy(){this.renderer=null}}u0.extension={type:ot.RendererSystem,name:"projection"};xt.add(u0);const TT=new Cc;class h0{constructor(t){this.renderer=t,this._tempMatrix=new Bt}generateTexture(t,e){const{region:i,...n}=e||{},s=i||t.getLocalBounds(null,!0);s.width===0&&(s.width=1),s.height===0&&(s.height=1);const o=ci.create({width:s.width,height:s.height,...n});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=t.transform;return t.transform=TT,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,o}destroy(){}}h0.extension={type:[ot.RendererSystem,ot.CanvasRendererSystem],name:"textureGenerator"};xt.add(h0);const Ai=new wt,_s=new wt;class c0{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new wt,this.destinationFrame=new wt,this.viewportFrame=new wt}bind(t=null,e,i){const n=this.renderer;this.current=t;let s,o,a;t?(s=t.baseTexture,a=s.resolution,e||(Ai.width=t.frame.width,Ai.height=t.frame.height,e=Ai),i||(_s.x=t.frame.x,_s.y=t.frame.y,_s.width=e.width,_s.height=e.height,i=_s),o=s.framebuffer):(a=n.resolution,e||(Ai.width=n._view.screen.width,Ai.height=n._view.screen.height,e=Ai),i||(i=Ai,i.width=e.width,i.height=e.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,t||(l.y=n.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,e,a,!o),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)}clear(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.renderer.background.colorRgba;const i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer._view.screen,s=i.width!==n.width||i.height!==n.height;if(s){let{x:o,y:a,width:l,height:u}=this.viewportFrame;o=Math.round(o),a=Math.round(a),l=Math.round(l),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,a,l,u)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}c0.extension={type:ot.RendererSystem,name:"renderTexture"};xt.add(c0);class ET{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function AT(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES);for(let n=0;n<i;n++){const s=t.getActiveAttrib(r,n);if(s.name.startsWith("gl_"))continue;const o=Xp(t,s.type),a={type:o,name:s.name,size:zp(o),location:t.getAttribLocation(r,s.name)};e[s.name]=a}return e}function ST(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let n=0;n<i;n++){const s=t.getActiveUniform(r,n),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=Xp(t,s.type);e[o]={name:o,index:n,type:l,size:s.size,isArray:a,value:Gp(l,s.size)}}return e}function bT(r,t){var l;const e=wd(r,r.VERTEX_SHADER,t.vertexSrc),i=wd(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i);const s=(l=t.extra)==null?void 0:l.transformFeedbackVaryings;if(s&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(n,s.names,s.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||tT(r,n,e,i),t.attributeData=AT(n,r),t.uniformData=ST(n,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const u=Object.keys(t.attributeData);u.sort((h,c)=>h>c?1:-1);for(let h=0;h<u.length;h++)t.attributeData[u[h]].location=h,r.bindAttribLocation(n,h,u[h]);r.linkProgram(n)}r.deleteShader(e),r.deleteShader(i);const o={};for(const u in t.uniformData){const h=t.uniformData[u];o[u]={location:r.getUniformLocation(n,u),value:Gp(h.type,h.size)}}return new ET(n,o)}function CT(r,t,e,i,n){e.buffer.update(n)}const NT={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},d0={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function wT(r){const t=r.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let e=0,i=0,n=0;for(let s=0;s<t.length;s++){const o=t[s];if(e=d0[o.data.type],o.data.size>1&&(e=Math.max(e,16)*o.data.size),o.dataLen=e,i%e!==0&&i<16){const a=i%e%16;i+=a,n+=a}i+e>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=e,i=e):(o.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function RT(r,t){const e=[];for(const i in r)t[i]&&e.push(t[i]);return e.sort((i,n)=>i.index-n.index),e}function IT(r,t){if(!r.autoManage)return{size:0,syncFunc:CT};const e=RT(r.uniforms,t),{uboElements:i,size:n}=wT(e),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],l=r.uniforms[a.data.name],u=a.data.name;let h=!1;for(let c=0;c<Bn.length;c++){const d=Bn[c];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,Bn[c].codeUbo(a.data.name,l)),h=!0;break}}if(!h)if(a.data.size>1){const c=zp(a.data.type),d=Math.max(d0[a.data.type]/16,1),f=c/d,p=(4-f%4)%4;s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const c=NT[a.data.type];s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${c};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let PT=0;const Ga={textureCount:0,uboCount:0};class f0{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=PT++}systemCheck(){if(!rT())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(Ga.textureCount=0,Ga.uboCount=0,this.syncUniformGroup(t.uniformGroup,Ga)),n}setUniforms(t){const e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)}syncUniformGroup(t,e){const i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))}syncUniforms(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=Zy(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;const n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,Ga,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])}createSyncBufferGroup(t,e,i){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=IT(t,this.shader.program.uniformData)),t.autoManage){const l=new Float32Array(a.size/4);t.buffer.update(l)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,i){const n=t.uniforms,s=[`${i}-`];for(const o in n)s.push(o),e[o]&&s.push(e[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,i=t.program,n=bT(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}f0.extension={type:ot.RendererSystem,name:"shader"};xt.add(f0);class p0{constructor(t){this.renderer=t}run(t){const e=this.renderer;e.emitWithCustomOptions(e.runners.init,t),t.hello&&console.log(`PixiJS 7.1.4 - ${e.rendererLogId} - https://pixijs.com`),e.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}p0.extension={type:[ot.RendererSystem,ot.CanvasRendererSystem],name:"startup"};xt.add(p0);function DT(r,t=[]){return t[Tt.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.ADD]=[r.ONE,r.ONE],t[Tt.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.NONE]=[0,0],t[Tt.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[Tt.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Tt.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[Tt.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[Tt.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[Tt.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[Tt.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[Tt.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[Tt.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[Tt.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[Tt.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}const OT=0,FT=1,LT=2,BT=3,MT=4,kT=5,Zh=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Tt.NONE,this._blendEq=!1,this.map=[],this.map[OT]=this.setBlend,this.map[FT]=this.setOffset,this.map[LT]=this.setCullFace,this.map[BT]=this.setDepthTest,this.map[MT]=this.setFrontFace,this.map[kT]=this.setDepthMask,this.checks=[],this.defaultState=new zr,this.defaultState.blend=!0}contextChange(r){this.gl=r,this.blendModes=DT(r),this.set(this.defaultState),this.reset()}set(r){if(r=r||this.defaultState,this.stateId!==r.data){let t=this.stateId^r.data,e=0;for(;t;)t&1&&this.map[e].call(this,!!(r.data&1<<e)),t=t>>1,e++;this.stateId=r.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,r)}forceState(r){r=r||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(r.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,r);this.stateId=r.data}setBlend(r){this.updateCheck(Zh.checkBlendMode,r),this.gl[r?"enable":"disable"](this.gl.BLEND)}setOffset(r){this.updateCheck(Zh.checkPolygonOffset,r),this.gl[r?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(r){this.gl[r?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(r){this.gl.depthMask(r)}setCullFace(r){this.gl[r?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(r){this.gl.frontFace(this.gl[r?"CW":"CCW"])}setBlendMode(r){if(r===this.blendMode)return;this.blendMode=r;const t=this.blendModes[r],e=this.gl;t.length===2?e.blendFunc(t[0],t[1]):e.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,e.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD))}setPolygonOffset(r,t){this.gl.polygonOffset(r,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(r,t){const e=this.checks.indexOf(r);t&&e===-1?this.checks.push(r):!t&&e!==-1&&this.checks.splice(e,1)}static checkBlendMode(r,t){r.setBlendMode(t.blendMode)}static checkPolygonOffset(r,t){r.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let x0=Zh;x0.extension={type:ot.RendererSystem,name:"state"};xt.add(x0);class UT extends Li{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(n=>t.systems[n]),i=[...e,...Object.keys(t.systems).filter(n=>!e.includes(n))];for(const n of i)this.addSystem(t.systems[n],n)}addRunners(...t){t.forEach(e=>{this.runners[e]=new Ke(e)})}addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const n in this.runners)this.runners[n].add(i);return this}emitWithCustomOptions(t,e){const i=Object.keys(this._systemsHash);t.items.forEach(n=>{const s=i.find(o=>this._systemsHash[o]===n);n[t.name](e[s])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const ol=class{constructor(r){this.renderer=r,this.count=0,this.checkCount=0,this.maxIdle=ol.defaultMaxIdle,this.checkCountMax=ol.defaultCheckCountMax,this.mode=ol.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==yc.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const r=this.renderer.texture,t=r.managedTextures;let e=!1;for(let i=0;i<t.length;i++){const n=t[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(r.destroyTexture(n,!0),t[i]=null,e=!0)}if(e){let i=0;for(let n=0;n<t.length;n++)t[n]!==null&&(t[i++]=t[n]);t.length=i}}unload(r){const t=this.renderer.texture,e=r._texture;e&&!e.framebuffer&&t.destroyTexture(e);for(let i=r.children.length-1;i>=0;i--)this.unload(r.children[i])}destroy(){this.renderer=null}};let We=ol;We.defaultMode=yc.AUTO;We.defaultMaxIdle=60*60;We.defaultCheckCountMax=60*10;We.extension={type:ot.RendererSystem,name:"textureGC"};xt.add(We);class th{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=_t.UNSIGNED_BYTE,this.internalFormat=st.RGBA,this.samplerType=0}}function HT(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[_t.UNSIGNED_BYTE]:{[st.RGBA]:r.RGBA8,[st.RGB]:r.RGB8,[st.RG]:r.RG8,[st.RED]:r.R8,[st.RGBA_INTEGER]:r.RGBA8UI,[st.RGB_INTEGER]:r.RGB8UI,[st.RG_INTEGER]:r.RG8UI,[st.RED_INTEGER]:r.R8UI,[st.ALPHA]:r.ALPHA,[st.LUMINANCE]:r.LUMINANCE,[st.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[_t.BYTE]:{[st.RGBA]:r.RGBA8_SNORM,[st.RGB]:r.RGB8_SNORM,[st.RG]:r.RG8_SNORM,[st.RED]:r.R8_SNORM,[st.RGBA_INTEGER]:r.RGBA8I,[st.RGB_INTEGER]:r.RGB8I,[st.RG_INTEGER]:r.RG8I,[st.RED_INTEGER]:r.R8I},[_t.UNSIGNED_SHORT]:{[st.RGBA_INTEGER]:r.RGBA16UI,[st.RGB_INTEGER]:r.RGB16UI,[st.RG_INTEGER]:r.RG16UI,[st.RED_INTEGER]:r.R16UI,[st.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[_t.SHORT]:{[st.RGBA_INTEGER]:r.RGBA16I,[st.RGB_INTEGER]:r.RGB16I,[st.RG_INTEGER]:r.RG16I,[st.RED_INTEGER]:r.R16I},[_t.UNSIGNED_INT]:{[st.RGBA_INTEGER]:r.RGBA32UI,[st.RGB_INTEGER]:r.RGB32UI,[st.RG_INTEGER]:r.RG32UI,[st.RED_INTEGER]:r.R32UI,[st.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[_t.INT]:{[st.RGBA_INTEGER]:r.RGBA32I,[st.RGB_INTEGER]:r.RGB32I,[st.RG_INTEGER]:r.RG32I,[st.RED_INTEGER]:r.R32I},[_t.FLOAT]:{[st.RGBA]:r.RGBA32F,[st.RGB]:r.RGB32F,[st.RG]:r.RG32F,[st.RED]:r.R32F,[st.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[_t.HALF_FLOAT]:{[st.RGBA]:r.RGBA16F,[st.RGB]:r.RGB16F,[st.RG]:r.RG16F,[st.RED]:r.R16F},[_t.UNSIGNED_SHORT_5_6_5]:{[st.RGB]:r.RGB565},[_t.UNSIGNED_SHORT_4_4_4_4]:{[st.RGBA]:r.RGBA4},[_t.UNSIGNED_SHORT_5_5_5_1]:{[st.RGBA]:r.RGB5_A1},[_t.UNSIGNED_INT_2_10_10_10_REV]:{[st.RGBA]:r.RGB10_A2,[st.RGBA_INTEGER]:r.RGB10_A2UI},[_t.UNSIGNED_INT_10F_11F_11F_REV]:{[st.RGB]:r.R11F_G11F_B10F},[_t.UNSIGNED_INT_5_9_9_9_REV]:{[st.RGB]:r.RGB9_E5},[_t.UNSIGNED_INT_24_8]:{[st.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[_t.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[st.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:t={[_t.UNSIGNED_BYTE]:{[st.RGBA]:r.RGBA,[st.RGB]:r.RGB,[st.ALPHA]:r.ALPHA,[st.LUMINANCE]:r.LUMINANCE,[st.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[_t.UNSIGNED_SHORT_5_6_5]:{[st.RGB]:r.RGB},[_t.UNSIGNED_SHORT_4_4_4_4]:{[st.RGBA]:r.RGBA},[_t.UNSIGNED_SHORT_5_5_5_1]:{[st.RGBA]:r.RGBA}},t}class _0{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new At,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=HT(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};const i=new th(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new th(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(t,e=0){const{gl:i}=this;if(t=t==null?void 0:t.castToBaseTexture(),t!=null&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<i.length;n++)i[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[n]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:i,CONTEXT_UID:n}=this;if(i)for(let s=t-1;s>=0;--s){const o=e[s];o&&o._glTextures[n].samplerType!==Bh.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const e=new th(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var i;e.internalFormat=((i=this.internalFormats[t.type])==null?void 0:i[t.format])??t.format,this.webGLVersion===2&&t.type===_t.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var n;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const i=this.renderer;if(this.initTextureType(t,e),(n=t.resource)!=null&&n.upload(i,t,e))e.samplerType!==Bh.FLOAT&&(this.hasIntegerTextures=!0);else{const s=t.realWidth,o=t.realHeight,a=i.gl;(e.width!==s||e.height!==o||e.dirtyId<0)&&(e.width=s,e.height=o,a.texImage2D(t.target,0,e.internalFormat,s,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:i}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const n=this.managedTextures.indexOf(t);n!==-1&&Fn(this.managedTextures,n,1)}}updateTextureStyle(t){var i;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===mr.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=oi.CLAMP:e.wrapMode=t.wrapMode,(i=t.resource)!=null&&i.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const i=this.gl;if(e.mipmap&&t.mipmap!==mr.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===fr.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===fr.LINEAR){const s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===fr.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===fr.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}_0.extension={type:ot.RendererSystem,name:"texture"};xt.add(_0);class m0{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glTransformFeedbacks[i]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:i,renderer:n}=this;e&&n.shader.bind(e),i.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:i,CONTEXT_UID:n}=this,s=e.createTransformFeedback();t._glTransformFeedbacks[n]=s,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,s);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(i.buffer.update(a),a._glBuffers[n].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[n].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),s}disposeTransformFeedback(t,e){const i=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!e&&s.dispose(a,e))}i&&(e||n.deleteTransformFeedback(i),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}m0.extension={type:ot.RendererSystem,name:"transformFeedback"};xt.add(m0);class g0{constructor(t){this.renderer=t}init(t){this.screen=new wt(0,0,t.width,t.height),this.element=t.view||lt.ADAPTER.createCanvas(),this.resolution=t.resolution||lt.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const i=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=i,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",i,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}g0.extension={type:[ot.RendererSystem,ot.CanvasRendererSystem],name:"_view"};xt.add(g0);lt.PREFER_ENV=tn.WEBGL2;lt.STRICT_TEXTURE_CACHE=!1;Object.defineProperties(lt,{WRAP_MODE:{get(){return At.defaultOptions.wrapMode},set(r){Dt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),At.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return At.defaultOptions.scaleMode},set(r){Dt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),At.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return At.defaultOptions.mipmap},set(r){Dt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),At.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return At.defaultOptions.anisotropicLevel},set(r){Dt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),At.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return Dt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),oe.defaultResolution},set(r){oe.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return Dt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),oe.defaultMultisample},set(r){oe.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return Ve.defaultMaxTextures},set(r){Dt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Ve.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return Ve.defaultBatchSize},set(r){Dt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Ve.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return Ve.canUploadSameBuffer},set(r){Dt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Ve.canUploadSameBuffer=r}},GC_MODE:{get(){return We.defaultMode},set(r){Dt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),We.defaultMode=r}},GC_MAX_IDLE:{get(){return We.defaultMaxIdle},set(r){Dt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),We.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return We.defaultCheckCountMax},set(r){Dt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),We.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return qe.defaultVertexPrecision},set(r){Dt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),qe.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return qe.defaultFragmentPrecision},set(r){Dt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),qe.defaultFragmentPrecision=r}}});var ki=(r=>(r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(ki||{});class eh{constructor(t,e=null,i=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const be=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new eh(null,null,1/0),this.deltaMS=1/be.targetFPMS,this.elapsedMS=1/be.targetFPMS,this._tick=r=>{this._requestId=null,this.started&&(this.update(r),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(r,t,e=ki.NORMAL){return this._addListener(new eh(r,t,e))}addOnce(r,t,e=ki.NORMAL){return this._addListener(new eh(r,t,e,!0))}_addListener(r){let t=this._head.next,e=this._head;if(!t)r.connect(e);else{for(;t;){if(r.priority>t.priority){r.connect(e);break}e=t,t=t.next}r.previous||r.connect(e)}return this._startIfPossible(),this}remove(r,t){let e=this._head.next;for(;e;)e.match(r,t)?e=e.destroy():e=e.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let r=0,t=this._head;for(;t=t.next;)r++;return r}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let r=this._head.next;for(;r;)r=r.destroy(!0);this._head.destroy(),this._head=null}}update(r=performance.now()){let t;if(r>this.lastTime){if(t=this.elapsedMS=r-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const n=r-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=r-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*be.targetFPMS;const e=this._head;let i=e.next;for(;i;)i=i.emit(this.deltaTime);e.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=r}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(r){const t=Math.min(this.maxFPS,r),e=Math.min(Math.max(0,t)/1e3,be.targetFPMS);this._maxElapsedMS=1/e}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(r){if(r===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,r);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!be._shared){const r=be._shared=new be;r.autoStart=!0,r._protected=!0}return be._shared}static get system(){if(!be._system){const r=be._system=new be;r.autoStart=!0,r._protected=!0}return be._system}};let ye=be;ye.targetFPMS=.06;Object.defineProperties(lt,{TARGET_FPMS:{get(){return ye.targetFPMS},set(r){Dt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),ye.targetFPMS=r}}});class v0{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,ki.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?ye.shared:new ye,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}v0.extension=ot.Application;xt.add(v0);const y0=[];xt.handleByList(ot.Renderer,y0);function jT(r){for(const t of y0)if(t.test(r))return new t(r);throw new Error("Unable to auto-detect a suitable renderer.")}var GT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$T=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const zT=GT,T0=$T;class E0{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{const i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}e>=Ht.HIGH?this.multisample=Ht.HIGH:e>=Ht.MEDIUM?this.multisample=Ht.MEDIUM:e>=Ht.LOW?this.multisample=Ht.LOW:this.multisample=Ht.NONE}destroy(){}}E0.extension={type:ot.RendererSystem,name:"_multisample"};xt.add(E0);class XT{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class A0{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:i,CONTEXT_UID:n}=this;if(this.boundBufferBases[e]!==t){const s=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,s.buffer)}}bindBufferRange(t,e,i){const{gl:n,CONTEXT_UID:s}=this;i=i||0;const o=t._glBuffers[s]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)}update(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glBuffers[i]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,e.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const s=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,s)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:i}=this;return t._glBuffers[e]=new XT(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}A0.extension={type:ot.RendererSystem,name:"buffer"};xt.add(A0);class S0{constructor(t){this.renderer=t}render(t,e){const i=this.renderer;let n,s,o,a;if(e&&(n=e.renderTexture,s=e.clear,o=e.transform,a=e.skipUpdateTransform),this.renderingToScreen=!n,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(n||(this.lastObjectRendered=t),!a){const l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}i.renderTexture.bind(n),i.batch.currentRenderer.start(),(s??i.background.clearBeforeRender)&&i.renderTexture.clear(),t.render(i),i.batch.currentRenderer.flush(),n&&(e.blit&&i.framebuffer.blit(),n.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}S0.extension={type:ot.RendererSystem,name:"objectRenderer"};xt.add(S0);const Qh=class extends UT{constructor(r){super(),this.type=wp.WEBGL,r=Object.assign({},lt.RENDER_OPTIONS,r),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Ze({projectionMatrix:new Bt},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Qh.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in r&&(Dt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),r.premultipliedAlpha=r.useContextAlpha&&r.useContextAlpha!=="notMultiplied",r.backgroundAlpha=r.useContextAlpha===!1?1:r.backgroundAlpha);const e={hello:r.hello,_plugin:Qh.__plugins,background:{alpha:r.backgroundAlpha,color:r.background??r.backgroundColor,clearBeforeRender:r.clearBeforeRender},_view:{height:r.height,width:r.width,autoDensity:r.autoDensity,resolution:r.resolution,view:r.view},context:{antialias:r.antialias,context:r.context,powerPreference:r.powerPreference,premultipliedAlpha:r.premultipliedAlpha,preserveDrawingBuffer:r.preserveDrawingBuffer}};this.options=r,this.startup.run(e)}static test(r){return r!=null&&r.forceCanvas?!1:Hm()}render(r,t){this.objectRenderer.render(r,t)}resize(r,t){this._view.resizeView(r,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(r=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:r}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(r){this._view.resolution=r,this.runners.resolutionChange.emit(r)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Dt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Dt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Dt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Dt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(r){Dt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=r}get backgroundAlpha(){return Dt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.color}set backgroundAlpha(r){Dt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=r}get powerPreference(){return Dt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(r,t){return this.textureGenerator.generateTexture(r,t)}};let Yn=Qh;Yn.extension={type:ot.Renderer,priority:1};Yn.__plugins={};Yn.__systems={};xt.handleByMap(ot.RendererPlugin,Yn.__plugins);xt.handleByMap(ot.RendererSystem,Yn.__systems);xt.add(Yn);class b0 extends Oo{constructor(t,e){const{width:i,height:n}=e||{};super(i,n),this.items=[],this.itemDirtyIds=[];for(let s=0;s<t;s++){const o=new At;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof Oo?this.addResourceAt(t[i],i):this.addResourceAt(kp(t[i],e),i))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const e=this.items.map(i=>i.resource).filter(i=>i).map(i=>i.load());return this._load=Promise.all(e).then(()=>{const{realWidth:i,realHeight:n}=this.items[0];return this.resize(i,n),Promise.resolve(this)}),this._load}}class VT extends b0{constructor(t,e){const{width:i,height:n}=e||{};let s,o;Array.isArray(t)?(s=t,o=t.length):o=t,super(o,{width:i,height:n}),s&&this.initFromArray(s,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Dn.TEXTURE_2D_ARRAY}upload(t,e,i){const{length:n,itemDirtyIds:s,items:o}=this,{gl:a}=t;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,n,0,e.format,i.type,null);for(let l=0;l<n;l++){const u=o[l];s[l]<u.dirtyId&&(s[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,e.format,i.type,u.resource.source))}return!0}}class WT extends hi{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const go=class extends b0{constructor(r,t){const{width:e,height:i,autoLoad:n,linkBaseTexture:s}=t||{};if(r&&r.length!==go.SIDES)throw new Error(`Invalid length. Got ${r.length}, expected 6`);super(6,{width:e,height:i});for(let o=0;o<go.SIDES;o++)this.items[o].target=Dn.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=s!==!1,r&&this.initFromArray(r,t),n!==!1&&this.load()}bind(r){super.bind(r),r.target=Dn.TEXTURE_CUBE_MAP}addBaseTextureAt(r,t,e){if(e===void 0&&(e=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=Dn.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.parentTextureArray=this.baseTexture,this.items[t]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[t]=r,this}upload(r,t,e){const i=this.itemDirtyIds;for(let n=0;n<go.SIDES;n++){const s=this.items[n];(i[n]<s.dirtyId||e.dirtyId<t.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(r,s,e),i[n]=s.dirtyId):i[n]<-1&&(r.gl.texImage2D(s.target,0,e.internalFormat,t.realWidth,t.realHeight,0,t.format,e.type,null),i[n]=-1))}return!0}static test(r){return Array.isArray(r)&&r.length===go.SIDES}};let C0=go;C0.SIDES=6;class Nn extends hi{constructor(t,e){e=e||{};let i,n;typeof t=="string"?(i=Nn.EMPTY,n=t):(i=t,n=null),super(i),this.url=n,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const i=await lt.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await i.blob();if(this.destroyed)return;const s=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Je.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=s,this.update(),t(this)}catch(i){if(this.destroyed)return;e(i),this.onError.emit(i)}}),this._load)}upload(t,e,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,i)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return Nn._EMPTY=Nn._EMPTY??lt.ADAPTER.createCanvas(0,0),Nn._EMPTY}}const al=class extends hi{constructor(r,t){t=t||{},super(lt.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=r,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(r=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),r(this)},al.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const r=new Image;hi.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=t=>{this._resolve&&(r.onerror=null,this.onError.emit(t))},r.onload=()=>{if(!this._resolve)return;const t=r.width,e=r.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=t*this.scale,n=e*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/e*t,n=this._overrideHeight||this._overrideWidth/t*e),i=Math.round(i),n=Math.round(n);const s=this.source;s.width=i,s.height=n,s._pixiId=`canvas_${Mi()}`,s.getContext("2d").drawImage(r,0,0,t,e,0,0,i,n),this._resolve(),this._resolve=null}}static getSize(r){const t=al.SVG_SIZE.exec(r),e={};return t&&(e[t[1]]=Math.round(parseFloat(t[3])),e[t[5]]=Math.round(parseFloat(t[7]))),e}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(r,t){return t==="svg"||typeof r=="string"&&r.startsWith("data:image/svg+xml")||typeof r=="string"&&al.SVG_XML.test(r)}};let Fo=al;Fo.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;Fo.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const Jh=class extends hi{constructor(r,t){if(t=t||{},!(r instanceof HTMLVideoElement)){const e=document.createElement("video");e.setAttribute("preload","auto"),e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);const i=r[0].src||r[0];hi.crossOrigin(e,i,t.crossorigin);for(let n=0;n<r.length;++n){const s=document.createElement("source");let{src:o,mime:a}=r[n];o=o||r[n];const l=o.split("?").shift().toLowerCase(),u=l.slice(l.lastIndexOf(".")+1);a=a||Jh.MIME_TYPES[u]||`video/${u}`,s.src=o,s.type=a,e.appendChild(s)}r=e}super(r),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(r=0){if(!this.destroyed){const t=ye.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,r.load())}),this._load}_onError(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)}_isSourcePlaying(){const r=this.source;return!r.paused&&!r.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(ye.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(ye.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(r.videoWidth,r.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()}dispose(){this._isConnectedToTicker&&(ye.shared.remove(this.update,this),this._isConnectedToTicker=!1);const r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(ye.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(ye.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(r){r!==this._updateFPS&&(this._updateFPS=r)}static test(r,t){return globalThis.HTMLVideoElement&&r instanceof HTMLVideoElement||Jh.TYPES.includes(t)}};let Nc=Jh;Nc.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];Nc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};Vh.push(Nn,Kp,WT,Nc,Fo,Xo,C0,VT);class vl{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?wt.EMPTY:(t=t||new wt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:i,b:n,c:s,d:o,tx:a,ty:l}=t,u=i*e.x+s*e.y+a,h=n*e.x+o*e.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(t){let e=this.minX,i=this.minY,n=this.maxX,s=this.maxY,o=t[0],a=t[1];e=o<e?o:e,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=t[2],a=t[3],e=o<e?o:e,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=t[4],a=t[5],e=o<e?o:e,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,o=t[6],a=t[7],e=o<e?o:e,i=a<i?a:i,n=o>n?o:n,s=a>s?a:s,this.minX=e,this.minY=i,this.maxX=n,this.maxY=s}addFrame(t,e,i,n,s){this.addFrameMatrix(t.worldTransform,e,i,n,s)}addFrameMatrix(t,e,i,n,s){const o=t.a,a=t.b,l=t.c,u=t.d,h=t.tx,c=t.ty;let d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,x=o*e+l*i+h,v=a*e+u*i+c;d=x<d?x:d,f=v<f?v:f,p=x>p?x:p,m=v>m?v:m,x=o*n+l*i+h,v=a*n+u*i+c,d=x<d?x:d,f=v<f?v:f,p=x>p?x:p,m=v>m?v:m,x=o*e+l*s+h,v=a*e+u*s+c,d=x<d?x:d,f=v<f?v:f,p=x>p?x:p,m=v>m?v:m,x=o*n+l*s+h,v=a*n+u*s+c,d=x<d?x:d,f=v<f?v:f,p=x>p?x:p,m=v>m?v:m,this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addVertexData(t,e,i){let n=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=e;l<i;l+=2){const u=t[l],h=t[l+1];n=u<n?u:n,s=h<s?h:s,o=u>o?u:o,a=h>a?h:a}this.minX=n,this.minY=s,this.maxX=o,this.maxY=a}addVertices(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)}addVerticesMatrix(t,e,i,n,s=0,o=s){const a=t.a,l=t.b,u=t.c,h=t.d,c=t.tx,d=t.ty;let f=this.minX,p=this.minY,m=this.maxX,x=this.maxY;for(let v=i;v<n;v+=2){const g=e[v],_=e[v+1],y=a*g+u*_+c,A=h*_+l*g+d;f=Math.min(f,y-s),m=Math.max(m,y+s),p=Math.min(p,A-o),x=Math.max(x,A+o)}this.minX=f,this.minY=p,this.maxX=m,this.maxY=x}addBounds(t){const e=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s}addBoundsMask(t,e){const i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=s&&n<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=s&&n<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,i,n,s,o){t-=s,e-=o,i+=s,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n}}class Ut extends Li{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Cc,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new vl,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let i=0;i<e.length;++i){const n=e[i];Object.defineProperty(Ut.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new wt),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new wt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new vl);const e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-s,o}toGlobal(t,e,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,i=1,n=1,s=0,o=0,a=0,l=0,u=0){return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new qT),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*zy}set angle(t){this.transform.rotation=t*Xy}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class qT extends Ut{constructor(){super(...arguments),this.sortDirty=null}}Ut.prototype.displayObjectUpdateTransform=Ut.prototype.updateTransform;const YT=new Bt;function KT(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}const tc=class extends Ut{constructor(){super(),this.children=[],this.sortableChildren=tc.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(r){}addChild(...r){if(r.length>1)for(let t=0;t<r.length;t++)this.addChild(r[t]);else{const t=r[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return r[0]}addChildAt(r,t){if(t<0||t>this.children.length)throw new Error(`${r}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(t,0,r),this._boundsID++,this.onChildrenChange(t),r.emit("added",this),this.emit("childAdded",r,this,t),r}swapChildren(r,t){if(r===t)return;const e=this.getChildIndex(r),i=this.getChildIndex(t);this.children[e]=t,this.children[i]=r,this.onChildrenChange(e<i?e:i)}getChildIndex(r){const t=this.children.indexOf(r);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(r,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const e=this.getChildIndex(r);Fn(this.children,e,1),this.children.splice(t,0,r),this.onChildrenChange(t)}getChildAt(r){if(r<0||r>=this.children.length)throw new Error(`getChildAt: Index (${r}) does not exist.`);return this.children[r]}removeChild(...r){if(r.length>1)for(let t=0;t<r.length;t++)this.removeChild(r[t]);else{const t=r[0],e=this.children.indexOf(t);if(e===-1)return null;t.parent=null,t.transform._parentID=-1,Fn(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e)}return r[0]}removeChildAt(r){const t=this.getChildAt(r);return t.parent=null,t.transform._parentID=-1,Fn(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r),t}removeChildren(r=0,t=this.children.length){const e=r,i=t,n=i-e;let s;if(n>0&&n<=i){s=this.children.splice(e,n);for(let o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(let o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}else if(n===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let r=!1;for(let t=0,e=this.children.length;t<e;++t){const i=this.children[t];i._lastSortedIndex=t,!r&&i.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(KT),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let r=0,t=this.children.length;r<t;++r){const e=this.children[r];e.visible&&e.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let r=0;r<this.children.length;r++){const t=this.children[r];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const e=t._mask.isMaskData?t._mask.maskObject:t._mask;e?(e.calculateBounds(),this._bounds.addBoundsMask(t._bounds,e._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(r,t=!1){const e=super.getLocalBounds(r);if(!t)for(let i=0,n=this.children.length;i<n;++i){const s=this.children[i];s.visible&&s.updateTransform()}return e}_calculateBounds(){}_renderWithCulling(r){const t=r.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let e,i;this.cullArea?(e=this.cullArea,i=this.worldTransform):this._render!==tc.prototype._render&&(e=this.getBounds(!0));const n=r.projection.transform;if(n&&(i?(i=YT.copyFrom(i),i.prepend(n)):i=n),e&&t.intersects(e,i))this._render(r);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const a=this.children[s],l=a.cullable;a.cullable=l||!this.cullArea,a.render(r),a.cullable=l}}render(r){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(let e=0,i=this.children.length;e<i;++e)this.children[e].render(r)}}renderAdvanced(r){var n,s,o;const t=this.filters,e=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<t.length;a++)t[a].enabled&&this._enabledFilters.push(t[a])}const i=t&&((n=this._enabledFilters)==null?void 0:n.length)||e&&(!e.isMaskData||e.enabled&&(e.autoDetect||e.type!==Kt.NONE));if(i&&r.batch.flush(),t&&((s=this._enabledFilters)!=null&&s.length)&&r.filter.push(this,this._enabledFilters),e&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(let a=0,l=this.children.length;a<l;++a)this.children[a].render(r)}i&&r.batch.flush(),e&&r.mask.pop(this),t&&((o=this._enabledFilters)!=null&&o.length)&&r.filter.pop()}_render(r){}destroy(r){super.destroy(),this.sortDirty=!1;const t=typeof r=="boolean"?r:r==null?void 0:r.children,e=this.removeChildren(0,this.children.length);if(t)for(let i=0;i<e.length;++i)e[i].destroy(r)}get width(){return this.scale.x*this.getLocalBounds().width}set width(r){const t=this.getLocalBounds().width;t!==0?this.scale.x=r/t:this.scale.x=1,this._width=r}get height(){return this.scale.y*this.getLocalBounds().height}set height(r){const t=this.getLocalBounds().height;t!==0?this.scale.y=r/t:this.scale.y=1,this._height=r}};let ke=tc;ke.defaultSortableChildren=!1;ke.prototype.containerUpdateTransform=ke.prototype.updateTransform;Object.defineProperties(lt,{SORTABLE_CHILDREN:{get(){return ke.defaultSortableChildren},set(r){Dt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),ke.defaultSortableChildren=r}}});const ms=new It,ZT=new Uint16Array([0,1,2,0,2,3]);class Kn extends ke{constructor(t){super(),this._anchor=new ni(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=Tt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||pt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=ZT,this.pluginName="batch",this.isSprite=!0,this._roundPixels=lt.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Cn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Cn(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,i=e.a,n=e.b,s=e.c,o=e.d,a=e.tx,l=e.ty,u=this.vertexData,h=t.trim,c=t.orig,d=this._anchor;let f=0,p=0,m=0,x=0;if(h?(p=h.x-d._x*c.width,f=p+h.width,x=h.y-d._y*c.height,m=x+h.height):(p=-d._x*c.width,f=p+c.width,x=-d._y*c.height,m=x+c.height),u[0]=i*p+s*x+a,u[1]=o*x+n*p+l,u[2]=i*f+s*x+a,u[3]=o*x+n*f+l,u[4]=i*f+s*m+a,u[5]=o*m+n*f+l,u[6]=i*p+s*m+a,u[7]=o*m+n*p+l,this._roundPixels){const v=lt.RESOLUTION;for(let g=0;g<u.length;++g)u[g]=Math.round(u[g]*v)/v}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,u=s.d,h=s.tx,c=s.ty,d=-n._x*i.width,f=d+i.width,p=-n._y*i.height,m=p+i.height;e[0]=o*d+l*p+h,e[1]=u*p+a*d+c,e[2]=o*f+l*p+h,e[3]=u*p+a*f+c,e[4]=o*f+l*m+h,e[5]=u*m+a*f+c,e[6]=o*d+l*m+h,e[7]=u*m+a*d+c}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new vl),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new wt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,ms);const e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x;let s=0;return ms.x>=n&&ms.x<n+e&&(s=-i*this.anchor.y,ms.y>=s&&ms.y<s+i)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!i)}this._texture=null}static from(t,e){const i=t instanceof pt?t:pt.from(t,e);return new Kn(i)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=Cn(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=Cn(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tint}set tint(t){this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16)}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||pt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const N0=new Bt;Ut.prototype._cacheAsBitmap=!1;Ut.prototype._cacheData=null;Ut.prototype._cacheAsBitmapResolution=null;Ut.prototype._cacheAsBitmapMultisample=null;class QT{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Ut.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let t;r?(this._cacheData||(this._cacheData=new QT),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});Ut.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};Ut.prototype._initCachedDisplayObject=function(t){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const i=this.getLocalBounds(null,!0).clone();if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;i.pad(p)}i.ceil(lt.RESOLUTION);const n=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=ci.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),u=`cacheAsBitmap_${Mi()}`;this._cacheData.textureCacheId=u,At.addToCache(l.baseTexture,u),pt.addToCache(l,u);const h=this.transform.localTransform.copyTo(N0).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:h,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(n,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const c=new Kn(l);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(i.x/i.width),c.anchor.y=-(i.y/i.height),c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)};Ut.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Ut.prototype._initCachedDisplayObjectCanvas=function(t){var h;if((h=this._cacheData)!=null&&h.sprite)return;const e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,s=t._projTransform;e.ceil(lt.RESOLUTION);const o=ci.create({width:e.width,height:e.height}),a=`cacheAsBitmap_${Mi()}`;this._cacheData.textureCacheId=a,At.addToCache(o.baseTexture,a),pt.addToCache(o,a);const l=N0;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const u=new Kn(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=i,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};Ut.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Ut.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Ut.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,At.removeFromCache(this._cacheData.textureCacheId),pt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Ut.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};Ut.prototype.name=null;ke.prototype.getChildByName=function(t,e){for(let i=0,n=this.children.length;i<n;i++)if(this.children[i].name===t)return this.children[i];if(e)for(let i=0,n=this.children.length;i<n;i++){const s=this.children[i];if(!s.getChildByName)continue;const o=s.getChildByName(t,!0);if(o)return o}return null};Ut.prototype.getGlobalPosition=function(t=new It,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var JT=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class tE extends oe{constructor(t=1){super(zT,JT,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const eE={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},rE=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function iE(r){const t=eE[r],e=t.length;let i=rE,n="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<r;a++){let l=s.replace("%index%",a.toString());o=a,a>=e&&(o=r-a-1),l=l.replace("%value%",t[o].toString()),n+=l,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}const nE=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function sE(r,t){const e=Math.ceil(r/2);let i=nE,n="",s;t?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<r;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(e-1)}.0`),n+=a,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}class ec extends oe{constructor(t,e=8,i=4,n=oe.defaultResolution,s=5){const o=sE(s,t),a=iE(s);super(o,a),this.horizontal=t,this.resolution=n,this._quality=0,this.quality=i,this.blur=e}apply(t,e,i,n){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,i,n);else{const s=t.getFilterTexture(),o=t.renderer;let a=e,l=s;this.state.blend=!1,t.applyFilter(this,a,l,hr.CLEAR);for(let u=1;u<this.passes-1;u++){t.bindAndClear(a,hr.BLIT),this.uniforms.uSampler=l;const h=l;l=a,a=h,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,i,n),t.returnFilterTexture(s)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class oE extends oe{constructor(t=8,e=4,i=oe.defaultResolution,n=5){super(),this.blurXFilter=new ec(!0,t,e,i,n),this.blurYFilter=new ec(!1,t,e,i,n),this.resolution=i,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,i,n){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,hr.CLEAR),this.blurYFilter.apply(t,a,i,n),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,e,i,n):this.blurXFilter.apply(t,e,i,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var aE=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class rc extends oe{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(T0,aE,t),this.alpha=1}_loadMatrix(t,e=!1){let i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}tint(t,e){const i=t>>16&255,n=t>>8&255,s=t&255,o=[i/255,0,0,0,0,0,n/255,0,0,0,0,0,s/255,0,0,0,0,0,1,0];this._loadMatrix(o,e)}greyscale(t,e){const i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const i=Math.cos(t),n=Math.sin(t),s=Math.sqrt,o=1/3,a=s(o),l=i+(1-i)*o,u=o*(1-i)-a*n,h=o*(1-i)+a*n,c=o*(1-i)+a*n,d=i+o*(1-i),f=o*(1-i)-a*n,p=o*(1-i)-a*n,m=o*(1-i)+a*n,x=i+o*(1-i),v=[l,u,h,0,0,c,d,f,0,0,p,m,x,0,0,0,0,0,1,0];this._loadMatrix(v,e)}contrast(t,e){const i=(t||0)+1,n=-.5*(i-1),s=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(s,e)}saturate(t=0,e){const i=t*2/3+1,n=(i-1)*-.5,s=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(s,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,i,n,s){t=t||.2,e=e||.15,i=i||16770432,n=n||3375104;const o=(i>>16&255)/255,a=(i>>8&255)/255,l=(i&255)/255,u=(n>>16&255)/255,h=(n>>8&255)/255,c=(n&255)/255,d=[.3,.59,.11,0,0,o,a,l,t,0,u,h,c,e,0,o-u,a-h,l-c,0,0];this._loadMatrix(d,s)}night(t,e){t=t||.1;const i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,e)}predator(t,e){const i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}rc.prototype.grayscale=rc.prototype.greyscale;var lE=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,uE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class hE extends oe{constructor(t,e){const i=new Bt;t.renderable=!1,super(uE,lE,{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=i,e==null&&(e=20),this.scale=new It(e,e)}apply(t,e,i,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),t.applyFilter(this,e,i,n)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var cE=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,dE=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class fE extends oe{constructor(){super(dE,cE)}}var pE=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class xE extends oe{constructor(t=.5,e=Math.random()){super(T0,pE,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const Md={AlphaFilter:tE,BlurFilter:oE,BlurFilterPass:ec,ColorMatrixFilter:rc,DisplacementFilter:hE,FXAAFilter:fE,NoiseFilter:xE};Object.entries(Md).forEach(([r,t])=>{Object.defineProperty(Md,r,{get(){return Dt("7.1.0",`filters.${r} has moved to ${r}`),t}})});class Vo{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Vo.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new It,this.page=new It,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,i,n,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class yl extends Vo{constructor(){super(...arguments),this.client=new It,this.movement=new It,this.offset=new It,this.global=new It,this.screen=new It}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,n,s,o,a,l,u,h,c,d,f,p,m){throw new Error("Method not implemented.")}}class $e extends yl{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class kn extends yl{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}kn.DOM_DELTA_PIXEL=0;kn.DOM_DELTA_LINE=1;kn.DOM_DELTA_PAGE=2;const _E=2048,mE=new It,rh=new It;class gE{constructor(t){this.dispatch=new Li,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((i,n)=>i.priority-n.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let i=0,n=e.length;i<n;i++)e[i].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){const i=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,mE.set(t,e),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(t,e){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,s=i.length-1;n<s;n++)if(t.currentTarget=i[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let n=i.length-2;n>=0;n--)if(t.currentTarget=i[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,i=this.rootTarget){t.eventPhase=t.BUBBLING_PHASE;const n=i.children;if(n)for(let s=0;s<n.length;s++)this.all(t,e,n[s]);t.currentTarget=i,this.notifyTarget(t,e)}propagationPath(t){const e=[t];for(let i=0;i<_E&&t!==this.rootTarget;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestRecursive(t,e,i,n,s){if(!t||!t.visible||s(t,i))return null;if(t.interactiveChildren&&t.children){const o=t.children;for(let a=o.length-1;a>=0;a--){const l=o[a],u=this.hitTestRecursive(l,e||l.interactive,i,n,s);if(u){if(u.length>0&&!u[u.length-1].parent)continue;return(u.length>0||t.interactive)&&u.push(t),u}}}return e&&n(t,i)?t.interactive?[t]:[]:null}hitPruneFn(t,e){var i;if(t.hitArea&&(t.worldTransform.applyInverse(e,rh),!t.hitArea.contains(rh.x,rh.y)))return!0;if(t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;if(n&&!((i=n.containsPoint)!=null&&i.call(n,e)))return!0}return!1}hitTestFn(t,e){return t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var s,o;e=e??t.type;const i=`on${e}`;(o=(s=t.currentTarget)[i])==null||o.call(s,t);const n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof $e)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const n=e.button===2;this.dispatchEvent(e,n?"rightdown":"mousedown")}const i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var a,l;if(!(t instanceof $e)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t),i=e.pointerType==="mouse"||e.pointerType==="pen",n=this.trackingData(t.pointerId),s=this.findMountedTarget(n.overTargets);if(((a=n.overTargets)==null?void 0:a.length)>0&&s!==e.target){const u=t.type==="mousemove"?"mouseout":"pointerout",h=this.createPointerEvent(t,u,s);if(this.dispatchEvent(h,"pointerout"),i&&this.dispatchEvent(h,"mouseout"),!e.composedPath().includes(s)){const c=this.createPointerEvent(t,"pointerleave",s);for(c.eventPhase=c.AT_TARGET;c.target&&!e.composedPath().includes(c.target);)c.currentTarget=c.target,this.notifyTarget(c),i&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;this.freeEvent(c)}this.freeEvent(h)}if(s!==e.target){const u=t.type==="mousemove"?"mouseover":"pointerover",h=this.clonePointerEvent(e,u);this.dispatchEvent(h,"pointerover"),i&&this.dispatchEvent(h,"mouseover");let c=s==null?void 0:s.parent;for(;c&&c!==this.rootTarget.parent&&c!==e.target;)c=c.parent;if(!c||c===this.rootTarget.parent){const f=this.clonePointerEvent(e,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==s&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(h)}const o=this.moveOnAll?"all":"dispatchEvent";this[o](e,"pointermove"),this.all(e,"globalpointermove"),e.pointerType==="touch"&&(this[o](e,"touchmove"),this.all(e,"globaltouchmove")),i&&(this[o](e,"mousemove"),this.all(e,"globalmousemove"),this.cursor=(l=e.target)==null?void 0:l.cursor),n.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var o;if(!(t instanceof $e)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.createPointerEvent(t),n=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),n&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),n&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;e.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(t){if(!(t instanceof $e)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const i=t.pointerType==="mouse"||t.pointerType==="pen",n=this.findMountedTarget(e.overTargets),s=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(t,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;e.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof $e)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const n=this.trackingData(t.pointerId),s=this.findMountedTarget(n.pressTargetsByButton[t.button]);let o=s;if(s&&!i.composedPath().includes(s)){let a=s;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete n.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:e});const l=n.clicksByButton[t.button];if(l.target===a.target&&e-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=e,a.detail=l.clickCount,a.pointerType==="mouse"){const u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof $e)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.findMountedTarget(e.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(i){let s=i;for(;s;)n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof kn)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){const n=this.allocateEvent($e);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=i??this.hitTest(n.global.x,n.global.y),typeof e=="string"&&(n.type=e),n}createWheelEvent(t){const e=this.allocateEvent(kn);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const i=this.allocateEvent($e);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof $e&&e instanceof $e&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof yl&&e instanceof yl&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const i=t.currentTarget._events[e];if(i)if("fn"in i)i.once&&t.currentTarget.removeListener(e,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let n=0,s=i.length;n<s&&!t.propagationImmediatelyStopped;n++)i[n].once&&t.currentTarget.removeListener(e,i[n].fn,void 0,!0),i[n].fn.call(i[n].context,t)}}const vE=1,yE={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class w0{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new gE(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new $e(null),this.rootWheelEvent=new kn(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:t,resolution:e}=this.renderer;this.setTargetElement(t),this.resolution=e}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.domElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.domElement.style,i);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}onPointerDown(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch")return;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let i=0,n=e.length;i<n;i++){const s=e[i],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch")return;const e=this.normalizeToPointerData(t);for(let i=0,n=e.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch")return;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const i=e!==this.domElement?"outside":"",n=this.normalizeToPointerData(t);for(let s=0,o=n.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,n[s]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch")return;const e=this.normalizeToPointerData(t);for(let i=0,n=e.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,i){let n;this.domElement.parentElement?n=this.domElement.getBoundingClientRect():n={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const s=1/this.resolution;t.x=(e-n.left)*(this.domElement.width/n.width)*s,t.y=(i-n.top)*(this.domElement.height/n.height)*s}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let i=0,n=t.changedTouches.length;i<n;i++){const s=t.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=t.type,e.push(s)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const i=t;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=vE),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=yE[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}}w0.extension={name:"events",type:[ot.RendererSystem,ot.CanvasRendererSystem]};xt.add(w0);const TE={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(r,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,n=typeof t=="function"?void 0:t;r=i?`${r}capture`:r,t=typeof t=="function"?t:t.handleEvent,this.on(r,t,n)},removeEventListener(r,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,n=typeof t=="function"?void 0:t;r=i?`${r}capture`:r,t=typeof t=="function"?t:t.handleEvent,this.off(r,t,n)},dispatchEvent(r){if(!(r instanceof Vo))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};Ut.mixin(TE);const EE={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ut.mixin(EE);const AE=9,$a=100,SE=0,bE=0,kd=2,Ud=1,CE=-1e3,NE=-1e3,wE=2;class R0{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Lr.tablet||Lr.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${$a}px`,e.style.height=`${$a}px`,e.style.position="absolute",e.style.top=`${SE}px`,e.style.left=`${bE}px`,e.style.zIndex=kd.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${Ud}px`,t.style.height=`${Ud}px`,t.style.position="absolute",t.style.top=`${CE}px`,t.style.left=`${NE}px`,t.style.zIndex=wE.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}update(){const t=performance.now();if(Lr.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:i,width:n,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=n/o*l,h=s/a*l;let c=this.div;c.style.left=`${e}px`,c.style.top=`${i}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,Fn(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{c=f._accessibleDiv;let p=f.hitArea;const m=f.worldTransform;f.hitArea?(c.style.left=`${(m.tx+p.x*m.a)*u}px`,c.style.top=`${(m.ty+p.y*m.d)*h}px`,c.style.width=`${p.width*m.a*u}px`,c.style.height=`${p.height*m.d*h}px`):(p=f.getBounds(),this.capHitArea(p),c.style.left=`${p.x*u}px`,c.style.top=`${p.y*h}px`,c.style.width=`${p.width*u}px`,c.style.height=`${p.height*h}px`,c.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(c.title=f.accessibleTitle),c.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&c.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==c.title||f.tabIndex!==c.tabIndex)&&(c.title=f.accessibleTitle,c.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:i}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>i&&(t.height=i-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${$a}px`,e.style.height=`${$a}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=kd.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:i}=t.target,n=this.renderer.events.rootBoundary,s=Object.assign(new Vo(n),{target:i});n.rootTarget=this.renderer.lastObjectRendered,e.forEach(o=>n.dispatchEvent(s,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===AE&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}R0.extension={name:"accessibility",type:[ot.RendererPlugin,ot.CanvasRendererPlugin]};xt.add(R0);const ic=class{constructor(r){this.stage=new ke,r=Object.assign({forceCanvas:!1},r),this.renderer=jT(r),ic._plugins.forEach(t=>{t.init.call(this,r)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(r,t){const e=ic._plugins.slice(0);e.reverse(),e.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(r),this.renderer=null}};let wc=ic;wc._plugins=[];xt.handleByList(ot.Application,wc._plugins);class I0{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,i;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:s}=this._resizeTo;e=n,i=s}this.renderer.resize(e,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}I0.extension=ot.Application;xt.add(I0);const Hd={loader:ot.LoadParser,resolver:ot.ResolveParser,cache:ot.CacheParser,detection:ot.DetectionParser};xt.handle(ot.Asset,r=>{const t=r.ref;Object.entries(Hd).filter(([e])=>!!t[e]).forEach(([e,i])=>xt.add(Object.assign(t[e],{extension:t[e].extension??i})))},r=>{const t=r.ref;Object.keys(Hd).filter(e=>!!t[e]).forEach(e=>xt.remove(t[e]))});class RE{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function P0(r,t){if(Array.isArray(t)){for(const e of t)if(r.startsWith(`data:${e}`))return!0;return!1}return r.startsWith(`data:${t}`)}function Ml(r,t){const e=r.split("?")[0],i=le.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const Br=(r,t)=>(Array.isArray(r)||(r=[r]),t?r.map(e=>typeof e=="string"?t(e):e):r),nc=(r,t)=>{const e=t.split("?")[1];return e&&(r+=`?${e}`),r};function D0(r,t,e,i,n){const s=t[e];for(let o=0;o<s.length;o++){const a=s[o];e<t.length-1?D0(r.replace(i[e],a),t,e+1,i,n):n.push(r.replace(i[e],a))}}function IE(r){const t=/\{(.*?)\}/g,e=r.match(t),i=[];if(e){const n=[];e.forEach(s=>{const o=s.substring(1,s.length-1).split(",");n.push(o)}),D0(r,n,0,e,i)}else i.push(r);return i}const Tl=r=>!Array.isArray(r);class PE{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=Br(t);let n;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(e)){n=l.getCacheableAssets(i,e);break}}n||(n={},i.forEach(a=>{n[a]=e}));const s=Object.keys(n),o={cacheKeys:s,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==e&&console.warn("[Cache] already has key:",a),this._cache.set(a,n[a])}),e instanceof pt){const a=e;i.forEach(l=>{a.baseTexture!==pt.EMPTY.baseTexture&&At.addToCache(a.baseTexture,l),pt.addToCache(a,l)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(n=>{this._cache.delete(n)}),e.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const gs=new PE;class DE{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{var s,o;let n=null;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.load&&((s=l.test)!=null&&s.call(l,t,e,this))){n=await l.load(t,e,this),i.parser=l;break}}if(!i.parser)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has being added`),null;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];l.parse&&l.parse&&await((o=l.testParse)==null?void 0:o.call(l,n,e,this))&&(n=await l.parse(n,e,this)||n,i.parser=l)}return n})(),i}async load(t,e){let i=0;const n={},s=Tl(t),o=Br(t,u=>({src:u})),a=o.length,l=o.map(async u=>{const h=le.toAbsolute(u.src);if(!n[u.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,u)),n[u.src]=await this.promiseCache[h].promise,e&&e(++i/a)}catch(c){throw delete this.promiseCache[h],delete n[u.src],new Error(`[Loader.load] Failed to load ${h}.
${c}`)}});return await Promise.all(l),s?n[o[0].src]:n}async unload(t){const i=Br(t,n=>({src:n})).map(async n=>{var a,l;const s=le.toAbsolute(n.src),o=this.promiseCache[s];if(o){const u=await o.promise;(l=(a=o.parser)==null?void 0:a.unload)==null||l.call(a,u,n,this),delete this.promiseCache[s]}});await Promise.all(i)}get parsers(){return this._parsers}}var vr=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(vr||{});const OE={extension:{type:ot.LoadParser,priority:vr.Low},test(r){return le.extname(r).toLowerCase()===".json"},async load(r){return await(await lt.ADAPTER.fetch(r)).json()}};xt.add(OE);const FE={extension:{type:ot.LoadParser,priority:vr.Low},test(r){return le.extname(r).toLowerCase()===".txt"},async load(r){return await(await lt.ADAPTER.fetch(r)).text()}};xt.add(FE);const LE=["normal","bold","100","200","300","400","500","600","700","800","900"],BE=[".ttf",".otf",".woff",".woff2"],ME=["font/ttf","font/otf","font/woff","font/woff2"];function kE(r){const t=le.extname(r);return le.basename(r,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")}const UE={extension:{type:ot.LoadParser,priority:vr.Low},test(r){return P0(r,ME)||Ml(r,BE)},async load(r,t){var i,n,s;const e=lt.ADAPTER.getFontFaceSet();if(e){const o=[],a=((i=t.data)==null?void 0:i.family)??kE(r),l=((s=(n=t.data)==null?void 0:n.weights)==null?void 0:s.filter(h=>LE.includes(h)))??["normal"],u=t.data??{};for(let h=0;h<l.length;h++){const c=l[h],d=new FontFace(a,`url(${encodeURI(r)})`,{...u,weight:c});await d.load(),e.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(t=>lt.ADAPTER.getFontFaceSet().delete(t))}};xt.add(UE);let jd=0,ih;const HE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",jE={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${HE}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},GE={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let nh;class $E{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const e=URL.createObjectURL(new Blob([jE.code],{type:"application/javascript"})),i=new Worker(e);i.addEventListener("message",n=>{i.terminate(),URL.revokeObjectURL(e),t(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){ih===void 0&&(ih=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<ih&&(nh||(nh=URL.createObjectURL(new Blob([GE.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(nh),t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise((n,s)=>{this.queue.push({id:t,arguments:e,resolve:n,reject:s})});return this.next(),i}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),i=e.id;this.resolveHash[jd]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:jd++,id:i})}}const Gd=new $E;function kl(r,t,e){const i=new pt(r);return i.baseTexture.on("dispose",()=>{delete t.promiseCache[e]}),i}const zE=[".jpeg",".jpg",".png",".webp",".avif"],XE=["image/jpeg","image/png","image/webp","image/avif"];async function VE(r){const t=await lt.ADAPTER.fetch(r);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const Lo={extension:{type:ot.LoadParser,priority:vr.High},config:{preferWorkers:!0},test(r){return P0(r,XE)||Ml(r,zE)},async load(r,t,e){let i=null;globalThis.createImageBitmap?this.config.preferWorkers&&await Gd.isImageBitmapSupported()?i=await Gd.loadImageBitmap(r):i=await VE(r):i=await new Promise(s=>{i=new Image,i.crossOrigin="anonymous",i.src=r,i.complete?s(i):i.onload=()=>{s(i)}});const n=new At(i,{resolution:li(r),...t.data});return n.resource.src=r,kl(n,e,r)},unload(r){r.destroy(!0)}};xt.add(Lo);const WE={extension:{type:ot.LoadParser,priority:vr.High},test(r){return le.extname(r).toLowerCase()===".svg"},async testParse(r){return Fo.test(r)},async parse(r,t,e){var o,a,l;const i=new Fo(r,(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions),n=new At(i,{resolution:li(r),...t==null?void 0:t.data});n.resource.src=r;const s=kl(n,e,r);return(l=(a=t==null?void 0:t.data)==null?void 0:a.resourceOptions)!=null&&l.autoLoad||await i.load(),s},async load(r,t){return(await lt.ADAPTER.fetch(r)).text()},unload:Lo.unload};xt.add(WE);class qE{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];Array.isArray(e)?e.forEach(n=>{if(typeof n.name=="string"){const s=this._createBundleAssetId(t,n.name);i.push(s),this.add([n.name,s],n.srcs,n.data)}else{const s=n.name.map(o=>this._createBundleAssetId(t,o));s.forEach(o=>{i.push(o)}),this.add([...n.name,...s],n.srcs)}}):Object.keys(e).forEach(n=>{i.push(this._createBundleAssetId(t,n)),this.add([n,this._createBundleAssetId(t,n)],e[n])}),this._bundles[t]=i}add(t,e,i){const n=Br(t);n.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(e)||(typeof e=="string"?e=IE(e):e=[e]);const s=e.map(o=>{let a=o;if(typeof o=="string"){let l=!1;for(let u=0;u<this._parsers.length;u++){const h=this._parsers[u];if(h.test(o)){a=h.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=n),(this._basePath||this._rootPath)&&(a.src=le.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??i,a});n.forEach(o=>{this._assetMap[o]=s})}resolveBundle(t){const e=Tl(t);t=Br(t);const i={};return t.forEach(n=>{const s=this._bundles[n];if(s){const o=this.resolve(s),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(n,l)]=u}i[n]=a}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const n in e)i[n]=e[n].src;return i}return e.src}resolve(t){const e=Tl(t);t=Br(t);const i={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let s=this._assetMap[n];const o=this._getPreferredOrder(s),a=s[0];o==null||o.priority.forEach(l=>{o.params[l].forEach(u=>{const h=s.filter(c=>c[l]?c[l]===u:!1);h.length&&(s=h)})}),this._resolverHash[n]=s[0]??a}else{let s=n;(this._basePath||this._rootPath)&&(s=le.toAbsolute(s,this._basePath,this._rootPath)),s=this._appendDefaultSearchParams(s),this._resolverHash[n]={src:s}}i[n]=this._resolverHash[n]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[0],n=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}}class YE{constructor(){this._detections=[],this._initialized=!1,this.resolver=new qE,this.loader=new DE,this.cache=gs,this._backgroundLoader=new RE(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var s,o,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const e=((s=t.texturePreference)==null?void 0:s.resolution)??1,i=typeof e=="number"?[e]:e;let n=[];if((o=t.texturePreference)!=null&&o.format){const l=(a=t.texturePreference)==null?void 0:a.format;n=typeof l=="string"?[l]:l;for(const u of this._detections)await u.test()||(n=await u.remove(n))}else for(const l of this._detections)await l.test()&&(n=await l.add(n));this.resolver.prefer({params:{format:n,resolution:i}})}add(t,e,i){this.resolver.add(t,e,i)}async load(t,e){this._initialized||await this.init();const i=Tl(t),n=Br(t).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),s=this.resolver.resolve(n),o=await this._mapLoadToResolve(s,e);return i?o[n[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const n=this.resolver.resolveBundle(t),s={},o=Object.keys(n);let a=0,l=0;const u=()=>{e==null||e(++a/l)},h=o.map(c=>{const d=n[c];return l+=Object.keys(d).length,this._mapLoadToResolve(d,u).then(f=>{s[c]=f})});return await Promise.all(h),i?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return gs.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=gs.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const s=await this.loader.load(i,e);this._backgroundLoader.active=!0;const o={};return i.forEach((a,l)=>{const u=s[a.src],h=[a.src];a.alias&&h.push(...a.alias),o[n[l]]=u,gs.set(h,u)}),o}async unload(t){this._initialized||await this.init();const e=Br(t).map(n=>typeof n!="string"?n.src:n),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=Br(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(n=>this._unloadFromResolved(e[n]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(i=>{gs.remove(i.src)}),await this.loader.unload(e)}get detections(){return this._detections}get preferWorkers(){return Lo.config.preferWorkers}set preferWorkers(t){Lo.config.preferWorkers=t}}const za=new YE;xt.handleByList(ot.LoadParser,za.loader.parsers).handleByList(ot.ResolveParser,za.resolver.parsers).handleByList(ot.CacheParser,za.cache.parsers).handleByList(ot.DetectionParser,za.detections);const KE={extension:ot.CacheParser,test:r=>Array.isArray(r)&&r.every(t=>t instanceof pt),getCacheableAssets:(r,t)=>{const e={};return r.forEach(i=>{t.forEach((n,s)=>{e[i+(s===0?"":s+1)]=n})}),e}};xt.add(KE);const ZE={extension:{type:ot.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const r="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await lt.ADAPTER.fetch(r).then(e=>e.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async r=>[...r,"avif"],remove:async r=>r.filter(t=>t!=="avif")};xt.add(ZE);const QE={extension:{type:ot.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const r="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await lt.ADAPTER.fetch(r).then(e=>e.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async r=>[...r,"webp"],remove:async r=>r.filter(t=>t!=="webp")};xt.add(QE);const $d=["png","jpg","jpeg"],JE={extension:{type:ot.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...$d],remove:async r=>r.filter(t=>!$d.includes(t))};xt.add(JE);const t1={extension:ot.ResolveParser,test:Lo.test,parse:r=>{var t;return{resolution:parseFloat(((t=lt.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:r.split(".").pop(),src:r}}};xt.add(t1);var we=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r))(we||{});const El={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let Fr,An;function zd(){An={s3tc:Fr.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Fr.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Fr.getExtension("WEBGL_compressed_texture_etc"),etc1:Fr.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Fr.getExtension("WEBGL_compressed_texture_pvrtc")||Fr.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Fr.getExtension("WEBGL_compressed_texture_atc"),astc:Fr.getExtension("WEBGL_compressed_texture_astc")}}const e1={extension:{type:ot.DetectionParser,priority:2},test:async()=>{const t=lt.ADAPTER.createCanvas().getContext("webgl");return t?(Fr=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{An||zd();const t=[];for(const e in An)An[e]&&t.push(e);return[...t,...r]},remove:async r=>(An||zd(),r.filter(t=>!(t in An)))};xt.add(e1);class r1 extends Xo{constructor(t,e={width:1,height:1,autoLoad:!0}){let i,n;typeof t=="string"?(i=t,n=new Uint8Array):(i=null,n=t),super(n,e),this.origin=i,this.buffer=n?new Xh(n):null,this.origin&&e.autoLoad!==!1&&this.load(),n!=null&&n.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}async load(){const i=await(await(await fetch(this.origin)).blob()).arrayBuffer();return this.data=new Uint32Array(i),this.buffer=new Xh(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),this}}class Fi extends r1{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=Fi._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||Fi._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,i){const n=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:u,levelHeight:h,levelBuffer:c}=this._levelBuffers[o];n.compressedTexImage2D(n.TEXTURE_2D,l,this.format,u,h,0,c)}return!0}onBlobLoaded(){this._levelBuffers=Fi._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,e,i,n,s,o,a){const l=new Array(i);let u=t.byteOffset,h=o,c=a,d=h+n-1&~(n-1),f=c+s-1&~(s-1),p=d*f*El[e];for(let m=0;m<i;m++)l[m]={levelID:m,levelWidth:i>1?h:d,levelHeight:i>1?c:f,levelBuffer:new Uint8Array(t.buffer,u,p)},u+=p,h=h>>1||1,c=c>>1||1,d=h+n-1&~(n-1),f=c+s-1&~(s-1),p=d*f*El[e];return l}}const sh=4,Xa=124,i1=32,Xd=20,n1=542327876,Va={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},s1={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Wa={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},o1=1,a1=2,l1=4,u1=64,h1=512,c1=131072,d1=827611204,f1=861165636,p1=894720068,x1=808540228,_1=4,m1={[d1]:we.COMPRESSED_RGBA_S3TC_DXT1_EXT,[f1]:we.COMPRESSED_RGBA_S3TC_DXT3_EXT,[p1]:we.COMPRESSED_RGBA_S3TC_DXT5_EXT},g1={[70]:we.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:we.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:we.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:we.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:we.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:we.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:we.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:we.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:we.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function v1(r){const t=new Uint32Array(r);if(t[0]!==n1)throw new Error("Invalid DDS file magic word");const i=new Uint32Array(r,0,Xa/Uint32Array.BYTES_PER_ELEMENT),n=i[Va.HEIGHT],s=i[Va.WIDTH],o=i[Va.MIPMAP_COUNT],a=new Uint32Array(r,Va.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,i1/Uint32Array.BYTES_PER_ELEMENT),l=a[o1];if(l&l1){const u=a[s1.FOURCC];if(u!==x1){const _=m1[u],y=sh+Xa,A=new Uint8Array(r,y);return[new Fi(A,{format:_,width:s,height:n,levels:o})]}const h=sh+Xa,c=new Uint32Array(t.buffer,h,Xd/Uint32Array.BYTES_PER_ELEMENT),d=c[Wa.DXGI_FORMAT],f=c[Wa.RESOURCE_DIMENSION],p=c[Wa.MISC_FLAG],m=c[Wa.ARRAY_SIZE],x=g1[d];if(x===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(p===_1)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const v=new Array,g=sh+Xa+Xd;if(m===1)v.push(new Uint8Array(r,g));else{const _=El[x];let y=0,A=s,T=n;for(let E=0;E<o;E++){const N=Math.max(1,A+3&-4),D=Math.max(1,T+3&-4),P=N*D*_;y+=P,A=A>>>1,T=T>>>1}let b=g;for(let E=0;E<m;E++)v.push(new Uint8Array(r,b,y)),b+=y}return v.map(_=>new Fi(_,{format:x,width:s,height:n,levels:o}))}throw l&u1?new Error("DDSParser does not support uncompressed texture data."):l&h1?new Error("DDSParser does not supported YUV uncompressed texture data."):l&c1?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&a1?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Vd=[171,75,84,88,32,49,49,187,13,10,26,10],y1=67305985,je={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},sc=64,Wd={[_t.UNSIGNED_BYTE]:1,[_t.UNSIGNED_SHORT]:2,[_t.INT]:4,[_t.UNSIGNED_INT]:4,[_t.FLOAT]:4,[_t.HALF_FLOAT]:8},T1={[st.RGBA]:4,[st.RGB]:3,[st.RG]:2,[st.RED]:1,[st.LUMINANCE]:1,[st.LUMINANCE_ALPHA]:2,[st.ALPHA]:1},E1={[_t.UNSIGNED_SHORT_4_4_4_4]:2,[_t.UNSIGNED_SHORT_5_5_5_1]:2,[_t.UNSIGNED_SHORT_5_6_5]:2};function A1(r,t,e=!1){const i=new DataView(t);if(!S1(r,i))return null;const n=i.getUint32(je.ENDIANNESS,!0)===y1,s=i.getUint32(je.GL_TYPE,n),o=i.getUint32(je.GL_FORMAT,n),a=i.getUint32(je.GL_INTERNAL_FORMAT,n),l=i.getUint32(je.PIXEL_WIDTH,n),u=i.getUint32(je.PIXEL_HEIGHT,n)||1,h=i.getUint32(je.PIXEL_DEPTH,n)||1,c=i.getUint32(je.NUMBER_OF_ARRAY_ELEMENTS,n)||1,d=i.getUint32(je.NUMBER_OF_FACES,n),f=i.getUint32(je.NUMBER_OF_MIPMAP_LEVELS,n),p=i.getUint32(je.BYTES_OF_KEY_VALUE_DATA,n);if(u===0||h!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");const m=4,x=4,v=l+3&-4,g=u+3&-4,_=new Array(c);let y=l*u;s===0&&(y=v*g);let A;if(s!==0?Wd[s]?A=Wd[s]*T1[o]:A=E1[s]:A=El[a],A===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const T=e?C1(i,p,n):null;let E=y*A,N=l,D=u,P=v,B=g,M=sc+p;for(let H=0;H<f;H++){const Z=i.getUint32(M,n);let at=M+4;for(let nt=0;nt<c;nt++){let ut=_[nt];ut||(ut=_[nt]=new Array(f)),ut[H]={levelID:H,levelWidth:f>1||s!==0?N:P,levelHeight:f>1||s!==0?D:B,levelBuffer:new Uint8Array(t,at,E)},at+=E}M+=Z+4,M=M%4!==0?M+4-M%4:M,N=N>>1||1,D=D>>1||1,P=N+m-1&~(m-1),B=D+x-1&~(x-1),E=P*B*A}return s!==0?{uncompressed:_.map(H=>{let Z=H[0].levelBuffer,at=!1;return s===_t.FLOAT?Z=new Float32Array(H[0].levelBuffer.buffer,H[0].levelBuffer.byteOffset,H[0].levelBuffer.byteLength/4):s===_t.UNSIGNED_INT?(at=!0,Z=new Uint32Array(H[0].levelBuffer.buffer,H[0].levelBuffer.byteOffset,H[0].levelBuffer.byteLength/4)):s===_t.INT&&(at=!0,Z=new Int32Array(H[0].levelBuffer.buffer,H[0].levelBuffer.byteOffset,H[0].levelBuffer.byteLength/4)),{resource:new Xo(Z,{width:H[0].levelWidth,height:H[0].levelHeight}),type:s,format:at?b1(o):o}}),kvData:T}:{compressed:_.map(H=>new Fi(null,{format:a,width:l,height:u,levels:f,levelBuffers:H})),kvData:T}}function S1(r,t){for(let e=0;e<Vd.length;e++)if(t.getUint8(e)!==Vd[e])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function b1(r){switch(r){case st.RGBA:return st.RGBA_INTEGER;case st.RGB:return st.RGB_INTEGER;case st.RG:return st.RG_INTEGER;case st.RED:return st.RED_INTEGER;default:return r}}function C1(r,t,e){const i=new Map;let n=0;for(;n<t;){const s=r.getUint32(sc+n,e),o=sc+n+4,a=3-(s+3)%4;if(s===0||s>t-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&r.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(r.buffer,o,l)),h=new DataView(r.buffer,o+l+1,s-l-1);i.set(u,h),n+=4+s+a}return i}const N1={extension:{type:ot.LoadParser,priority:vr.High},test(r){return Ml(r,".dds")},async load(r,t,e){const n=await(await lt.ADAPTER.fetch(r)).arrayBuffer(),o=v1(n).map(a=>{const l=new At(a,{mipmap:mr.OFF,alphaMode:Je.NO_PREMULTIPLIED_ALPHA,resolution:li(r),...t.data});return kl(l,e,r)});return o.length===1?o[0]:o},unload(r){Array.isArray(r)?r.forEach(t=>t.destroy(!0)):r.destroy(!0)}};xt.add(N1);const w1={extension:{type:ot.LoadParser,priority:vr.High},test(r){return Ml(r,".ktx")},async load(r,t,e){const n=await(await lt.ADAPTER.fetch(r)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=A1(r,n),l=s??o,u={mipmap:mr.OFF,alphaMode:Je.NO_PREMULTIPLIED_ALPHA,resolution:li(r),...t.data},h=l.map(c=>{l===o&&Object.assign(u,{type:c.type,format:c.format});const d=new At(c,u);return d.ktxKeyValueData=a,kl(d,e,r)});return h.length===1?h[0]:h},unload(r){Array.isArray(r)?r.forEach(t=>t.destroy(!0)):r.destroy(!0)}};xt.add(w1);const R1={extension:ot.ResolveParser,test:r=>{const e=r.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(e)},parse:r=>{var i,n;if(r.split("?")[0].split(".").pop()==="ktx"){const s=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(s.some(o=>r.endsWith(o)))return{resolution:parseFloat(((i=lt.RETINA_PREFIX.exec(r))==null?void 0:i[1])??"1"),format:s.find(o=>r.endsWith(o)),src:r}}return{resolution:parseFloat(((n=lt.RETINA_PREFIX.exec(r))==null?void 0:n[1])??"1"),format:r.split(".").pop(),src:r}}};xt.add(R1);const I1=new wt,P1=4,oc=class{constructor(r){this.renderer=r}async image(r,t,e){const i=new Image;return i.src=await this.base64(r,t,e),i}async base64(r,t,e){const i=this.canvas(r);if(i.toDataURL!==void 0)return i.toDataURL(t,e);if(i.convertToBlob!==void 0){const n=await i.convertToBlob({type:t,quality:e});return await new Promise(s=>{const o=new FileReader;o.onload=()=>s(o.result),o.readAsDataURL(n)})}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")}canvas(r,t){const{pixels:e,width:i,height:n,flipY:s}=this._rawPixels(r,t);let o=new Ad(i,n,1);const a=o.context.getImageData(0,0,i,n);if(oc.arrayPostDivide(e,a.data),o.context.putImageData(a,0,0),s){const l=new Ad(o.width,o.height,1);l.context.scale(1,-1),l.context.drawImage(o.canvas,0,-n),o.destroy(),o=l}return o.canvas}pixels(r,t){const{pixels:e}=this._rawPixels(r,t);return oc.arrayPostDivide(e,e),e}_rawPixels(r,t){const e=this.renderer;let i,n=!1,s,o=!1;if(r)if(r instanceof ci)s=r;else{const c=e.context.webGLVersion>=2?e.multisample:Ht.NONE;if(s=this.renderer.generateTexture(r,{multisample:c}),c!==Ht.NONE){const d=ci.create({width:s.width,height:s.height});e.framebuffer.bind(s.framebuffer),e.framebuffer.blit(d.framebuffer),e.framebuffer.bind(null),s.destroy(!0),s=d}o=!0}s?(i=s.baseTexture.resolution,t=t??s.frame,n=!1,e.renderTexture.bind(s)):(i=e.resolution,t||(t=I1,t.width=e.width,t.height=e.height),n=!0,e.renderTexture.bind(null));const a=Math.round(t.width*i),l=Math.round(t.height*i),u=new Uint8Array(P1*a*l),h=e.gl;return h.readPixels(Math.round(t.x*i),Math.round(t.y*i),a,l,h.RGBA,h.UNSIGNED_BYTE,u),o&&s.destroy(!0),{pixels:u,width:a,height:l,flipY:n}}destroy(){this.renderer=null}static arrayPostDivide(r,t){for(let e=0;e<r.length;e+=4){const i=t[e+3]=r[e+3];i!==0?(t[e]=Math.round(Math.min(r[e]*255/i,255)),t[e+1]=Math.round(Math.min(r[e+1]*255/i,255)),t[e+2]=Math.round(Math.min(r[e+2]*255/i,255))):(t[e]=r[e],t[e+1]=r[e+1],t[e+2]=r[e+2])}}};let O0=oc;O0.extension={name:"extract",type:ot.RendererSystem};xt.add(O0);const Al={build(r){const t=r.points;let e,i,n,s,o,a;if(r.type===se.CIRC){const p=r.shape;e=p.x,i=p.y,o=a=p.radius,n=s=0}else if(r.type===se.ELIP){const p=r.shape;e=p.x,i=p.y,o=p.width,a=p.height,n=s=0}else{const p=r.shape,m=p.width/2,x=p.height/2;e=p.x+m,i=p.y+x,o=a=Math.max(0,Math.min(p.radius,Math.min(m,x))),n=m-o,s=x-a}if(!(o>=0&&a>=0&&n>=0&&s>=0)){t.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(n?4:0)+(s?4:0);if(t.length=u,u===0)return;if(l===0){t.length=8,t[0]=t[6]=e+n,t[1]=t[3]=i+s,t[2]=t[4]=e-n,t[5]=t[7]=i-s;return}let h=0,c=l*4+(n?2:0)+2,d=c,f=u;{const p=n+o,m=s,x=e+p,v=e-p,g=i+m;if(t[h++]=x,t[h++]=g,t[--c]=g,t[--c]=v,s){const _=i-m;t[d++]=v,t[d++]=_,t[--f]=_,t[--f]=x}}for(let p=1;p<l;p++){const m=Math.PI/2*(p/l),x=n+Math.cos(m)*o,v=s+Math.sin(m)*a,g=e+x,_=e-x,y=i+v,A=i-v;t[h++]=g,t[h++]=y,t[--c]=y,t[--c]=_,t[d++]=_,t[d++]=A,t[--f]=A,t[--f]=g}{const p=n,m=s+a,x=e+p,v=e-p,g=i+m,_=i-m;t[h++]=x,t[h++]=g,t[--f]=_,t[--f]=x,n&&(t[h++]=v,t[h++]=g,t[--f]=_,t[--f]=v)}},triangulate(r,t){const e=r.points,i=t.points,n=t.indices;if(e.length===0)return;let s=i.length/2;const o=s;let a,l;if(r.type!==se.RREC){const h=r.shape;a=h.x,l=h.y}else{const h=r.shape;a=h.x+h.width/2,l=h.y+h.height/2}const u=r.matrix;i.push(r.matrix?u.a*a+u.c*l+u.tx:a,r.matrix?u.b*a+u.d*l+u.ty:l),s++,i.push(e[0],e[1]);for(let h=2;h<e.length;h+=2)i.push(e[h],e[h+1]),n.push(s++,o,s);n.push(o+1,o,s)}};function qd(r,t=!1){const e=r.length;if(e<6)return;let i=0;for(let n=0,s=r[e-2],o=r[e-1];n<e;n+=2){const a=r[n],l=r[n+1];i+=(a-s)*(l+o),s=a,o=l}if(!t&&i>0||t&&i<=0){const n=e/2;for(let s=n+n%2;s<e;s+=2){const o=e-s-2,a=e-s-1,l=s,u=s+1;[r[o],r[l]]=[r[l],r[o]],[r[a],r[u]]=[r[u],r[a]]}}}const F0={build(r){r.points=r.shape.points.slice()},triangulate(r,t){let e=r.points;const i=r.holes,n=t.points,s=t.indices;if(e.length>=6){qd(e,!1);const o=[];for(let u=0;u<i.length;u++){const h=i[u];qd(h.points,!0),o.push(e.length/2),e=e.concat(h.points)}const a=pl(e,o,2);if(!a)return;const l=n.length/2;for(let u=0;u<a.length;u+=3)s.push(a[u]+l),s.push(a[u+1]+l),s.push(a[u+2]+l);for(let u=0;u<e.length;u++)n.push(e[u])}}},D1={build(r){const t=r.shape,e=t.x,i=t.y,n=t.width,s=t.height,o=r.points;o.length=0,n>=0&&s>=0&&o.push(e,i,e+n,i,e+n,i+s,e,i+s)},triangulate(r,t){const e=r.points,i=t.points;if(e.length===0)return;const n=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},O1={build(r){Al.build(r)},triangulate(r,t){Al.triangulate(r,t)}};var Xe=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(Xe||{}),Oi=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(Oi||{});const Un={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,t=20){if(!this.adaptive||!r||isNaN(r))return t;let e=Math.ceil(r/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};class Yd{static curveTo(t,e,i,n,s,o){const a=o[o.length-2],u=o[o.length-1]-e,h=a-t,c=n-e,d=i-t,f=Math.abs(u*d-h*c);if(f<1e-8||s===0)return(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e),null;const p=u*u+h*h,m=c*c+d*d,x=u*c+h*d,v=s*Math.sqrt(p)/f,g=s*Math.sqrt(m)/f,_=v*x/p,y=g*x/m,A=v*d+g*h,T=v*c+g*u,b=h*(g+_),E=u*(g+_),N=d*(v+y),D=c*(v+y),P=Math.atan2(E-T,b-A),B=Math.atan2(D-T,N-A);return{cx:A+t,cy:T+e,radius:s,startAngle:P,endAngle:B,anticlockwise:h*c>d*u}}static arc(t,e,i,n,s,o,a,l,u){const h=a-o,c=Un._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/gl)*40),d=h/(c*2),f=d*2,p=Math.cos(d),m=Math.sin(d),x=c-1,v=x%1/x;for(let g=0;g<=x;++g){const _=g+v*g,y=d+o+f*_,A=Math.cos(y),T=-Math.sin(y);u.push((p*A+m*T)*s+i,(p*-T+m*A)*s+n)}}}class F1{constructor(){this.reset()}begin(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Rc{static curveLength(t,e,i,n,s,o,a,l){let h=0,c=0,d=0,f=0,p=0,m=0,x=0,v=0,g=0,_=0,y=0,A=t,T=e;for(let b=1;b<=10;++b)c=b/10,d=c*c,f=d*c,p=1-c,m=p*p,x=m*p,v=x*t+3*m*c*i+3*p*d*s+f*a,g=x*e+3*m*c*n+3*p*d*o+f*l,_=A-v,y=T-g,A=v,T=g,h+=Math.sqrt(_*_+y*y);return h}static curveTo(t,e,i,n,s,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const h=Un._segmentsCount(Rc.curveLength(l,u,t,e,i,n,s,o));let c=0,d=0,f=0,p=0,m=0;a.push(l,u);for(let x=1,v=0;x<=h;++x)v=x/h,c=1-v,d=c*c,f=d*c,p=v*v,m=p*v,a.push(f*l+3*d*v*t+3*c*p*i+m*s,f*u+3*d*v*e+3*c*p*n+m*o)}}function Kd(r,t,e,i,n,s,o,a){const l=r-e*n,u=t-i*n,h=r+e*s,c=t+i*s;let d,f;o?(d=i,f=-e):(d=-i,f=e);const p=l+d,m=u+f,x=h+d,v=c+f;return a.push(p,m,x,v),2}function Si(r,t,e,i,n,s,o,a){const l=e-r,u=i-t;let h=Math.atan2(l,u),c=Math.atan2(n-r,s-t);a&&h<c?h+=Math.PI*2:!a&&h>c&&(c+=Math.PI*2);let d=h;const f=c-h,p=Math.abs(f),m=Math.sqrt(l*l+u*u),x=(15*p*Math.sqrt(m)/Math.PI>>0)+1,v=f/x;if(d+=v,a){o.push(r,t,e,i);for(let g=1,_=d;g<x;g++,_+=v)o.push(r,t,r+Math.sin(_)*m,t+Math.cos(_)*m);o.push(r,t,n,s)}else{o.push(e,i,r,t);for(let g=1,_=d;g<x;g++,_+=v)o.push(r+Math.sin(_)*m,t+Math.cos(_)*m,r,t);o.push(n,s,r,t)}return x*2}function L1(r,t){const e=r.shape;let i=r.points||e.points.slice();const n=t.closePointEps;if(i.length===0)return;const s=r.lineStyle,o=new It(i[0],i[1]),a=new It(i[i.length-2],i[i.length-1]),l=e.type!==se.POLY||e.closeStroke,u=Math.abs(o.x-a.x)<n&&Math.abs(o.y-a.y)<n;if(l){i=i.slice(),u&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const nt=(o.x+a.x)*.5,ut=(a.y+o.y)*.5;i.unshift(nt,ut),i.push(nt,ut)}const h=t.points,c=i.length/2;let d=i.length;const f=h.length/2,p=s.width/2,m=p*p,x=s.miterLimit*s.miterLimit;let v=i[0],g=i[1],_=i[2],y=i[3],A=0,T=0,b=-(g-y),E=v-_,N=0,D=0,P=Math.sqrt(b*b+E*E);b/=P,E/=P,b*=p,E*=p;const B=s.alignment,M=(1-B)*2,H=B*2;l||(s.cap===Oi.ROUND?d+=Si(v-b*(M-H)*.5,g-E*(M-H)*.5,v-b*M,g-E*M,v+b*H,g+E*H,h,!0)+2:s.cap===Oi.SQUARE&&(d+=Kd(v,g,b,E,M,H,!0,h))),h.push(v-b*M,g-E*M,v+b*H,g+E*H);for(let nt=1;nt<c-1;++nt){v=i[(nt-1)*2],g=i[(nt-1)*2+1],_=i[nt*2],y=i[nt*2+1],A=i[(nt+1)*2],T=i[(nt+1)*2+1],b=-(g-y),E=v-_,P=Math.sqrt(b*b+E*E),b/=P,E/=P,b*=p,E*=p,N=-(y-T),D=_-A,P=Math.sqrt(N*N+D*D),N/=P,D/=P,N*=p,D*=p;const ut=_-v,Rt=g-y,Y=_-A,Q=T-y,Et=ut*Y+Rt*Q,C=Rt*Y-Q*ut,R=C<0;if(Math.abs(C)<.001*Math.abs(Et)){h.push(_-b*M,y-E*M,_+b*H,y+E*H),Et>=0&&(s.join===Xe.ROUND?d+=Si(_,y,_-b*M,y-E*M,_-N*M,y-D*M,h,!1)+4:d+=2,h.push(_-N*H,y-D*H,_+N*M,y+D*M));continue}const I=(-b+v)*(-E+y)-(-b+_)*(-E+g),k=(-N+A)*(-D+y)-(-N+_)*(-D+T),U=(ut*k-Y*I)/C,L=(Q*I-Rt*k)/C,$=(U-_)*(U-_)+(L-y)*(L-y),tt=_+(U-_)*M,K=y+(L-y)*M,q=_-(U-_)*H,F=y-(L-y)*H,O=Math.min(ut*ut+Rt*Rt,Y*Y+Q*Q),G=R?M:H,V=O+G*G*m,et=$<=V;let it=s.join;if(it===Xe.MITER&&$/m>x&&(it=Xe.BEVEL),et)switch(it){case Xe.MITER:{h.push(tt,K,q,F);break}case Xe.BEVEL:{R?h.push(tt,K,_+b*H,y+E*H,tt,K,_+N*H,y+D*H):h.push(_-b*M,y-E*M,q,F,_-N*M,y-D*M,q,F),d+=2;break}case Xe.ROUND:{R?(h.push(tt,K,_+b*H,y+E*H),d+=Si(_,y,_+b*H,y+E*H,_+N*H,y+D*H,h,!0)+4,h.push(tt,K,_+N*H,y+D*H)):(h.push(_-b*M,y-E*M,q,F),d+=Si(_,y,_-b*M,y-E*M,_-N*M,y-D*M,h,!1)+4,h.push(_-N*M,y-D*M,q,F));break}}else{switch(h.push(_-b*M,y-E*M,_+b*H,y+E*H),it){case Xe.MITER:{R?h.push(q,F,q,F):h.push(tt,K,tt,K),d+=2;break}case Xe.ROUND:{R?d+=Si(_,y,_+b*H,y+E*H,_+N*H,y+D*H,h,!0)+2:d+=Si(_,y,_-b*M,y-E*M,_-N*M,y-D*M,h,!1)+2;break}}h.push(_-N*M,y-D*M,_+N*H,y+D*H),d+=2}}v=i[(c-2)*2],g=i[(c-2)*2+1],_=i[(c-1)*2],y=i[(c-1)*2+1],b=-(g-y),E=v-_,P=Math.sqrt(b*b+E*E),b/=P,E/=P,b*=p,E*=p,h.push(_-b*M,y-E*M,_+b*H,y+E*H),l||(s.cap===Oi.ROUND?d+=Si(_-b*(M-H)*.5,y-E*(M-H)*.5,_-b*M,y-E*M,_+b*H,y+E*H,h,!1)+2:s.cap===Oi.SQUARE&&(d+=Kd(_,y,b,E,M,H,!1,h)));const Z=t.indices,at=Un.epsilon*Un.epsilon;for(let nt=f;nt<d+f-2;++nt)v=h[nt*2],g=h[nt*2+1],_=h[(nt+1)*2],y=h[(nt+1)*2+1],A=h[(nt+2)*2],T=h[(nt+2)*2+1],!(Math.abs(v*(y-T)+_*(T-g)+A*(g-y))<at)&&Z.push(nt,nt+1,nt+2)}function B1(r,t){let e=0;const i=r.shape,n=r.points||i.points,s=i.type!==se.POLY||i.closeStroke;if(n.length===0)return;const o=t.points,a=t.indices,l=n.length/2,u=o.length/2;let h=u;for(o.push(n[0],n[1]),e=1;e<l;e++)o.push(n[e*2],n[e*2+1]),a.push(h,h+1),h++;s&&a.push(h,u)}function Zd(r,t){r.lineStyle.native?B1(r,t):L1(r,t)}class Ic{static curveLength(t,e,i,n,s,o){const a=t-2*i+s,l=e-2*n+o,u=2*i-2*t,h=2*n-2*e,c=4*(a*a+l*l),d=4*(a*u+l*h),f=u*u+h*h,p=2*Math.sqrt(c+d+f),m=Math.sqrt(c),x=2*c*m,v=2*Math.sqrt(f),g=d/m;return(x*p+m*d*(p-v)+(4*f*c-d*d)*Math.log((2*m+g+p)/(g+v)))/(4*x)}static curveTo(t,e,i,n,s){const o=s[s.length-2],a=s[s.length-1],l=Un._segmentsCount(Ic.curveLength(o,a,t,e,i,n));let u=0,h=0;for(let c=1;c<=l;++c){const d=c/l;u=o+(t-o)*d,h=a+(e-a)*d,s.push(u+(t+(i-t)*d-u)*d,h+(e+(n-e)*d-h)*d)}}}const oh={[se.POLY]:F0,[se.CIRC]:Al,[se.ELIP]:Al,[se.RECT]:D1,[se.RREC]:O1},Qd=[],qa=[];class Sl{constructor(t,e=null,i=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type}clone(){return new Sl(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const vn=new It,L0=class extends Up{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new vl,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),qa.push(this.drawCalls[r]);this.drawCalls.length=0;for(let r=0;r<this.batches.length;r++){const t=this.batches[r];t.reset(),Qd.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(r,t=null,e=null,i=null){const n=new Sl(r,t,e,i);return this.graphicsData.push(n),this.dirty++,this}drawHole(r,t=null){if(!this.graphicsData.length)return null;const e=new Sl(r,null,null,t),i=this.graphicsData[this.graphicsData.length-1];return e.lineStyle=i.lineStyle,i.holes.push(e),this.dirty++,this}destroy(){super.destroy();for(let r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(r){const t=this.graphicsData;for(let e=0;e<t.length;++e){const i=t[e];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(r,vn):vn.copyFrom(r),i.shape.contains(vn.x,vn.y))){let n=!1;if(i.holes){for(let s=0;s<i.holes.length;s++)if(i.holes[s].shape.contains(vn.x,vn.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const r=this.uvs,t=this.graphicsData;let e=null,i=null;this.batches.length>0&&(e=this.batches[this.batches.length-1],i=e.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const l=t[a],u=l.fillStyle,h=l.lineStyle;oh[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(u.visible||h.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const f=d===0?u:h;if(!f.visible)continue;const p=f.texture.baseTexture,m=this.indices.length,x=this.points.length/2;p.wrapMode=oi.REPEAT,d===0?this.processFill(l):this.processLine(l);const v=this.points.length/2-x;v!==0&&(e&&!this._compareStyles(i,f)&&(e.end(m,x),e=null),e||(e=Qd.pop()||new F1,e.begin(f,m,x),this.batches.push(e),i=f),this.addUvs(this.points,r,f.texture,x,v,f.matrix))}}const n=this.indices.length,s=this.points.length/2;if(e&&e.end(n,s),this.batches.length===0){this.batchable=!0;return}const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(r,t){return!(!r||!t||r.texture.baseTexture!==t.texture.baseTexture||r.color+r.alpha!==t.color+t.alpha||!!r.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let r=0,t=this.graphicsData.length;r<t;r++){const e=this.graphicsData[r],i=e.fillStyle,n=e.lineStyle;if(i&&!i.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const r=this.batches;for(let t=0,e=r.length;t<e;t++){const i=r[t];for(let n=0;n<i.size;n++){const s=i.start+n;this.indicesUint16[s]=this.indicesUint16[s]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const r=this.batches;for(let t=0;t<r.length;t++)if(r[t].style.native)return!1;return this.points.length<L0.BATCHABLE_SIZE*2}buildDrawCalls(){let r=++At._globalBatch;for(let h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),qa.push(this.drawCalls[h]);this.drawCalls.length=0;const t=this.colors,e=this.textureIds;let i=qa.pop();i||(i=new Wh,i.texArray=new Yh),i.texArray.count=0,i.start=0,i.size=0,i.type=dr.TRIANGLES;let n=0,s=null,o=0,a=!1,l=dr.TRIANGLES,u=0;this.drawCalls.push(i);for(let h=0;h<this.batches.length;h++){const c=this.batches[h],d=8,f=c.style,p=f.texture.baseTexture;a!==!!f.native&&(a=!!f.native,l=a?dr.LINES:dr.TRIANGLES,s=null,n=d,r++),s!==p&&(s=p,p._batchEnabled!==r&&(n===d&&(r++,n=0,i.size>0&&(i=qa.pop(),i||(i=new Wh,i.texArray=new Yh),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=l),p.touched=1,p._batchEnabled=r,p._batchLocation=n,p.wrapMode=oi.REPEAT,i.texArray.elements[i.texArray.count++]=p,n++)),i.size+=c.size,u+=c.size,o=p._batchLocation,this.addColors(t,f.color,f.alpha,c.attribSize,c.attribStart),this.addTextureIds(e,o,c.attribSize,c.attribStart)}At._globalBatch=r,this.packAttributes()}packAttributes(){const r=this.points,t=this.uvs,e=this.colors,i=this.textureIds,n=new ArrayBuffer(r.length*3*4),s=new Float32Array(n),o=new Uint32Array(n);let a=0;for(let l=0;l<r.length/2;l++)s[a++]=r[l*2],s[a++]=r[l*2+1],s[a++]=t[l*2],s[a++]=t[l*2+1],o[a++]=e[l],s[a++]=i[l];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(r){r.holes.length?F0.triangulate(r,this):oh[r.type].triangulate(r,this)}processLine(r){Zd(r,this);for(let t=0;t<r.holes.length;t++)Zd(r.holes[t],this)}processHoles(r){for(let t=0;t<r.length;t++){const e=r[t];oh[e.type].build(e),e.matrix&&this.transformPoints(e.points,e.matrix)}}calculateBounds(){const r=this._bounds;r.clear(),r.addVertexData(this.points,0,this.points.length),r.pad(this.boundsPadding,this.boundsPadding)}transformPoints(r,t){for(let e=0;e<r.length/2;e++){const i=r[e*2],n=r[e*2+1];r[e*2]=t.a*i+t.c*n+t.tx,r[e*2+1]=t.b*i+t.d*n+t.ty}}addColors(r,t,e,i,n=0){const s=(t>>16)+(t&65280)+((t&255)<<16),o=Ec(s,e);r.length=Math.max(r.length,n+i);for(let a=0;a<i;a++)r[n+a]=o}addTextureIds(r,t,e,i=0){r.length=Math.max(r.length,i+e);for(let n=0;n<e;n++)r[i+n]=t}addUvs(r,t,e,i,n,s=null){let o=0;const a=t.length,l=e.frame;for(;o<n;){let h=r[(i+o)*2],c=r[(i+o)*2+1];if(s){const d=s.a*h+s.c*c+s.tx;c=s.b*h+s.d*c+s.ty,h=d}o++,t.push(h/l.width,c/l.height)}const u=e.baseTexture;(l.width<u.width||l.height<u.height)&&this.adjustUvs(t,e,a,n)}adjustUvs(r,t,e,i){const n=t.baseTexture,s=1e-6,o=e+i*2,a=t.frame,l=a.width/n.width,u=a.height/n.height;let h=a.x/a.width,c=a.y/a.height,d=Math.floor(r[e]+s),f=Math.floor(r[e+1]+s);for(let p=e+2;p<o;p+=2)d=Math.min(d,Math.floor(r[p]+s)),f=Math.min(f,Math.floor(r[p+1]+s));h-=d,c-=f;for(let p=e;p<o;p+=2)r[p]=(r[p]+h)*l,r[p+1]=(r[p+1]+c)*u}};let B0=L0;B0.BATCHABLE_SIZE=100;class Ul{constructor(){this.color=16777215,this.alpha=1,this.texture=pt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Ul;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=pt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Pc extends Ul{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Oi.BUTT,this.join=Xe.MITER,this.miterLimit=10}clone(){const t=new Pc;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const M1=new Float32Array(3),ah={},ll=class extends ke{constructor(r=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Ul,this._lineStyle=new Pc,this._matrix=null,this._holeMode=!1,this.state=zr.for2d(),this._geometry=r||new B0,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=Tt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new ll(this._geometry)}set blendMode(r){this.state.blendMode=r}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(r){this._tint=r}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(r=null,t=0,e=1,i=.5,n=!1){return typeof r=="number"&&(r={width:r,color:t,alpha:e,alignment:i,native:n}),this.lineTextureStyle(r)}lineTextureStyle(r){r=Object.assign({width:0,texture:pt.WHITE,color:r!=null&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Oi.BUTT,join:Xe.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();const t=r.width>0&&r.alpha>0;return t?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:t},r)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const r=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Ln,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[t-2],r[t-1]))}else this.currentPath=new Ln,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(r,t){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=t,this}lineTo(r,t){this.currentPath||this.moveTo(0,0);const e=this.currentPath.points,i=e[e.length-2],n=e[e.length-1];return(i!==r||n!==t)&&e.push(r,t),this}_initCurve(r=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[r,t]):this.moveTo(r,t)}quadraticCurveTo(r,t,e,i){this._initCurve();const n=this.currentPath.points;return n.length===0&&this.moveTo(0,0),Ic.curveTo(r,t,e,i,n),this}bezierCurveTo(r,t,e,i,n,s){return this._initCurve(),Rc.curveTo(r,t,e,i,n,s,this.currentPath.points),this}arcTo(r,t,e,i,n){this._initCurve(r,t);const s=this.currentPath.points,o=Yd.curveTo(r,t,e,i,n,s);if(o){const{cx:a,cy:l,radius:u,startAngle:h,endAngle:c,anticlockwise:d}=o;this.arc(a,l,u,h,c,d)}return this}arc(r,t,e,i,n,s=!1){if(i===n)return this;if(!s&&n<=i?n+=gl:s&&i<=n&&(i+=gl),n-i===0)return this;const a=r+Math.cos(i)*e,l=t+Math.sin(i)*e,u=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const c=Math.abs(h[h.length-2]-a),d=Math.abs(h[h.length-1]-l);c<u&&d<u||h.push(a,l)}else this.moveTo(a,l),h=this.currentPath.points;return Yd.arc(a,l,r,t,e,i,n,s,h),this}beginFill(r=0,t=1){return this.beginTextureFill({texture:pt.WHITE,color:r,alpha:t})}beginTextureFill(r){r=Object.assign({texture:pt.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();const t=r.alpha>0;return t?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:t},r)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(r,t,e,i){return this.drawShape(new wt(r,t,e,i))}drawRoundedRect(r,t,e,i,n){return this.drawShape(new bc(r,t,e,i,n))}drawCircle(r,t,e){return this.drawShape(new Ac(r,t,e))}drawEllipse(r,t,e,i){return this.drawShape(new Sc(r,t,e,i))}drawPolygon(...r){let t,e=!0;const i=r[0];i.points?(e=i.closeStroke,t=i.points):Array.isArray(r[0])?t=r[0]:t=r;const n=new Ln(t);return n.closeStroke=e,this.drawShape(n),this}drawShape(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const r=this._geometry.graphicsData;return r.length===1&&r[0].shape.type===se.RECT&&!r[0].matrix&&!r[0].holes.length&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)}_render(r){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))}_populateBatches(){const r=this._geometry,t=this.blendMode,e=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=e,this.vertexData=new Float32Array(r.points);for(let i=0;i<e;i++){const n=r.batches[i],s=n.style.color,o=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2),a=new Float32Array(r.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2),l=new Uint16Array(r.indicesUint16.buffer,n.start*2,n.size),u={vertexData:o,blendMode:t,indices:l,uvs:a,_batchRGB:Do(s),_tintRGB:s,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[i]=u}}_renderBatched(r){if(this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,e=this.batches.length;t<e;t++){const i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha,r.plugins[this.pluginName].render(i)}}}_renderDirect(r){const t=this._resolveDirectShader(r),e=this._geometry,i=this.tint,n=this.worldAlpha,s=t.uniforms,o=e.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(i>>16&255)/255*n,s.tint[1]=(i>>8&255)/255*n,s.tint[2]=(i&255)/255*n,s.tint[3]=n,r.shader.bind(t),r.geometry.bind(e,t),r.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(r,e.drawCalls[a])}_renderDrawCallDirect(r,t){const{texArray:e,type:i,size:n,start:s}=t,o=e.count;for(let a=0;a<o;a++)r.texture.bind(e.elements[a],a);r.geometry.draw(i,n,s)}_resolveDirectShader(r){let t=this.shader;const e=this.pluginName;if(!t){if(!ah[e]){const{maxTextures:i}=r.plugins[e],n=new Int32Array(i);for(let a=0;a<i;a++)n[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Bt,default:Ze.from({uSamplers:n},!0)},o=r.plugins[e]._shader.program;ah[e]=new xr(o,s)}t=ah[e]}return t}_calculateBounds(){this.finishPoly();const r=this._geometry;if(!r.graphicsData.length)return;const{minX:t,minY:e,maxX:i,maxY:n}=r.bounds;this._bounds.addFrame(this.transform,t,e,i,n)}containsPoint(r){return this.worldTransform.applyInverse(r,ll._TEMP_POINT),this._geometry.containsPoint(ll._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const r=Do(this.tint,M1);for(let t=0;t<this.batches.length;t++){const e=this.batches[t],i=e._batchRGB,n=r[0]*i[0]*255,s=r[1]*i[1]*255,o=r[2]*i[2]*255,a=(n<<16)+(s<<8)+(o|0);e._tintRGB=(a>>16)+(a&65280)+((a&255)<<16)}}}calculateVertices(){const r=this.transform._worldID;if(this._transformID===r)return;this._transformID=r;const t=this.transform.worldTransform,e=t.a,i=t.b,n=t.c,s=t.d,o=t.tx,a=t.ty,l=this._geometry.points,u=this.vertexData;let h=0;for(let c=0;c<l.length;c+=2){const d=l[c],f=l[c+1];u[h++]=e*d+n*f+o,u[h++]=s*f+i*d+a}}closePath(){const r=this.currentPath;return r&&(r.closeStroke=!0,this.finishPoly()),this}setMatrix(r){return this._matrix=r,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(r){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(r)}};let Hl=ll;Hl.curves=Un;Hl._TEMP_POINT=new It;class k1{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const lh=new It,Jd=new Ln,M0=class extends ke{constructor(r,t,e,i=dr.TRIANGLES){super(),this.geometry=r,this.shader=t,this.state=e||zr.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=lt.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(r){this._geometry!==r&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=r,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(r){this.shader=r}get material(){return this.shader}set blendMode(r){this.state.blendMode=r}get blendMode(){return this.state.blendMode}set roundPixels(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(r){this.shader.tint=r}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(r){this.shader.texture=r}_render(r){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===dr.TRIANGLES&&t.length<M0.BATCHABLE_SIZE*2?this._renderToBatch(r):this._renderDefault(r)}_renderDefault(r){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),r.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),r.shader.bind(t),r.state.set(this.state),r.geometry.bind(this.geometry,t),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(r){const t=this.geometry,e=this.shader;e.uvMatrix&&(e.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=e._tintRGB,this._texture=e.texture;const i=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[i]),r.plugins[i].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,l=n.d,u=n.tx,h=n.ty,c=this.vertexData;for(let d=0;d<c.length/2;d++){const f=e[d*2],p=e[d*2+1];c[d*2]=s*f+a*p+u,c[d*2+1]=o*f+l*p+h}if(this._roundPixels){const d=lt.RESOLUTION;for(let f=0;f<c.length;++f)c[f]=Math.round(c[f]*d)/d}this.vertexDirty=i}calculateUvs(){const r=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new k1(r,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,lh);const t=this.geometry.getBuffer("aVertexPosition").data,e=Jd.points,i=this.geometry.getIndex().data,n=i.length,s=this.drawMode===4?3:1;for(let o=0;o+2<n;o+=s){const a=i[o]*2,l=i[o+1]*2,u=i[o+2]*2;if(e[0]=t[a],e[1]=t[a+1],e[2]=t[l],e[3]=t[l+1],e[4]=t[u],e[5]=t[u+1],Jd.contains(lh.x,lh.y))return!0}return!1}destroy(r){super.destroy(r),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let ac=M0;ac.BATCHABLE_SIZE=100;class U1 extends ui{constructor(t,e,i){super();const n=new zt(t),s=new zt(e,!0),o=new zt(i,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,_t.FLOAT).addAttribute("aTextureCoord",s,2,!1,_t.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var H1=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,j1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class tf extends xr{constructor(t,e){const i={uSampler:t,alpha:1,uTextureMatrix:Bt.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(i,e.uniforms),super(e.program||qe.from(j1,H1),i),this._colorDirty=!1,this.uvMatrix=new i0(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this.tint=e.tint,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture;Lp(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class ef{constructor(t,e,i){this.geometry=new ui,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<t.length;++n){let s=t[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||_t.FLOAT,offset:s.offset},e[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new zt(Iy(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=e,e+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new zt(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=n,n+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new zt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===_t.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===_t.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,e,i){for(let n=0;n<this.dynamicProperties.length;n++){const s=this.dynamicProperties[n];s.uploadFunction(t,e,i,s.type===_t.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,i){for(let n=0;n<this.staticProperties.length;n++){const s=this.staticProperties[n];s.uploadFunction(t,e,i,s.type===_t.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var G1=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,$1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class k0 extends Bl{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Bt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:_t.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=xr.from($1,G1,{}),this.state=zr.for2d()}render(t){const e=t.children,i=t._maxSize,n=t._batchSize,s=this.renderer;let o=e.length;if(o===0)return;o>i&&!t.autoResize&&(o=i);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=e[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=Fp(t.blendMode,u),s.state.set(this.state);const h=s.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=Ry(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,u),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=n,p+=1){let m=o-f;m>n&&(m=n),p>=a.length&&a.push(this._generateOneMoreBuffer(t));const x=a[p];x.uploadDynamic(e,f,m);const v=t._bufferUpdateIDs[p]||0;d=d||x._updateID<v,d&&(x._updateID=t._updateID,x.uploadStatic(e,f,m)),s.geometry.bind(x.geometry),h.drawElements(h.TRIANGLES,m*6,h.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],i=t._maxSize,n=t._batchSize,s=t._properties;for(let o=0;o<i;o+=n)e.push(new ef(this.properties,s,n));return e}_generateOneMoreBuffer(t){const e=t._batchSize,i=t._properties;return new ef(this.properties,i,e)}uploadVertices(t,e,i,n,s,o){let a=0,l=0,u=0,h=0;for(let c=0;c<i;++c){const d=t[e+c],f=d._texture,p=d.scale.x,m=d.scale.y,x=f.trim,v=f.orig;x?(l=x.x-d.anchor.x*v.width,a=l+x.width,h=x.y-d.anchor.y*v.height,u=h+x.height):(a=v.width*(1-d.anchor.x),l=v.width*-d.anchor.x,u=v.height*(1-d.anchor.y),h=v.height*-d.anchor.y),n[o]=l*p,n[o+1]=h*m,n[o+s]=a*p,n[o+s+1]=h*m,n[o+s*2]=a*p,n[o+s*2+1]=u*m,n[o+s*3]=l*p,n[o+s*3+1]=u*m,o+=s*4}}uploadPosition(t,e,i,n,s,o){for(let a=0;a<i;a++){const l=t[e+a].position;n[o]=l.x,n[o+1]=l.y,n[o+s]=l.x,n[o+s+1]=l.y,n[o+s*2]=l.x,n[o+s*2+1]=l.y,n[o+s*3]=l.x,n[o+s*3+1]=l.y,o+=s*4}}uploadRotation(t,e,i,n,s,o){for(let a=0;a<i;a++){const l=t[e+a].rotation;n[o]=l,n[o+s]=l,n[o+s*2]=l,n[o+s*3]=l,o+=s*4}}uploadUvs(t,e,i,n,s,o){for(let a=0;a<i;++a){const l=t[e+a]._texture._uvs;l?(n[o]=l.x0,n[o+1]=l.y0,n[o+s]=l.x1,n[o+s+1]=l.y1,n[o+s*2]=l.x2,n[o+s*2+1]=l.y2,n[o+s*3]=l.x3,n[o+s*3+1]=l.y3,o+=s*4):(n[o]=0,n[o+1]=0,n[o+s]=0,n[o+s+1]=0,n[o+s*2]=0,n[o+s*2+1]=0,n[o+s*3]=0,n[o+s*3+1]=0,o+=s*4)}}uploadTint(t,e,i,n,s,o){for(let a=0;a<i;++a){const l=t[e+a],u=l._texture.baseTexture.alphaMode>0,h=l.alpha,c=h<1&&u?Ec(l._tintRGB,h):l._tintRGB+(h*255<<24);n[o]=c,n[o+s]=c,n[o+s*2]=c,n[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}k0.extension={name:"particle",type:ot.RendererPlugin};xt.add(k0);var jl=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(jl||{});const Ya={willReadFrequently:!0},ft=class{static get experimentalLetterSpacingSupported(){let r=ft._experimentalLetterSpacingSupported;if(r!==void 0){const t=lt.ADAPTER.getCanvasRenderingContext2D().prototype;r=ft._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return r}constructor(r,t,e,i,n,s,o,a,l){this.text=r,this.style=t,this.width=e,this.height=i,this.lines=n,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(r,t,e,i=ft._canvas){e=e??t.wordWrap;const n=t.toFontString(),s=ft.measureFont(n);s.fontSize===0&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);const o=i.getContext("2d",Ya);o.font=n;const l=(e?ft.wordWrap(r,t,i):r).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let h=0;for(let p=0;p<l.length;p++){const m=ft._measureText(l[p],t.letterSpacing,o);u[p]=m,h=Math.max(h,m)}let c=h+t.strokeThickness;t.dropShadow&&(c+=t.dropShadowDistance);const d=t.lineHeight||s.fontSize+t.strokeThickness;let f=Math.max(d,s.fontSize+t.strokeThickness*2)+(l.length-1)*(d+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new ft(r,t,c,f,l,u,d+t.leading,h,s)}static _measureText(r,t,e){let i=!1;ft.experimentalLetterSpacingSupported&&(ft.experimentalLetterSpacing?(e.letterSpacing=`${t}px`,e.textLetterSpacing=`${t}px`,i=!0):(e.letterSpacing="0px",e.textLetterSpacing="0px"));let n=e.measureText(r).width;return n>0&&(i?n-=t:n+=(ft.graphemeSegmenter(r).length-1)*t),n}static wordWrap(r,t,e=ft._canvas){const i=e.getContext("2d",Ya);let n=0,s="",o="";const a=Object.create(null),{letterSpacing:l,whiteSpace:u}=t,h=ft.collapseSpaces(u),c=ft.collapseNewlines(u);let d=!h;const f=t.wordWrapWidth+l,p=ft.tokenize(r);for(let m=0;m<p.length;m++){let x=p[m];if(ft.isNewline(x)){if(!c){o+=ft.addLine(s),d=!h,s="",n=0;continue}x=" "}if(h){const g=ft.isBreakingSpace(x),_=ft.isBreakingSpace(s[s.length-1]);if(g&&_)continue}const v=ft.getFromCache(x,l,a,i);if(v>f)if(s!==""&&(o+=ft.addLine(s),s="",n=0),ft.canBreakWords(x,t.breakWords)){const g=ft.wordWrapSplit(x);for(let _=0;_<g.length;_++){let y=g[_],A=y,T=1;for(;g[_+T];){const E=g[_+T];if(!ft.canBreakChars(A,E,x,_,t.breakWords))y+=E;else break;A=E,T++}_+=T-1;const b=ft.getFromCache(y,l,a,i);b+n>f&&(o+=ft.addLine(s),d=!1,s="",n=0),s+=y,n+=b}}else{s.length>0&&(o+=ft.addLine(s),s="",n=0);const g=m===p.length-1;o+=ft.addLine(x,!g),d=!1,s="",n=0}else v+n>f&&(d=!1,o+=ft.addLine(s),s="",n=0),(s.length>0||!ft.isBreakingSpace(x)||d)&&(s+=x,n+=v)}return o+=ft.addLine(s,!1),o}static addLine(r,t=!0){return r=ft.trimRight(r),r=t?`${r}
`:r,r}static getFromCache(r,t,e,i){let n=e[r];return typeof n!="number"&&(n=ft._measureText(r,t,i)+t,e[r]=n),n}static collapseSpaces(r){return r==="normal"||r==="pre-line"}static collapseNewlines(r){return r==="normal"}static trimRight(r){if(typeof r!="string")return"";for(let t=r.length-1;t>=0;t--){const e=r[t];if(!ft.isBreakingSpace(e))break;r=r.slice(0,-1)}return r}static isNewline(r){return typeof r!="string"?!1:ft._newlines.includes(r.charCodeAt(0))}static isBreakingSpace(r,t){return typeof r!="string"?!1:ft._breakingSpaces.includes(r.charCodeAt(0))}static tokenize(r){const t=[];let e="";if(typeof r!="string")return t;for(let i=0;i<r.length;i++){const n=r[i],s=r[i+1];if(ft.isBreakingSpace(n,s)||ft.isNewline(n)){e!==""&&(t.push(e),e=""),t.push(n);continue}e+=n}return e!==""&&t.push(e),t}static canBreakWords(r,t){return t}static canBreakChars(r,t,e,i,n){return!0}static wordWrapSplit(r){return ft.graphemeSegmenter(r)}static measureFont(r){if(ft._fonts[r])return ft._fonts[r];const t={ascent:0,descent:0,fontSize:0},e=ft._canvas,i=ft._context;i.font=r;const n=ft.METRICS_STRING+ft.BASELINE_SYMBOL,s=Math.ceil(i.measureText(n).width);let o=Math.ceil(i.measureText(ft.BASELINE_SYMBOL).width);const a=Math.ceil(ft.HEIGHT_MULTIPLIER*o);if(o=o*ft.BASELINE_MULTIPLIER|0,s===0||a===0)return ft._fonts[r]=t,t;e.width=s,e.height=a,i.fillStyle="#f00",i.fillRect(0,0,s,a),i.font=r,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(n,0,o);const l=i.getImageData(0,0,s,a).data,u=l.length,h=s*4;let c=0,d=0,f=!1;for(c=0;c<o;++c){for(let p=0;p<h;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d+=h;else break}for(t.ascent=o-c,d=u-h,f=!1,c=a;c>o;--c){for(let p=0;p<h;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d-=h;else break}return t.descent=c-o,t.fontSize=t.ascent+t.descent,ft._fonts[r]=t,t}static clearMetrics(r=""){r?delete ft._fonts[r]:ft._fonts={}}static get _canvas(){if(!ft.__canvas){let r;try{const t=new OffscreenCanvas(0,0),e=t.getContext("2d",Ya);if(e!=null&&e.measureText)return ft.__canvas=t,t;r=lt.ADAPTER.createCanvas()}catch{r=lt.ADAPTER.createCanvas()}r.width=r.height=10,ft.__canvas=r}return ft.__canvas}static get _context(){return ft.__context||(ft.__context=ft._canvas.getContext("2d",Ya)),ft.__context}};let ne=ft;ne.METRICS_STRING="|q";ne.BASELINE_SYMBOL="M";ne.BASELINE_MULTIPLIER=1.4;ne.HEIGHT_MULTIPLIER=2;ne.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return t=>[...r.segment(t)].map(e=>e.segment)}return r=>[...r]})();ne.experimentalLetterSpacing=!1;ne._fonts={};ne._newlines=[10,13];ne._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const z1=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],vo=class{constructor(r){this.styleID=0,this.reset(),hh(this,r,r)}clone(){const r={};return hh(r,this,vo.defaultStyle),new vo(r)}reset(){hh(this,vo.defaultStyle,vo.defaultStyle)}get align(){return this._align}set align(r){this._align!==r&&(this._align=r,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(r){this._breakWords!==r&&(this._breakWords=r,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(r){this._dropShadow!==r&&(this._dropShadow=r,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(r){this._dropShadowAlpha!==r&&(this._dropShadowAlpha=r,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(r){this._dropShadowAngle!==r&&(this._dropShadowAngle=r,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(r){this._dropShadowBlur!==r&&(this._dropShadowBlur=r,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(r){const t=uh(r);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(r){this._dropShadowDistance!==r&&(this._dropShadowDistance=r,this.styleID++)}get fill(){return this._fill}set fill(r){const t=uh(r);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(r){this._fillGradientType!==r&&(this._fillGradientType=r,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(r){X1(this._fillGradientStops,r)||(this._fillGradientStops=r,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(r){this.fontFamily!==r&&(this._fontFamily=r,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(r){this._fontSize!==r&&(this._fontSize=r,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(r){this._fontStyle!==r&&(this._fontStyle=r,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(r){this._fontVariant!==r&&(this._fontVariant=r,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(r){this._fontWeight!==r&&(this._fontWeight=r,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(r){this._lineHeight!==r&&(this._lineHeight=r,this.styleID++)}get leading(){return this._leading}set leading(r){this._leading!==r&&(this._leading=r,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(r){this._lineJoin!==r&&(this._lineJoin=r,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(r){this._miterLimit!==r&&(this._miterLimit=r,this.styleID++)}get padding(){return this._padding}set padding(r){this._padding!==r&&(this._padding=r,this.styleID++)}get stroke(){return this._stroke}set stroke(r){const t=uh(r);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(r){this._strokeThickness!==r&&(this._strokeThickness=r,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(r){this._textBaseline!==r&&(this._textBaseline=r,this.styleID++)}get trim(){return this._trim}set trim(r){this._trim!==r&&(this._trim=r,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(r){this._whiteSpace!==r&&(this._whiteSpace=r,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(r){this._wordWrap!==r&&(this._wordWrap=r,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(r){this._wordWrapWidth!==r&&(this._wordWrapWidth=r,this.styleID++)}toFontString(){const r=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let e=t.length-1;e>=0;e--){let i=t[e].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!z1.includes(i)&&(i=`"${i}"`),t[e]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${r} ${t.join(",")}`}};let Ui=vo;Ui.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:jl.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function rf(r){return typeof r=="number"?Dp(r):(typeof r=="string"&&r.startsWith("0x")&&(r=r.replace("0x","#")),r)}function uh(r){if(Array.isArray(r)){for(let t=0;t<r.length;++t)r[t]=rf(r[t]);return r}else return rf(r)}function X1(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}function hh(r,t,e){for(const i in e)Array.isArray(t[i])?r[i]=t[i].slice():r[i]=t[i]}const V1={texture:!0,children:!1,baseTexture:!0},lc=class extends Kn{constructor(r,t,e){let i=!1;e||(e=lt.ADAPTER.createCanvas(),i=!0),e.width=3,e.height=3;const n=pt.from(e);n.orig=new wt,n.trim=new wt,super(n),this._ownCanvas=i,this.canvas=e,this.context=e.getContext("2d",{willReadFrequently:!0}),this._resolution=lc.defaultResolution??lt.RESOLUTION,this._autoResolution=lc.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=r,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return ne.experimentalLetterSpacing}static set experimentalLetterSpacing(r){Dt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),ne.experimentalLetterSpacing=r}updateText(r){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&r)return;this._font=this._style.toFontString();const e=this.context,i=ne.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=i.width,s=i.height,o=i.lines,a=i.lineHeight,l=i.lineWidths,u=i.maxLineWidth,h=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,n)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),e.scale(this._resolution,this._resolution),e.clearRect(0,0,this.canvas.width,this.canvas.height),e.font=this._font,e.lineWidth=t.strokeThickness,e.textBaseline=t.textBaseline,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit;let c,d;const f=t.dropShadow?2:1;for(let p=0;p<f;++p){const m=t.dropShadow&&p===0,x=m?Math.ceil(Math.max(1,s)+t.padding*2):0,v=x*this._resolution;if(m){e.fillStyle="black",e.strokeStyle="black";const _=t.dropShadowColor,y=Do(typeof _=="number"?_:Tc(_)),A=t.dropShadowBlur*this._resolution,T=t.dropShadowDistance*this._resolution;e.shadowColor=`rgba(${y[0]*255},${y[1]*255},${y[2]*255},${t.dropShadowAlpha})`,e.shadowBlur=A,e.shadowOffsetX=Math.cos(t.dropShadowAngle)*T,e.shadowOffsetY=Math.sin(t.dropShadowAngle)*T+v}else e.fillStyle=this._generateFillStyle(t,o,i),e.strokeStyle=t.stroke,e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;let g=(a-h.fontSize)/2;a-h.fontSize<0&&(g=0);for(let _=0;_<o.length;_++)c=t.strokeThickness/2,d=t.strokeThickness/2+_*a+h.ascent+g,t.align==="right"?c+=u-l[_]:t.align==="center"&&(c+=(u-l[_])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[_],c+t.padding,d+t.padding-x,!0),t.fill&&this.drawLetterSpacing(o[_],c+t.padding,d+t.padding-x)}this.updateTexture()}drawLetterSpacing(r,t,e,i=!1){const s=this._style.letterSpacing;let o=!1;if(ne.experimentalLetterSpacingSupported&&(ne.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(r,t,e):this.context.fillText(r,t,e);return}let a=t;const l=ne.graphemeSegmenter(r);let u=this.context.measureText(r).width,h=0;for(let c=0;c<l.length;++c){const d=l[c];i?this.context.strokeText(d,a,e):this.context.fillText(d,a,e);let f="";for(let p=c+1;p<l.length;++p)f+=l[p];h=this.context.measureText(f).width,a+=u-h+s,u=h}}updateTexture(){const r=this.canvas;if(this._style.trim){const s=Oy(r);s.data&&(r.width=s.width,r.height=s.height,this.context.putImageData(s.data,0,0))}const t=this._texture,e=this._style,i=e.trim?0:e.padding,n=t.baseTexture;t.trim.width=t._frame.width=r.width/this._resolution,t.trim.height=t._frame.height=r.height/this._resolution,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),n.setRealSize(r.width,r.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0),this.updateText(!0),super._render(r)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(r,t){return this.updateText(!0),this._textureID===-1&&(r=!1),super.getBounds(r,t)}getLocalBounds(r){return this.updateText(!0),super.getLocalBounds.call(this,r)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(r,t,e){const i=r.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let n;const s=r.dropShadow?r.dropShadowDistance:0,o=r.padding||0,a=this.canvas.width/this._resolution-s-o*2,l=this.canvas.height/this._resolution-s-o*2,u=i.slice(),h=r.fillGradientStops.slice();if(!h.length){const c=u.length+1;for(let d=1;d<c;++d)h.push(d/c)}if(u.unshift(i[0]),h.unshift(0),u.push(i[i.length-1]),h.push(1),r.fillGradientType===jl.LINEAR_VERTICAL){n=this.context.createLinearGradient(a/2,o,a/2,l+o);const c=e.fontProperties.fontSize+r.strokeThickness;for(let d=0;d<t.length;d++){const f=e.lineHeight*(d-1)+c,p=e.lineHeight*d;let m=p;d>0&&f>p&&(m=(p+f)/2);const x=p+c,v=e.lineHeight*(d+1);let g=x;d+1<t.length&&v<x&&(g=(x+v)/2);const _=(g-m)/l;for(let y=0;y<u.length;y++){let A=0;typeof h[y]=="number"?A=h[y]:A=y/u.length;let T=Math.min(1,Math.max(0,m/l+A*_));T=Number(T.toFixed(5)),n.addColorStop(T,u[y])}}}else{n=this.context.createLinearGradient(o,l/2,a+o,l/2);const c=u.length+1;let d=1;for(let f=0;f<u.length;f++){let p;typeof h[f]=="number"?p=h[f]:p=d/c,n.addColorStop(p,u[f]),d++}}return n}destroy(r){typeof r=="boolean"&&(r={children:r}),r=Object.assign({},V1,r),super.destroy(r),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(r){this.updateText(!0);const t=Cn(this.scale.x)||1;this.scale.x=t*r/this._texture.orig.width,this._width=r}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(r){this.updateText(!0);const t=Cn(this.scale.y)||1;this.scale.y=t*r/this._texture.orig.height,this._height=r}get style(){return this._style}set style(r){r=r||{},r instanceof Ui?this._style=r:this._style=new Ui(r),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)}get resolution(){return this._resolution}set resolution(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)}};let Dc=lc;Dc.defaultAutoResolution=!0;class W1{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function q1(r,t){var i;let e=!1;if((i=r==null?void 0:r._textures)!=null&&i.length){for(let n=0;n<r._textures.length;n++)if(r._textures[n]instanceof pt){const s=r._textures[n].baseTexture;t.includes(s)||(t.push(s),e=!0)}}return e}function Y1(r,t){if(r.baseTexture instanceof At){const e=r.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function K1(r,t){if(r._texture&&r._texture instanceof pt){const e=r._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function Z1(r,t){return t instanceof Dc?(t.updateText(!0),!0):!1}function Q1(r,t){if(t instanceof Ui){const e=t.toFontString();return ne.measureFont(e),!0}return!1}function J1(r,t){if(r instanceof Dc){t.includes(r.style)||t.push(r.style),t.includes(r)||t.push(r);const e=r._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function tA(r,t){return r instanceof Ui?(t.includes(r)||t.push(r),!0):!1}const U0=class{constructor(r){this.limiter=new W1(U0.uploadsPerFrame),this.renderer=r,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(J1),this.registerFindHook(tA),this.registerFindHook(q1),this.registerFindHook(Y1),this.registerFindHook(K1),this.registerUploadHook(Z1),this.registerUploadHook(Q1)}upload(r){return new Promise(t=>{r&&this.add(r),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,ye.system.addOnce(this.tick,this,ki.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const r=this.queue[0];let t=!1;if(r&&!r._destroyed){for(let e=0,i=this.uploadHooks.length;e<i;e++)if(this.uploadHooks[e](this.uploadHookHelper,r)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)ye.system.addOnce(this.tick,this,ki.UTILITY);else{this.ticking=!1;const r=this.completes.slice(0);this.completes.length=0;for(let t=0,e=r.length;t<e;t++)r[t]()}}registerFindHook(r){return r&&this.addHooks.push(r),this}registerUploadHook(r){return r&&this.uploadHooks.push(r),this}add(r){for(let t=0,e=this.addHooks.length;t<e&&!this.addHooks[t](r,this.queue);t++);if(r instanceof ke)for(let t=r.children.length-1;t>=0;t--)this.add(r.children[t]);return this}destroy(){this.ticking&&ye.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let bl=U0;bl.uploadsPerFrame=4;Object.defineProperties(lt,{UPLOADS_PER_FRAME:{get(){return bl.uploadsPerFrame},set(r){Dt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),bl.uploadsPerFrame=r}}});function H0(r,t){return t instanceof At?(t._glTextures[r.CONTEXT_UID]||r.texture.bind(t),!0):!1}function eA(r,t){if(!(t instanceof Hl))return!1;const{geometry:e}=t;t.finishPoly(),e.updateBatches();const{batches:i}=e;for(let n=0;n<i.length;n++){const{texture:s}=i[n].style;s&&H0(r,s.baseTexture)}return e.batchable||r.geometry.bind(e,t._resolveDirectShader(r)),!0}function rA(r,t){return r instanceof Hl?(t.push(r),!0):!1}class j0 extends bl{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(rA),this.registerUploadHook(H0),this.registerUploadHook(eA)}}j0.extension={name:"prepare",type:ot.RendererSystem};xt.add(j0);var iA=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,nA=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,sA=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,nf=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,oA=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Ka=new Bt;class G0 extends Bl{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new Jp,this.state=zr.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=xr.from(nf,oA,e),this.shader=t.context.webGLVersion>1?xr.from(nA,iA,e):xr.from(nf,sA,e)}render(t){const e=this.renderer,i=this.quad;let n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;n=i.uvs,n[0]=n[6]=-s,n[1]=n[3]=-o,n[2]=n[4]=1-s,n[5]=n[7]=1-o,i.invalidate();const a=t._texture,l=a.baseTexture,u=l.alphaMode>0,h=t.tileTransform.localTransform,c=t.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[e.CONTEXT_UID]?d=l.wrapMode!==oi.CLAMP:l.wrapMode===oi.CLAMP&&(l.wrapMode=oi.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,m=a.height,x=t._width,v=t._height;Ka.set(h.a*p/x,h.b*p/v,h.c*m/x,h.d*m/v,h.tx/x,h.ty/v),Ka.invert(),d?Ka.prepend(c.mapCoord):(f.uniforms.uMapCoord=c.mapCoord.toArray(!0),f.uniforms.uClampFrame=c.uClampFrame,f.uniforms.uClampOffset=c.uClampOffset),f.uniforms.uTransform=Ka.toArray(!0),f.uniforms.uColor=Lp(t.tint,t.worldAlpha,f.uniforms.uColor,u),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,e.shader.bind(f),e.geometry.bind(i),this.state.blendMode=Fp(t.blendMode,u),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}G0.extension={name:"tilingSprite",type:ot.RendererPlugin};xt.add(G0);const yo=class{constructor(r,t,e=null){this.linkedSheets=[],this._texture=r instanceof pt?r:null,this.baseTexture=r instanceof At?r:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const i=this.baseTexture.resource;this.resolution=this._updateResolution(e||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(r=null){const{scale:t}=this.data.meta;let e=li(r,null);return e===null&&(e=parseFloat(t??"1")),e!==1&&this.baseTexture.setResolution(e),e}parse(){return new Promise(r=>{this._callback=r,this._batchIndex=0,this._frameKeys.length<=yo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(r){let t=r;const e=yo.BATCH_SIZE;for(;t-r<e&&t<this._frameKeys.length;){const i=this._frameKeys[t],n=this._frames[i],s=n.frame;if(s){let o=null,a=null;const l=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,u=new wt(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);n.rotated?o=new wt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):o=new wt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(a=new wt(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new pt(this.baseTexture,o,u,a,n.rotated?2:0,n.anchor),pt.addToCache(this.textures[i],i)}t++}}_processAnimations(){const r=this.data.animations||{};for(const t in r){this.animations[t]=[];for(let e=0;e<r[t].length;e++){const i=r[t][e];this.animations[t].push(this.textures[i])}}}_parseComplete(){const r=this._callback;this._callback=null,this._batchIndex=0,r.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*yo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*yo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(r=!1){var t;for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,r&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let uc=yo;uc.BATCH_SIZE=1e3;const aA=["jpg","png","jpeg","avif","webp"];function $0(r,t,e){const i={};if(r.forEach(n=>{i[n]=t}),Object.keys(t.textures).forEach(n=>{i[n]=t.textures[n]}),!e){const n=le.dirname(r[0]);t.linkedSheets.forEach((s,o)=>{const a=$0([`${n}/${t.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(i,a)})}return i}const lA={extension:ot.Asset,cache:{test:r=>r instanceof uc,getCacheableAssets:(r,t)=>$0(r,t,!1)},resolver:{test:r=>{const e=r.split("?")[0].split("."),i=e.pop(),n=e.pop();return i==="json"&&aA.includes(n)},parse:r=>{var e;const t=r.split(".");return{resolution:parseFloat(((e=lt.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:t[t.length-2],src:r}}},loader:{extension:{type:ot.LoadParser,priority:vr.Normal},async testParse(r,t){return le.extname(t.src).toLowerCase()===".json"&&!!r.frames},async parse(r,t,e){var u,h;let i=le.dirname(t.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");let n=i+r.meta.image;n=nc(n,t.src);const o=(await e.load([n]))[n],a=new uc(o.baseTexture,r,t.src);await a.parse();const l=(u=r==null?void 0:r.meta)==null?void 0:u.related_multi_packs;if(Array.isArray(l)){const c=[];for(const f of l){if(typeof f!="string")continue;let p=i+f;(h=t.data)!=null&&h.ignoreMultiPack||(p=nc(p,t.src),c.push(e.load({src:p,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(c);a.linkedSheets=d,d.forEach(f=>{f.linkedSheets=[a].concat(a.linkedSheets.filter(p=>p!==f))})}return a},unload(r){r.destroy(!0)}}};xt.add(lA);class Cl{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class ul{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in e){const o=e[s].match(/^[a-z]+/gm)[0],a=e[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const h=a[u].split("="),c=h[0],d=h[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[c]=p}i[o].push(l)}const n=new Cl;return i.info.forEach(s=>n.info.push({face:s.face,size:parseInt(s.size,10)})),i.common.forEach(s=>n.common.push({lineHeight:parseInt(s.lineHeight,10)})),i.page.forEach(s=>n.page.push({id:parseInt(s.id,10),file:s.file})),i.char.forEach(s=>n.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),i.kerning.forEach(s=>n.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),i.distanceField.forEach(s=>n.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),n}}class hc{static test(t){const e=t;return"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new Cl,i=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let u=0;u<i.length;u++)e.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(let u=0;u<n.length;u++)e.common.push({lineHeight:parseInt(n[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)e.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<o.length;u++){const h=o[u];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)e.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)e.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return e}}class cc{static test(t){return typeof t=="string"&&t.includes("<font>")?hc.test(lt.ADAPTER.parseXML(t)):!1}static parse(t){return hc.parse(lt.ADAPTER.parseXML(t))}}const ch=[ul,hc,cc];function uA(r){for(let t=0;t<ch.length;t++)if(ch[t].test(r))return ch[t];return null}function hA(r,t,e,i,n,s){const o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=e.dropShadow?e.dropShadowDistance:0,u=e.padding||0,h=r.width/i-l-u*2,c=r.height/i-l-u*2,d=o.slice(),f=e.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let m=1;m<p;++m)f.push(m/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),e.fillGradientType===jl.LINEAR_VERTICAL){a=t.createLinearGradient(h/2,u,h/2,c+u);let p=0;const x=(s.fontProperties.fontSize+e.strokeThickness)/c;for(let v=0;v<n.length;v++){const g=s.lineHeight*v;for(let _=0;_<d.length;_++){let y=0;typeof f[_]=="number"?y=f[_]:y=_/d.length;const A=g/c+y*x;let T=Math.max(p,A);T=Math.min(T,1),a.addColorStop(T,d[_]),p=T}}}else{a=t.createLinearGradient(u,c/2,h+u,c/2);const p=d.length+1;let m=1;for(let x=0;x<d.length;x++){let v;typeof f[x]=="number"?v=f[x]:v=m/p,a.addColorStop(v,d[x]),m++}}return a}function cA(r,t,e,i,n,s,o){const a=e.text,l=e.fontProperties;t.translate(i,n),t.scale(s,s);const u=o.strokeThickness/2,h=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=hA(r,t,o,s,[a],e),t.strokeStyle=o.stroke,o.dropShadow){const c=o.dropShadowColor,d=Do(typeof c=="number"?c:Tc(c)),f=o.dropShadowBlur*s,p=o.dropShadowDistance*s;t.shadowColor=`rgba(${d[0]*255},${d[1]*255},${d[2]*255},${o.dropShadowAlpha})`,t.shadowBlur=f,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*p,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*p}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,u,h+e.lineHeight-l.descent),o.fill&&t.fillText(a,u,h+e.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function hl(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function z0(r){return Array.from?Array.from(r):r.split("")}function dA(r){typeof r=="string"&&(r=[r]);const t=[];for(let e=0,i=r.length;e<i;e++){const n=r[e];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...z0(n))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const ze=class{constructor(r,t,e){var u;const[i]=r.info,[n]=r.common,[s]=r.page,[o]=r.distanceField,a=li(s.file),l={};this._ownsTextures=e,this.font=i.face,this.size=i.size,this.lineHeight=n.lineHeight/a,this.chars={},this.pageTextures=l;for(let h=0;h<r.page.length;h++){const{id:c,file:d}=r.page[h];l[c]=t instanceof Array?t[h]:t[d],o!=null&&o.fieldType&&o.fieldType!=="none"&&(l[c].baseTexture.alphaMode=Je.NO_PREMULTIPLIED_ALPHA,l[c].baseTexture.mipmap=mr.OFF)}for(let h=0;h<r.char.length;h++){const{id:c,page:d}=r.char[h];let{x:f,y:p,width:m,height:x,xoffset:v,yoffset:g,xadvance:_}=r.char[h];f/=a,p/=a,m/=a,x/=a,v/=a,g/=a,_/=a;const y=new wt(f+l[d].frame.x/a,p+l[d].frame.y/a,m,x);this.chars[c]={xOffset:v,yOffset:g,xAdvance:_,kerning:{},texture:new pt(l[d].baseTexture,y),page:d}}for(let h=0;h<r.kerning.length;h++){let{first:c,second:d,amount:f}=r.kerning[h];c/=a,d/=a,f/=a,this.chars[d]&&(this.chars[d].kerning[c]=f)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((u=o==null?void 0:o.fieldType)==null?void 0:u.toLowerCase())??"none"}destroy(){for(const r in this.chars)this.chars[r].texture.destroy(),this.chars[r].texture=null;for(const r in this.pageTextures)this._ownsTextures&&this.pageTextures[r].destroy(!0),this.pageTextures[r]=null;this.chars=null,this.pageTextures=null}static install(r,t,e){let i;if(r instanceof Cl)i=r;else{const s=uA(r);if(!s)throw new Error("Unrecognized data format for font.");i=s.parse(r)}t instanceof pt&&(t=[t]);const n=new ze(i,t,e);return ze.available[n.font]=n,n}static uninstall(r){const t=ze.available[r];if(!t)throw new Error(`No font found named '${r}'`);t.destroy(),delete ze.available[r]}static from(r,t,e){if(!r)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:n,resolution:s,textureWidth:o,textureHeight:a,...l}=Object.assign({},ze.defaultOptions,e),u=dA(i),h=t instanceof Ui?t:new Ui(t),c=o,d=new Cl;d.info[0]={face:h.fontFamily,size:h.fontSize},d.common[0]={lineHeight:h.fontSize};let f=0,p=0,m,x,v,g=0;const _=[];for(let A=0;A<u.length;A++){m||(m=lt.ADAPTER.createCanvas(),m.width=o,m.height=a,x=m.getContext("2d"),v=new At(m,{resolution:s,...l}),_.push(new pt(v)),d.page.push({id:_.length-1,file:""}));const T=u[A],b=ne.measureText(T,h,!1,m),E=b.width,N=Math.ceil(b.height),D=Math.ceil((h.fontStyle==="italic"?2:1)*E);if(p>=a-N*s){if(p===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${T}')`);--A,m=null,x=null,v=null,p=0,f=0,g=0;continue}if(g=Math.max(N+b.fontProperties.descent,g),D*s+f>=c){if(f===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${T}')`);--A,p+=g*s,p=Math.ceil(p),f=0,g=0;continue}cA(m,x,b,f,p,s,h);const P=hl(b.text);d.char.push({id:P,page:_.length-1,x:f/s,y:p/s,width:D,height:N,xoffset:0,yoffset:0,xadvance:E-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0)}),f+=(D+2*n)*s,f=Math.ceil(f)}for(let A=0,T=u.length;A<T;A++){const b=u[A];for(let E=0;E<T;E++){const N=u[E],D=x.measureText(b).width,P=x.measureText(N).width,M=x.measureText(b+N).width-(D+P);M&&d.kerning.push({first:hl(b),second:hl(N),amount:M})}}const y=new ze(d,_,!0);return ze.available[r]!==void 0&&ze.uninstall(r),ze.available[r]=y,y}};let ve=ze;ve.ALPHA=[["a","z"],["A","Z"]," "];ve.NUMERIC=[["0","9"]];ve.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];ve.ASCII=[[" ","~"]];ve.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:ze.ALPHANUMERIC};ve.available={};var fA=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,pA=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const sf=[],of=[],af=[],X0=class extends ke{constructor(r,t={}){super(),this._tint=16777215;const{align:e,tint:i,maxWidth:n,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},X0.styleDefaults,t);if(!ve.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=e,this._tint=i,this._font=void 0,this._fontName=o,this._fontSize=a,this.text=r,this._maxWidth=n,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new ni(()=>{this.dirty=!0},this,0,0),this._roundPixels=lt.ROUND_PIXELS,this.dirty=!0,this._resolution=lt.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var D;const r=ve.available[this._fontName],t=this.fontSize,e=t/r.size,i=new It,n=[],s=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=z0(a),u=this._maxWidth*r.size/t,h=r.distanceFieldType==="none"?sf:of;let c=null,d=0,f=0,p=0,m=-1,x=0,v=0,g=0,_=0;for(let P=0;P<l.length;P++){const B=l[P],M=hl(B);if(/(?:\s)/.test(B)&&(m=P,x=d,_++),B==="\r"||B===`
`){s.push(d),o.push(-1),f=Math.max(f,d),++p,++v,i.x=0,i.y+=r.lineHeight,c=null,_=0;continue}const H=r.chars[M];if(!H)continue;c&&H.kerning[c]&&(i.x+=H.kerning[c]);const Z=af.pop()||{texture:pt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new It};Z.texture=H.texture,Z.line=p,Z.charCode=M,Z.position.x=Math.round(i.x+H.xOffset+this._letterSpacing/2),Z.position.y=Math.round(i.y+H.yOffset),Z.prevSpaces=_,n.push(Z),d=Z.position.x+Math.max(H.xAdvance-H.xOffset,H.texture.orig.width),i.x+=H.xAdvance+this._letterSpacing,g=Math.max(g,H.yOffset+H.texture.height),c=M,m!==-1&&u>0&&i.x>u&&(++v,Fn(n,1+m-v,1+P-m),P=m,m=-1,s.push(x),o.push(n.length>0?n[n.length-1].prevSpaces:0),f=Math.max(f,x),p++,i.x=0,i.y+=r.lineHeight,c=null,_=0)}const y=l[l.length-1];y!=="\r"&&y!==`
`&&(/(?:\s)/.test(y)&&(d=x),s.push(d),f=Math.max(f,d),o.push(-1));const A=[];for(let P=0;P<=p;P++){let B=0;this._align==="right"?B=f-s[P]:this._align==="center"?B=(f-s[P])/2:this._align==="justify"&&(B=o[P]<0?0:(f-s[P])/o[P]),A.push(B)}const T=n.length,b={},E=[],N=this._activePagesMeshData;h.push(...N);for(let P=0;P<T;P++){const B=n[P].texture,M=B.baseTexture.uid;if(!b[M]){let H=h.pop();if(!H){const at=new U1;let nt,ut;r.distanceFieldType==="none"?(nt=new tf(pt.EMPTY),ut=Tt.NORMAL):(nt=new tf(pt.EMPTY,{program:qe.from(pA,fA),uniforms:{uFWidth:0}}),ut=Tt.NORMAL_NPM);const Rt=new ac(at,nt);Rt.blendMode=ut,H={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Rt,vertices:null,uvs:null,indices:null}}H.index=0,H.indexCount=0,H.vertexCount=0,H.uvsCount=0,H.total=0;const{_textureCache:Z}=this;Z[M]=Z[M]||new pt(B.baseTexture),H.mesh.texture=Z[M],H.mesh.tint=this._tint,E.push(H),b[M]=H}b[M].total++}for(let P=0;P<N.length;P++)E.includes(N[P])||this.removeChild(N[P].mesh);for(let P=0;P<E.length;P++)E[P].mesh.parent!==this&&this.addChild(E[P].mesh);this._activePagesMeshData=E;for(const P in b){const B=b[P],M=B.total;if(!(((D=B.indices)==null?void 0:D.length)>6*M)||B.vertices.length<ac.BATCHABLE_SIZE*2)B.vertices=new Float32Array(4*2*M),B.uvs=new Float32Array(4*2*M),B.indices=new Uint16Array(6*M);else{const H=B.total,Z=B.vertices;for(let at=H*4*2;at<Z.length;at++)Z[at]=0}B.mesh.size=6*M}for(let P=0;P<T;P++){const B=n[P];let M=B.position.x+A[B.line]*(this._align==="justify"?B.prevSpaces:1);this._roundPixels&&(M=Math.round(M));const H=M*e,Z=B.position.y*e,at=B.texture,nt=b[at.baseTexture.uid],ut=at.frame,Rt=at._uvs,Y=nt.index++;nt.indices[Y*6+0]=0+Y*4,nt.indices[Y*6+1]=1+Y*4,nt.indices[Y*6+2]=2+Y*4,nt.indices[Y*6+3]=0+Y*4,nt.indices[Y*6+4]=2+Y*4,nt.indices[Y*6+5]=3+Y*4,nt.vertices[Y*8+0]=H,nt.vertices[Y*8+1]=Z,nt.vertices[Y*8+2]=H+ut.width*e,nt.vertices[Y*8+3]=Z,nt.vertices[Y*8+4]=H+ut.width*e,nt.vertices[Y*8+5]=Z+ut.height*e,nt.vertices[Y*8+6]=H,nt.vertices[Y*8+7]=Z+ut.height*e,nt.uvs[Y*8+0]=Rt.x0,nt.uvs[Y*8+1]=Rt.y0,nt.uvs[Y*8+2]=Rt.x1,nt.uvs[Y*8+3]=Rt.y1,nt.uvs[Y*8+4]=Rt.x2,nt.uvs[Y*8+5]=Rt.y2,nt.uvs[Y*8+6]=Rt.x3,nt.uvs[Y*8+7]=Rt.y3}this._textWidth=f*e,this._textHeight=(i.y+r.lineHeight)*e;for(const P in b){const B=b[P];if(this.anchor.x!==0||this.anchor.y!==0){let at=0;const nt=this._textWidth*this.anchor.x,ut=this._textHeight*this.anchor.y;for(let Rt=0;Rt<B.total;Rt++)B.vertices[at++]-=nt,B.vertices[at++]-=ut,B.vertices[at++]-=nt,B.vertices[at++]-=ut,B.vertices[at++]-=nt,B.vertices[at++]-=ut,B.vertices[at++]-=nt,B.vertices[at++]-=ut}this._maxLineHeight=g*e;const M=B.mesh.geometry.getBuffer("aVertexPosition"),H=B.mesh.geometry.getBuffer("aTextureCoord"),Z=B.mesh.geometry.getIndex();M.data=B.vertices,H.data=B.uvs,Z.data=B.indices,M.update(),H.update(),Z.update()}for(let P=0;P<n.length;P++)af.push(n[P]);this._font=r,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:e,size:i}=ve.available[this._fontName];if(e!=="none"){const{a:n,b:s,c:o,d:a}=this.worldTransform,l=Math.sqrt(n*n+s*s),u=Math.sqrt(o*o+a*a),h=(Math.abs(l)+Math.abs(u))/2,c=this.fontSize/i,d=r._view.resolution;for(const f of this._activePagesMeshData)f.mesh.shader.uniforms.uFWidth=h*t*c*d}super._render(r)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const r=ve.available[this._fontName];if(!r)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==r&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(r){if(this._tint!==r){this._tint=r;for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=r}}get align(){return this._align}set align(r){this._align!==r&&(this._align=r,this.dirty=!0)}get fontName(){return this._fontName}set fontName(r){if(!ve.available[r])throw new Error(`Missing BitmapFont "${r}"`);this._fontName!==r&&(this._fontName=r,this.dirty=!0)}get fontSize(){return this._fontSize??ve.available[this._fontName].size}set fontSize(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)}get anchor(){return this._anchor}set anchor(r){typeof r=="number"?this._anchor.set(r):this._anchor.copyFrom(r)}get text(){return this._text}set text(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(r){r!==this._roundPixels&&(this._roundPixels=r,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)}destroy(r){const{_textureCache:t}=this,i=ve.available[this._fontName].distanceFieldType==="none"?sf:of;i.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],i.filter(n=>t[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=pt.EMPTY});for(const n in t)t[n].destroy(),delete t[n];this._font=null,this._textureCache=null,super.destroy(r)}};let xA=X0;xA.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const _A=[".xml",".fnt"],mA={extension:{type:ot.LoadParser,priority:vr.Normal},test(r){return _A.includes(le.extname(r).toLowerCase())},async testParse(r){return ul.test(r)||cc.test(r)},async parse(r,t,e){const i=ul.test(r)?ul.parse(r):cc.parse(r),{src:n}=t,{page:s}=i,o=[];for(let u=0;u<s.length;++u){const h=s[u].file;let c=le.join(le.dirname(n),h);c=nc(c,n),o.push(c)}const a=await e.load(o),l=o.map(u=>a[u]);return ve.install(i,l,!0)},async load(r,t){return(await lt.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};xt.add(mA);const gA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAAF9JREFUGJWFj8ENgDAMA6+IeUgmoVvBPGUSguR5wofyAYFfZ8myZfhRMZuy874HAO6WABFHGQCWZQVId0t3y8sDMHZobXudGDrUOiMJSdQ6fze0tt2hOyDp98VDEUc5AZR4I9GJyI92AAAAAElFTkSuQmCC";class _e{constructor(t){w(this,"opcode");this.opcode=t}}var _r=(r=>(r[r.Step=0]="Step",r[r.OneStep=1]="OneStep",r[r.Can=2]="Can",r))(_r||{}),ie=(r=>(r[r.Up=0]="Up",r[r.Down=1]="Down",r[r.Left=2]="Left",r[r.Right=3]="Right",r))(ie||{}),Wt=(r=>(r[r.Add=0]="Add",r[r.Sub=1]="Sub",r[r.Div=2]="Div",r[r.Mul=3]="Mul",r[r.Mod=4]="Mod",r[r.CmpEq=5]="CmpEq",r[r.CmpNeq=6]="CmpNeq",r[r.CmpLt=7]="CmpLt",r[r.CmpGt=8]="CmpGt",r[r.CmpLteq=9]="CmpLteq",r[r.CmpGteq=10]="CmpGteq",r[r.Not=11]="Not",r[r.BTrue=12]="BTrue",r[r.BFalse=13]="BFalse",r[r.Branch=14]="Branch",r[r.Trap=15]="Trap",r[r.Set=16]="Set",r[r.Get=17]="Get",r[r.LdInt=18]="LdInt",r))(Wt||{});class V0 extends _e{constructor(){super(0)}}class W0 extends _e{constructor(){super(1)}}class q0 extends _e{constructor(){super(2)}}class Y0 extends _e{constructor(){super(3)}}class K0 extends _e{constructor(){super(5)}}class Z0 extends _e{constructor(){super(6)}}class Q0 extends _e{constructor(){super(7)}}class J0 extends _e{constructor(){super(8)}}class tx extends _e{constructor(){super(9)}}class ex extends _e{constructor(){super(10)}}class rx extends _e{constructor(e){super(13);w(this,"to");this.to=e}}class Mn extends _e{constructor(e){super(15);w(this,"id");this.id=e}}let ix=class extends _e{constructor(e){super(16);w(this,"id");this.id=e}};class nx extends _e{constructor(e){super(17);w(this,"id");this.id=e}}class si extends _e{constructor(e){super(18);w(this,"integer");this.integer=e}}class vA{constructor(){w(this,"dictionary",{});w(this,"code",[]);w(this,"traps",[]);w(this,"stack",[]);w(this,"ip",0);w(this,"canExecute",!0)}LoadCode(t){this.code=t}SetLocal(t,e){this.dictionary[t]=e}GetLocal(t){return this.dictionary[t]??0}SetTraps(t){this.traps=t}ExecuteOneInstruction(t=-1){if(this.ip=t>=0?t:this.ip,!this.canExecute||this.ip>=this.code.length)return;const e=this.code[this.ip];switch(e.opcode){case Wt.Add:this.stack.push(this.stack.pop()+this.stack.pop());break;case Wt.Sub:this.stack.push(this.stack.pop()-this.stack.pop());break;case Wt.Div:this.stack.push(this.stack.pop()/this.stack.pop());break;case Wt.Mul:this.stack.push(this.stack.pop()*this.stack.pop());break;case Wt.Mod:this.stack.push(this.stack.pop()%this.stack.pop());break;case Wt.CmpEq:this.stack.push(Number(this.stack.pop()==this.stack.pop()));break;case Wt.CmpNeq:this.stack.push(Number(this.stack.pop()!=this.stack.pop()));break;case Wt.CmpLt:this.stack.push(Number(this.stack.pop()<this.stack.pop()));break;case Wt.CmpGt:this.stack.push(Number(this.stack.pop()>this.stack.pop()));break;case Wt.CmpLteq:this.stack.push(Number(this.stack.pop()<=this.stack.pop()));break;case Wt.CmpGteq:this.stack.push(Number(this.stack.pop()>=this.stack.pop()));break;case Wt.Not:this.stack.push(Number(!this.stack.pop()));break;case Wt.BTrue:this.stack.pop()&&(this.ip=e.to-1);break;case Wt.BFalse:this.stack.pop()||(this.ip=e.to-1);break;case Wt.Branch:this.ip=e.to-1;break;case Wt.Trap:this.canExecute=!1;const i=this.traps[e.id].apply(this);i!==void 0&&this.stack.push(i);break;case Wt.Set:this.dictionary[e.id]=this.stack.pop();break;case Wt.Get:this.stack.push(this.dictionary[e.id]);break;case Wt.LdInt:this.stack.push(e.integer);break}this.ip++}SetIP(t){this.ip=t}}var To={},sx={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(sx,"__esModule",{value:!0});var ox={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(ox,"__esModule",{value:!0});var Gl={};const Nl={},yA=Object.freeze(Object.defineProperty({__proto__:null,default:Nl},Symbol.toStringTag,{value:"Module"})),Te=J_(yA);var z={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(z,"__esModule",{value:!0});z.SuppressWarnings=z.Override=z.Nullable=z.NotNull=void 0;function TA(r,t,e){}z.NotNull=TA;function EA(r,t,e){}z.Nullable=EA;function AA(r,t,e){}z.Override=AA;function SA(r){return(t,e,i)=>{}}z.SuppressWarnings=SA;var Xr={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.IntStream=void 0,function(t){t.EOF=-1,t.UNKNOWN_SOURCE_NAME="<unknown>"}(r.IntStream||(r.IntStream={}))})(Xr);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var yr=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.ANTLRInputStream=void 0;const bA=Te,Tr=z,Za=Xr;class tr{constructor(t){this.p=0,this.data=t,this.n=t.length}reset(){this.p=0}consume(){if(this.p>=this.n)throw bA(this.LA(1)===Za.IntStream.EOF),new Error("cannot consume EOF");this.p<this.n&&this.p++}LA(t){return t===0?0:t<0&&(t++,this.p+t-1<0)||this.p+t-1>=this.n?Za.IntStream.EOF:this.data.charCodeAt(this.p+t-1)}LT(t){return this.LA(t)}get index(){return this.p}get size(){return this.n}mark(){return-1}release(t){}seek(t){if(t<=this.p){this.p=t;return}for(t=Math.min(t,this.n);this.p<t;)this.consume()}getText(t){let e=t.a,i=t.b;i>=this.n&&(i=this.n-1);let n=i-e+1;return e>=this.n?"":this.data.substr(e,n)}get sourceName(){return this.name?this.name:Za.IntStream.UNKNOWN_SOURCE_NAME}toString(){return this.data}}yr([Tr.Override],tr.prototype,"consume",null);yr([Tr.Override],tr.prototype,"LA",null);yr([Tr.Override],tr.prototype,"index",null);yr([Tr.Override],tr.prototype,"size",null);yr([Tr.Override],tr.prototype,"mark",null);yr([Tr.Override],tr.prototype,"release",null);yr([Tr.Override],tr.prototype,"seek",null);yr([Tr.Override],tr.prototype,"getText",null);yr([Tr.Override],tr.prototype,"sourceName",null);yr([Tr.Override],tr.prototype,"toString",null);Gl.ANTLRInputStream=tr;var vs={},ys={},Er={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__decorate||function(n,s,o,a){var l=arguments.length,u=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,s,o,a);else for(var c=n.length-1;c>=0;c--)(h=n[c])&&(u=(l<3?h(u):l>3?h(s,o,u):h(s,o))||u);return l>3&&u&&Object.defineProperty(s,o,u),u};Object.defineProperty(r,"__esModule",{value:!0}),r.ATNState=void 0;const e=z;class i{constructor(){this.stateNumber=i.INVALID_STATE_NUMBER,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.optimizedTransitions=this.transitions}getStateNumber(){return this.stateNumber}get nonStopStateNumber(){return this.getStateNumber()}hashCode(){return this.stateNumber}equals(s){return s instanceof i?this.stateNumber===s.stateNumber:!1}get isNonGreedyExitState(){return!1}toString(){return String(this.stateNumber)}getTransitions(){return this.transitions.slice(0)}get numberOfTransitions(){return this.transitions.length}addTransition(s,o){if(this.transitions.length===0)this.epsilonOnlyTransitions=s.isEpsilon;else if(this.epsilonOnlyTransitions!==s.isEpsilon)throw this.epsilonOnlyTransitions=!1,new Error("ATN state "+this.stateNumber+" has both epsilon and non-epsilon transitions.");this.transitions.splice(o!==void 0?o:this.transitions.length,0,s)}transition(s){return this.transitions[s]}setTransition(s,o){this.transitions[s]=o}removeTransition(s){return this.transitions.splice(s,1)[0]}get onlyHasEpsilonTransitions(){return this.epsilonOnlyTransitions}setRuleIndex(s){this.ruleIndex=s}get isOptimized(){return this.optimizedTransitions!==this.transitions}get numberOfOptimizedTransitions(){return this.optimizedTransitions.length}getOptimizedTransition(s){return this.optimizedTransitions[s]}addOptimizedTransition(s){this.isOptimized||(this.optimizedTransitions=new Array),this.optimizedTransitions.push(s)}setOptimizedTransition(s,o){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions[s]=o}removeOptimizedTransition(s){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions.splice(s,1)}}t([e.Override],i.prototype,"hashCode",null),t([e.Override],i.prototype,"equals",null),t([e.Override],i.prototype,"toString",null),r.ATNState=i,function(n){n.INVALID_STATE_NUMBER=-1}(i=r.ATNState||(r.ATNState={}))})(Er);var ee={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.ATNStateType=void 0,function(t){t[t.INVALID_TYPE=0]="INVALID_TYPE",t[t.BASIC=1]="BASIC",t[t.RULE_START=2]="RULE_START",t[t.BLOCK_START=3]="BLOCK_START",t[t.PLUS_BLOCK_START=4]="PLUS_BLOCK_START",t[t.STAR_BLOCK_START=5]="STAR_BLOCK_START",t[t.TOKEN_START=6]="TOKEN_START",t[t.RULE_STOP=7]="RULE_STOP",t[t.BLOCK_END=8]="BLOCK_END",t[t.STAR_LOOP_BACK=9]="STAR_LOOP_BACK",t[t.STAR_LOOP_ENTRY=10]="STAR_LOOP_ENTRY",t[t.PLUS_LOOP_BACK=11]="PLUS_LOOP_BACK",t[t.LOOP_END=12]="LOOP_END"}(r.ATNStateType||(r.ATNStateType={}))})(ee);var Zn={},Ar={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ar,"__esModule",{value:!0});var Re=Ar.RecognitionException=void 0;class CA extends Error{constructor(t,e,i,n){super(n),this._offendingState=-1,this._recognizer=t,this.input=e,this.ctx=i,t&&(this._offendingState=t.state)}get offendingState(){return this._offendingState}setOffendingState(t){this._offendingState=t}get expectedTokens(){if(this._recognizer)return this._recognizer.atn.getExpectedTokens(this._offendingState,this.ctx)}get context(){return this.ctx}get inputStream(){return this.input}getOffendingToken(t){if(!(t&&t!==this._recognizer))return this.offendingToken}setOffendingToken(t,e){t===this._recognizer&&(this.offendingToken=e)}get recognizer(){return this._recognizer}}Re=Ar.RecognitionException=CA;var Wo={},Qn={},er={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ax=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},NA=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(er,"__esModule",{value:!0});er.Transition=void 0;const lx=z;let Bo=class{constructor(t){if(t==null)throw new Error("target cannot be null.");this.target=t}get isEpsilon(){return!1}get label(){}};Bo.serializationNames=["INVALID","EPSILON","RANGE","RULE","PREDICATE","ATOM","ACTION","SET","NOT_SET","WILDCARD","PRECEDENCE"];ax([lx.NotNull],Bo.prototype,"target",void 0);Bo=ax([NA(0,lx.NotNull)],Bo);er.Transition=Bo;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Qn,"__esModule",{value:!0});Qn.AbstractPredicateTransition=void 0;const wA=er;class RA extends wA.Transition{constructor(t){super(t)}}Qn.AbstractPredicateTransition=RA;var en={},rr={},$l={},jt={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.MurmurHash=void 0,function(t){function i(l=0){return l}t.initialize=i;function n(l,u){u==null?u=0:typeof u=="string"?u=a(u):typeof u=="object"&&(u=u.hashCode());let x=u;return x=Math.imul(x,3432918353),x=x<<15|x>>>32-15,x=Math.imul(x,461845907),l=l^x,l=l<<13|l>>>32-13,l=Math.imul(l,5)+3864292196,l&4294967295}t.update=n;function s(l,u){return l=l^u*4,l=l^l>>>16,l=Math.imul(l,2246822507),l=l^l>>>13,l=Math.imul(l,3266489909),l=l^l>>>16,l}t.finish=s;function o(l,u=0){let h=i(u),c=0;for(let d of l)h=n(h,d),c++;return h=s(h,c),h}t.hashCode=o;function a(l){let u=l.length;if(u===0)return 0;let h=0;for(let c=0;c<u;c++){let d=l.charCodeAt(c);h=(h<<5>>>0)-h+d,h|=0}return h}}(r.MurmurHash||(r.MurmurHash={}))})(jt);var De={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ux=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(De,"__esModule",{value:!0});De.ObjectEqualityComparator=void 0;const hx=z;class Mo{hashCode(t){return t==null?0:t.hashCode()}equals(t,e){return t==null?e==null:t.equals(e)}}Mo.INSTANCE=new Mo;ux([hx.Override],Mo.prototype,"hashCode",null);ux([hx.Override],Mo.prototype,"equals",null);De.ObjectEqualityComparator=Mo;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var cx=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty($l,"__esModule",{value:!0});$l.DefaultEqualityComparator=void 0;const dx=z,IA=jt,lf=De;class ko{hashCode(t){return t==null?0:typeof t=="string"||typeof t=="number"?IA.MurmurHash.hashCode([t]):lf.ObjectEqualityComparator.INSTANCE.hashCode(t)}equals(t,e){return t==null?e==null:typeof t=="string"||typeof t=="number"?t===e:lf.ObjectEqualityComparator.INSTANCE.equals(t,e)}}ko.INSTANCE=new ko;cx([dx.Override],ko.prototype,"hashCode",null);cx([dx.Override],ko.prototype,"equals",null);$l.DefaultEqualityComparator=ko;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var fe=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},PA=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(rr,"__esModule",{value:!0});rr.Array2DHashSet=void 0;const DA=Te,OA=$l,pe=z,dh=jt,Qa=16,fh=.75;class Xt{constructor(t,e=Qa){if(this.n=0,this.threshold=Math.floor(Qa*fh),t instanceof Xt){this.comparator=t.comparator,this.buckets=t.buckets.slice(0);for(let i=0;i<this.buckets.length;i++){let n=this.buckets[i];n&&(this.buckets[i]=n.slice(0))}this.n=t.n,this.threshold=t.threshold}else this.comparator=t||OA.DefaultEqualityComparator.INSTANCE,this.buckets=this.createBuckets(e)}getOrAdd(t){return this.n>this.threshold&&this.expand(),this.getOrAddImpl(t)}getOrAddImpl(t){let e=this.getBucket(t),i=this.buckets[e];if(!i)return i=[t],this.buckets[e]=i,this.n++,t;for(let n of i)if(this.comparator.equals(n,t))return n;return i.push(t),this.n++,t}get(t){if(t==null)return t;let e=this.getBucket(t),i=this.buckets[e];if(i){for(let n of i)if(this.comparator.equals(n,t))return n}}getBucket(t){return this.comparator.hashCode(t)&this.buckets.length-1}hashCode(){let t=dh.MurmurHash.initialize();for(let e of this.buckets)if(e!=null)for(let i of e){if(i==null)break;t=dh.MurmurHash.update(t,this.comparator.hashCode(i))}return t=dh.MurmurHash.finish(t,this.size),t}equals(t){return t===this?!0:!(t instanceof Xt)||t.size!==this.size?!1:this.containsAll(t)}expand(){let t=this.buckets,e=this.buckets.length*2,i=this.createBuckets(e);this.buckets=i,this.threshold=Math.floor(e*fh);let n=this.size;for(let s of t)if(s)for(let o of s){let a=this.getBucket(o),l=this.buckets[a];l||(l=[],this.buckets[a]=l),l.push(o)}DA(this.n===n)}add(t){return this.getOrAdd(t)===t}get size(){return this.n}get isEmpty(){return this.n===0}contains(t){return this.containsFast(this.asElementType(t))}containsFast(t){return t==null?!1:this.get(t)!=null}*[Symbol.iterator](){yield*this.toArray()}toArray(){const t=new Array(this.size);let e=0;for(let i of this.buckets)if(i!=null)for(let n of i){if(n==null)break;t[e++]=n}return t}containsAll(t){if(t instanceof Xt){let e=t;for(let i of e.buckets)if(i!=null)for(let n of i){if(n==null)break;if(!this.containsFast(this.asElementType(n)))return!1}}else for(let e of t)if(!this.containsFast(this.asElementType(e)))return!1;return!0}addAll(t){let e=!1;for(let i of t)this.getOrAdd(i)!==i&&(e=!0);return e}clear(){this.buckets=this.createBuckets(Qa),this.n=0,this.threshold=Math.floor(Qa*fh)}toString(){if(this.size===0)return"{}";let t="{",e=!0;for(let i of this.buckets)if(i!=null)for(let n of i){if(n==null)break;e?e=!1:t+=", ",t+=n.toString()}return t+="}",t}toTableString(){let t="";for(let e of this.buckets){if(e==null){t+=`null
`;continue}t+="[";let i=!0;for(let n of e)i?i=!1:t+=" ",n==null?t+="_":t+=n.toString();t+=`]
`}return t}asElementType(t){return t}createBuckets(t){return new Array(t)}}fe([pe.NotNull],Xt.prototype,"comparator",void 0);fe([pe.Override],Xt.prototype,"hashCode",null);fe([pe.Override],Xt.prototype,"equals",null);fe([pe.Override],Xt.prototype,"add",null);fe([pe.Override],Xt.prototype,"size",null);fe([pe.Override],Xt.prototype,"isEmpty",null);fe([pe.Override],Xt.prototype,"contains",null);fe([PA(0,pe.Nullable)],Xt.prototype,"containsFast",null);fe([pe.Override],Xt.prototype,Symbol.iterator,null);fe([pe.Override],Xt.prototype,"toArray",null);fe([pe.Override],Xt.prototype,"containsAll",null);fe([pe.Override],Xt.prototype,"addAll",null);fe([pe.Override],Xt.prototype,"clear",null);fe([pe.Override],Xt.prototype,"toString",null);fe([pe.SuppressWarnings("unchecked")],Xt.prototype,"asElementType",null);fe([pe.SuppressWarnings("unchecked")],Xt.prototype,"createBuckets",null);rr.Array2DHashSet=Xt;var rn={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var fx=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(rn,"__esModule",{value:!0});rn.ArrayEqualityComparator=void 0;const px=z,FA=jt,LA=De;class Uo{hashCode(t){return t==null?0:FA.MurmurHash.hashCode(t,0)}equals(t,e){if(t==null)return e==null;if(e==null||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!LA.ObjectEqualityComparator.INSTANCE.equals(t[i],e[i]))return!1;return!0}}Uo.INSTANCE=new Uo;fx([px.Override],Uo.prototype,"hashCode",null);fx([px.Override],Uo.prototype,"equals",null);rn.ArrayEqualityComparator=Uo;var Qt={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Qt,"__esModule",{value:!0});var qo=Qt.toCharArray=Qt.toMap=Qt.equals=Qt.join=Qt.escapeWhitespace=void 0;function BA(r,t){return t?r.replace(/ /,""):r.replace(/\t/,"\\t").replace(/\n/,"\\n").replace(/\r/,"\\r")}Qt.escapeWhitespace=BA;function MA(r,t){let e="",i=!0;for(let n of r)i?i=!1:e+=t,e+=n;return e}Qt.join=MA;function kA(r,t){return r===t?!0:r===void 0||t===void 0?!1:r.equals(t)}Qt.equals=kA;function UA(r){let t=new Map;for(let e=0;e<r.length;e++)t.set(r[e],e);return t}Qt.toMap=UA;function HA(r){if(typeof r=="string"){let t=new Uint16Array(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);return t}else return r.toCharArray()}qo=Qt.toCharArray=HA;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__decorate||function(d,f,p,m){var x=arguments.length,v=x<3?f:m===null?m=Object.getOwnPropertyDescriptor(f,p):m,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(d,f,p,m);else for(var _=d.length-1;_>=0;_--)(g=d[_])&&(v=(x<3?g(v):x>3?g(f,p,v):g(f,p))||v);return x>3&&v&&Object.defineProperty(f,p,v),v},e=S&&S.__param||function(d,f){return function(p,m){f(p,m,d)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SemanticContext=void 0;const i=rr,n=rn,s=jt,o=z,a=De,l=Qt;function u(d){let f;for(let p of d){if(f===void 0){f=p;continue}f.compareTo(p)<0&&(f=p)}return f}function h(d){let f;for(let p of d){if(f===void 0){f=p;continue}f.compareTo(p)>0&&(f=p)}return f}class c{static get NONE(){return c._NONE===void 0&&(c._NONE=new c.Predicate),c._NONE}evalPrecedence(f,p){return this}static and(f,p){if(!f||f===c.NONE)return p;if(p===c.NONE)return f;let m=new c.AND(f,p);return m.opnds.length===1?m.opnds[0]:m}static or(f,p){if(!f)return p;if(f===c.NONE||p===c.NONE)return c.NONE;let m=new c.OR(f,p);return m.opnds.length===1?m.opnds[0]:m}}r.SemanticContext=c,function(d){function m(A){let T=[];for(let b=0;b<A.length;b++){let E=A[b];E instanceof d.PrecedencePredicate&&(T.push(E),A.splice(b,1),b--)}return T}class x extends d{constructor(T=-1,b=-1,E=!1){super(),this.ruleIndex=T,this.predIndex=b,this.isCtxDependent=E}eval(T,b){let E=this.isCtxDependent?b:void 0;return T.sempred(E,this.ruleIndex,this.predIndex)}hashCode(){let T=s.MurmurHash.initialize();return T=s.MurmurHash.update(T,this.ruleIndex),T=s.MurmurHash.update(T,this.predIndex),T=s.MurmurHash.update(T,this.isCtxDependent?1:0),T=s.MurmurHash.finish(T,3),T}equals(T){return T instanceof x?this===T?!0:this.ruleIndex===T.ruleIndex&&this.predIndex===T.predIndex&&this.isCtxDependent===T.isCtxDependent:!1}toString(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"}}t([o.Override],x.prototype,"eval",null),t([o.Override],x.prototype,"hashCode",null),t([o.Override],x.prototype,"equals",null),t([o.Override],x.prototype,"toString",null),d.Predicate=x;class v extends d{constructor(T){super(),this.precedence=T}eval(T,b){return T.precpred(b,this.precedence)}evalPrecedence(T,b){if(T.precpred(b,this.precedence))return d.NONE}compareTo(T){return this.precedence-T.precedence}hashCode(){let T=1;return T=31*T+this.precedence,T}equals(T){return T instanceof v?this===T?!0:this.precedence===T.precedence:!1}toString(){return"{"+this.precedence+">=prec}?"}}t([o.Override],v.prototype,"eval",null),t([o.Override],v.prototype,"evalPrecedence",null),t([o.Override],v.prototype,"compareTo",null),t([o.Override],v.prototype,"hashCode",null),t([o.Override],v.prototype,"equals",null),t([o.Override],v.prototype,"toString",null),d.PrecedencePredicate=v;class g extends d{}d.Operator=g;let _=class cl extends g{constructor(T,b){super();let E=new i.Array2DHashSet(a.ObjectEqualityComparator.INSTANCE);T instanceof cl?E.addAll(T.opnds):E.add(T),b instanceof cl?E.addAll(b.opnds):E.add(b),this.opnds=E.toArray();let N=m(this.opnds),D=h(N);D&&this.opnds.push(D)}get operands(){return this.opnds}equals(T){return this===T?!0:T instanceof cl?n.ArrayEqualityComparator.INSTANCE.equals(this.opnds,T.opnds):!1}hashCode(){return s.MurmurHash.hashCode(this.opnds,40363613)}eval(T,b){for(let E of this.opnds)if(!E.eval(T,b))return!1;return!0}evalPrecedence(T,b){let E=!1,N=[];for(let P of this.opnds){let B=P.evalPrecedence(T,b);if(E=E||B!==P,B==null)return;B!==d.NONE&&N.push(B)}if(!E)return this;if(N.length===0)return d.NONE;let D=N[0];for(let P=1;P<N.length;P++)D=d.and(D,N[P]);return D}toString(){return l.join(this.opnds,"&&")}};t([o.Override],_.prototype,"operands",null),t([o.Override],_.prototype,"equals",null),t([o.Override],_.prototype,"hashCode",null),t([o.Override],_.prototype,"eval",null),t([o.Override],_.prototype,"evalPrecedence",null),t([o.Override],_.prototype,"toString",null),_=t([e(0,o.NotNull),e(1,o.NotNull)],_),d.AND=_;let y=class dl extends g{constructor(T,b){super();let E=new i.Array2DHashSet(a.ObjectEqualityComparator.INSTANCE);T instanceof dl?E.addAll(T.opnds):E.add(T),b instanceof dl?E.addAll(b.opnds):E.add(b),this.opnds=E.toArray();let N=m(this.opnds),D=u(N);D&&this.opnds.push(D)}get operands(){return this.opnds}equals(T){return this===T?!0:T instanceof dl?n.ArrayEqualityComparator.INSTANCE.equals(this.opnds,T.opnds):!1}hashCode(){return s.MurmurHash.hashCode(this.opnds,486279973)}eval(T,b){for(let E of this.opnds)if(E.eval(T,b))return!0;return!1}evalPrecedence(T,b){let E=!1,N=[];for(let P of this.opnds){let B=P.evalPrecedence(T,b);if(E=E||B!==P,B===d.NONE)return d.NONE;B&&N.push(B)}if(!E)return this;if(N.length===0)return;let D=N[0];for(let P=1;P<N.length;P++)D=d.or(D,N[P]);return D}toString(){return l.join(this.opnds,"||")}};t([o.Override],y.prototype,"operands",null),t([o.Override],y.prototype,"equals",null),t([o.Override],y.prototype,"hashCode",null),t([o.Override],y.prototype,"eval",null),t([o.Override],y.prototype,"evalPrecedence",null),t([o.Override],y.prototype,"toString",null),y=t([e(0,o.NotNull),e(1,o.NotNull)],y),d.OR=y}(c=r.SemanticContext||(r.SemanticContext={}))})(en);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Yo=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},jA=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.PredicateTransition=void 0;const GA=Qn,Hn=z,$A=en;let Hi=class extends GA.AbstractPredicateTransition{constructor(t,e,i,n){super(t),this.ruleIndex=e,this.predIndex=i,this.isCtxDependent=n}get serializationType(){return 4}get isEpsilon(){return!0}matches(t,e,i){return!1}get predicate(){return new $A.SemanticContext.Predicate(this.ruleIndex,this.predIndex,this.isCtxDependent)}toString(){return"pred_"+this.ruleIndex+":"+this.predIndex}};Yo([Hn.Override],Hi.prototype,"serializationType",null);Yo([Hn.Override],Hi.prototype,"isEpsilon",null);Yo([Hn.Override],Hi.prototype,"matches",null);Yo([Hn.Override,Hn.NotNull],Hi.prototype,"toString",null);Hi=Yo([jA(0,Hn.NotNull)],Hi);Wo.PredicateTransition=Hi;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var xx=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},zA=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Zn,"__esModule",{value:!0});var Oc=Zn.FailedPredicateException=void 0;const XA=Ar,_x=z,VA=Wo;let wl=class mx extends XA.RecognitionException{constructor(t,e,i){super(t,t.inputStream,t.context,mx.formatMessage(e,i));let s=t.interpreter.atn.states[t.state].transition(0);s instanceof VA.PredicateTransition?(this._ruleIndex=s.ruleIndex,this._predicateIndex=s.predIndex):(this._ruleIndex=0,this._predicateIndex=0),this._predicate=e,super.setOffendingToken(t,t.currentToken)}get ruleIndex(){return this._ruleIndex}get predicateIndex(){return this._predicateIndex}get predicate(){return this._predicate}static formatMessage(t,e){return e||`failed predicate: {${t}}?`}};xx([_x.NotNull],wl,"formatMessage",null);wl=xx([zA(0,_x.NotNull)],wl);Oc=Zn.FailedPredicateException=wl;var nn={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var WA=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},qA=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(nn,"__esModule",{value:!0});nn.InputMismatchException=void 0;const YA=Ar,KA=z;let dc=class extends YA.RecognitionException{constructor(t,e,i){i===void 0&&(i=t.context),super(t,t.inputStream,i),e!==void 0&&this.setOffendingState(e),this.setOffendingToken(t,t.currentToken)}};dc=WA([qA(0,KA.NotNull)],dc);nn.InputMismatchException=dc;var Ts={},Jn={},zl={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.Arrays=void 0,function(t){function e(s,o,a,l){return i(s,a!==void 0?a:0,l!==void 0?l:s.length,o)}t.binarySearch=e;function i(s,o,a,l){let u=o,h=a-1;for(;u<=h;){let c=u+h>>>1,d=s[c];if(d<l)u=c+1;else if(d>l)h=c-1;else return c}return-(u+1)}function n(s){let o="[",a=!0;for(let l of s)a?a=!1:o+=", ",l===null?o+="null":l===void 0?o+="undefined":o+=l;return o+="]",o}t.toString=n}(r.Arrays||(r.Arrays={}))})(zl);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Xl=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.IntegerList=void 0;const ZA=zl,Vl=z,ph=new Int32Array(0),QA=4,xh=(1<<31>>>0)-1-8;class Mr{constructor(t){if(!t)this._data=ph,this._size=0;else if(t instanceof Mr)this._data=t._data.slice(0),this._size=t._size;else if(typeof t=="number")t===0?(this._data=ph,this._size=0):(this._data=new Int32Array(t),this._size=0);else{this._data=ph,this._size=0;for(let e of t)this.add(e)}}add(t){this._data.length===this._size&&this.ensureCapacity(this._size+1),this._data[this._size]=t,this._size++}addAll(t){if(Array.isArray(t))this.ensureCapacity(this._size+t.length),this._data.subarray(this._size,this._size+t.length).set(t),this._size+=t.length;else if(t instanceof Mr)this.ensureCapacity(this._size+t._size),this._data.subarray(this._size,this._size+t.size).set(t._data),this._size+=t._size;else{this.ensureCapacity(this._size+t.size);let e=0;for(let i of t)this._data[this._size+e]=i,e++;this._size+=t.size}}get(t){if(t<0||t>=this._size)throw RangeError();return this._data[t]}contains(t){for(let e=0;e<this._size;e++)if(this._data[e]===t)return!0;return!1}set(t,e){if(t<0||t>=this._size)throw RangeError();let i=this._data[t];return this._data[t]=e,i}removeAt(t){let e=this.get(t);return this._data.copyWithin(t,t+1,this._size),this._data[this._size-1]=0,this._size--,e}removeRange(t,e){if(t<0||e<0||t>this._size||e>this._size||t>e)throw RangeError();this._data.copyWithin(e,t,this._size),this._data.fill(0,this._size-(e-t),this._size),this._size-=e-t}get isEmpty(){return this._size===0}get size(){return this._size}trimToSize(){this._data.length!==this._size&&(this._data=this._data.slice(0,this._size))}clear(){this._data.fill(0,0,this._size),this._size=0}toArray(){return this._size===0?[]:Array.from(this._data.subarray(0,this._size))}sort(){this._data.subarray(0,this._size).sort()}equals(t){if(t===this)return!0;if(!(t instanceof Mr)||this._size!==t._size)return!1;for(let e=0;e<this._size;e++)if(this._data[e]!==t._data[e])return!1;return!0}hashCode(){let t=1;for(let e=0;e<this._size;e++)t=31*t+this._data[e];return t}toString(){return this._data.toString()}binarySearch(t,e,i){if(e===void 0&&(e=0),i===void 0&&(i=this._size),e<0||i<0||e>this._size||i>this._size)throw new RangeError;if(e>i)throw new RangeError;return ZA.Arrays.binarySearch(this._data,t,e,i)}ensureCapacity(t){if(t<0||t>xh)throw new RangeError;let e;for(this._data.length===0?e=QA:e=this._data.length;e<t;)e=e*2,(e<0||e>xh)&&(e=xh);let i=new Int32Array(e);i.set(this._data),this._data=i}toCharArray(){let t=new Uint16Array(this._size),e=0,i=!1;for(let n=0;n<this._size;n++){let s=this._data[n];if(s>=0&&s<65536){t[e]=s,e++;continue}if(!i){let a=new Uint16Array(this.charArraySize());a.set(t,0),t=a,i=!0}let o=String.fromCodePoint(s);t[e]=o.charCodeAt(0),t[e+1]=o.charCodeAt(1),e+=2}return t}charArraySize(){let t=0;for(let e=0;e<this._size;e++)t+=this._data[e]>=65536?2:1;return t}}Xl([Vl.NotNull],Mr.prototype,"_data",void 0);Xl([Vl.Override],Mr.prototype,"equals",null);Xl([Vl.Override],Mr.prototype,"hashCode",null);Xl([Vl.Override],Mr.prototype,"toString",null);Jn.IntegerList=Mr;var ce={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Fc=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(ce,"__esModule",{value:!0});ce.Interval=void 0;const Lc=z,gx=1e3;class Zt{constructor(t,e){this.a=t,this.b=e}static get INVALID(){return Zt._INVALID}static of(t,e){return t!==e||t<0||t>gx?new Zt(t,e):(Zt.cache[t]==null&&(Zt.cache[t]=new Zt(t,t)),Zt.cache[t])}get length(){return this.b<this.a?0:this.b-this.a+1}equals(t){return t===this?!0:t instanceof Zt?this.a===t.a&&this.b===t.b:!1}hashCode(){let t=23;return t=t*31+this.a,t=t*31+this.b,t}startsBeforeDisjoint(t){return this.a<t.a&&this.b<t.a}startsBeforeNonDisjoint(t){return this.a<=t.a&&this.b>=t.a}startsAfter(t){return this.a>t.a}startsAfterDisjoint(t){return this.a>t.b}startsAfterNonDisjoint(t){return this.a>t.a&&this.a<=t.b}disjoint(t){return this.startsBeforeDisjoint(t)||this.startsAfterDisjoint(t)}adjacent(t){return this.a===t.b+1||this.b===t.a-1}properlyContains(t){return t.a>=this.a&&t.b<=this.b}union(t){return Zt.of(Math.min(this.a,t.a),Math.max(this.b,t.b))}intersection(t){return Zt.of(Math.max(this.a,t.a),Math.min(this.b,t.b))}differenceNotProperlyContained(t){let e;return t.startsBeforeNonDisjoint(this)?e=Zt.of(Math.max(this.a,t.b+1),this.b):t.startsAfterNonDisjoint(this)&&(e=Zt.of(this.a,t.a-1)),e}toString(){return this.a+".."+this.b}}Zt._INVALID=new Zt(-1,-2);Zt.cache=new Array(gx+1);Fc([Lc.Override],Zt.prototype,"equals",null);Fc([Lc.Override],Zt.prototype,"hashCode",null);Fc([Lc.Override],Zt.prototype,"toString",null);ce.Interval=Zt;var Es={},Wl={},fi={},St={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.Token=void 0;const t=Xr;(function(e){e.INVALID_TYPE=0,e.EPSILON=-2,e.MIN_USER_TOKEN_TYPE=1,e.EOF=t.IntStream.EOF,e.DEFAULT_CHANNEL=0,e.HIDDEN_CHANNEL=1,e.MIN_USER_CHANNEL_VALUE=2})(r.Token||(r.Token={}))})(St);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ee=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},vx=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(fi,"__esModule",{value:!0});fi.CommonToken=void 0;const JA=ce,Ae=z,uf=St;let ue=class Eo{constructor(t,e,i=Eo.EMPTY_SOURCE,n=uf.Token.DEFAULT_CHANNEL,s=0,o=0){this._line=0,this._charPositionInLine=-1,this._channel=uf.Token.DEFAULT_CHANNEL,this.index=-1,this._text=e,this._type=t,this.source=i,this._channel=n,this.start=s,this.stop=o,i.source!=null&&(this._line=i.source.line,this._charPositionInLine=i.source.charPositionInLine)}static fromToken(t){let e=new Eo(t.type,void 0,Eo.EMPTY_SOURCE,t.channel,t.startIndex,t.stopIndex);return e._line=t.line,e.index=t.tokenIndex,e._charPositionInLine=t.charPositionInLine,t instanceof Eo?(e._text=t._text,e.source=t.source):(e._text=t.text,e.source={source:t.tokenSource,stream:t.inputStream}),e}get type(){return this._type}set type(t){this._type=t}get line(){return this._line}set line(t){this._line=t}get text(){if(this._text!=null)return this._text;let t=this.inputStream;if(t==null)return;let e=t.size;return this.start<e&&this.stop<e?t.getText(JA.Interval.of(this.start,this.stop)):"<EOF>"}set text(t){this._text=t}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(t){this._charPositionInLine=t}get channel(){return this._channel}set channel(t){this._channel=t}get startIndex(){return this.start}set startIndex(t){this.start=t}get stopIndex(){return this.stop}set stopIndex(t){this.stop=t}get tokenIndex(){return this.index}set tokenIndex(t){this.index=t}get tokenSource(){return this.source.source}get inputStream(){return this.source.stream}toString(t){let e="";this._channel>0&&(e=",channel="+this._channel);let i=this.text;i!=null?(i=i.replace(/\n/g,"\\n"),i=i.replace(/\r/g,"\\r"),i=i.replace(/\t/g,"\\t")):i="<no text>";let n=String(this._type);return t&&(n=t.vocabulary.getDisplayName(this._type)),"[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+i+"',<"+n+">"+e+","+this._line+":"+this.charPositionInLine+"]"}};ue.EMPTY_SOURCE={source:void 0,stream:void 0};Ee([Ae.NotNull],ue.prototype,"source",void 0);Ee([Ae.Override],ue.prototype,"type",null);Ee([Ae.Override],ue.prototype,"line",null);Ee([Ae.Override],ue.prototype,"text",null);Ee([Ae.Override],ue.prototype,"charPositionInLine",null);Ee([Ae.Override],ue.prototype,"channel",null);Ee([Ae.Override],ue.prototype,"startIndex",null);Ee([Ae.Override],ue.prototype,"stopIndex",null);Ee([Ae.Override],ue.prototype,"tokenIndex",null);Ee([Ae.Override],ue.prototype,"tokenSource",null);Ee([Ae.Override],ue.prototype,"inputStream",null);Ee([Ae.Override],ue.prototype,"toString",null);Ee([vx(0,Ae.NotNull)],ue,"fromToken",null);ue=Ee([vx(2,Ae.NotNull)],ue);fi.CommonToken=ue;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c};Object.defineProperty(r,"__esModule",{value:!0}),r.CommonTokenFactory=void 0;const e=fi,i=ce,n=z;class s{constructor(a=!1){this.copyText=a}create(a,l,u,h,c,d,f,p){let m=new e.CommonToken(l,u,a,h,c,d);return m.line=f,m.charPositionInLine=p,u==null&&this.copyText&&a.stream!=null&&(m.text=a.stream.getText(i.Interval.of(c,d))),m}createSimple(a,l){return new e.CommonToken(a,l)}}t([n.Override],s.prototype,"create",null),t([n.Override],s.prototype,"createSimple",null),r.CommonTokenFactory=s,function(o){o.DEFAULT=new o}(s=r.CommonTokenFactory||(r.CommonTokenFactory={}))})(Wl);var Ko={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ko,"__esModule",{value:!0});Ko.IntegerStack=void 0;const tS=Jn;class eS extends tS.IntegerList{constructor(t){super(t)}push(t){this.add(t)}pop(){return this.removeAt(this.size-1)}peek(){return this.get(this.size-1)}}Ko.IntegerStack=eS;var _h={},Zo={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Zo,"__esModule",{value:!0});Zo.AcceptStateInfo=void 0;class rS{constructor(t,e){this._prediction=t,this._lexerActionExecutor=e}get prediction(){return this._prediction}get lexerActionExecutor(){return this._lexerActionExecutor}}Zo.AcceptStateInfo=rS;var mh={},Vr={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Vr,"__esModule",{value:!0});Vr.Array2DHashMap=void 0;const hf=rr;class iS{constructor(t){this.keyComparator=t}hashCode(t){return this.keyComparator.hashCode(t.key)}equals(t,e){return this.keyComparator.equals(t.key,e.key)}}class Rl{constructor(t){t instanceof Rl?this.backingStore=new hf.Array2DHashSet(t.backingStore):this.backingStore=new hf.Array2DHashSet(new iS(t))}clear(){this.backingStore.clear()}containsKey(t){return this.backingStore.contains({key:t})}get(t){let e=this.backingStore.get({key:t});if(e)return e.value}get isEmpty(){return this.backingStore.isEmpty}put(t,e){let i=this.backingStore.get({key:t,value:e}),n;return i?(n=i.value,i.value=e):this.backingStore.add({key:t,value:e}),n}putIfAbsent(t,e){let i=this.backingStore.get({key:t,value:e}),n;return i?n=i.value:this.backingStore.add({key:t,value:e}),n}get size(){return this.backingStore.size}hashCode(){return this.backingStore.hashCode()}equals(t){return t instanceof Rl?this.backingStore.equals(t.backingStore):!1}}Vr.Array2DHashMap=Rl;var As={},Ss={},sn={},Sr={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Sr,"__esModule",{value:!0});Sr.DecisionState=void 0;const nS=Er;class sS extends nS.ATNState{constructor(){super(...arguments),this.decision=-1,this.nonGreedy=!1,this.sll=!1}}Sr.DecisionState=sS;var gh={},vh={},cf;function Bc(){return cf||(cf=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__decorate||function(l,u,h,c){var d=arguments.length,f=d<3?u:c===null?c=Object.getOwnPropertyDescriptor(u,h):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(l,u,h,c);else for(var m=l.length-1;m>=0;m--)(p=l[m])&&(f=(d<3?p(f):d>3?p(u,h,f):p(u,h))||f);return d>3&&f&&Object.defineProperty(u,h,f),f};Object.defineProperty(r,"__esModule",{value:!0}),r.PredictionContextCache=void 0;const e=Vr,i=z,n=De,s=ir(),o=Te;class a{constructor(u=!0){this.contexts=new e.Array2DHashMap(n.ObjectEqualityComparator.INSTANCE),this.childContexts=new e.Array2DHashMap(n.ObjectEqualityComparator.INSTANCE),this.joinContexts=new e.Array2DHashMap(n.ObjectEqualityComparator.INSTANCE),this.enableCache=u}getAsCached(u){if(!this.enableCache)return u;let h=this.contexts.get(u);return h||(h=u,this.contexts.put(u,u)),h}getChild(u,h){if(!this.enableCache)return u.getChild(h);let c=new a.PredictionContextAndInt(u,h),d=this.childContexts.get(c);return d||(d=u.getChild(h),d=this.getAsCached(d),this.childContexts.put(c,d)),d}join(u,h){if(!this.enableCache)return s.PredictionContext.join(u,h,this);let c=new a.IdentityCommutativePredictionContextOperands(u,h),d=this.joinContexts.get(c);return d||(d=s.PredictionContext.join(u,h,this),d=this.getAsCached(d),this.joinContexts.put(c,d),d)}}r.PredictionContextCache=a,a.UNCACHED=new a(!1),function(l){class u{constructor(d,f){this.obj=d,this.value=f}equals(d){if(d instanceof u){if(d===this)return!0}else return!1;let f=d;return this.value===f.value&&(this.obj===f.obj||this.obj!=null&&this.obj.equals(f.obj))}hashCode(){let d=5;return d=7*d+(this.obj!=null?this.obj.hashCode():0),d=7*d+this.value,d}}t([i.Override],u.prototype,"equals",null),t([i.Override],u.prototype,"hashCode",null),l.PredictionContextAndInt=u;class h{constructor(d,f){o(d!=null),o(f!=null),this._x=d,this._y=f}get x(){return this._x}get y(){return this._y}equals(d){if(d instanceof h){if(this===d)return!0}else return!1;let f=d;return this._x===f._x&&this._y===f._y||this._x===f._y&&this._y===f._x}hashCode(){return this._x.hashCode()^this._y.hashCode()}}t([i.Override],h.prototype,"equals",null),t([i.Override],h.prototype,"hashCode",null),l.IdentityCommutativePredictionContextOperands=h}(a=r.PredictionContextCache||(r.PredictionContextCache={}))}(vh)),vh}var df;function ir(){return df||(df=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__decorate||function(m,x,v,g){var _=arguments.length,y=_<3?x:g===null?g=Object.getOwnPropertyDescriptor(x,v):g,A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(m,x,v,g);else for(var T=m.length-1;T>=0;T--)(A=m[T])&&(y=(_<3?A(y):_>3?A(x,v,y):A(x,v))||y);return _>3&&y&&Object.defineProperty(x,v,y),y},e=S&&S.__param||function(m,x){return function(v,g){x(v,g,m)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SingletonPredictionContext=r.PredictionContext=void 0;const i=Vr,n=rr,s=zl,o=jt,a=z,l=Bc(),u=Te,h=1;class c{constructor(x){this.cachedHashCode=x}static calculateEmptyHashCode(){let x=o.MurmurHash.initialize(h);return x=o.MurmurHash.finish(x,0),x}static calculateSingleHashCode(x,v){let g=o.MurmurHash.initialize(h);return g=o.MurmurHash.update(g,x),g=o.MurmurHash.update(g,v),g=o.MurmurHash.finish(g,2),g}static calculateHashCode(x,v){let g=o.MurmurHash.initialize(h);for(let _ of x)g=o.MurmurHash.update(g,_);for(let _ of v)g=o.MurmurHash.update(g,_);return g=o.MurmurHash.finish(g,2*x.length),g}static fromRuleContext(x,v,g=!0){if(v.isEmpty)return g?c.EMPTY_FULL:c.EMPTY_LOCAL;let _;v._parent?_=c.fromRuleContext(x,v._parent,g):_=g?c.EMPTY_FULL:c.EMPTY_LOCAL;let A=x.states[v.invokingState].transition(0);return _.getChild(A.followState.stateNumber)}static addEmptyContext(x){return x.addEmptyContext()}static removeEmptyContext(x){return x.removeEmptyContext()}static join(x,v,g=l.PredictionContextCache.UNCACHED){if(x===v)return x;if(x.isEmpty)return c.isEmptyLocal(x)?x:c.addEmptyContext(v);if(v.isEmpty)return c.isEmptyLocal(v)?v:c.addEmptyContext(x);let _=x.size,y=v.size;if(_===1&&y===1&&x.getReturnState(0)===v.getReturnState(0)){let B=g.join(x.getParent(0),v.getParent(0));return B===x.getParent(0)?x:B===v.getParent(0)?v:B.getChild(x.getReturnState(0))}let A=0,T=new Array(_+y),b=new Array(T.length),E=0,N=0,D=!0,P=!0;for(;E<_&&N<y;)x.getReturnState(E)===v.getReturnState(N)?(T[A]=g.join(x.getParent(E),v.getParent(N)),b[A]=x.getReturnState(E),D=D&&T[A]===x.getParent(E),P=P&&T[A]===v.getParent(N),E++,N++):x.getReturnState(E)<v.getReturnState(N)?(T[A]=x.getParent(E),b[A]=x.getReturnState(E),P=!1,E++):(u(v.getReturnState(N)<x.getReturnState(E)),T[A]=v.getParent(N),b[A]=v.getReturnState(N),D=!1,N++),A++;for(;E<_;)T[A]=x.getParent(E),b[A]=x.getReturnState(E),E++,P=!1,A++;for(;N<y;)T[A]=v.getParent(N),b[A]=v.getReturnState(N),N++,D=!1,A++;return D?x:P?v:(A<T.length&&(T=T.slice(0,A),b=b.slice(0,A)),T.length===0?c.EMPTY_FULL:T.length===1?new p(T[0],b[0]):new f(T,b))}static isEmptyLocal(x){return x===c.EMPTY_LOCAL}static getCachedContext(x,v,g){if(x.isEmpty)return x;let _=g.get(x);if(_)return _;if(_=v.get(x),_)return g.put(x,_),_;let y=!1,A=new Array(x.size);for(let b=0;b<A.length;b++){let E=c.getCachedContext(x.getParent(b),v,g);if(y||E!==x.getParent(b)){if(!y){A=new Array(x.size);for(let N=0;N<x.size;N++)A[N]=x.getParent(N);y=!0}A[b]=E}}if(!y)return _=v.putIfAbsent(x,x),g.put(x,_??x),x;let T;if(A.length===1)T=new p(A[0],x.getReturnState(0));else{let b=new Array(x.size);for(let E=0;E<x.size;E++)b[E]=x.getReturnState(E);T=new f(A,b,x.hashCode())}return _=v.putIfAbsent(T,T),g.put(T,_||T),g.put(x,_||T),T}appendSingleContext(x,v){return this.appendContext(c.EMPTY_FULL.getChild(x),v)}getChild(x){return new p(this,x)}hashCode(){return this.cachedHashCode}toStrings(x,v,g=c.EMPTY_FULL){let _=[];t:for(let y=0;;y++){let A=0,T=!0,b=this,E=v,N="";for(N+="[";!b.isEmpty&&b!==g;){let D=0;if(b.size>0){let P=1;for(;1<<P>>>0<b.size;)P++;let B=(1<<P>>>0)-1;if(D=y>>A&B,T=T&&D>=b.size-1,D>=b.size)continue t;A+=P}if(x){N.length>1&&(N+=" ");let B=x.atn.states[E],M=x.ruleNames[B.ruleIndex];N+=M}else b.getReturnState(D)!==c.EMPTY_FULL_STATE_KEY&&(b.isEmpty||(N.length>1&&(N+=" "),N+=b.getReturnState(D)));E=b.getReturnState(D),b=b.getParent(D)}if(N+="]",_.push(N),T)break}return _}}t([a.Override],c.prototype,"hashCode",null),t([e(0,a.NotNull),e(1,a.NotNull),e(2,a.NotNull)],c,"join",null),t([e(0,a.NotNull),e(1,a.NotNull),e(2,a.NotNull)],c,"getCachedContext",null),r.PredictionContext=c;class d extends c{constructor(x){super(c.calculateEmptyHashCode()),this.fullContext=x}get isFullContext(){return this.fullContext}addEmptyContext(){return this}removeEmptyContext(){throw new Error("Cannot remove the empty context from itself.")}getParent(x){throw new Error("index out of bounds")}getReturnState(x){throw new Error("index out of bounds")}findReturnState(x){return-1}get size(){return 0}appendSingleContext(x,v){return v.getChild(this,x)}appendContext(x,v){return x}get isEmpty(){return!0}get hasEmpty(){return!0}equals(x){return this===x}toStrings(x,v,g){return["[]"]}}t([a.Override],d.prototype,"addEmptyContext",null),t([a.Override],d.prototype,"removeEmptyContext",null),t([a.Override],d.prototype,"getParent",null),t([a.Override],d.prototype,"getReturnState",null),t([a.Override],d.prototype,"findReturnState",null),t([a.Override],d.prototype,"size",null),t([a.Override],d.prototype,"appendSingleContext",null),t([a.Override],d.prototype,"appendContext",null),t([a.Override],d.prototype,"isEmpty",null),t([a.Override],d.prototype,"hasEmpty",null),t([a.Override],d.prototype,"equals",null),t([a.Override],d.prototype,"toStrings",null);let f=class Ii extends c{constructor(x,v,g){super(g||c.calculateHashCode(x,v)),u(x.length===v.length),u(v.length>1||v[0]!==c.EMPTY_FULL_STATE_KEY,"Should be using PredictionContext.EMPTY instead."),this.parents=x,this.returnStates=v}getParent(x){return this.parents[x]}getReturnState(x){return this.returnStates[x]}findReturnState(x){return s.Arrays.binarySearch(this.returnStates,x)}get size(){return this.returnStates.length}get isEmpty(){return!1}get hasEmpty(){return this.returnStates[this.returnStates.length-1]===c.EMPTY_FULL_STATE_KEY}addEmptyContext(){if(this.hasEmpty)return this;let x=this.parents.slice(0),v=this.returnStates.slice(0);return x.push(c.EMPTY_FULL),v.push(c.EMPTY_FULL_STATE_KEY),new Ii(x,v)}removeEmptyContext(){if(!this.hasEmpty)return this;if(this.returnStates.length===2)return new p(this.parents[0],this.returnStates[0]);{let x=this.parents.slice(0,this.parents.length-1),v=this.returnStates.slice(0,this.returnStates.length-1);return new Ii(x,v)}}appendContext(x,v){return Ii.appendContextImpl(this,x,new c.IdentityHashMap)}static appendContextImpl(x,v,g){if(v.isEmpty){if(c.isEmptyLocal(v)){if(x.hasEmpty)return c.EMPTY_LOCAL;throw new Error("what to do here?")}return x}if(v.size!==1)throw new Error("Appending a tree suffix is not yet supported.");let _=g.get(x);if(!_){if(x.isEmpty)_=v;else{let y=x.size;x.hasEmpty&&y--;let A=new Array(y),T=new Array(y);for(let b=0;b<y;b++)T[b]=x.getReturnState(b);for(let b=0;b<y;b++)A[b]=Ii.appendContextImpl(x.getParent(b),v,g);A.length===1?_=new p(A[0],T[0]):(u(A.length>1),_=new Ii(A,T)),x.hasEmpty&&(_=c.join(_,v))}g.put(x,_)}return _}equals(x){if(this===x)return!0;if(!(x instanceof Ii)||this.hashCode()!==x.hashCode())return!1;let v=x;return this.equalsImpl(v,new n.Array2DHashSet)}equalsImpl(x,v){let g=[],_=[];for(g.push(this),_.push(x);;){let y=g.pop(),A=_.pop();if(!y||!A)break;let T=new l.PredictionContextCache.IdentityCommutativePredictionContextOperands(y,A);if(!v.add(T))continue;let b=T.x.size;if(b===0){if(!T.x.equals(T.y))return!1;continue}let E=T.y.size;if(b!==E)return!1;for(let N=0;N<b;N++){if(T.x.getReturnState(N)!==T.y.getReturnState(N))return!1;let D=T.x.getParent(N),P=T.y.getParent(N);if(D.hashCode()!==P.hashCode())return!1;D!==P&&(g.push(D),_.push(P))}}return!0}};t([a.NotNull],f.prototype,"parents",void 0),t([a.NotNull],f.prototype,"returnStates",void 0),t([a.Override],f.prototype,"getParent",null),t([a.Override],f.prototype,"getReturnState",null),t([a.Override],f.prototype,"findReturnState",null),t([a.Override],f.prototype,"size",null),t([a.Override],f.prototype,"isEmpty",null),t([a.Override],f.prototype,"hasEmpty",null),t([a.Override],f.prototype,"addEmptyContext",null),t([a.Override],f.prototype,"removeEmptyContext",null),t([a.Override],f.prototype,"appendContext",null),t([a.Override],f.prototype,"equals",null),f=t([e(0,a.NotNull)],f);let p=class yx extends c{constructor(x,v){super(c.calculateSingleHashCode(x,v)),this.parent=x,this.returnState=v}getParent(x){return this.parent}getReturnState(x){return this.returnState}findReturnState(x){return this.returnState===x?0:-1}get size(){return 1}get isEmpty(){return!1}get hasEmpty(){return!1}appendContext(x,v){return v.getChild(this.parent.appendContext(x,v),this.returnState)}addEmptyContext(){let x=[this.parent,c.EMPTY_FULL],v=[this.returnState,c.EMPTY_FULL_STATE_KEY];return new f(x,v)}removeEmptyContext(){return this}equals(x){if(x===this)return!0;if(!(x instanceof yx))return!1;let v=x;return this.hashCode()!==v.hashCode()?!1:this.returnState===v.returnState&&this.parent.equals(v.parent)}};t([a.NotNull],p.prototype,"parent",void 0),t([a.Override],p.prototype,"getParent",null),t([a.Override],p.prototype,"getReturnState",null),t([a.Override],p.prototype,"findReturnState",null),t([a.Override],p.prototype,"size",null),t([a.Override],p.prototype,"isEmpty",null),t([a.Override],p.prototype,"hasEmpty",null),t([a.Override],p.prototype,"appendContext",null),t([a.Override],p.prototype,"addEmptyContext",null),t([a.Override],p.prototype,"removeEmptyContext",null),t([a.Override],p.prototype,"equals",null),p=t([e(0,a.NotNull)],p),r.SingletonPredictionContext=p,function(m){m.EMPTY_LOCAL=new d(!1),m.EMPTY_FULL=new d(!0),m.EMPTY_LOCAL_STATE_KEY=-(1<<31>>>0),m.EMPTY_FULL_STATE_KEY=(1<<31>>>0)-1;class x extends i.Array2DHashMap{constructor(){super(v.INSTANCE)}}m.IdentityHashMap=x;class v{IdentityEqualityComparator(){}hashCode(_){return _.hashCode()}equals(_,y){return _===y}}v.INSTANCE=new v,t([a.Override],v.prototype,"hashCode",null),t([a.Override],v.prototype,"equals",null),m.IdentityEqualityComparator=v}(c=r.PredictionContext||(r.PredictionContext={}))}(gh)),gh}/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var qt=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Ie=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(sn,"__esModule",{value:!0});sn.ATNConfig=void 0;const oS=Vr,aS=Sr,Or=jt,Ot=z,lS=De,ff=ir(),Pi=en,pf=Te,yh=2147483648;let xe=class Ao{constructor(t,e,i){typeof e=="number"?(pf((e&16777215)===e),this._state=t,this.altAndOuterContextDepth=e,this._context=i):(this._state=t,this.altAndOuterContextDepth=e.altAndOuterContextDepth,this._context=i)}static create(t,e,i,n=Pi.SemanticContext.NONE,s){return n!==Pi.SemanticContext.NONE?s!=null?new Gn(s,n,t,e,i,!1):new ji(n,t,e,i):s!=null?new jn(s,t,e,i,!1):new Ao(t,e,i)}get state(){return this._state}get alt(){return this.altAndOuterContextDepth&16777215}get context(){return this._context}set context(t){this._context=t}get reachesIntoOuterContext(){return this.outerContextDepth!==0}get outerContextDepth(){return this.altAndOuterContextDepth>>>24&127}set outerContextDepth(t){pf(t>=0),t=Math.min(t,127),this.altAndOuterContextDepth=t<<24|(this.altAndOuterContextDepth&-2130706433)>>>0}get lexerActionExecutor(){}get semanticContext(){return Pi.SemanticContext.NONE}get hasPassedThroughNonGreedyDecision(){return!1}clone(){return this.transform(this.state,!1)}transform(t,e,i){return i==null?this.transformImpl(t,this._context,this.semanticContext,e,this.lexerActionExecutor):i instanceof ff.PredictionContext?this.transformImpl(t,i,this.semanticContext,e,this.lexerActionExecutor):i instanceof Pi.SemanticContext?this.transformImpl(t,this._context,i,e,this.lexerActionExecutor):this.transformImpl(t,this._context,this.semanticContext,e,i)}transformImpl(t,e,i,n,s){let o=n&&Ao.checkNonGreedyDecision(this,t);return i!==Pi.SemanticContext.NONE?s!=null||o?new Gn(s,i,t,this,e,o):new ji(i,t,this,e):s!=null||o?new jn(s,t,this,e,o):new Ao(t,this,e)}static checkNonGreedyDecision(t,e){return t.hasPassedThroughNonGreedyDecision||e instanceof aS.DecisionState&&e.nonGreedy}appendContext(t,e){if(typeof t=="number"){let i=this.context.appendSingleContext(t,e);return this.transform(this.state,!1,i)}else{let i=this.context.appendContext(t,e);return this.transform(this.state,!1,i)}}contains(t){if(this.state.stateNumber!==t.state.stateNumber||this.alt!==t.alt||!this.semanticContext.equals(t.semanticContext))return!1;let e=[],i=[];for(e.push(this.context),i.push(t.context);;){let n=e.pop(),s=i.pop();if(!n||!s)break;if(n===s)return!0;if(n.size<s.size)return!1;if(s.isEmpty)return n.hasEmpty;for(let o=0;o<s.size;o++){let a=n.findReturnState(s.getReturnState(o));if(a<0)return!1;e.push(n.getParent(a)),i.push(s.getParent(o))}}return!1}get isPrecedenceFilterSuppressed(){return(this.altAndOuterContextDepth&yh)!==0}set isPrecedenceFilterSuppressed(t){t?this.altAndOuterContextDepth|=yh:this.altAndOuterContextDepth&=~yh}equals(t){return this===t?!0:t instanceof Ao?this.state.stateNumber===t.state.stateNumber&&this.alt===t.alt&&this.reachesIntoOuterContext===t.reachesIntoOuterContext&&this.context.equals(t.context)&&this.semanticContext.equals(t.semanticContext)&&this.isPrecedenceFilterSuppressed===t.isPrecedenceFilterSuppressed&&this.hasPassedThroughNonGreedyDecision===t.hasPassedThroughNonGreedyDecision&&lS.ObjectEqualityComparator.INSTANCE.equals(this.lexerActionExecutor,t.lexerActionExecutor):!1}hashCode(){let t=Or.MurmurHash.initialize(7);return t=Or.MurmurHash.update(t,this.state.stateNumber),t=Or.MurmurHash.update(t,this.alt),t=Or.MurmurHash.update(t,this.reachesIntoOuterContext?1:0),t=Or.MurmurHash.update(t,this.context),t=Or.MurmurHash.update(t,this.semanticContext),t=Or.MurmurHash.update(t,this.hasPassedThroughNonGreedyDecision?1:0),t=Or.MurmurHash.update(t,this.lexerActionExecutor),t=Or.MurmurHash.finish(t,7),t}toDotString(){let t="";t+=`digraph G {
`,t+=`rankdir=LR;
`;let e=new oS.Array2DHashMap(ff.PredictionContext.IdentityEqualityComparator.INSTANCE),i=[];function n(s){let o=e.size,a=e.putIfAbsent(s,o);return a??(i.push(s),o)}for(i.push(this.context),e.put(this.context,0);;){let s=i.pop();if(!s)break;for(let o=0;o<s.size;o++)t+="  s"+n(s),t+="->",t+="s"+n(s.getParent(o)),t+='[label="'+s.getReturnState(o)+`"];
`}return t+=`}
`,t.toString()}toString(t,e,i){i==null&&(i=e!=null),e==null&&(e=!0);let n="",s;i?s=this.context.toStrings(t,this.state.stateNumber):s=["?"];let o=!0;for(let a of s)o?o=!1:n+=", ",n+="(",n+=this.state,e&&(n+=",",n+=this.alt),this.context&&(n+=",",n+=a),this.semanticContext!==Pi.SemanticContext.NONE&&(n+=",",n+=this.semanticContext),this.reachesIntoOuterContext&&(n+=",up="+this.outerContextDepth),n+=")";return n.toString()}};qt([Ot.NotNull],xe.prototype,"_state",void 0);qt([Ot.NotNull],xe.prototype,"_context",void 0);qt([Ot.NotNull],xe.prototype,"state",null);qt([Ot.NotNull,Ie(0,Ot.NotNull)],xe.prototype,"context",null);qt([Ot.NotNull],xe.prototype,"semanticContext",null);qt([Ot.Override],xe.prototype,"clone",null);qt([Ie(0,Ot.NotNull),Ie(2,Ot.NotNull)],xe.prototype,"transformImpl",null);qt([Ot.Override],xe.prototype,"equals",null);qt([Ot.Override],xe.prototype,"hashCode",null);qt([Ie(0,Ot.NotNull),Ie(3,Ot.NotNull)],xe,"create",null);xe=qt([Ie(0,Ot.NotNull),Ie(2,Ot.NotNull)],xe);sn.ATNConfig=xe;let ji=class extends xe{constructor(t,e,i,n){typeof i=="number"?super(e,i,n):super(e,i,n),this._semanticContext=t}get semanticContext(){return this._semanticContext}};qt([Ot.NotNull],ji.prototype,"_semanticContext",void 0);qt([Ot.Override],ji.prototype,"semanticContext",null);ji=qt([Ie(1,Ot.NotNull),Ie(2,Ot.NotNull)],ji);let jn=class extends xe{constructor(t,e,i,n,s){if(typeof i=="number")super(e,i,n);else if(super(e,i,n),i.semanticContext!==Pi.SemanticContext.NONE)throw new Error("Not supported");this._lexerActionExecutor=t,this.passedThroughNonGreedyDecision=s}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};qt([Ot.Override],jn.prototype,"lexerActionExecutor",null);qt([Ot.Override],jn.prototype,"hasPassedThroughNonGreedyDecision",null);jn=qt([Ie(1,Ot.NotNull),Ie(2,Ot.NotNull)],jn);let Gn=class extends ji{constructor(t,e,i,n,s,o){typeof n=="number"?super(e,i,n,s):super(e,i,n,s),this._lexerActionExecutor=t,this.passedThroughNonGreedyDecision=o}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};qt([Ot.Override],Gn.prototype,"lexerActionExecutor",null);qt([Ot.Override],Gn.prototype,"hasPassedThroughNonGreedyDecision",null);Gn=qt([Ie(1,Ot.NotNull),Ie(2,Ot.NotNull)],Gn);var nr={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(nr,"__esModule",{value:!0});nr.BitSet=void 0;const uS=Te,hS=jt,bs=new Uint16Array(0);function Se(r){return r>>>4}function Sn(r){return r*16}function fc(r){let t=1;for(let e=0;e<16;e++){if(r&t)return e;t=t<<1>>>0}throw new RangeError("No specified bit found")}function xf(r){let t=32768;for(let e=15;e>=0;e--){if(r&t)return e;t=t>>>1}throw new RangeError("No specified bit found")}function Le(r,t){return r&=15,t&=15,r===t?1<<r>>>0:65535>>>15-t^65535>>>16-r}const pc=new Uint8Array(65536);for(let r=0;r<16;r++){const t=1<<r>>>0;let e=0;for(;e<pc.length;){e+=t;for(let i=0;i<t;i++)pc[e]++,e++}}class wn{constructor(t){if(!t)this.data=bs;else if(typeof t=="number"){if(t<0)throw new RangeError("nbits cannot be negative");this.data=new Uint16Array(Se(t-1)+1)}else if(t instanceof wn)this.data=t.data.slice(0);else{let e=-1;for(let i of t)e<i&&(e=i);this.data=new Uint16Array(Se(e-1)+1);for(let i of t)this.set(i)}}and(t){const e=this.data,i=t.data,n=Math.min(e.length,i.length);let s=-1;for(let o=0;o<n;o++)(e[o]&=i[o])!==0&&(s=o);s===-1&&(this.data=bs),s<e.length-1&&(this.data=e.slice(0,s+1))}andNot(t){const e=this.data,i=t.data,n=Math.min(e.length,i.length);let s=-1;for(let o=0;o<n;o++)(e[o]&=i[o]^65535)!==0&&(s=o);s===-1&&(this.data=bs),s<e.length-1&&(this.data=e.slice(0,s+1))}cardinality(){if(this.isEmpty)return 0;const t=this.data,e=t.length;let i=0;for(let n=0;n<e;n++)i+=pc[t[n]];return i}clear(t,e){t==null?this.data.fill(0):e==null?this.set(t,!1):this.set(t,e,!1)}flip(t,e){if(e==null&&(e=t),t<0||e<t)throw new RangeError;let i=Se(t);const n=Se(e);if(i===n)this.data[i]^=Le(t,e);else{for(this.data[i++]^=Le(t,15);i<n;)this.data[i++]^=65535;this.data[i++]^=Le(0,e)}}get(t,e){if(e===void 0)return!!(this.data[Se(t)]&Le(t,t));{let i=new wn(e+1);for(let n=t;n<=e;n++)i.set(n,this.get(n));return i}}intersects(t){let e=Math.min(this.length(),t.length());if(e===0)return!1;let i=Se(e-1);for(let n=0;n<=i;n++)if(this.data[n]&t.data[n])return!0;return!1}get isEmpty(){return this.length()===0}length(){return this.data.length?this.previousSetBit(Sn(this.data.length)-1)+1:0}nextClearBit(t){if(t<0)throw new RangeError("fromIndex cannot be negative");const e=this.data,i=e.length;let n=Se(t);if(n>i)return-1;let s=65535^Le(t,15);if((e[n]|s)===65535){for(n++,s=0;n<i&&e[n]===65535;n++);if(n===i)return-1}return Sn(n)+fc((e[n]|s)^65535)}nextSetBit(t){if(t<0)throw new RangeError("fromIndex cannot be negative");const e=this.data,i=e.length;let n=Se(t);if(n>i)return-1;let s=Le(t,15);if(!(e[n]&s)){for(n++,s=65535;n<i&&e[n]===0;n++);if(n>=i)return-1}return Sn(n)+fc(e[n]&s)}or(t){const e=this.data,i=t.data,n=Math.min(e.length,i.length),s=Math.max(e.length,i.length),o=e.length===s?e:new Uint16Array(s);let a=-1;for(let u=0;u<n;u++)(o[u]=e[u]|i[u])!==0&&(a=u);const l=e.length>i.length?e:i;for(let u=n;u<s;u++)(o[u]=l[u])!==0&&(a=u);a===-1?this.data=bs:o.length===a+1?this.data=o:this.data=o.slice(0,a)}previousClearBit(t){if(t<0)throw new RangeError("fromIndex cannot be negative");const e=this.data,i=e.length;let n=Se(t);n>=i&&(n=i-1);let s=65535^Le(0,t);if((e[n]|s)===65535){for(s=0,n--;n>=0&&e[n]===65535;n--);if(n<0)return-1}return Sn(n)+xf((e[n]|s)^65535)}previousSetBit(t){if(t<0)throw new RangeError("fromIndex cannot be negative");const e=this.data,i=e.length;let n=Se(t);n>=i&&(n=i-1);let s=Le(0,t);if(!(e[n]&s)){for(n--,s=65535;n>=0&&e[n]===0;n--);if(n<0)return-1}return Sn(n)+xf(e[n]&s)}set(t,e,i){if(e===void 0?(e=t,i=!0):typeof e=="boolean"&&(i=e,e=t),i===void 0&&(i=!0),t<0||t>e)throw new RangeError;let n=Se(t),s=Se(e);if(i&&s>=this.data.length){let o=new Uint16Array(s+1);this.data.forEach((a,l)=>o[l]=a),this.data=o}else if(!i){if(n>=this.data.length)return;s>=this.data.length&&(s=this.data.length-1,e=this.data.length*16-1)}if(n===s)this._setBits(n,i,Le(t,e));else{for(this._setBits(n++,i,Le(t,15));n<s;)this.data[n++]=i?65535:0;this._setBits(n,i,Le(0,e))}}_setBits(t,e,i){e?this.data[t]|=i:this.data[t]&=65535^i}get size(){return this.data.byteLength*8}hashCode(){return hS.MurmurHash.hashCode(this.data,22)}equals(t){if(t===this)return!0;if(!(t instanceof wn))return!1;const e=this.length();if(e!==t.length())return!1;if(e===0)return!0;let i=Se(e-1);for(let n=0;n<=i;n++)if(this.data[n]!==t.data[n])return!1;return!0}toString(){let t="{",e=!0;for(let i=this.nextSetBit(0);i>=0;i=this.nextSetBit(i+1))e?e=!1:t+=", ",t+=i;return t+="}",t}xor(t){const e=this.data,i=t.data,n=Math.min(e.length,i.length),s=Math.max(e.length,i.length),o=e.length===s?e:new Uint16Array(s);let a=-1;for(let u=0;u<n;u++)(o[u]=e[u]^i[u])!==0&&(a=u);const l=e.length>i.length?e:i;for(let u=n;u<s;u++)(o[u]=l[u])!==0&&(a=u);a===-1?this.data=bs:o.length===a+1?this.data=o:this.data=o.slice(0,a+1)}clone(){return new wn(this)}[Symbol.iterator](){return new cS(this.data)}[uS.inspect.custom](){return"BitSet "+this.toString()}}nr.BitSet=wn;class cS{constructor(t){this.data=t,this.index=0,this.mask=65535}next(){for(;this.index<this.data.length;){const t=this.data[this.index]&this.mask;if(t!==0){const e=Sn(this.index)+fc(t);return this.mask=Le(e+1,15),{done:!1,value:e}}this.index++,this.mask=65535}return{done:!0,value:-1}}[Symbol.iterator](){return this}}var _f;function Qo(){if(_f)return Ss;_f=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(v,g,_,y){var A=arguments.length,T=A<3?g:y===null?y=Object.getOwnPropertyDescriptor(g,_):y,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(v,g,_,y);else for(var E=v.length-1;E>=0;E--)(b=v[E])&&(T=(A<3?b(T):A>3?b(g,_,T):b(g,_))||T);return A>3&&T&&Object.defineProperty(g,_,T),T};Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.ATNConfigSet=void 0;const t=Vr,e=rr,i=rn,n=Cr(),s=sn,o=nr,a=z,l=De,u=ir(),h=Bc(),c=en,d=Te,f=Qt;class p{hashCode(g){return g.state^g.alt}equals(g,_){return g.state===_.state&&g.alt===_.alt}}p.INSTANCE=new p;function m(v){return v?new t.Array2DHashMap(v):new t.Array2DHashMap(p.INSTANCE)}let x=class xc{constructor(g,_){this._uniqueAlt=0,this._hasSemanticContext=!1,this._dipsIntoOuterContext=!1,this.outermostConfigSet=!1,this.cachedHashCode=-1,g?(_?(this.mergedConfigs=void 0,this.unmerged=void 0):g.isReadOnly?(this.mergedConfigs=m(),this.unmerged=[]):(this.mergedConfigs=m(g.mergedConfigs),this.unmerged=g.unmerged.slice(0)),this.configs=g.configs.slice(0),this._dipsIntoOuterContext=g._dipsIntoOuterContext,this._hasSemanticContext=g._hasSemanticContext,this.outermostConfigSet=g.outermostConfigSet,(_||!g.isReadOnly)&&(this._uniqueAlt=g._uniqueAlt,this._conflictInfo=g._conflictInfo)):(this.mergedConfigs=m(),this.unmerged=[],this.configs=[],this._uniqueAlt=n.ATN.INVALID_ALT_NUMBER)}getRepresentedAlternatives(){if(this._conflictInfo!=null)return this._conflictInfo.conflictedAlts.clone();let g=new o.BitSet;for(let _ of this)g.set(_.alt);return g}get isReadOnly(){return this.mergedConfigs==null}get isOutermostConfigSet(){return this.outermostConfigSet}set isOutermostConfigSet(g){if(this.outermostConfigSet&&!g)throw new Error("IllegalStateException");d(!g||!this._dipsIntoOuterContext),this.outermostConfigSet=g}getStates(){let g=new e.Array2DHashSet(l.ObjectEqualityComparator.INSTANCE);for(let _ of this.configs)g.add(_.state);return g}optimizeConfigs(g){if(this.configs.length!==0)for(let _ of this.configs)_.context=g.atn.getCachedContext(_.context)}clone(g){let _=new xc(this,g);return!g&&this.isReadOnly&&_.addAll(this.configs),_}get size(){return this.configs.length}get isEmpty(){return this.configs.length===0}contains(g){if(!(g instanceof s.ATNConfig))return!1;if(this.mergedConfigs&&this.unmerged){let _=g,y=this.getKey(_),A=this.mergedConfigs.get(y);if(A!=null&&this.canMerge(_,y,A))return A.contains(_);for(let T of this.unmerged)if(T.contains(g))return!0}else for(let _ of this.configs)if(_.contains(g))return!0;return!1}*[Symbol.iterator](){yield*this.configs}toArray(){return this.configs}add(g,_){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");d(!this.outermostConfigSet||!g.reachesIntoOuterContext),_==null&&(_=h.PredictionContextCache.UNCACHED);let y,A=this.getKey(g),T=this.mergedConfigs.get(A);if(y=T==null,T!=null&&this.canMerge(g,A,T)){T.outerContextDepth=Math.max(T.outerContextDepth,g.outerContextDepth),g.isPrecedenceFilterSuppressed&&(T.isPrecedenceFilterSuppressed=!0);let b=u.PredictionContext.join(T.context,g.context,_);return this.updatePropertiesForMergedConfig(g),T.context===b?!1:(T.context=b,!0)}for(let b=0;b<this.unmerged.length;b++){let E=this.unmerged[b];if(this.canMerge(g,A,E)){E.outerContextDepth=Math.max(E.outerContextDepth,g.outerContextDepth),g.isPrecedenceFilterSuppressed&&(E.isPrecedenceFilterSuppressed=!0);let N=u.PredictionContext.join(E.context,g.context,_);return this.updatePropertiesForMergedConfig(g),E.context===N?!1:(E.context=N,y&&(this.mergedConfigs.put(A,E),this.unmerged.splice(b,1)),!0)}}return this.configs.push(g),y?this.mergedConfigs.put(A,g):this.unmerged.push(g),this.updatePropertiesForAddedConfig(g),!0}updatePropertiesForMergedConfig(g){this._dipsIntoOuterContext=this._dipsIntoOuterContext||g.reachesIntoOuterContext,d(!this.outermostConfigSet||!this._dipsIntoOuterContext)}updatePropertiesForAddedConfig(g){this.configs.length===1?this._uniqueAlt=g.alt:this._uniqueAlt!==g.alt&&(this._uniqueAlt=n.ATN.INVALID_ALT_NUMBER),this._hasSemanticContext=this._hasSemanticContext||!c.SemanticContext.NONE.equals(g.semanticContext),this._dipsIntoOuterContext=this._dipsIntoOuterContext||g.reachesIntoOuterContext,d(!this.outermostConfigSet||!this._dipsIntoOuterContext)}canMerge(g,_,y){return g.state.stateNumber!==y.state.stateNumber||_.alt!==y.alt?!1:g.semanticContext.equals(y.semanticContext)}getKey(g){return{state:g.state.stateNumber,alt:g.alt}}containsAll(g){for(let _ of g)if(!(_ instanceof s.ATNConfig)||!this.contains(_))return!1;return!0}addAll(g,_){this.ensureWritable();let y=!1;for(let A of g)this.add(A,_)&&(y=!0);return y}clear(){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");this.mergedConfigs.clear(),this.unmerged.length=0,this.configs.length=0,this._dipsIntoOuterContext=!1,this._hasSemanticContext=!1,this._uniqueAlt=n.ATN.INVALID_ALT_NUMBER,this._conflictInfo=void 0}equals(g){return this===g?!0:g instanceof xc?this.outermostConfigSet===g.outermostConfigSet&&f.equals(this._conflictInfo,g._conflictInfo)&&i.ArrayEqualityComparator.INSTANCE.equals(this.configs,g.configs):!1}hashCode(){if(this.isReadOnly&&this.cachedHashCode!==-1)return this.cachedHashCode;let g=1;return g=5*g^(this.outermostConfigSet?1:0),g=5*g^i.ArrayEqualityComparator.INSTANCE.hashCode(this.configs),this.isReadOnly&&(this.cachedHashCode=g),g}toString(g){g==null&&(g=!1);let _="",y=this.configs.slice(0);y.sort((A,T)=>A.alt!==T.alt?A.alt-T.alt:A.state.stateNumber!==T.state.stateNumber?A.state.stateNumber-T.state.stateNumber:A.semanticContext.toString().localeCompare(T.semanticContext.toString())),_+="[";for(let A=0;A<y.length;A++)A>0&&(_+=", "),_+=y[A].toString(void 0,!0,g);return _+="]",this._hasSemanticContext&&(_+=",hasSemanticContext="+this._hasSemanticContext),this._uniqueAlt!==n.ATN.INVALID_ALT_NUMBER&&(_+=",uniqueAlt="+this._uniqueAlt),this._conflictInfo!=null&&(_+=",conflictingAlts="+this._conflictInfo.conflictedAlts,this._conflictInfo.isExact||(_+="*")),this._dipsIntoOuterContext&&(_+=",dipsIntoOuterContext"),_.toString()}get uniqueAlt(){return this._uniqueAlt}get hasSemanticContext(){return this._hasSemanticContext}set hasSemanticContext(g){this.ensureWritable(),this._hasSemanticContext=g}get conflictInfo(){return this._conflictInfo}set conflictInfo(g){this.ensureWritable(),this._conflictInfo=g}get conflictingAlts(){if(this._conflictInfo!=null)return this._conflictInfo.conflictedAlts}get isExactConflict(){return this._conflictInfo==null?!1:this._conflictInfo.isExact}get dipsIntoOuterContext(){return this._dipsIntoOuterContext}get(g){return this.configs[g]}ensureWritable(){if(this.isReadOnly)throw new Error("This ATNConfigSet is read only.")}};return r([a.NotNull],x.prototype,"getRepresentedAlternatives",null),r([a.Override],x.prototype,"size",null),r([a.Override],x.prototype,"isEmpty",null),r([a.Override],x.prototype,"contains",null),r([a.Override],x.prototype,Symbol.iterator,null),r([a.Override],x.prototype,"toArray",null),r([a.Override],x.prototype,"containsAll",null),r([a.Override],x.prototype,"clear",null),r([a.Override],x.prototype,"equals",null),r([a.Override],x.prototype,"hashCode",null),Ss.ATNConfigSet=x,Ss}var Cs={},Th={},Eh={},mf;function ql(){return mf||(mf=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__decorate||function(h,c,d,f){var p=arguments.length,m=p<3?c:f===null?f=Object.getOwnPropertyDescriptor(c,d):f,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(h,c,d,f);else for(var v=h.length-1;v>=0;v--)(x=h[v])&&(m=(p<3?x(m):p>3?x(c,d,m):x(c,d))||m);return p>3&&m&&Object.defineProperty(c,d,m),m},e=S&&S.__param||function(h,c){return function(d,f){c(d,f,h)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DFAState=void 0;const i=Cr(),n=nr,s=jt,o=z,a=ir(),l=Te;class u{constructor(c){this.stateNumber=-1,this.configs=c,this.edges=new Map,this.contextEdges=new Map}get isContextSensitive(){return!!this.contextSymbols}isContextSymbol(c){return this.isContextSensitive?this.contextSymbols.get(c):!1}setContextSymbol(c){l(this.isContextSensitive),this.contextSymbols.set(c)}setContextSensitive(c){l(!this.configs.isOutermostConfigSet),!this.isContextSensitive&&(this.contextSymbols||(this.contextSymbols=new n.BitSet))}get acceptStateInfo(){return this._acceptStateInfo}set acceptStateInfo(c){this._acceptStateInfo=c}get isAcceptState(){return!!this._acceptStateInfo}get prediction(){return this._acceptStateInfo?this._acceptStateInfo.prediction:i.ATN.INVALID_ALT_NUMBER}get lexerActionExecutor(){if(this._acceptStateInfo)return this._acceptStateInfo.lexerActionExecutor}getTarget(c){return this.edges.get(c)}setTarget(c,d){this.edges.set(c,d)}getEdgeMap(){return this.edges}getContextTarget(c){return c===a.PredictionContext.EMPTY_FULL_STATE_KEY&&(c=-1),this.contextEdges.get(c)}setContextTarget(c,d){if(!this.isContextSensitive)throw new Error("The state is not context sensitive.");c===a.PredictionContext.EMPTY_FULL_STATE_KEY&&(c=-1),this.contextEdges.set(c,d)}getContextEdgeMap(){let c=new Map(this.contextEdges),d=c.get(-1);if(d!==void 0)if(c.size===1){let f=new Map;return f.set(a.PredictionContext.EMPTY_FULL_STATE_KEY,d),f}else c.delete(-1),c.set(a.PredictionContext.EMPTY_FULL_STATE_KEY,d);return c}hashCode(){let c=s.MurmurHash.initialize(7);return c=s.MurmurHash.update(c,this.configs.hashCode()),c=s.MurmurHash.finish(c,1),c}equals(c){if(this===c)return!0;if(!(c instanceof u))return!1;let d=c;return this.configs.equals(d.configs)}toString(){let c="";return c+=this.stateNumber+":"+this.configs,this.isAcceptState&&(c+="=>",this.predicates?c+=this.predicates:c+=this.prediction),c.toString()}}t([o.NotNull],u.prototype,"configs",void 0),t([o.NotNull],u.prototype,"edges",void 0),t([o.NotNull],u.prototype,"contextEdges",void 0),t([o.Override],u.prototype,"hashCode",null),t([o.Override],u.prototype,"equals",null),t([o.Override],u.prototype,"toString",null),r.DFAState=u,function(h){let c=class{constructor(f,p){this.alt=p,this.pred=f}toString(){return"("+this.pred+", "+this.alt+")"}};t([o.NotNull],c.prototype,"pred",void 0),t([o.Override],c.prototype,"toString",null),c=t([e(0,o.NotNull)],c),h.PredPrediction=c}(u=r.DFAState||(r.DFAState={}))}(Eh)),Eh}var gf;function Yl(){return gf||(gf=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__decorate||function(l,u,h,c){var d=arguments.length,f=d<3?u:c===null?c=Object.getOwnPropertyDescriptor(u,h):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(l,u,h,c);else for(var m=l.length-1;m>=0;m--)(p=l[m])&&(f=(d<3?p(f):d>3?p(u,h,f):p(u,h))||f);return d>3&&f&&Object.defineProperty(u,h,f),f},e=S&&S.__param||function(l,u){return function(h,c){u(h,c,l)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ATNSimulator=void 0;const i=Qo(),n=ql(),s=z,o=ir();let a=class So{constructor(u){this.atn=u}static get ERROR(){return So._ERROR||(So._ERROR=new n.DFAState(new i.ATNConfigSet),So._ERROR.stateNumber=o.PredictionContext.EMPTY_FULL_STATE_KEY),So._ERROR}clearDFA(){this.atn.clearDFA()}};t([s.NotNull],a.prototype,"atn",void 0),t([s.NotNull],a,"ERROR",null),a=t([e(0,s.NotNull)],a),r.ATNSimulator=a,function(l){}(a=r.ATNSimulator||(r.ATNSimulator={})),r.ATNSimulator=a}(Th)),Th}var pi={},Jo={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Jo,"__esModule",{value:!0});Jo.ConsoleErrorListener=void 0;class _c{syntaxError(t,e,i,n,s,o){console.error(`line ${i}:${n} ${s}`)}}Jo.ConsoleErrorListener=_c;_c.INSTANCE=new _c;var ts={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var dS=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},vf=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(ts,"__esModule",{value:!0});ts.ProxyErrorListener=void 0;const Ah=z;class Tx{constructor(t){if(this.delegates=t,!t)throw new Error("Invalid delegates")}getDelegates(){return this.delegates}syntaxError(t,e,i,n,s,o){this.delegates.forEach(a=>{a.syntaxError&&a.syntaxError(t,e,i,n,s,o)})}}dS([Ah.Override,vf(0,Ah.NotNull),vf(4,Ah.NotNull)],Tx.prototype,"syntaxError",null);ts.ProxyErrorListener=Tx;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var br=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Kl=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(pi,"__esModule",{value:!0});pi.Recognizer=void 0;const fS=Jo,pS=ts,Pe=z,yf=St,xS=Qt;class Jt{constructor(){this._listeners=[fS.ConsoleErrorListener.INSTANCE],this._stateNumber=-1}getTokenTypeMap(){let t=this.vocabulary,e=Jt.tokenTypeMapCache.get(t);if(e==null){let i=new Map;for(let n=0;n<=this.atn.maxTokenType;n++){let s=t.getLiteralName(n);s!=null&&i.set(s,n);let o=t.getSymbolicName(n);o!=null&&i.set(o,n)}i.set("EOF",yf.Token.EOF),e=i,Jt.tokenTypeMapCache.set(t,e)}return e}getRuleIndexMap(){let t=this.ruleNames;if(t==null)throw new Error("The current recognizer does not provide a list of rule names.");let e=Jt.ruleIndexMapCache.get(t);return e==null&&(e=xS.toMap(t),Jt.ruleIndexMapCache.set(t,e)),e}getTokenType(t){let e=this.getTokenTypeMap().get(t);return e??yf.Token.INVALID_TYPE}get serializedATN(){throw new Error("there is no serialized ATN")}get atn(){return this._interp.atn}get interpreter(){return this._interp}set interpreter(t){this._interp=t}get parseInfo(){return Promise.resolve(void 0)}getErrorHeader(t){let e=t.getOffendingToken();if(!e)return"";let i=e.line,n=e.charPositionInLine;return"line "+i+":"+n}addErrorListener(t){if(!t)throw new TypeError("listener must not be null");this._listeners.push(t)}removeErrorListener(t){let e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}removeErrorListeners(){this._listeners.length=0}getErrorListeners(){return this._listeners.slice(0)}getErrorListenerDispatch(){return new pS.ProxyErrorListener(this.getErrorListeners())}sempred(t,e,i){return!0}precpred(t,e){return!0}action(t,e,i){}get state(){return this._stateNumber}set state(t){this._stateNumber=t}}Jt.EOF=-1;Jt.tokenTypeMapCache=new WeakMap;Jt.ruleIndexMapCache=new WeakMap;br([Pe.SuppressWarnings("serial"),Pe.NotNull],Jt.prototype,"_listeners",void 0);br([Pe.NotNull],Jt.prototype,"getTokenTypeMap",null);br([Pe.NotNull],Jt.prototype,"getRuleIndexMap",null);br([Pe.NotNull],Jt.prototype,"serializedATN",null);br([Pe.NotNull],Jt.prototype,"atn",null);br([Pe.NotNull,Kl(0,Pe.NotNull)],Jt.prototype,"interpreter",null);br([Pe.NotNull,Kl(0,Pe.NotNull)],Jt.prototype,"getErrorHeader",null);br([Kl(0,Pe.NotNull)],Jt.prototype,"addErrorListener",null);br([Kl(0,Pe.NotNull)],Jt.prototype,"removeErrorListener",null);br([Pe.NotNull],Jt.prototype,"getErrorListeners",null);pi.Recognizer=Jt;var Wr={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var xi=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Wr,"__esModule",{value:!0});var ta=Wr.VocabularyImpl=void 0;const Ur=z,_S=St;class Qe{constructor(t,e,i){this.literalNames=t,this.symbolicNames=e,this.displayNames=i,this._maxTokenType=Math.max(this.displayNames.length,Math.max(this.literalNames.length,this.symbolicNames.length))-1}get maxTokenType(){return this._maxTokenType}getLiteralName(t){if(t>=0&&t<this.literalNames.length)return this.literalNames[t]}getSymbolicName(t){if(t>=0&&t<this.symbolicNames.length)return this.symbolicNames[t];if(t===_S.Token.EOF)return"EOF"}getDisplayName(t){if(t>=0&&t<this.displayNames.length){let n=this.displayNames[t];if(n)return n}let e=this.getLiteralName(t);if(e)return e;let i=this.getSymbolicName(t);return i||String(t)}}Qe.EMPTY_VOCABULARY=new Qe([],[],[]);xi([Ur.NotNull],Qe.prototype,"literalNames",void 0);xi([Ur.NotNull],Qe.prototype,"symbolicNames",void 0);xi([Ur.NotNull],Qe.prototype,"displayNames",void 0);xi([Ur.Override],Qe.prototype,"maxTokenType",null);xi([Ur.Override],Qe.prototype,"getLiteralName",null);xi([Ur.Override],Qe.prototype,"getSymbolicName",null);xi([Ur.Override,Ur.NotNull],Qe.prototype,"getDisplayName",null);xi([Ur.NotNull],Qe,"EMPTY_VOCABULARY",void 0);ta=Wr.VocabularyImpl=Qe;var Tf;function Ex(){if(Tf)return Cs;Tf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(a,l,u,h){var c=arguments.length,d=c<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,u):h,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(a,l,u,h);else for(var p=a.length-1;p>=0;p--)(f=a[p])&&(d=(c<3?f(d):c>3?f(l,u,d):f(l,u))||d);return c>3&&d&&Object.defineProperty(l,u,d),d};Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.DFASerializer=void 0;const t=Yl(),e=z,i=ir(),n=pi,s=Wr;let o=class{constructor(l,u,h,c){u instanceof n.Recognizer?(h=u.ruleNames,c=u.atn,u=u.vocabulary):u||(u=s.VocabularyImpl.EMPTY_VOCABULARY),this.dfa=l,this.vocabulary=u,this.ruleNames=h,this.atn=c}toString(){if(!this.dfa.s0)return"";let l="";if(this.dfa.states){let h=new Array(...this.dfa.states.toArray());h.sort((c,d)=>c.stateNumber-d.stateNumber);for(let c of h){let d=c.getEdgeMap(),f=[...d.keys()].sort((x,v)=>x-v),p=c.getContextEdgeMap(),m=[...p.keys()].sort((x,v)=>x-v);for(let x of f){let v=d.get(x);if((v==null||v===t.ATNSimulator.ERROR)&&!c.isContextSymbol(x))continue;let g=!1;l+=this.getStateString(c)+"-"+this.getEdgeLabel(x)+"->",c.isContextSymbol(x)&&(l+="!",g=!0);let _=v;_&&_.stateNumber!==t.ATNSimulator.ERROR.stateNumber?l+=this.getStateString(_)+`
`:g&&(l+=`ctx
`)}if(c.isContextSensitive)for(let x of m)l+=this.getStateString(c)+"-"+this.getContextLabel(x)+"->"+this.getStateString(p.get(x))+`
`}}let u=l;return u.length===0?"":u}getContextLabel(l){if(l===i.PredictionContext.EMPTY_FULL_STATE_KEY)return"ctx:EMPTY_FULL";if(l===i.PredictionContext.EMPTY_LOCAL_STATE_KEY)return"ctx:EMPTY_LOCAL";if(this.atn&&l>0&&l<=this.atn.states.length){let h=this.atn.states[l].ruleIndex;if(this.ruleNames&&h>=0&&h<this.ruleNames.length)return"ctx:"+String(l)+"("+this.ruleNames[h]+")"}return"ctx:"+String(l)}getEdgeLabel(l){return this.vocabulary.getDisplayName(l)}getStateString(l){if(l===t.ATNSimulator.ERROR)return"ERROR";let u=l.stateNumber,h="s"+u;if(l.isAcceptState&&(l.predicates?h=":s"+u+"=>"+l.predicates:h=":s"+u+"=>"+l.prediction),l.isContextSensitive){h+="*";for(let c of l.configs)if(c.reachesIntoOuterContext){h+="*";break}}return h}};return r([e.NotNull],o.prototype,"dfa",void 0),r([e.NotNull],o.prototype,"vocabulary",void 0),r([e.Override],o.prototype,"toString",null),Cs.DFASerializer=o,Cs}var Ns={},Ef;function mS(){if(Ef)return Ns;Ef=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c},t=S&&S.__param||function(o,a){return function(l,u){a(l,u,o)}};Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.LexerDFASerializer=void 0;const e=Ex(),i=z,n=Wr;let s=class extends e.DFASerializer{constructor(a){super(a,n.VocabularyImpl.EMPTY_VOCABULARY)}getEdgeLabel(a){return"'"+String.fromCodePoint(a)+"'"}};return r([i.Override,i.NotNull],s.prototype,"getEdgeLabel",null),s=r([t(0,i.NotNull)],s),Ns.LexerDFASerializer=s,Ns}var es={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var gS=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(es,"__esModule",{value:!0});es.StarLoopEntryState=void 0;const vS=ee,yS=nr,TS=Sr,ES=z;class Ax extends TS.DecisionState{constructor(){super(...arguments),this.precedenceRuleDecision=!1,this.precedenceLoopbackStates=new yS.BitSet}get stateType(){return vS.ATNStateType.STAR_LOOP_ENTRY}}gS([ES.Override],Ax.prototype,"stateType",null);es.StarLoopEntryState=Ax;var Af;function Sx(){if(Af)return As;Af=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(d,f,p,m){var x=arguments.length,v=x<3?f:m===null?m=Object.getOwnPropertyDescriptor(f,p):m,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(d,f,p,m);else for(var _=d.length-1;_>=0;_--)(g=d[_])&&(v=(x<3?g(v):x>3?g(f,p,v):g(f,p))||v);return x>3&&v&&Object.defineProperty(f,p,v),v},t=S&&S.__param||function(d,f){return function(p,m){f(p,m,d)}};Object.defineProperty(As,"__esModule",{value:!0}),As.DFA=void 0;const e=rr,i=Qo(),n=Ex(),s=ql(),o=mS(),a=z,l=De,u=es,h=Wr;let c=class{constructor(f,p=0){if(this.states=new e.Array2DHashSet(l.ObjectEqualityComparator.INSTANCE),this.nextStateNumber=0,!f.atn)throw new Error("The ATNState must be associated with an ATN");this.atnStartState=f,this.atn=f.atn,this.decision=p;let m=!1;f instanceof u.StarLoopEntryState&&f.precedenceRuleDecision&&(m=!0,this.s0=new s.DFAState(new i.ATNConfigSet),this.s0full=new s.DFAState(new i.ATNConfigSet)),this.precedenceDfa=m}get isPrecedenceDfa(){return this.precedenceDfa}getPrecedenceStartState(f,p){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");return p?this.s0full.getTarget(f):this.s0.getTarget(f)}setPrecedenceStartState(f,p,m){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");f<0||(p?this.s0full.setTarget(f,m):this.s0.setTarget(f,m))}get isEmpty(){return this.isPrecedenceDfa?this.s0.getEdgeMap().size===0&&this.s0full.getEdgeMap().size===0:this.s0==null&&this.s0full==null}get isContextSensitive(){return this.isPrecedenceDfa?this.s0full.getEdgeMap().size>0:this.s0full!=null}addState(f){return f.stateNumber=this.nextStateNumber++,this.states.getOrAdd(f)}toString(f,p){if(f||(f=h.VocabularyImpl.EMPTY_VOCABULARY),!this.s0)return"";let m;return p?m=new n.DFASerializer(this,f,p,this.atnStartState.atn):m=new n.DFASerializer(this,f),m.toString()}toLexerString(){return this.s0?new o.LexerDFASerializer(this).toString():""}};return r([a.NotNull],c.prototype,"states",void 0),r([a.NotNull],c.prototype,"atnStartState",void 0),r([a.NotNull],c.prototype,"atn",void 0),c=r([t(0,a.NotNull)],c),As.DFA=c,As}var ea={},ra={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var AS=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(ra,"__esModule",{value:!0});ra.BasicState=void 0;const SS=Er,bS=ee,CS=z;class bx extends SS.ATNState{get stateType(){return bS.ATNStateType.BASIC}}AS([CS.Override],bx.prototype,"stateType",null);ra.BasicState=bx;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var NS=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(ea,"__esModule",{value:!0});ea.InvalidState=void 0;const wS=ee,RS=ra,IS=z;class Cx extends RS.BasicState{get stateType(){return wS.ATNStateType.INVALID_TYPE}}NS([IS.Override],Cx.prototype,"stateType",null);ea.InvalidState=Cx;var ws={},Rs={},Is={},Sf;function Mc(){if(Sf)return Is;Sf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(a,l,u,h){var c=arguments.length,d=c<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,u):h,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(a,l,u,h);else for(var p=a.length-1;p>=0;p--)(f=a[p])&&(d=(c<3?f(d):c>3?f(l,u,d):f(l,u))||d);return c>3&&d&&Object.defineProperty(l,u,d),d},t=S&&S.__param||function(a,l){return function(u,h){l(u,h,a)}};Object.defineProperty(Is,"__esModule",{value:!0}),Is.SetTransition=void 0;const e=hn(),i=z,n=St,s=er;let o=class extends s.Transition{constructor(l,u){super(l),u==null&&(u=e.IntervalSet.of(n.Token.INVALID_TYPE)),this.set=u}get serializationType(){return 7}get label(){return this.set}matches(l,u,h){return this.set.contains(l)}toString(){return this.set.toString()}};return r([i.NotNull],o.prototype,"set",void 0),r([i.Override],o.prototype,"serializationType",null),r([i.Override,i.NotNull],o.prototype,"label",null),r([i.Override],o.prototype,"matches",null),r([i.Override,i.NotNull],o.prototype,"toString",null),o=r([t(0,i.NotNull),t(1,i.Nullable)],o),Is.SetTransition=o,Is}var bf;function kc(){if(bf)return Rs;bf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=S&&S.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.NotSetTransition=void 0;const e=z,i=Mc();let n=class extends i.SetTransition{constructor(o,a){super(o,a)}get serializationType(){return 8}matches(o,a,l){return o>=a&&o<=l&&!super.matches(o,a,l)}toString(){return"~"+super.toString()}};return r([e.Override],n.prototype,"serializationType",null),r([e.Override],n.prototype,"matches",null),r([e.Override],n.prototype,"toString",null),n=r([t(0,e.NotNull),t(1,e.Nullable)],n),Rs.NotSetTransition=n,Rs}var _i={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Nx=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(_i,"__esModule",{value:!0});_i.RuleStopState=void 0;const PS=Er,DS=ee,wx=z;class Uc extends PS.ATNState{get nonStopStateNumber(){return-1}get stateType(){return DS.ATNStateType.RULE_STOP}}Nx([wx.Override],Uc.prototype,"nonStopStateNumber",null);Nx([wx.Override],Uc.prototype,"stateType",null);_i.RuleStopState=Uc;var rs={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ia=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Cf=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(rs,"__esModule",{value:!0});rs.RuleTransition=void 0;const $n=z,OS=er;let Gi=class extends OS.Transition{constructor(t,e,i,n){super(t),this.tailCall=!1,this.optimizedTailCall=!1,this.ruleIndex=e,this.precedence=i,this.followState=n}get serializationType(){return 3}get isEpsilon(){return!0}matches(t,e,i){return!1}};ia([$n.NotNull],Gi.prototype,"followState",void 0);ia([$n.Override],Gi.prototype,"serializationType",null);ia([$n.Override],Gi.prototype,"isEpsilon",null);ia([$n.Override],Gi.prototype,"matches",null);Gi=ia([Cf(0,$n.NotNull),Cf(3,$n.NotNull)],Gi);rs.RuleTransition=Gi;var na={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Zl=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},FS=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(na,"__esModule",{value:!0});na.WildcardTransition=void 0;const Ho=z,LS=er;let zn=class extends LS.Transition{constructor(t){super(t)}get serializationType(){return 9}matches(t,e,i){return t>=e&&t<=i}toString(){return"."}};Zl([Ho.Override],zn.prototype,"serializationType",null);Zl([Ho.Override],zn.prototype,"matches",null);Zl([Ho.Override,Ho.NotNull],zn.prototype,"toString",null);zn=Zl([FS(0,Ho.NotNull)],zn);na.WildcardTransition=zn;var Nf;function BS(){if(Nf)return ws;Nf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(x,v,g,_){var y=arguments.length,A=y<3?v:_===null?_=Object.getOwnPropertyDescriptor(v,g):_,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(x,v,g,_);else for(var b=x.length-1;b>=0;b--)(T=x[b])&&(A=(y<3?T(A):y>3?T(v,g,A):T(v,g))||A);return y>3&&A&&Object.defineProperty(v,g,A),A},t=S&&S.__param||function(x,v){return function(g,_){v(g,_,x)}};Object.defineProperty(ws,"__esModule",{value:!0}),ws.LL1Analyzer=void 0;const e=Qn,i=rr,n=sn,s=nr,o=hn(),a=z,l=kc(),u=De,h=ir(),c=_i,d=rs,f=St,p=na;let m=class mc{constructor(v){this.atn=v}getDecisionLookahead(v){if(v==null)return;let g=new Array(v.numberOfTransitions);for(let _=0;_<v.numberOfTransitions;_++){let y=new o.IntervalSet;g[_]=y;let A=new i.Array2DHashSet(u.ObjectEqualityComparator.INSTANCE),T=!1;this._LOOK(v.transition(_).target,void 0,h.PredictionContext.EMPTY_LOCAL,y,A,new s.BitSet,T,!1),(y.size===0||y.contains(mc.HIT_PRED))&&(y=void 0,g[_]=y)}return g}LOOK(v,g,_){if(_===void 0){if(v.atn==null)throw new Error("Illegal state");_=v.atn.ruleToStopState[v.ruleIndex]}else _===null&&(_=void 0);let y=new o.IntervalSet,A=!0,T=!0;return this._LOOK(v,_,g,y,new i.Array2DHashSet,new s.BitSet,A,T),y}_LOOK(v,g,_,y,A,T,b,E){let N=n.ATNConfig.create(v,0,_);if(!A.add(N))return;if(v===g){if(h.PredictionContext.isEmptyLocal(_)){y.add(f.Token.EPSILON);return}else if(_.isEmpty){E&&y.add(f.Token.EOF);return}}if(v instanceof c.RuleStopState){if(_.isEmpty&&!h.PredictionContext.isEmptyLocal(_)){E&&y.add(f.Token.EOF);return}let P=T.get(v.ruleIndex);try{T.clear(v.ruleIndex);for(let B=0;B<_.size;B++){if(_.getReturnState(B)===h.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let M=this.atn.states[_.getReturnState(B)];this._LOOK(M,g,_.getParent(B),y,A,T,b,E)}}finally{P&&T.set(v.ruleIndex)}}let D=v.numberOfTransitions;for(let P=0;P<D;P++){let B=v.transition(P);if(B instanceof d.RuleTransition){if(T.get(B.ruleIndex))continue;let M=_.getChild(B.followState.stateNumber);try{T.set(B.ruleIndex),this._LOOK(B.target,g,M,y,A,T,b,E)}finally{T.clear(B.ruleIndex)}}else if(B instanceof e.AbstractPredicateTransition)b?this._LOOK(B.target,g,_,y,A,T,b,E):y.add(mc.HIT_PRED);else if(B.isEpsilon)this._LOOK(B.target,g,_,y,A,T,b,E);else if(B instanceof p.WildcardTransition)y.addAll(o.IntervalSet.of(f.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType));else{let M=B.label;M!=null&&(B instanceof l.NotSetTransition&&(M=M.complement(o.IntervalSet.of(f.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType))),y.addAll(M))}}}};return m.HIT_PRED=f.Token.INVALID_TYPE,r([a.NotNull],m.prototype,"atn",void 0),r([a.NotNull,t(0,a.NotNull),t(1,a.NotNull)],m.prototype,"LOOK",null),r([t(0,a.NotNull),t(2,a.NotNull),t(3,a.NotNull),t(4,a.NotNull),t(5,a.NotNull)],m.prototype,"_LOOK",null),m=r([t(0,a.NotNull)],m),ws.LL1Analyzer=m,ws}var wf;function Cr(){return wf||(wf=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__decorate||function(p,m,x,v){var g=arguments.length,_=g<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,x):v,y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(p,m,x,v);else for(var A=p.length-1;A>=0;A--)(y=p[A])&&(_=(g<3?y(_):g>3?y(m,x,_):y(m,x))||_);return g>3&&_&&Object.defineProperty(m,x,_),_},e=S&&S.__param||function(p,m){return function(x,v){m(x,v,p)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ATN=void 0;const i=Vr,n=Sx(),s=hn(),o=ea,a=BS(),l=z,u=De,h=ir(),c=St,d=Te;let f=class{constructor(m,x){this.states=[],this.decisionToState=[],this.modeNameToStartState=new Map,this.modeToStartState=[],this.contextCache=new i.Array2DHashMap(u.ObjectEqualityComparator.INSTANCE),this.decisionToDFA=[],this.modeToDFA=[],this.LL1Table=new Map,this.grammarType=m,this.maxTokenType=x}clearDFA(){this.decisionToDFA=new Array(this.decisionToState.length);for(let m=0;m<this.decisionToDFA.length;m++)this.decisionToDFA[m]=new n.DFA(this.decisionToState[m],m);this.modeToDFA=new Array(this.modeToStartState.length);for(let m=0;m<this.modeToDFA.length;m++)this.modeToDFA[m]=new n.DFA(this.modeToStartState[m]);this.contextCache.clear(),this.LL1Table.clear()}get contextCacheSize(){return this.contextCache.size}getCachedContext(m){return h.PredictionContext.getCachedContext(m,this.contextCache,new h.PredictionContext.IdentityHashMap)}getDecisionToDFA(){return d(this.decisionToDFA!=null&&this.decisionToDFA.length===this.decisionToState.length),this.decisionToDFA}nextTokens(m,x){return x?new a.LL1Analyzer(this).LOOK(m,x):(m.nextTokenWithinRule||(m.nextTokenWithinRule=this.nextTokens(m,h.PredictionContext.EMPTY_LOCAL),m.nextTokenWithinRule.setReadonly(!0)),m.nextTokenWithinRule)}addState(m){m.atn=this,m.stateNumber=this.states.length,this.states.push(m)}removeState(m){let x=new o.InvalidState;x.atn=this,x.stateNumber=m.stateNumber,this.states[m.stateNumber]=x}defineMode(m,x){this.modeNameToStartState.set(m,x),this.modeToStartState.push(x),this.modeToDFA.push(new n.DFA(x)),this.defineDecisionState(x)}defineDecisionState(m){return this.decisionToState.push(m),m.decision=this.decisionToState.length-1,this.decisionToDFA.push(new n.DFA(m,m.decision)),m.decision}getDecisionState(m){if(this.decisionToState.length>0)return this.decisionToState[m]}get numberOfDecisions(){return this.decisionToState.length}getExpectedTokens(m,x){if(m<0||m>=this.states.length)throw new RangeError("Invalid state number.");let v=x,g=this.states[m],_=this.nextTokens(g);if(!_.contains(c.Token.EPSILON))return _;let y=new s.IntervalSet;for(y.addAll(_),y.remove(c.Token.EPSILON);v!=null&&v.invokingState>=0&&_.contains(c.Token.EPSILON);){let T=this.states[v.invokingState].transition(0);_=this.nextTokens(T.followState),y.addAll(_),y.remove(c.Token.EPSILON),v=v._parent}return _.contains(c.Token.EPSILON)&&y.add(c.Token.EOF),y}};t([l.NotNull],f.prototype,"states",void 0),t([l.NotNull],f.prototype,"decisionToState",void 0),t([l.NotNull],f.prototype,"modeNameToStartState",void 0),t([l.NotNull],f.prototype,"modeToStartState",void 0),t([l.NotNull],f.prototype,"decisionToDFA",void 0),t([l.NotNull],f.prototype,"modeToDFA",void 0),t([l.NotNull],f.prototype,"nextTokens",null),t([e(0,l.NotNull)],f.prototype,"removeState",null),t([e(0,l.NotNull),e(1,l.NotNull)],f.prototype,"defineMode",null),t([e(0,l.NotNull)],f.prototype,"defineDecisionState",null),t([l.NotNull],f.prototype,"getExpectedTokens",null),f=t([e(0,l.NotNull)],f),r.ATN=f,function(p){p.INVALID_ALT_NUMBER=0}(f=r.ATN||(r.ATN={})),r.ATN=f}(mh)),mh}var Ql={},Jl={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var on=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},MS=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Jl,"__esModule",{value:!0});Jl.LexerIndexedCustomAction=void 0;const Ja=jt,an=z;let Hr=class Rx{constructor(t,e){this._offset=t,this._action=e}get offset(){return this._offset}get action(){return this._action}get actionType(){return this._action.actionType}get isPositionDependent(){return!0}execute(t){this._action.execute(t)}hashCode(){let t=Ja.MurmurHash.initialize();return t=Ja.MurmurHash.update(t,this._offset),t=Ja.MurmurHash.update(t,this._action),Ja.MurmurHash.finish(t,2)}equals(t){return t===this?!0:t instanceof Rx?this._offset===t._offset&&this._action.equals(t._action):!1}};on([an.NotNull],Hr.prototype,"action",null);on([an.Override],Hr.prototype,"actionType",null);on([an.Override],Hr.prototype,"isPositionDependent",null);on([an.Override],Hr.prototype,"execute",null);on([an.Override],Hr.prototype,"hashCode",null);on([an.Override],Hr.prototype,"equals",null);Hr=on([MS(1,an.NotNull)],Hr);Jl.LexerIndexedCustomAction=Hr;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ln=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Hc=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.LexerActionExecutor=void 0;const kS=rn,Sh=Jl,bh=jt,di=z;let jr=class bo{constructor(t){this._lexerActions=t;let e=bh.MurmurHash.initialize();for(let i of t)e=bh.MurmurHash.update(e,i);this.cachedHashCode=bh.MurmurHash.finish(e,t.length)}static append(t,e){if(!t)return new bo([e]);let i=t._lexerActions.slice(0);return i.push(e),new bo(i)}fixOffsetBeforeMatch(t){let e;for(let i=0;i<this._lexerActions.length;i++)this._lexerActions[i].isPositionDependent&&!(this._lexerActions[i]instanceof Sh.LexerIndexedCustomAction)&&(e||(e=this._lexerActions.slice(0)),e[i]=new Sh.LexerIndexedCustomAction(t,this._lexerActions[i]));return e?new bo(e):this}get lexerActions(){return this._lexerActions}execute(t,e,i){let n=!1,s=e.index;try{for(let o of this._lexerActions){if(o instanceof Sh.LexerIndexedCustomAction){let a=o.offset;e.seek(i+a),o=o.action,n=i+a!==s}else o.isPositionDependent&&(e.seek(s),n=!1);o.execute(t)}}finally{n&&e.seek(s)}}hashCode(){return this.cachedHashCode}equals(t){return t===this?!0:t instanceof bo?this.cachedHashCode===t.cachedHashCode&&kS.ArrayEqualityComparator.INSTANCE.equals(this._lexerActions,t._lexerActions):!1}};ln([di.NotNull],jr.prototype,"_lexerActions",void 0);ln([di.NotNull],jr.prototype,"lexerActions",null);ln([Hc(0,di.NotNull)],jr.prototype,"execute",null);ln([di.Override],jr.prototype,"hashCode",null);ln([di.Override],jr.prototype,"equals",null);ln([di.NotNull,Hc(1,di.NotNull)],jr,"append",null);jr=ln([Hc(0,di.NotNull)],jr);Ql.LexerActionExecutor=jr;var un={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var jc=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},US=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(un,"__esModule",{value:!0});un.LexerNoViableAltException=void 0;const HS=Ar,Gc=z,jS=ce,GS=Qt;let jo=class extends HS.RecognitionException{constructor(t,e,i,n){super(t,e),this._startIndex=i,this._deadEndConfigs=n}get startIndex(){return this._startIndex}get deadEndConfigs(){return this._deadEndConfigs}get inputStream(){return super.inputStream}toString(){let t="";return this._startIndex>=0&&this._startIndex<this.inputStream.size&&(t=this.inputStream.getText(jS.Interval.of(this._startIndex,this._startIndex)),t=GS.escapeWhitespace(t,!1)),`LexerNoViableAltException('${t}')`}};jc([Gc.Override],jo.prototype,"inputStream",null);jc([Gc.Override],jo.prototype,"toString",null);jo=jc([US(1,Gc.NotNull)],jo);un.LexerNoViableAltException=jo;var Ps={},Rf;function $S(){if(Rf)return Ps;Rf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(n,s,o,a){var l=arguments.length,u=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,s,o,a);else for(var c=n.length-1;c>=0;c--)(h=n[c])&&(u=(l<3?h(u):l>3?h(s,o,u):h(s,o))||u);return l>3&&u&&Object.defineProperty(s,o,u),u};Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.OrderedATNConfigSet=void 0;const t=Qo(),e=z;let i=class Ix extends t.ATNConfigSet{constructor(s,o){s!=null&&o!=null?super(s,o):super()}clone(s){let o=new Ix(this,s);return!s&&this.isReadOnly&&o.addAll(this),o}getKey(s){return{state:0,alt:s.hashCode()}}canMerge(s,o,a){return s.equals(a)}};return r([e.Override],i.prototype,"clone",null),r([e.Override],i.prototype,"getKey",null),r([e.Override],i.prototype,"canMerge",null),Ps.OrderedATNConfigSet=i,Ps}var If;function tu(){return If||(If=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__decorate||function(A,T,b,E){var N=arguments.length,D=N<3?T:E===null?E=Object.getOwnPropertyDescriptor(T,b):E,P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(A,T,b,E);else for(var B=A.length-1;B>=0;B--)(P=A[B])&&(D=(N<3?P(D):N>3?P(T,b,D):P(T,b))||D);return N>3&&D&&Object.defineProperty(T,b,D),D},e=S&&S.__param||function(A,T){return function(b,E){T(b,E,A)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerATNSimulator=void 0;const i=Zo,n=Cr(),s=sn,o=Qo(),a=Yl(),l=ql(),u=ce,h=Xr,c=mi(),d=Ql,f=un,p=z,m=$S(),x=ir(),v=_i,g=St,_=Te;let y=class Ce extends a.ATNSimulator{constructor(T,b){super(T),this.optimize_tail_calls=!0,this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=c.Lexer.DEFAULT_MODE,this.prevAccept=new Ce.SimState,this.recog=b}copyState(T){this._charPositionInLine=T.charPositionInLine,this._line=T._line,this.mode=T.mode,this.startIndex=T.startIndex}match(T,b){this.mode=b;let E=T.mark();try{this.startIndex=T.index,this.prevAccept.reset();let N=this.atn.modeToDFA[b].s0;return N==null?this.matchATN(T):this.execATN(T,N)}finally{T.release(E)}}reset(){this.prevAccept.reset(),this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=c.Lexer.DEFAULT_MODE}matchATN(T){let b=this.atn.modeToStartState[this.mode];Ce.debug&&console.log(`matchATN mode ${this.mode} start: ${b}`);let E=this.mode,N=this.computeStartState(T,b),D=N.hasSemanticContext;D&&(N.hasSemanticContext=!1);let P=this.addDFAState(N);if(!D){let M=this.atn.modeToDFA[this.mode];M.s0?P=M.s0:M.s0=P}let B=this.execATN(T,P);return Ce.debug&&console.log(`DFA after matchATN: ${this.atn.modeToDFA[E].toLexerString()}`),B}execATN(T,b){Ce.debug&&console.log(`start state closure=${b.configs}`),b.isAcceptState&&this.captureSimState(this.prevAccept,T,b);let E=T.LA(1),N=b;for(;;){Ce.debug&&console.log(`execATN loop starting closure: ${N.configs}`);let D=this.getExistingTargetState(N,E);if(D==null&&(D=this.computeTargetState(T,N,E)),D===a.ATNSimulator.ERROR||(E!==h.IntStream.EOF&&this.consume(T),D.isAcceptState&&(this.captureSimState(this.prevAccept,T,D),E===h.IntStream.EOF)))break;E=T.LA(1),N=D}return this.failOrAccept(this.prevAccept,T,N.configs,E)}getExistingTargetState(T,b){let E=T.getTarget(b);return Ce.debug&&E!=null&&console.log("reuse state "+T.stateNumber+" edge to "+E.stateNumber),E}computeTargetState(T,b,E){let N=new m.OrderedATNConfigSet;return this.getReachableConfigSet(T,b.configs,N,E),N.isEmpty?(N.hasSemanticContext||this.addDFAEdge(b,E,a.ATNSimulator.ERROR),a.ATNSimulator.ERROR):this.addDFAEdge(b,E,N)}failOrAccept(T,b,E,N){if(T.dfaState!=null){let D=T.dfaState.lexerActionExecutor;return this.accept(b,D,this.startIndex,T.index,T.line,T.charPos),T.dfaState.prediction}else{if(N===h.IntStream.EOF&&b.index===this.startIndex)return g.Token.EOF;throw new f.LexerNoViableAltException(this.recog,b,this.startIndex,E)}}getReachableConfigSet(T,b,E,N){let D=n.ATN.INVALID_ALT_NUMBER;for(let P of b){let B=P.alt===D;if(B&&P.hasPassedThroughNonGreedyDecision)continue;Ce.debug&&console.log(`testing ${this.getTokenName(N)} at ${P.toString(this.recog,!0)}`);let M=P.state.numberOfOptimizedTransitions;for(let H=0;H<M;H++){let Z=P.state.getOptimizedTransition(H),at=this.getReachableTarget(Z,N);if(at!=null){let nt=P.lexerActionExecutor,ut;nt!=null?(nt=nt.fixOffsetBeforeMatch(T.index-this.startIndex),ut=P.transform(at,!0,nt)):(_(P.lexerActionExecutor==null),ut=P.transform(at,!0));let Rt=N===h.IntStream.EOF;if(this.closure(T,ut,E,B,!0,Rt)){D=P.alt;break}}}}}accept(T,b,E,N,D,P){Ce.debug&&console.log(`ACTION ${b}`),T.seek(N),this._line=D,this._charPositionInLine=P,b!=null&&this.recog!=null&&b.execute(this.recog,T,E)}getReachableTarget(T,b){if(T.matches(b,c.Lexer.MIN_CHAR_VALUE,c.Lexer.MAX_CHAR_VALUE))return T.target}computeStartState(T,b){let E=x.PredictionContext.EMPTY_FULL,N=new m.OrderedATNConfigSet;for(let D=0;D<b.numberOfTransitions;D++){let P=b.transition(D).target,B=s.ATNConfig.create(P,D+1,E);this.closure(T,B,N,!1,!1,!1)}return N}closure(T,b,E,N,D,P){if(Ce.debug&&console.log("closure("+b.toString(this.recog,!0)+")"),b.state instanceof v.RuleStopState){Ce.debug&&(this.recog!=null?console.log(`closure at ${this.recog.ruleNames[b.state.ruleIndex]} rule stop ${b}`):console.log(`closure at rule stop ${b}`));let M=b.context;if(M.isEmpty)return E.add(b),!0;M.hasEmpty&&(E.add(b.transform(b.state,!0,x.PredictionContext.EMPTY_FULL)),N=!0);for(let H=0;H<M.size;H++){let Z=M.getReturnState(H);if(Z===x.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let at=M.getParent(H),nt=this.atn.states[Z],ut=b.transform(nt,!1,at);N=this.closure(T,ut,E,N,D,P)}return N}b.state.onlyHasEpsilonTransitions||(!N||!b.hasPassedThroughNonGreedyDecision)&&E.add(b);let B=b.state;for(let M=0;M<B.numberOfOptimizedTransitions;M++){let H=B.getOptimizedTransition(M),Z=this.getEpsilonTarget(T,b,H,E,D,P);Z!=null&&(N=this.closure(T,Z,E,N,D,P))}return N}getEpsilonTarget(T,b,E,N,D,P){let B;switch(E.serializationType){case 3:let M=E;if(this.optimize_tail_calls&&M.optimizedTailCall&&!b.context.hasEmpty)B=b.transform(E.target,!0);else{let Z=b.context.getChild(M.followState.stateNumber);B=b.transform(E.target,!0,Z)}break;case 10:throw new Error("Precedence predicates are not supported in lexers.");case 4:let H=E;Ce.debug&&console.log("EVAL rule "+H.ruleIndex+":"+H.predIndex),N.hasSemanticContext=!0,this.evaluatePredicate(T,H.ruleIndex,H.predIndex,D)?B=b.transform(E.target,!0):B=void 0;break;case 6:if(b.context.hasEmpty){let Z=d.LexerActionExecutor.append(b.lexerActionExecutor,this.atn.lexerActions[E.actionIndex]);B=b.transform(E.target,!0,Z);break}else{B=b.transform(E.target,!0);break}case 1:B=b.transform(E.target,!0);break;case 5:case 2:case 7:if(P&&E.matches(h.IntStream.EOF,c.Lexer.MIN_CHAR_VALUE,c.Lexer.MAX_CHAR_VALUE)){B=b.transform(E.target,!1);break}B=void 0;break;default:B=void 0;break}return B}evaluatePredicate(T,b,E,N){if(this.recog==null)return!0;if(!N)return this.recog.sempred(void 0,b,E);let D=this._charPositionInLine,P=this._line,B=T.index,M=T.mark();try{return this.consume(T),this.recog.sempred(void 0,b,E)}finally{this._charPositionInLine=D,this._line=P,T.seek(B),T.release(M)}}captureSimState(T,b,E){T.index=b.index,T.line=this._line,T.charPos=this._charPositionInLine,T.dfaState=E}addDFAEdge(T,b,E){if(E instanceof o.ATNConfigSet){let N=E.hasSemanticContext;N&&(E.hasSemanticContext=!1);let D=this.addDFAState(E);return N||this.addDFAEdge(T,b,D),D}else Ce.debug&&console.log("EDGE "+T+" -> "+E+" upon "+String.fromCharCode(b)),T!=null&&T.setTarget(b,E)}addDFAState(T){_(!T.hasSemanticContext);let b=new l.DFAState(T),E=this.atn.modeToDFA[this.mode].states.get(b);if(E!=null)return E;T.optimizeConfigs(this);let N=new l.DFAState(T.clone(!0)),D;for(let P of T)if(P.state instanceof v.RuleStopState){D=P;break}if(D!=null){let P=this.atn.ruleToTokenType[D.state.ruleIndex],B=D.lexerActionExecutor;N.acceptStateInfo=new i.AcceptStateInfo(P,B)}return this.atn.modeToDFA[this.mode].addState(N)}getDFA(T){return this.atn.modeToDFA[T]}getText(T){return T.getText(u.Interval.of(this.startIndex,T.index-1))}get line(){return this._line}set line(T){this._line=T}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(T){this._charPositionInLine=T}consume(T){T.LA(1)===`
`.charCodeAt(0)?(this._line++,this._charPositionInLine=0):this._charPositionInLine++,T.consume()}getTokenName(T){return T===-1?"EOF":"'"+String.fromCharCode(T)+"'"}};t([p.NotNull],y.prototype,"prevAccept",void 0),t([e(0,p.NotNull)],y.prototype,"copyState",null),t([e(0,p.NotNull)],y.prototype,"match",null),t([p.Override],y.prototype,"reset",null),t([e(0,p.NotNull)],y.prototype,"matchATN",null),t([e(0,p.NotNull),e(1,p.NotNull)],y.prototype,"execATN",null),t([e(0,p.NotNull)],y.prototype,"getExistingTargetState",null),t([p.NotNull,e(0,p.NotNull),e(1,p.NotNull)],y.prototype,"computeTargetState",null),t([e(0,p.NotNull),e(1,p.NotNull),e(2,p.NotNull)],y.prototype,"getReachableConfigSet",null),t([e(0,p.NotNull)],y.prototype,"accept",null),t([p.NotNull,e(0,p.NotNull),e(1,p.NotNull)],y.prototype,"computeStartState",null),t([e(0,p.NotNull),e(1,p.NotNull),e(2,p.NotNull)],y.prototype,"closure",null),t([e(0,p.NotNull),e(1,p.NotNull),e(2,p.NotNull),e(3,p.NotNull)],y.prototype,"getEpsilonTarget",null),t([e(0,p.NotNull)],y.prototype,"evaluatePredicate",null),t([e(0,p.NotNull),e(1,p.NotNull),e(2,p.NotNull)],y.prototype,"captureSimState",null),t([p.NotNull,e(0,p.NotNull)],y.prototype,"addDFAState",null),t([p.NotNull],y.prototype,"getDFA",null),t([p.NotNull,e(0,p.NotNull)],y.prototype,"getText",null),t([e(0,p.NotNull)],y.prototype,"consume",null),t([p.NotNull],y.prototype,"getTokenName",null),y=t([e(0,p.NotNull)],y),r.LexerATNSimulator=y,function(A){A.debug=!1,A.dfa_debug=!1;class T{constructor(){this.index=-1,this.line=0,this.charPos=-1}reset(){this.index=-1,this.line=0,this.charPos=-1,this.dfaState=void 0}}A.SimState=T}(y=r.LexerATNSimulator||(r.LexerATNSimulator={})),r.LexerATNSimulator=y}(_h)),_h}var Pf;function mi(){if(Pf)return Es;Pf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(c,d,f,p){var m=arguments.length,x=m<3?d:p===null?p=Object.getOwnPropertyDescriptor(d,f):p,v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,d,f,p);else for(var g=c.length-1;g>=0;g--)(v=c[g])&&(x=(m<3?v(x):m>3?v(d,f,x):v(d,f))||x);return m>3&&x&&Object.defineProperty(d,f,x),x};Object.defineProperty(Es,"__esModule",{value:!0}),Es.Lexer=void 0;const t=Wl,e=Ko,i=ce,n=Xr,s=tu(),o=un,a=z,l=pi,u=St;let h=class ei extends l.Recognizer{constructor(d){super(),this._factory=t.CommonTokenFactory.DEFAULT,this._tokenStartCharIndex=-1,this._tokenStartLine=0,this._tokenStartCharPositionInLine=0,this._hitEOF=!1,this._channel=0,this._type=0,this._modeStack=new e.IntegerStack,this._mode=ei.DEFAULT_MODE,this._input=d,this._tokenFactorySourcePair={source:this,stream:d}}static get DEFAULT_TOKEN_CHANNEL(){return u.Token.DEFAULT_CHANNEL}static get HIDDEN(){return u.Token.HIDDEN_CHANNEL}reset(d){(d===void 0||d)&&this._input.seek(0),this._token=void 0,this._type=u.Token.INVALID_TYPE,this._channel=u.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartCharPositionInLine=-1,this._tokenStartLine=-1,this._text=void 0,this._hitEOF=!1,this._mode=ei.DEFAULT_MODE,this._modeStack.clear(),this.interpreter.reset()}nextToken(){if(this._input==null)throw new Error("nextToken requires a non-null input stream.");let d=this._input.mark();try{t:for(;;){if(this._hitEOF)return this.emitEOF();this._token=void 0,this._channel=u.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartCharPositionInLine=this.interpreter.charPositionInLine,this._tokenStartLine=this.interpreter.line,this._text=void 0;do{this._type=u.Token.INVALID_TYPE;let f;try{f=this.interpreter.match(this._input,this._mode)}catch(p){if(p instanceof o.LexerNoViableAltException)this.notifyListeners(p),this.recover(p),f=ei.SKIP;else throw p}if(this._input.LA(1)===n.IntStream.EOF&&(this._hitEOF=!0),this._type===u.Token.INVALID_TYPE&&(this._type=f),this._type===ei.SKIP)continue t}while(this._type===ei.MORE);return this._token==null?this.emit():this._token}}finally{this._input.release(d)}}skip(){this._type=ei.SKIP}more(){this._type=ei.MORE}mode(d){this._mode=d}pushMode(d){s.LexerATNSimulator.debug&&console.log("pushMode "+d),this._modeStack.push(this._mode),this.mode(d)}popMode(){if(this._modeStack.isEmpty)throw new Error("EmptyStackException");return s.LexerATNSimulator.debug&&console.log("popMode back to "+this._modeStack.peek()),this.mode(this._modeStack.pop()),this._mode}get tokenFactory(){return this._factory}set tokenFactory(d){this._factory=d}get inputStream(){return this._input}set inputStream(d){this.reset(!1),this._input=d,this._tokenFactorySourcePair={source:this,stream:this._input}}get sourceName(){return this._input.sourceName}emit(d){return d||(d=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.charIndex-1,this._tokenStartLine,this._tokenStartCharPositionInLine)),this._token=d,d}emitEOF(){let d=this.charPositionInLine,f=this.line,p=this._factory.create(this._tokenFactorySourcePair,u.Token.EOF,void 0,u.Token.DEFAULT_CHANNEL,this._input.index,this._input.index-1,f,d);return this.emit(p),p}get line(){return this.interpreter.line}set line(d){this.interpreter.line=d}get charPositionInLine(){return this.interpreter.charPositionInLine}set charPositionInLine(d){this.interpreter.charPositionInLine=d}get charIndex(){return this._input.index}get text(){return this._text!=null?this._text:this.interpreter.getText(this._input)}set text(d){this._text=d}get token(){return this._token}set token(d){this._token=d}set type(d){this._type=d}get type(){return this._type}set channel(d){this._channel=d}get channel(){return this._channel}getAllTokens(){let d=[],f=this.nextToken();for(;f.type!==u.Token.EOF;)d.push(f),f=this.nextToken();return d}notifyListeners(d){let f=this._input.getText(i.Interval.of(this._tokenStartCharIndex,this._input.index)),p="token recognition error at: '"+this.getErrorDisplay(f)+"'",m=this.getErrorListenerDispatch();m.syntaxError&&m.syntaxError(this,void 0,this._tokenStartLine,this._tokenStartCharPositionInLine,p,d)}getErrorDisplay(d){if(typeof d=="number"){switch(d){case u.Token.EOF:return"<EOF>";case 10:return"\\n";case 9:return"\\t";case 13:return"\\r"}return String.fromCharCode(d)}return d.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}getCharErrorDisplay(d){return"'"+this.getErrorDisplay(d)+"'"}recover(d){d instanceof o.LexerNoViableAltException?this._input.LA(1)!==n.IntStream.EOF&&this.interpreter.consume(this._input):this._input.consume()}};return h.DEFAULT_MODE=0,h.MORE=-2,h.SKIP=-3,h.MIN_CHAR_VALUE=0,h.MAX_CHAR_VALUE=1114111,r([a.Override],h.prototype,"nextToken",null),r([a.Override],h.prototype,"tokenFactory",null),r([a.Override],h.prototype,"inputStream",null),r([a.Override],h.prototype,"sourceName",null),r([a.Override],h.prototype,"line",null),r([a.Override],h.prototype,"charPositionInLine",null),Es.Lexer=h,Es}var Df;function hn(){if(Df)return Ts;Df=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(h,c,d,f){var p=arguments.length,m=p<3?c:f===null?f=Object.getOwnPropertyDescriptor(c,d):f,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(h,c,d,f);else for(var v=h.length-1;v>=0;v--)(x=h[v])&&(m=(p<3?x(m):p>3?x(c,d,m):x(c,d))||m);return p>3&&m&&Object.defineProperty(c,d,m),m},t=S&&S.__param||function(h,c){return function(d,f){c(d,f,h)}};Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.IntervalSet=void 0;const e=rn,i=Jn,n=ce,s=mi(),o=jt,a=z,l=St;let u=class Pt{constructor(c){this.readonly=!1,c!=null?this._intervals=c.slice(0):this._intervals=[]}static get COMPLETE_CHAR_SET(){return Pt._COMPLETE_CHAR_SET===void 0&&(Pt._COMPLETE_CHAR_SET=Pt.of(s.Lexer.MIN_CHAR_VALUE,s.Lexer.MAX_CHAR_VALUE),Pt._COMPLETE_CHAR_SET.setReadonly(!0)),Pt._COMPLETE_CHAR_SET}static get EMPTY_SET(){return Pt._EMPTY_SET==null&&(Pt._EMPTY_SET=new Pt,Pt._EMPTY_SET.setReadonly(!0)),Pt._EMPTY_SET}static of(c,d=c){let f=new Pt;return f.add(c,d),f}clear(){if(this.readonly)throw new Error("can't alter readonly IntervalSet");this._intervals.length=0}add(c,d=c){this.addRange(n.Interval.of(c,d))}addRange(c){if(this.readonly)throw new Error("can't alter readonly IntervalSet");if(!(c.b<c.a)){for(let d=0;d<this._intervals.length;d++){let f=this._intervals[d];if(c.equals(f))return;if(c.adjacent(f)||!c.disjoint(f)){let p=c.union(f);for(this._intervals[d]=p;d<this._intervals.length-1;){d++;let m=this._intervals[d];if(!p.adjacent(m)&&p.disjoint(m))break;this._intervals.splice(d,1),d--,this._intervals[d]=p.union(m)}return}if(c.startsBeforeDisjoint(f)){this._intervals.splice(d,0,c);return}}this._intervals.push(c)}}static or(c){let d=new Pt;for(let f of c)d.addAll(f);return d}addAll(c){if(c==null)return this;if(c instanceof Pt){let d=c,f=d._intervals.length;for(let p=0;p<f;p++){let m=d._intervals[p];this.add(m.a,m.b)}}else for(let d of c.toArray())this.add(d);return this}complementRange(c,d){return this.complement(Pt.of(c,d))}complement(c){if(c.isNil)return Pt.EMPTY_SET;let d;return c instanceof Pt?d=c:(d=new Pt,d.addAll(c)),d.subtract(this)}subtract(c){if(c==null||c.isNil)return new Pt(this._intervals);if(c instanceof Pt)return Pt.subtract(this,c);let d=new Pt;return d.addAll(c),Pt.subtract(this,d)}static subtract(c,d){if(c.isNil)return new Pt;let f=new Pt(c._intervals);if(d.isNil)return f;let p=0,m=0;for(;p<f._intervals.length&&m<d._intervals.length;){let x=f._intervals[p],v=d._intervals[m];if(v.b<x.a){m++;continue}if(v.a>x.b){p++;continue}let g,_;if(v.a>x.a&&(g=new n.Interval(x.a,v.a-1)),v.b<x.b&&(_=new n.Interval(v.b+1,x.b)),g)if(_){f._intervals[p]=g,f._intervals.splice(p+1,0,_),p++,m++;continue}else{f._intervals[p]=g,p++;continue}else if(_){f._intervals[p]=_,m++;continue}else{f._intervals.splice(p,1);continue}}return f}or(c){let d=new Pt;return d.addAll(this),d.addAll(c),d}and(c){if(c.isNil)return new Pt;let d=this._intervals,f=c._intervals,p,m=d.length,x=f.length,v=0,g=0;for(;v<m&&g<x;){let _=d[v],y=f[g];_.startsBeforeDisjoint(y)?v++:y.startsBeforeDisjoint(_)?g++:_.properlyContains(y)?(p||(p=new Pt),p.addRange(_.intersection(y)),g++):y.properlyContains(_)?(p||(p=new Pt),p.addRange(_.intersection(y)),v++):_.disjoint(y)||(p||(p=new Pt),p.addRange(_.intersection(y)),_.startsAfterNonDisjoint(y)?g++:y.startsAfterNonDisjoint(_)&&v++)}return p||new Pt}contains(c){let d=this._intervals.length,f=0,p=d-1;for(;f<=p;){let m=f+p>>1,x=this._intervals[m],v=x.a;if(x.b<c)f=m+1;else if(v>c)p=m-1;else return!0}return!1}get isNil(){return this._intervals==null||this._intervals.length===0}get maxElement(){if(this.isNil)throw new RangeError("set is empty");return this._intervals[this._intervals.length-1].b}get minElement(){if(this.isNil)throw new RangeError("set is empty");return this._intervals[0].a}get intervals(){return this._intervals}hashCode(){let c=o.MurmurHash.initialize();for(let d of this._intervals)c=o.MurmurHash.update(c,d.a),c=o.MurmurHash.update(c,d.b);return c=o.MurmurHash.finish(c,this._intervals.length*2),c}equals(c){return c==null||!(c instanceof Pt)?!1:e.ArrayEqualityComparator.INSTANCE.equals(this._intervals,c._intervals)}toString(c=!1){let d="";if(this._intervals==null||this._intervals.length===0)return"{}";this.size>1&&(d+="{");let f=!0;for(let p of this._intervals){f?f=!1:d+=", ";let m=p.a,x=p.b;m===x?m===l.Token.EOF?d+="<EOF>":c?d+="'"+String.fromCodePoint(m)+"'":d+=m:c?d+="'"+String.fromCodePoint(m)+"'..'"+String.fromCodePoint(x)+"'":d+=m+".."+x}return this.size>1&&(d+="}"),d}toStringVocabulary(c){if(this._intervals==null||this._intervals.length===0)return"{}";let d="";this.size>1&&(d+="{");let f=!0;for(let p of this._intervals){f?f=!1:d+=", ";let m=p.a,x=p.b;if(m===x)d+=this.elementName(c,m);else for(let v=m;v<=x;v++)v>m&&(d+=", "),d+=this.elementName(c,v)}return this.size>1&&(d+="}"),d}elementName(c,d){return d===l.Token.EOF?"<EOF>":d===l.Token.EPSILON?"<EPSILON>":c.getDisplayName(d)}get size(){let c=0,d=this._intervals.length;if(d===1){let f=this._intervals[0];return f.b-f.a+1}for(let f=0;f<d;f++){let p=this._intervals[f];c+=p.b-p.a+1}return c}toIntegerList(){let c=new i.IntegerList(this.size),d=this._intervals.length;for(let f=0;f<d;f++){let p=this._intervals[f],m=p.a,x=p.b;for(let v=m;v<=x;v++)c.add(v)}return c}toSet(){let c=new Set;for(let d of this._intervals){let f=d.a,p=d.b;for(let m=f;m<=p;m++)c.add(m)}return c}toArray(){let c=new Array,d=this._intervals.length;for(let f=0;f<d;f++){let p=this._intervals[f],m=p.a,x=p.b;for(let v=m;v<=x;v++)c.push(v)}return c}remove(c){if(this.readonly)throw new Error("can't alter readonly IntervalSet");let d=this._intervals.length;for(let f=0;f<d;f++){let p=this._intervals[f],m=p.a,x=p.b;if(c<m)break;if(c===m&&c===x){this._intervals.splice(f,1);break}if(c===m){this._intervals[f]=n.Interval.of(p.a+1,p.b);break}if(c===x){this._intervals[f]=n.Interval.of(p.a,p.b-1);break}if(c>m&&c<x){let v=p.b;this._intervals[f]=n.Interval.of(p.a,c-1),this.add(c+1,v)}}}get isReadonly(){return this.readonly}setReadonly(c){if(this.readonly&&!c)throw new Error("can't alter readonly IntervalSet");this.readonly=c}};return r([a.Override],u.prototype,"addAll",null),r([a.Override],u.prototype,"complement",null),r([a.Override],u.prototype,"subtract",null),r([a.Override],u.prototype,"or",null),r([a.Override],u.prototype,"and",null),r([a.Override],u.prototype,"contains",null),r([a.Override],u.prototype,"isNil",null),r([a.Override],u.prototype,"hashCode",null),r([a.Override],u.prototype,"equals",null),r([t(0,a.NotNull)],u.prototype,"toStringVocabulary",null),r([a.NotNull,t(0,a.NotNull)],u.prototype,"elementName",null),r([a.Override],u.prototype,"size",null),r([a.Override],u.prototype,"remove",null),r([a.NotNull],u,"of",null),r([a.NotNull],u,"subtract",null),Ts.IntervalSet=u,Ts}var Ds={},Os={},sa={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var zS=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(sa,"__esModule",{value:!0});sa.ATNDeserializationOptions=void 0;const XS=z;class ii{constructor(t){this.readOnly=!1,t?(this.verifyATN=t.verifyATN,this.generateRuleBypassTransitions=t.generateRuleBypassTransitions,this.optimize=t.optimize):(this.verifyATN=!0,this.generateRuleBypassTransitions=!1,this.optimize=!0)}static get defaultOptions(){return ii._defaultOptions==null&&(ii._defaultOptions=new ii,ii._defaultOptions.makeReadOnly()),ii._defaultOptions}get isReadOnly(){return this.readOnly}makeReadOnly(){this.readOnly=!0}get isVerifyATN(){return this.verifyATN}set isVerifyATN(t){this.throwIfReadOnly(),this.verifyATN=t}get isGenerateRuleBypassTransitions(){return this.generateRuleBypassTransitions}set isGenerateRuleBypassTransitions(t){this.throwIfReadOnly(),this.generateRuleBypassTransitions=t}get isOptimize(){return this.optimize}set isOptimize(t){this.throwIfReadOnly(),this.optimize=t}throwIfReadOnly(){if(this.isReadOnly)throw new Error("The object is read only.")}}zS([XS.NotNull],ii,"defaultOptions",null);sa.ATNDeserializationOptions=ii;var Fs={},oa={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var aa=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},VS=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(oa,"__esModule",{value:!0});oa.ActionTransition=void 0;const la=z,WS=er;let $i=class extends WS.Transition{constructor(t,e,i=-1,n=!1){super(t),this.ruleIndex=e,this.actionIndex=i,this.isCtxDependent=n}get serializationType(){return 6}get isEpsilon(){return!0}matches(t,e,i){return!1}toString(){return"action_"+this.ruleIndex+":"+this.actionIndex}};aa([la.Override],$i.prototype,"serializationType",null);aa([la.Override],$i.prototype,"isEpsilon",null);aa([la.Override],$i.prototype,"matches",null);aa([la.Override],$i.prototype,"toString",null);$i=aa([VS(0,la.NotNull)],$i);oa.ActionTransition=$i;var ua={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ha=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},qS=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(ua,"__esModule",{value:!0});ua.AtomTransition=void 0;const YS=hn(),zi=z,KS=er;let Xi=class extends KS.Transition{constructor(t,e){super(t),this._label=e}get serializationType(){return 5}get label(){return YS.IntervalSet.of(this._label)}matches(t,e,i){return this._label===t}toString(){return String(this.label)}};ha([zi.Override],Xi.prototype,"serializationType",null);ha([zi.Override,zi.NotNull],Xi.prototype,"label",null);ha([zi.Override],Xi.prototype,"matches",null);ha([zi.Override,zi.NotNull],Xi.prototype,"toString",null);Xi=ha([qS(0,zi.NotNull)],Xi);ua.AtomTransition=Xi;var eu={},cn={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(cn,"__esModule",{value:!0});cn.BlockStartState=void 0;const ZS=Sr;class QS extends ZS.DecisionState{}cn.BlockStartState=QS;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var JS=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(eu,"__esModule",{value:!0});eu.BasicBlockStartState=void 0;const t2=ee,e2=cn,r2=z;class Px extends e2.BlockStartState{get stateType(){return t2.ATNStateType.BLOCK_START}}JS([r2.Override],Px.prototype,"stateType",null);eu.BasicBlockStartState=Px;var ru={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i2=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(ru,"__esModule",{value:!0});ru.BlockEndState=void 0;const n2=Er,s2=ee,o2=z;class Dx extends n2.ATNState{get stateType(){return s2.ATNStateType.BLOCK_END}}i2([o2.Override],Dx.prototype,"stateType",null);ru.BlockEndState=Dx;var iu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ca=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},a2=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(iu,"__esModule",{value:!0});iu.EpsilonTransition=void 0;const Xn=z,l2=er;let Vi=class extends l2.Transition{constructor(t,e=-1){super(t),this._outermostPrecedenceReturn=e}get outermostPrecedenceReturn(){return this._outermostPrecedenceReturn}get serializationType(){return 1}get isEpsilon(){return!0}matches(t,e,i){return!1}toString(){return"epsilon"}};ca([Xn.Override],Vi.prototype,"serializationType",null);ca([Xn.Override],Vi.prototype,"isEpsilon",null);ca([Xn.Override],Vi.prototype,"matches",null);ca([Xn.Override,Xn.NotNull],Vi.prototype,"toString",null);Vi=ca([a2(0,Xn.NotNull)],Vi);iu.EpsilonTransition=Vi;var nu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var is=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},u2=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(nu,"__esModule",{value:!0});nu.LexerChannelAction=void 0;const tl=jt,Wi=z;class qr{constructor(t){this._channel=t}get channel(){return this._channel}get actionType(){return 0}get isPositionDependent(){return!1}execute(t){t.channel=this._channel}hashCode(){let t=tl.MurmurHash.initialize();return t=tl.MurmurHash.update(t,this.actionType),t=tl.MurmurHash.update(t,this._channel),tl.MurmurHash.finish(t,2)}equals(t){return t===this?!0:t instanceof qr?this._channel===t._channel:!1}toString(){return`channel(${this._channel})`}}is([Wi.Override],qr.prototype,"actionType",null);is([Wi.Override],qr.prototype,"isPositionDependent",null);is([Wi.Override,u2(0,Wi.NotNull)],qr.prototype,"execute",null);is([Wi.Override],qr.prototype,"hashCode",null);is([Wi.Override],qr.prototype,"equals",null);is([Wi.Override],qr.prototype,"toString",null);nu.LexerChannelAction=qr;var su={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var da=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},h2=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(su,"__esModule",{value:!0});su.LexerCustomAction=void 0;const Ls=jt,Vn=z;class gi{constructor(t,e){this._ruleIndex=t,this._actionIndex=e}get ruleIndex(){return this._ruleIndex}get actionIndex(){return this._actionIndex}get actionType(){return 1}get isPositionDependent(){return!0}execute(t){t.action(void 0,this._ruleIndex,this._actionIndex)}hashCode(){let t=Ls.MurmurHash.initialize();return t=Ls.MurmurHash.update(t,this.actionType),t=Ls.MurmurHash.update(t,this._ruleIndex),t=Ls.MurmurHash.update(t,this._actionIndex),Ls.MurmurHash.finish(t,3)}equals(t){return t===this?!0:t instanceof gi?this._ruleIndex===t._ruleIndex&&this._actionIndex===t._actionIndex:!1}}da([Vn.Override],gi.prototype,"actionType",null);da([Vn.Override],gi.prototype,"isPositionDependent",null);da([Vn.Override,h2(0,Vn.NotNull)],gi.prototype,"execute",null);da([Vn.Override],gi.prototype,"hashCode",null);da([Vn.Override],gi.prototype,"equals",null);su.LexerCustomAction=gi;var ou={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ns=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},c2=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(ou,"__esModule",{value:!0});ou.LexerModeAction=void 0;const el=jt,qi=z;class Yr{constructor(t){this._mode=t}get mode(){return this._mode}get actionType(){return 2}get isPositionDependent(){return!1}execute(t){t.mode(this._mode)}hashCode(){let t=el.MurmurHash.initialize();return t=el.MurmurHash.update(t,this.actionType),t=el.MurmurHash.update(t,this._mode),el.MurmurHash.finish(t,2)}equals(t){return t===this?!0:t instanceof Yr?this._mode===t._mode:!1}toString(){return`mode(${this._mode})`}}ns([qi.Override],Yr.prototype,"actionType",null);ns([qi.Override],Yr.prototype,"isPositionDependent",null);ns([qi.Override,c2(0,qi.NotNull)],Yr.prototype,"execute",null);ns([qi.Override],Yr.prototype,"hashCode",null);ns([qi.Override],Yr.prototype,"equals",null);ns([qi.Override],Yr.prototype,"toString",null);ou.LexerModeAction=Yr;var Ox={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c},e=S&&S.__param||function(o,a){return function(l,u){a(l,u,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerMoreAction=void 0;const i=jt,n=z;class s{constructor(){}get actionType(){return 3}get isPositionDependent(){return!1}execute(a){a.more()}hashCode(){let a=i.MurmurHash.initialize();return a=i.MurmurHash.update(a,this.actionType),i.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"more"}}t([n.Override],s.prototype,"actionType",null),t([n.Override],s.prototype,"isPositionDependent",null),t([n.Override,e(0,n.NotNull)],s.prototype,"execute",null),t([n.Override],s.prototype,"hashCode",null),t([n.Override],s.prototype,"equals",null),t([n.Override],s.prototype,"toString",null),r.LexerMoreAction=s,function(o){o.INSTANCE=new o}(s=r.LexerMoreAction||(r.LexerMoreAction={}))})(Ox);var Fx={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c},e=S&&S.__param||function(o,a){return function(l,u){a(l,u,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerPopModeAction=void 0;const i=jt,n=z;class s{constructor(){}get actionType(){return 4}get isPositionDependent(){return!1}execute(a){a.popMode()}hashCode(){let a=i.MurmurHash.initialize();return a=i.MurmurHash.update(a,this.actionType),i.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"popMode"}}t([n.Override],s.prototype,"actionType",null),t([n.Override],s.prototype,"isPositionDependent",null),t([n.Override,e(0,n.NotNull)],s.prototype,"execute",null),t([n.Override],s.prototype,"hashCode",null),t([n.Override],s.prototype,"equals",null),t([n.Override],s.prototype,"toString",null),r.LexerPopModeAction=s,function(o){o.INSTANCE=new o}(s=r.LexerPopModeAction||(r.LexerPopModeAction={}))})(Fx);var au={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ss=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},d2=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(au,"__esModule",{value:!0});au.LexerPushModeAction=void 0;const rl=jt,Yi=z;class Kr{constructor(t){this._mode=t}get mode(){return this._mode}get actionType(){return 5}get isPositionDependent(){return!1}execute(t){t.pushMode(this._mode)}hashCode(){let t=rl.MurmurHash.initialize();return t=rl.MurmurHash.update(t,this.actionType),t=rl.MurmurHash.update(t,this._mode),rl.MurmurHash.finish(t,2)}equals(t){return t===this?!0:t instanceof Kr?this._mode===t._mode:!1}toString(){return`pushMode(${this._mode})`}}ss([Yi.Override],Kr.prototype,"actionType",null);ss([Yi.Override],Kr.prototype,"isPositionDependent",null);ss([Yi.Override,d2(0,Yi.NotNull)],Kr.prototype,"execute",null);ss([Yi.Override],Kr.prototype,"hashCode",null);ss([Yi.Override],Kr.prototype,"equals",null);ss([Yi.Override],Kr.prototype,"toString",null);au.LexerPushModeAction=Kr;var Lx={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c},e=S&&S.__param||function(o,a){return function(l,u){a(l,u,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.LexerSkipAction=void 0;const i=jt,n=z;class s{constructor(){}get actionType(){return 6}get isPositionDependent(){return!1}execute(a){a.skip()}hashCode(){let a=i.MurmurHash.initialize();return a=i.MurmurHash.update(a,this.actionType),i.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"skip"}}t([n.Override],s.prototype,"actionType",null),t([n.Override],s.prototype,"isPositionDependent",null),t([n.Override,e(0,n.NotNull)],s.prototype,"execute",null),t([n.Override],s.prototype,"hashCode",null),t([n.Override],s.prototype,"equals",null),t([n.Override],s.prototype,"toString",null),r.LexerSkipAction=s,function(o){o.INSTANCE=new o}(s=r.LexerSkipAction||(r.LexerSkipAction={}))})(Lx);var lu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var os=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},f2=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(lu,"__esModule",{value:!0});lu.LexerTypeAction=void 0;const il=jt,Ki=z;class Zr{constructor(t){this._type=t}get type(){return this._type}get actionType(){return 7}get isPositionDependent(){return!1}execute(t){t.type=this._type}hashCode(){let t=il.MurmurHash.initialize();return t=il.MurmurHash.update(t,this.actionType),t=il.MurmurHash.update(t,this._type),il.MurmurHash.finish(t,2)}equals(t){return t===this?!0:t instanceof Zr?this._type===t._type:!1}toString(){return`type(${this._type})`}}os([Ki.Override],Zr.prototype,"actionType",null);os([Ki.Override],Zr.prototype,"isPositionDependent",null);os([Ki.Override,f2(0,Ki.NotNull)],Zr.prototype,"execute",null);os([Ki.Override],Zr.prototype,"hashCode",null);os([Ki.Override],Zr.prototype,"equals",null);os([Ki.Override],Zr.prototype,"toString",null);lu.LexerTypeAction=Zr;var fa={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var p2=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(fa,"__esModule",{value:!0});fa.LoopEndState=void 0;const x2=Er,_2=ee,m2=z;class Bx extends x2.ATNState{get stateType(){return _2.ATNStateType.LOOP_END}}p2([m2.Override],Bx.prototype,"stateType",null);fa.LoopEndState=Bx;var Bs={},uu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Mx=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(uu,"__esModule",{value:!0});uu.ConflictInfo=void 0;const kx=z,g2=Qt;class pa{constructor(t,e){this._conflictedAlts=t,this.exact=e}get conflictedAlts(){return this._conflictedAlts}get isExact(){return this.exact}equals(t){return t===this?!0:t instanceof pa?this.isExact===t.isExact&&g2.equals(this.conflictedAlts,t.conflictedAlts):!1}hashCode(){return this.conflictedAlts.hashCode()}}Mx([kx.Override],pa.prototype,"equals",null);Mx([kx.Override],pa.prototype,"hashCode",null);uu.ConflictInfo=pa;var Ms={},vi={},sr={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Nr=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(sr,"__esModule",{value:!0});sr.TerminalNode=void 0;const v2=ce,wr=z,y2=St;class or{constructor(t){this._symbol=t}getChild(t){throw new RangeError("Terminal Node has no children.")}get symbol(){return this._symbol}get parent(){return this._parent}setParent(t){this._parent=t}get payload(){return this._symbol}get sourceInterval(){let t=this._symbol.tokenIndex;return new v2.Interval(t,t)}get childCount(){return 0}accept(t){return t.visitTerminal(this)}get text(){return this._symbol.text||""}toStringTree(t){return this.toString()}toString(){return this._symbol.type===y2.Token.EOF?"<EOF>":this._symbol.text||""}}Nr([wr.Override],or.prototype,"getChild",null);Nr([wr.Override],or.prototype,"parent",null);Nr([wr.Override],or.prototype,"setParent",null);Nr([wr.Override],or.prototype,"payload",null);Nr([wr.Override],or.prototype,"sourceInterval",null);Nr([wr.Override],or.prototype,"childCount",null);Nr([wr.Override],or.prototype,"accept",null);Nr([wr.Override],or.prototype,"text",null);Nr([wr.Override],or.prototype,"toStringTree",null);Nr([wr.Override],or.prototype,"toString",null);sr.TerminalNode=or;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var T2=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(vi,"__esModule",{value:!0});vi.ErrorNode=void 0;const E2=z,A2=sr;class Ux extends A2.TerminalNode{constructor(t){super(t)}accept(t){return t.visitErrorNode(this)}}T2([E2.Override],Ux.prototype,"accept",null);vi.ErrorNode=Ux;var ks={},yi={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(yi,"__esModule",{value:!0});yi.RuleNode=void 0;class S2{}yi.RuleNode=S2;var Us={},Of;function Ti(){if(Of)return Us;Of=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(f,p,m,x){var v=arguments.length,g=v<3?p:x===null?x=Object.getOwnPropertyDescriptor(p,m):x,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(f,p,m,x);else for(var y=f.length-1;y>=0;y--)(_=f[y])&&(g=(v<3?_(g):v>3?_(p,m,g):_(p,m))||g);return v>3&&g&&Object.defineProperty(p,m,g),g},t=S&&S.__param||function(f,p){return function(m,x){p(m,x,f)}};Object.defineProperty(Us,"__esModule",{value:!0}),Us.Trees=void 0;const e=Cr(),i=fi,n=vi,s=z,o=Ca(),a=ar(),l=yi,u=sr,h=St,c=Qt;let d=class ri{static toStringTree(p,m){let x;m instanceof o.Parser?x=m.ruleNames:x=m;let v=c.escapeWhitespace(this.getNodeText(p,x),!1);if(p.childCount===0)return v;let g="";g+="(",v=c.escapeWhitespace(this.getNodeText(p,x),!1),g+=v,g+=" ";for(let _=0;_<p.childCount;_++)_>0&&(g+=" "),g+=this.toStringTree(p.getChild(_),x);return g+=")",g}static getNodeText(p,m){let x;if(m instanceof o.Parser)x=m.ruleNames;else if(m)x=m;else{let v=p.payload;return typeof v.text=="string"?v.text:p.payload.toString()}if(p instanceof l.RuleNode){let v=p.ruleContext,g=v.ruleIndex,_=x[g],y=v.altNumber;return y!==e.ATN.INVALID_ALT_NUMBER?_+":"+y:_}else{if(p instanceof n.ErrorNode)return p.toString();if(p instanceof u.TerminalNode)return p.symbol.text||""}throw new TypeError("Unexpected node type")}static getChildren(p){let m=[];for(let x=0;x<p.childCount;x++)m.push(p.getChild(x));return m}static getAncestors(p){let m=[],x=p.parent;for(;x;)m.unshift(x),x=x.parent;return m}static isAncestorOf(p,m){if(!p||!m||!p.parent)return!1;let x=m.parent;for(;x;){if(p===x)return!0;x=x.parent}return!1}static findAllTokenNodes(p,m){return ri.findAllNodes(p,m,!0)}static findAllRuleNodes(p,m){return ri.findAllNodes(p,m,!1)}static findAllNodes(p,m,x){let v=[];return ri._findAllNodes(p,m,x,v),v}static _findAllNodes(p,m,x,v){x&&p instanceof u.TerminalNode?p.symbol.type===m&&v.push(p):!x&&p instanceof a.ParserRuleContext&&p.ruleIndex===m&&v.push(p);for(let g=0;g<p.childCount;g++)ri._findAllNodes(p.getChild(g),m,x,v)}static getDescendants(p){let m=[];function x(v){m.push(v);const g=v.childCount;for(let _=0;_<g;_++)x(v.getChild(_))}return x(p),m}static getRootOfSubtreeEnclosingRegion(p,m,x){let v=p.childCount;for(let g=0;g<v;g++){let _=p.getChild(g),y=ri.getRootOfSubtreeEnclosingRegion(_,m,x);if(y)return y}if(p instanceof a.ParserRuleContext){let g=p.stop;if(m>=p.start.tokenIndex&&(g==null||x<=g.tokenIndex))return p}}static stripChildrenOutOfRange(p,m,x,v){if(!p)return;let g=p.childCount;for(let _=0;_<g;_++){let y=p.getChild(_),A=y.sourceInterval;if(y instanceof a.ParserRuleContext&&(A.b<x||A.a>v)&&ri.isAncestorOf(y,m)){let T=new i.CommonToken(h.Token.INVALID_TYPE,"...");p.children[_]=new u.TerminalNode(T)}}}static findNodeSuchThat(p,m){if(m(p))return p;let x=p.childCount;for(let v=0;v<x;v++){let g=ri.findNodeSuchThat(p.getChild(v),m);if(g!==void 0)return g}}};return r([t(0,s.NotNull)],d,"toStringTree",null),r([s.NotNull,t(0,s.NotNull)],d,"getAncestors",null),r([t(0,s.NotNull)],d,"getRootOfSubtreeEnclosingRegion",null),Us.Trees=d,Us}var Ff;function $c(){if(Ff)return ks;Ff=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(u,h,c,d){var f=arguments.length,p=f<3?h:d===null?d=Object.getOwnPropertyDescriptor(h,c):d,m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(u,h,c,d);else for(var x=u.length-1;x>=0;x--)(m=u[x])&&(p=(f<3?m(p):f>3?m(h,c,p):m(h,c))||p);return f>3&&p&&Object.defineProperty(h,c,p),p};Object.defineProperty(ks,"__esModule",{value:!0}),ks.RuleContext=void 0;const t=Cr(),e=pi,i=yi,n=ce,s=z,o=Ti(),a=ar();let l=class Hx extends i.RuleNode{constructor(h,c){super(),this._parent=h,this.invokingState=c??-1}static getChildContext(h,c){return new Hx(h,c)}depth(){let h=0,c=this;for(;c;)c=c._parent,h++;return h}get isEmpty(){return this.invokingState===-1}get sourceInterval(){return n.Interval.INVALID}get ruleContext(){return this}get parent(){return this._parent}setParent(h){this._parent=h}get payload(){return this}get text(){if(this.childCount===0)return"";let h="";for(let c=0;c<this.childCount;c++)h+=this.getChild(c).text;return h.toString()}get ruleIndex(){return-1}get altNumber(){return t.ATN.INVALID_ALT_NUMBER}set altNumber(h){}getChild(h){throw new RangeError("i must be greater than or equal to 0 and less than childCount")}get childCount(){return 0}accept(h){return h.visitChildren(this)}toStringTree(h){return o.Trees.toStringTree(this,h)}toString(h,c){const d=h instanceof e.Recognizer?h.ruleNames:h;c=c||a.ParserRuleContext.emptyContext();let f="",p=this;for(f+="[";p&&p!==c;){if(!d)p.isEmpty||(f+=p.invokingState);else{let m=p.ruleIndex,x=m>=0&&m<d.length?d[m]:m.toString();f+=x}p._parent&&(d||!p._parent.isEmpty)&&(f+=" "),p=p._parent}return f+="]",f.toString()}};return r([s.Override],l.prototype,"sourceInterval",null),r([s.Override],l.prototype,"ruleContext",null),r([s.Override],l.prototype,"parent",null),r([s.Override],l.prototype,"setParent",null),r([s.Override],l.prototype,"payload",null),r([s.Override],l.prototype,"text",null),r([s.Override],l.prototype,"getChild",null),r([s.Override],l.prototype,"childCount",null),r([s.Override],l.prototype,"accept",null),r([s.Override],l.prototype,"toStringTree",null),ks.RuleContext=l,ks}var Lf;function ar(){if(Lf)return Ms;Lf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(a,l,u,h){var c=arguments.length,d=c<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,u):h,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(a,l,u,h);else for(var p=a.length-1;p>=0;p--)(f=a[p])&&(d=(c<3?f(d):c>3?f(l,u,d):f(l,u))||d);return c>3&&d&&Object.defineProperty(l,u,d),d};Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.ParserRuleContext=void 0;const t=vi,e=ce,i=z,n=$c(),s=sr;let o=class gc extends n.RuleContext{constructor(l,u){u==null?super():super(l,u)}static emptyContext(){return gc.EMPTY}copyFrom(l){if(this._parent=l._parent,this.invokingState=l.invokingState,this._start=l._start,this._stop=l._stop,l.children){this.children=[];for(let u of l.children)u instanceof t.ErrorNode&&this.addChild(u)}}enterRule(l){}exitRule(l){}addAnyChild(l){return this.children?this.children.push(l):this.children=[l],l}addChild(l){if(l instanceof s.TerminalNode){l.setParent(this),this.addAnyChild(l);return}else if(l instanceof n.RuleContext){this.addAnyChild(l);return}else return l=new s.TerminalNode(l),this.addAnyChild(l),l.setParent(this),l}addErrorNode(l){if(l instanceof t.ErrorNode){const u=l;return u.setParent(this),this.addAnyChild(u)}else{const u=l;let h=new t.ErrorNode(u);return this.addAnyChild(h),h.setParent(this),h}}removeLastChild(){this.children&&this.children.pop()}get parent(){let l=super.parent;if(l===void 0||l instanceof gc)return l;throw new TypeError("Invalid parent type for ParserRuleContext")}getChild(l,u){if(!this.children||l<0||l>=this.children.length)throw new RangeError("index parameter must be between >= 0 and <= number of children.");if(u==null)return this.children[l];let h=this.tryGetChild(l,u);if(h===void 0)throw new Error("The specified node does not exist");return h}tryGetChild(l,u){if(!this.children||l<0||l>=this.children.length)return;let h=-1;for(let c of this.children)if(c instanceof u&&(h++,h===l))return c}getToken(l,u){let h=this.tryGetToken(l,u);if(h===void 0)throw new Error("The specified token does not exist");return h}tryGetToken(l,u){if(!this.children||u<0||u>=this.children.length)return;let h=-1;for(let c of this.children)if(c instanceof s.TerminalNode&&c.symbol.type===l&&(h++,h===u))return c}getTokens(l){let u=[];if(!this.children)return u;for(let h of this.children)h instanceof s.TerminalNode&&h.symbol.type===l&&u.push(h);return u}get ruleContext(){return this}getRuleContext(l,u){return this.getChild(l,u)}tryGetRuleContext(l,u){return this.tryGetChild(l,u)}getRuleContexts(l){let u=[];if(!this.children)return u;for(let h of this.children)h instanceof l&&u.push(h);return u}get childCount(){return this.children?this.children.length:0}get sourceInterval(){return this._start?!this._stop||this._stop.tokenIndex<this._start.tokenIndex?e.Interval.of(this._start.tokenIndex,this._start.tokenIndex-1):e.Interval.of(this._start.tokenIndex,this._stop.tokenIndex):e.Interval.INVALID}get start(){return this._start}get stop(){return this._stop}toInfoString(l){return"ParserRuleContext"+l.getRuleInvocationStack(this).reverse()+"{start="+this._start+", stop="+this._stop+"}"}};return o.EMPTY=new o,r([i.Override],o.prototype,"parent",null),r([i.Override],o.prototype,"childCount",null),r([i.Override],o.prototype,"sourceInterval",null),Ms.ParserRuleContext=o,Ms}var jx={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c};Object.defineProperty(r,"__esModule",{value:!0}),r.PredictionMode=void 0;const e=Vr,i=jt,n=z,s=_i;(function(o){o[o.SLL=0]="SLL",o[o.LL=1]="LL",o[o.LL_EXACT_AMBIG_DETECTION=2]="LL_EXACT_AMBIG_DETECTION"})(r.PredictionMode||(r.PredictionMode={})),function(o){class a extends e.Array2DHashMap{constructor(){super(l.INSTANCE)}}class l{AltAndContextConfigEqualityComparator(){}hashCode(d){let f=i.MurmurHash.initialize(7);return f=i.MurmurHash.update(f,d.state.stateNumber),f=i.MurmurHash.update(f,d.context),f=i.MurmurHash.finish(f,2),f}equals(d,f){return d===f?!0:d==null||f==null?!1:d.state.stateNumber===f.state.stateNumber&&d.context.equals(f.context)}}l.INSTANCE=new l,t([n.Override],l.prototype,"hashCode",null),t([n.Override],l.prototype,"equals",null);function u(c){for(let d of c)if(d.state instanceof s.RuleStopState)return!0;return!1}o.hasConfigInRuleStopState=u;function h(c){for(let d of c)if(!(d.state instanceof s.RuleStopState))return!1;return!0}o.allConfigsInRuleStopStates=h}(r.PredictionMode||(r.PredictionMode={}))})(jx);var Hs={},Bf;function Gx(){if(Bf)return Hs;Bf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=S&&S.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.SimulatorState=void 0;const e=z,i=ar();let n=class{constructor(o,a,l,u){this.outerContext=o??i.ParserRuleContext.emptyContext(),this.s0=a,this.useContext=l,this.remainingOuterContext=u}};return n=r([t(1,e.NotNull)],n),Hs.SimulatorState=n,Hs}var Mf;function xa(){if(Mf)return Bs;Mf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(Et,C,R,I){var k=arguments.length,U=k<3?C:I===null?I=Object.getOwnPropertyDescriptor(C,R):I,L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(Et,C,R,I);else for(var $=Et.length-1;$>=0;$--)(L=Et[$])&&(U=(k<3?L(U):k>3?L(C,R,U):L(C,R))||U);return k>3&&U&&Object.defineProperty(C,R,U),U},t=S&&S.__param||function(Et,C){return function(R,I){C(R,I,Et)}};Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.ParserATNSimulator=void 0;const e=Zo,i=oa,n=rr,s=zl,o=Cr(),a=sn,l=Qo(),u=Yl(),h=ee,c=ua,d=nr,f=uu,p=Sr,m=ql(),x=Jn,v=ce,g=Xr,_=z,y=kc(),A=Su(),T=De,b=ar(),E=ir(),N=Bc(),D=jx,P=_i,B=rs,M=en,H=Mc(),Z=Gx(),at=St,nt=Wr,ut=Te,Rt=65535,Y=-(1<<31>>>0);let Q=class bt extends u.ATNSimulator{constructor(C,R){super(C),this.predictionMode=D.PredictionMode.LL,this.force_global_context=!1,this.always_try_local_context=!0,this.enable_global_context_dfa=!1,this.optimize_unique_closure=!0,this.optimize_ll1=!0,this.optimize_tail_calls=!0,this.tail_call_preserves_sll=!0,this.treat_sllk1_conflict_as_ambiguity=!1,this.reportAmbiguities=!1,this.userWantsCtxSensitive=!0,this._parser=R}getPredictionMode(){return this.predictionMode}setPredictionMode(C){this.predictionMode=C}reset(){}adaptivePredict(C,R,I,k){k===void 0&&(k=!1);let U=this.atn.decisionToDFA[R];if(ut(U!=null),this.optimize_ll1&&!U.isPrecedenceDfa&&!U.isEmpty){let K=C.LA(1);if(K>=0&&K<=65535){let q=(R<<16>>>0)+K,F=this.atn.LL1Table.get(q);if(F!=null)return F}}this.dfa=U,this.force_global_context?k=!0:this.always_try_local_context||(k=k||U.isContextSensitive),this.userWantsCtxSensitive=k||this.predictionMode!==D.PredictionMode.SLL&&I!=null&&!this.atn.decisionToState[R].sll,I==null&&(I=b.ParserRuleContext.emptyContext());let L;U.isEmpty||(L=this.getStartState(U,C,I,k)),L==null&&(I==null&&(I=b.ParserRuleContext.emptyContext()),bt.debug&&console.log("ATN decision "+U.decision+" exec LA(1)=="+this.getLookaheadName(C)+", outerContext="+I.toString(this._parser)),L=this.computeStartState(U,I,k));let $=C.mark(),tt=C.index;try{let K=this.execDFA(U,C,tt,L);return bt.debug&&console.log("DFA after predictATN: "+U.toString(this._parser.vocabulary,this._parser.ruleNames)),K}finally{this.dfa=void 0,C.seek(tt),C.release($)}}getStartState(C,R,I,k){if(!k)if(C.isPrecedenceDfa){let $=C.getPrecedenceStartState(this._parser.precedence,!1);return $==null?void 0:new Z.SimulatorState(I,$,!1,I)}else return C.s0==null?void 0:new Z.SimulatorState(I,C.s0,!1,I);if(!this.enable_global_context_dfa)return;let U=I;ut(I!=null);let L;for(C.isPrecedenceDfa?L=C.getPrecedenceStartState(this._parser.precedence,!0):L=C.s0full;U!=null&&L!=null&&L.isContextSensitive;)U=this.skipTailCalls(U),L=L.getContextTarget(this.getReturnState(U)),U.isEmpty?ut(L==null||!L.isContextSensitive):U=U.parent;if(L!=null)return new Z.SimulatorState(I,L,k,U)}execDFA(C,R,I,k){let U=k.outerContext;bt.dfa_debug&&console.log("DFA decision "+C.decision+" exec LA(1)=="+this.getLookaheadName(R)+", outerContext="+U.toString(this._parser)),bt.dfa_debug&&console.log(C.toString(this._parser.vocabulary,this._parser.ruleNames));let L=k.s0,$=R.LA(1),tt=k.remainingOuterContext;for(;;){if(bt.dfa_debug&&console.log("DFA state "+L.stateNumber+" LA(1)=="+this.getLookaheadName(R)),k.useContext)for(;L.isContextSymbol($);){let F;if(tt!=null&&(tt=this.skipTailCalls(tt),F=L.getContextTarget(this.getReturnState(tt))),F==null){let O=new Z.SimulatorState(k.outerContext,L,k.useContext,tt);return this.execATN(C,R,I,O)}ut(tt!=null),tt=tt.parent,L=F}if(this.isAcceptState(L,k.useContext)){L.predicates!=null?bt.dfa_debug&&console.log("accept "+L):bt.dfa_debug&&console.log("accept; predict "+L.prediction+" in state "+L.stateNumber);break}ut(!this.isAcceptState(L,k.useContext));let q=this.getExistingTargetState(L,$);if(q==null){bt.dfa_debug&&$>=0&&console.log("no edge for "+this._parser.vocabulary.getDisplayName($));let F;if(bt.dfa_debug){let G=v.Interval.of(I,this._parser.inputStream.index);console.log("ATN exec upon "+this._parser.inputStream.getText(G)+" at DFA state "+L.stateNumber)}let O=new Z.SimulatorState(U,L,k.useContext,tt);return F=this.execATN(C,R,I,O),bt.dfa_debug&&console.log("back from DFA update, alt="+F+`, dfa=
`+C.toString(this._parser.vocabulary,this._parser.ruleNames)),bt.dfa_debug&&console.log("DFA decision "+C.decision+" predicts "+F),F}else if(q===u.ATNSimulator.ERROR){let F=new Z.SimulatorState(U,L,k.useContext,tt);return this.handleNoViableAlt(R,I,F)}L=q,!this.isAcceptState(L,k.useContext)&&$!==g.IntStream.EOF&&(R.consume(),$=R.LA(1))}if(!k.useContext&&L.configs.conflictInfo!=null&&C.atnStartState instanceof p.DecisionState&&!(!this.userWantsCtxSensitive||!L.configs.dipsIntoOuterContext&&L.configs.isExactConflict||this.treat_sllk1_conflict_as_ambiguity&&R.index===I)){ut(!k.useContext);let q,F=L.predicates;if(F!=null){let O=R.index;if(O!==I&&R.seek(I),q=this.evalSemanticContext(F,U,!0),q.cardinality()===1)return q.nextSetBit(0);O!==I&&R.seek(O)}if(this.reportAmbiguities){let O=new Z.SimulatorState(U,L,k.useContext,tt);this.reportAttemptingFullContext(C,q,O,I,R.index)}return R.seek(I),this.adaptivePredict(R,C.decision,U,!0)}let K=L.predicates;if(K!=null){let q=R.index;I!==q&&R.seek(I);let F=this.evalSemanticContext(K,U,this.reportAmbiguities&&this.predictionMode===D.PredictionMode.LL_EXACT_AMBIG_DETECTION);switch(F.cardinality()){case 0:throw this.noViableAlt(R,U,L.configs,I);case 1:return F.nextSetBit(0);default:return I!==q&&R.seek(q),this.reportAmbiguity(C,L,I,q,L.configs.isExactConflict,F,L.configs),F.nextSetBit(0)}}return bt.dfa_debug&&console.log("DFA decision "+C.decision+" predicts "+L.prediction),L.prediction}isAcceptState(C,R){return C.isAcceptState?C.configs.conflictingAlts==null?!0:R&&this.predictionMode===D.PredictionMode.LL_EXACT_AMBIG_DETECTION?C.configs.isExactConflict:!0:!1}execATN(C,R,I,k){bt.debug&&console.log("execATN decision "+C.decision+" exec LA(1)=="+this.getLookaheadName(R));let U=k.outerContext,L=k.useContext,$=R.LA(1),tt=k,K=new N.PredictionContextCache;for(;;){let q=this.computeReachSet(C,tt,$,K);if(q==null)return this.setDFAEdge(tt.s0,R.LA(1),u.ATNSimulator.ERROR),this.handleNoViableAlt(R,I,tt);let F=q.s0;if(ut(F.isAcceptState||F.prediction===o.ATN.INVALID_ALT_NUMBER),ut(F.isAcceptState||F.configs.conflictInfo==null),this.isAcceptState(F,L)){let O=F.configs.conflictingAlts,G=O==null?F.prediction:o.ATN.INVALID_ALT_NUMBER;if(G!==o.ATN.INVALID_ALT_NUMBER){if(this.optimize_ll1&&R.index===I&&!C.isPrecedenceDfa&&q.outerContext===q.remainingOuterContext&&C.decision>=0&&!F.configs.hasSemanticContext&&$>=0&&$<=Rt){let et=(C.decision<<16>>>0)+$;this.atn.LL1Table.set(et,G)}L&&this.always_try_local_context&&this.reportContextSensitivity(C,G,q,I,R.index)}G=F.prediction;let V=O!=null&&this.userWantsCtxSensitive;if(V&&(V=!L&&(F.configs.dipsIntoOuterContext||!F.configs.isExactConflict)&&(!this.treat_sllk1_conflict_as_ambiguity||R.index!==I)),F.configs.hasSemanticContext){let et=F.predicates;if(et!=null){let it=R.index;switch(it!==I&&R.seek(I),O=this.evalSemanticContext(et,U,V||this.reportAmbiguities),O.cardinality()){case 0:throw this.noViableAlt(R,U,F.configs,I);case 1:return O.nextSetBit(0)}it!==I&&R.seek(it)}}if(V){ut(!L),ut(this.isAcceptState(F,!1)),bt.debug&&console.log("RETRY with outerContext="+U);let et=this.computeStartState(C,U,!0);return this.reportAmbiguities&&this.reportAttemptingFullContext(C,O,q,I,R.index),R.seek(I),this.execATN(C,R,I,et)}else return O!=null&&(this.reportAmbiguities&&O.cardinality()>1&&this.reportAmbiguity(C,F,I,R.index,F.configs.isExactConflict,O,F.configs),G=O.nextSetBit(0)),G}tt=q,$!==g.IntStream.EOF&&(R.consume(),$=R.LA(1))}}handleNoViableAlt(C,R,I){if(I.s0!=null){let k=new d.BitSet,U=0;for(let L of I.s0.configs)(L.reachesIntoOuterContext||L.state instanceof P.RuleStopState)&&(k.set(L.alt),U=Math.max(U,L.alt));switch(k.cardinality()){case 0:break;case 1:return k.nextSetBit(0);default:if(!I.s0.configs.hasSemanticContext)return k.nextSetBit(0);let L=new l.ATNConfigSet;for(let tt of I.s0.configs)(tt.reachesIntoOuterContext||tt.state instanceof P.RuleStopState)&&L.add(tt);let $=this.getPredsForAmbigAlts(k,L,U);if($!=null){let tt=this.getPredicatePredictions(k,$);if(tt!=null){let K=C.index;try{C.seek(R);let q=this.evalSemanticContext(tt,I.outerContext,!1);if(!q.isEmpty)return q.nextSetBit(0)}finally{C.seek(K)}}}return k.nextSetBit(0)}}throw this.noViableAlt(C,I.outerContext,I.s0.configs,R)}computeReachSet(C,R,I,k){let U=R.useContext,L=R.remainingOuterContext,$=R.s0;if(U)for(;$.isContextSymbol(I);){let q;if(L!=null&&(L=this.skipTailCalls(L),q=$.getContextTarget(this.getReturnState(L))),q==null)break;ut(L!=null),L=L.parent,$=q}if(ut(!this.isAcceptState($,U)),this.isAcceptState($,U))return new Z.SimulatorState(R.outerContext,$,U,L);let tt=$,K=this.getExistingTargetState(tt,I);if(K==null){let q=this.computeTargetState(C,tt,L,I,U,k);K=q[0],L=q[1]}if(K!==u.ATNSimulator.ERROR)return ut(!U||!K.configs.dipsIntoOuterContext),new Z.SimulatorState(R.outerContext,K,U,L)}getExistingTargetState(C,R){return C.getTarget(R)}computeTargetState(C,R,I,k,U,L){let $=R.configs.toArray(),tt,K=new l.ATNConfigSet,q;do{let O=!U||I!=null;O||(K.isOutermostConfigSet=!0);let G=new l.ATNConfigSet,V;for(let ht of $){if(bt.debug&&console.log("testing "+this.getTokenName(k)+" at "+ht.toString()),ht.state instanceof P.RuleStopState){ut(ht.context.isEmpty),(U&&!ht.reachesIntoOuterContext||k===g.IntStream.EOF)&&(V==null&&(V=[]),V.push(ht));continue}let X=ht.state.numberOfOptimizedTransitions;for(let gt=0;gt<X;gt++){let Ft=ht.state.getOptimizedTransition(gt),Yt=this.getReachableTarget(ht,Ft,k);Yt!=null&&G.add(ht.transform(Yt,!1),L)}}if(this.optimize_unique_closure&&V==null&&k!==at.Token.EOF&&G.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER){G.isOutermostConfigSet=K.isOutermostConfigSet,K=G;break}let et=!1,it=k===at.Token.EOF;if(this.closure(G,K,et,O,L,it),q=K.dipsIntoOuterContext,k===g.IntStream.EOF&&(K=this.removeAllConfigsNotInRuleStopState(K,L)),V!=null&&(!U||!D.PredictionMode.hasConfigInRuleStopState(K))){ut(V.length>0);for(let ht of V)K.add(ht,L)}if(U&&q){K.clear(),I=I,I=this.skipTailCalls(I);let ht=this.getReturnState(I);if(tt==null&&(tt=new x.IntegerList),I.isEmpty?I=void 0:I=I.parent,tt.add(ht),ht!==E.PredictionContext.EMPTY_FULL_STATE_KEY)for(let X=0;X<$.length;X++)$[X]=$[X].appendContext(ht,L)}}while(U&&q);return K.isEmpty?(this.setDFAEdge(R,k,u.ATNSimulator.ERROR),[u.ATNSimulator.ERROR,I]):[this.addDFAEdge(C,R,k,tt,K,L),I]}removeAllConfigsNotInRuleStopState(C,R){if(D.PredictionMode.allConfigsInRuleStopStates(C))return C;let I=new l.ATNConfigSet;for(let k of C)k.state instanceof P.RuleStopState&&I.add(k,R);return I}computeStartState(C,R,I){let k=C.isPrecedenceDfa?C.getPrecedenceStartState(this._parser.precedence,I):I?C.s0full:C.s0;if(k!=null){if(!I)return new Z.SimulatorState(R,k,I,R);k.setContextSensitive(this.atn)}C.decision;let U=C.atnStartState,L=0,$=R,tt=I?E.PredictionContext.EMPTY_FULL:E.PredictionContext.EMPTY_LOCAL,K=new N.PredictionContextCache;if(I){if(!this.enable_global_context_dfa)for(;$!=null;)$.isEmpty?(L=E.PredictionContext.EMPTY_FULL_STATE_KEY,$=void 0):(L=this.getReturnState($),tt=tt.appendSingleContext(L,K),$=$.parent);for(;k!=null&&k.isContextSensitive&&$!=null;){let F;if($=this.skipTailCalls($),$.isEmpty?(F=k.getContextTarget(E.PredictionContext.EMPTY_FULL_STATE_KEY),L=E.PredictionContext.EMPTY_FULL_STATE_KEY,$=void 0):(L=this.getReturnState($),F=k.getContextTarget(L),tt=tt.appendSingleContext(L,K),$=$.parent),F==null)break;k=F}}if(k!=null&&!k.isContextSensitive)return new Z.SimulatorState(R,k,I,$);let q=new l.ATNConfigSet;for(;;){let F=new l.ATNConfigSet,O=U.numberOfTransitions;for(let X=0;X<O;X++){let gt=U.transition(X).target;F.add(a.ATNConfig.create(gt,X+1,tt))}let G=$!=null;G||(q.isOutermostConfigSet=!0);let V=!0;this.closure(F,q,V,G,K,!1);let et=q.dipsIntoOuterContext,it;if(I&&!this.enable_global_context_dfa){k=this.addDFAState(C,q,K);break}else k==null?C.isPrecedenceDfa?(q=this.applyPrecedenceFilter(q,R,K),it=this.addDFAState(C,q,K),C.setPrecedenceStartState(this._parser.precedence,I,it)):(it=this.addDFAState(C,q,K),I?C.s0full?it=C.s0full:C.s0full=it:C.s0?it=C.s0:C.s0=it):(C.isPrecedenceDfa&&(q=this.applyPrecedenceFilter(q,R,K)),it=this.addDFAState(C,q,K),k.setContextTarget(L,it));if(k=it,!I||!et)break;it.setContextSensitive(this.atn),$=$,q.clear(),$=this.skipTailCalls($);let ht=this.getReturnState($);$.isEmpty?$=void 0:$=$.parent,ht!==E.PredictionContext.EMPTY_FULL_STATE_KEY&&(tt=tt.appendSingleContext(ht,K)),L=ht}return new Z.SimulatorState(R,k,I,$)}applyPrecedenceFilter(C,R,I){let k=new Map,U=new l.ATNConfigSet;for(let L of C){if(L.alt!==1)continue;let $=L.semanticContext.evalPrecedence(this._parser,R);$!=null&&(k.set(L.state.stateNumber,L.context),$!==L.semanticContext?U.add(L.transform(L.state,!1,$),I):U.add(L,I))}for(let L of C)if(L.alt!==1){if(!L.isPrecedenceFilterSuppressed){let $=k.get(L.state.stateNumber);if($!=null&&$.equals(L.context))continue}U.add(L,I)}return U}getReachableTarget(C,R,I){if(R.matches(I,0,this.atn.maxTokenType))return R.target}predicateDFAState(C,R,I){let k=this.getConflictingAltsFromConfigSet(R);if(!k)throw new Error("This unhandled scenario is intended to be unreachable, but I'm currently not sure of why we know that's the case.");bt.debug&&console.log("predicateDFAState "+C);let U=this.getPredsForAmbigAlts(k,R,I),L;return U!=null&&(L=this.getPredicatePredictions(k,U),C.predicates=L),L}getPredsForAmbigAlts(C,R,I){let k=new Array(I+1),U=k.length;for(let tt of R)C.get(tt.alt)&&(k[tt.alt]=M.SemanticContext.or(k[tt.alt],tt.semanticContext));let L=0;for(let tt=0;tt<U;tt++)k[tt]==null?k[tt]=M.SemanticContext.NONE:k[tt]!==M.SemanticContext.NONE&&L++;let $=k;return L===0&&($=void 0),bt.debug&&console.log("getPredsForAmbigAlts result "+($?s.Arrays.toString($):"undefined")),$}getPredicatePredictions(C,R){let I=[],k=!1;for(let U=1;U<R.length;U++){let L=R[U];ut(L!=null),C!=null&&C.get(U)&&L===M.SemanticContext.NONE?I.push(new m.DFAState.PredPrediction(L,U)):L!==M.SemanticContext.NONE&&(k=!0,I.push(new m.DFAState.PredPrediction(L,U)))}if(k)return I}evalSemanticContext(C,R,I){let k=new d.BitSet;for(let U of C){if(U.pred===M.SemanticContext.NONE){if(k.set(U.alt),!I)break;continue}let L=this.evalSemanticContextImpl(U.pred,R,U.alt);if((bt.debug||bt.dfa_debug)&&console.log("eval pred "+U+"="+L),L&&((bt.debug||bt.dfa_debug)&&console.log("PREDICT "+U.alt),k.set(U.alt),!I))break}return k}evalSemanticContextImpl(C,R,I){return C.eval(this._parser,R)}closure(C,R,I,k,U,L){U==null&&(U=N.PredictionContextCache.UNCACHED);let $=C,tt=new n.Array2DHashSet(T.ObjectEqualityComparator.INSTANCE);for(;$.size>0;){let K=new l.ATNConfigSet;for(let q of $)this.closureImpl(q,R,K,tt,I,k,U,0,L);$=K}}closureImpl(C,R,I,k,U,L,$,tt,K){if(bt.debug&&console.log("closure("+C.toString(this._parser,!0)+")"),C.state instanceof P.RuleStopState)if(C.context.isEmpty)if(L)bt.debug&&console.log("FALLING off rule "+this.getRuleName(C.state.ruleIndex)),C.context===E.PredictionContext.EMPTY_FULL?C=C.transform(C.state,!1,E.PredictionContext.EMPTY_LOCAL):!C.reachesIntoOuterContext&&E.PredictionContext.isEmptyLocal(C.context)&&R.add(C,$);else{R.add(C,$);return}else{let F=C.context.hasEmpty,O=C.context.size-(F?1:0);for(let G=0;G<O;G++){let V=C.context.getParent(G),et=this.atn.states[C.context.getReturnState(G)],it=a.ATNConfig.create(et,C.alt,V,C.semanticContext);it.outerContextDepth=C.outerContextDepth,it.isPrecedenceFilterSuppressed=C.isPrecedenceFilterSuppressed,ut(tt>Y),this.closureImpl(it,R,I,k,U,L,$,tt-1,K)}if(!F||!L)return;C=C.transform(C.state,!1,E.PredictionContext.EMPTY_LOCAL)}let q=C.state;q.onlyHasEpsilonTransitions||(R.add(C,$),bt.debug&&console.log("added config "+R));for(let F=0;F<q.numberOfOptimizedTransitions;F++){if(F===0&&q.stateType===h.ATNStateType.STAR_LOOP_ENTRY&&q.precedenceRuleDecision&&!C.context.hasEmpty){let et=q,it=!0;for(let ht=0;ht<C.context.size;ht++)if(!et.precedenceLoopbackStates.get(C.context.getReturnState(ht))){it=!1;break}if(it)continue}let O=q.getOptimizedTransition(F),G=!(O instanceof i.ActionTransition)&&U,V=this.getEpsilonTarget(C,O,G,tt===0,$,K);if(V!=null){if(O instanceof B.RuleTransition&&I!=null&&!U){I.add(V,$);continue}let et=tt;if(C.state instanceof P.RuleStopState){if(this.dfa!=null&&this.dfa.isPrecedenceDfa&&O.outermostPrecedenceReturn===this.dfa.atnStartState.ruleIndex&&(V.isPrecedenceFilterSuppressed=!0),V.outerContextDepth=V.outerContextDepth+1,!k.add(V))continue;ut(et>Y),et--,bt.debug&&console.log("dips into outer ctx: "+V)}else if(O instanceof B.RuleTransition)this.optimize_tail_calls&&O.optimizedTailCall&&(!this.tail_call_preserves_sll||!E.PredictionContext.isEmptyLocal(C.context))?(ut(V.context===C.context),et===0&&(et--,!this.tail_call_preserves_sll&&E.PredictionContext.isEmptyLocal(C.context)&&(V.outerContextDepth=V.outerContextDepth+1))):et>=0&&et++;else if(!O.isEpsilon&&!k.add(V))continue;this.closureImpl(V,R,I,k,G,L,$,et,K)}}}getRuleName(C){return this._parser!=null&&C>=0?this._parser.ruleNames[C]:"<rule "+C+">"}getEpsilonTarget(C,R,I,k,U,L){switch(R.serializationType){case 3:return this.ruleTransition(C,R,U);case 10:return this.precedenceTransition(C,R,I,k);case 4:return this.predTransition(C,R,I,k);case 6:return this.actionTransition(C,R);case 1:return C.transform(R.target,!1);case 5:case 2:case 7:return L&&R.matches(at.Token.EOF,0,1)?C.transform(R.target,!1):void 0;default:return}}actionTransition(C,R){return bt.debug&&console.log("ACTION edge "+R.ruleIndex+":"+R.actionIndex),C.transform(R.target,!1)}precedenceTransition(C,R,I,k){bt.debug&&(console.log("PRED (collectPredicates="+I+") "+R.precedence+">=_p, ctx dependent=true"),this._parser!=null&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack()));let U;if(I&&k){let L=M.SemanticContext.and(C.semanticContext,R.predicate);U=C.transform(R.target,!1,L)}else U=C.transform(R.target,!1);return bt.debug&&console.log("config from pred transition="+U),U}predTransition(C,R,I,k){bt.debug&&(console.log("PRED (collectPredicates="+I+") "+R.ruleIndex+":"+R.predIndex+", ctx dependent="+R.isCtxDependent),this._parser!=null&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack()));let U;if(I&&(!R.isCtxDependent||R.isCtxDependent&&k)){let L=M.SemanticContext.and(C.semanticContext,R.predicate);U=C.transform(R.target,!1,L)}else U=C.transform(R.target,!1);return bt.debug&&console.log("config from pred transition="+U),U}ruleTransition(C,R,I){bt.debug&&console.log("CALL rule "+this.getRuleName(R.target.ruleIndex)+", ctx="+C.context);let k=R.followState,U;return this.optimize_tail_calls&&R.optimizedTailCall&&(!this.tail_call_preserves_sll||!E.PredictionContext.isEmptyLocal(C.context))?U=C.context:I!=null?U=I.getChild(C.context,k.stateNumber):U=C.context.getChild(k.stateNumber),C.transform(R.target,!1,U)}isConflicted(C,R){if(C.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER||C.size<=1)return;let I=C.toArray();I.sort(bt.STATE_ALT_SORT_COMPARATOR);let k=!C.dipsIntoOuterContext,U=new d.BitSet,L=I[0].alt;U.set(L);let $=I[0].state.nonStopStateNumber;for(let O of I){let G=O.state.nonStopStateNumber;if(G!==$){if(O.alt!==L)return;$=G}}let tt;if(k){$=I[0].state.nonStopStateNumber,tt=new d.BitSet;let O=L;for(let V of I){if(V.state.nonStopStateNumber!==$)break;let et=V.alt;tt.set(et),O=et}$=I[0].state.nonStopStateNumber;let G=L;for(let V of I){let et=V.state.nonStopStateNumber,it=V.alt;if(et!==$){if(G!==O){k=!1;break}$=et,G=L}else if(it!==G){if(it!==tt.nextSetBit(G+1)){k=!1;break}G=it}}}$=I[0].state.nonStopStateNumber;let K=0,q=0,F=I[0].context;for(let O=1;O<I.length;O++){let G=I[O];if(G.alt!==L||G.state.nonStopStateNumber!==$)break;q=O,F=R.join(F,I[O].context)}for(let O=q+1;O<I.length;O++){let G=I[O],V=G.state;if(U.set(G.alt),V.nonStopStateNumber!==$){$=V.nonStopStateNumber,K=O,q=O,F=G.context;for(let gt=K+1;gt<I.length;gt++){let Ft=I[gt];if(Ft.alt!==L||Ft.state.nonStopStateNumber!==$)break;q=gt,F=R.join(F,Ft.context)}O=q;continue}let et=G.context,it=G.alt,ht=O;for(let gt=ht+1;gt<I.length;gt++){let Ft=I[gt];if(Ft.alt!==it||Ft.state.nonStopStateNumber!==$)break;ht=gt,et=R.join(et,Ft.context)}O=ht;let X=R.join(F,et);if(!F.equals(X))return;k=k&&F.equals(et)}return new f.ConflictInfo(U,k)}getConflictingAltsFromConfigSet(C){let R=C.conflictingAlts;return R==null&&C.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER&&(R=new d.BitSet,R.set(C.uniqueAlt)),R}getTokenName(C){if(C===at.Token.EOF)return"EOF";let I=(this._parser!=null?this._parser.vocabulary:nt.VocabularyImpl.EMPTY_VOCABULARY).getDisplayName(C);return I===String(C)?I:I+"<"+C+">"}getLookaheadName(C){return this.getTokenName(C.LA(1))}dumpDeadEndConfigs(C){console.log("dead end configs: ");let R=C.deadEndConfigs;if(R)for(let I of R){let k="no edges";if(I.state.numberOfOptimizedTransitions>0){let U=I.state.getOptimizedTransition(0);U instanceof c.AtomTransition?k="Atom "+this.getTokenName(U._label):U instanceof H.SetTransition&&(k=(U instanceof y.NotSetTransition?"~":"")+"Set "+U.set.toString())}console.log(I.toString(this._parser,!0)+":"+k)}}noViableAlt(C,R,I,k){return new A.NoViableAltException(this._parser,C,C.get(k),C.LT(1),I,R)}getUniqueAlt(C){let R=o.ATN.INVALID_ALT_NUMBER;for(let I of C)if(R===o.ATN.INVALID_ALT_NUMBER)R=I.alt;else if(I.alt!==R)return o.ATN.INVALID_ALT_NUMBER;return R}configWithAltAtStopState(C,R){for(let I of C)if(I.alt===R&&I.state instanceof P.RuleStopState)return!0;return!1}addDFAEdge(C,R,I,k,U,L){ut(k==null||k.isEmpty||C.isContextSensitive);let $=R,tt=this.addDFAState(C,U,L);if(k!=null)for(let K of k.toArray()){if(K===E.PredictionContext.EMPTY_FULL_STATE_KEY&&$.configs.isOutermostConfigSet)continue;$.setContextSensitive(this.atn),$.setContextSymbol(I);let q=$.getContextTarget(K);if(q!=null){$=q;continue}q=this.addDFAContextState(C,$.configs,K,L),ut(K!==E.PredictionContext.EMPTY_FULL_STATE_KEY||q.configs.isOutermostConfigSet),$.setContextTarget(K,q),$=q}return bt.debug&&console.log("EDGE "+$+" -> "+tt+" upon "+this.getTokenName(I)),this.setDFAEdge($,I,tt),bt.debug&&console.log(`DFA=
`+C.toString(this._parser!=null?this._parser.vocabulary:nt.VocabularyImpl.EMPTY_VOCABULARY,this._parser!=null?this._parser.ruleNames:void 0)),tt}setDFAEdge(C,R,I){C!=null&&C.setTarget(R,I)}addDFAContextState(C,R,I,k){if(I!==E.PredictionContext.EMPTY_FULL_STATE_KEY){let U=new l.ATNConfigSet;for(let L of R)U.add(L.appendContext(I,k));return this.addDFAState(C,U,k)}else return ut(!R.isOutermostConfigSet,"Shouldn't be adding a duplicate edge."),R=R.clone(!0),R.isOutermostConfigSet=!0,this.addDFAState(C,R,k)}addDFAState(C,R,I){let k=this.enable_global_context_dfa||!R.isOutermostConfigSet;if(k){R.isReadOnly||R.optimizeConfigs(this);let K=this.createDFAState(C,R),q=C.states.get(K);if(q!=null)return q}R.isReadOnly||R.conflictInfo==null&&(R.conflictInfo=this.isConflicted(R,I));let U=this.createDFAState(C,R.clone(!0)),L=this.atn.getDecisionState(C.decision),$=this.getUniqueAlt(R);if($!==o.ATN.INVALID_ALT_NUMBER)U.acceptStateInfo=new e.AcceptStateInfo($);else if(R.conflictingAlts!=null){let K=R.conflictingAlts;K&&(U.acceptStateInfo=new e.AcceptStateInfo(K.nextSetBit(0)))}if(U.isAcceptState&&R.hasSemanticContext&&this.predicateDFAState(U,R,L.numberOfTransitions),!k)return U;let tt=C.addState(U);return bt.debug&&tt===U&&console.log("adding new DFA state: "+U),tt}createDFAState(C,R){return new m.DFAState(R)}reportAttemptingFullContext(C,R,I,k,U){if(bt.debug||bt.retry_debug){let L=v.Interval.of(k,U);console.log("reportAttemptingFullContext decision="+C.decision+":"+I.s0.configs+", input="+this._parser.inputStream.getText(L))}if(this._parser!=null){let L=this._parser.getErrorListenerDispatch();L.reportAttemptingFullContext&&L.reportAttemptingFullContext(this._parser,C,k,U,R,I)}}reportContextSensitivity(C,R,I,k,U){if(bt.debug||bt.retry_debug){let L=v.Interval.of(k,U);console.log("reportContextSensitivity decision="+C.decision+":"+I.s0.configs+", input="+this._parser.inputStream.getText(L))}if(this._parser!=null){let L=this._parser.getErrorListenerDispatch();L.reportContextSensitivity&&L.reportContextSensitivity(this._parser,C,k,U,R,I)}}reportAmbiguity(C,R,I,k,U,L,$){if(bt.debug||bt.retry_debug){let tt=v.Interval.of(I,k);console.log("reportAmbiguity "+L+":"+$+", input="+this._parser.inputStream.getText(tt))}if(this._parser!=null){let tt=this._parser.getErrorListenerDispatch();tt.reportAmbiguity&&tt.reportAmbiguity(this._parser,C,I,k,U,L,$)}}getReturnState(C){return C.isEmpty?E.PredictionContext.EMPTY_FULL_STATE_KEY:this.atn.states[C.invokingState].transition(0).followState.stateNumber}skipTailCalls(C){if(!this.optimize_tail_calls)return C;for(;!C.isEmpty;){let R=this.atn.states[C.invokingState];if(ut(R.numberOfTransitions===1&&R.transition(0).serializationType===3),!R.transition(0).tailCall)break;C=C.parent}return C}get parser(){return this._parser}};return Q.debug=!1,Q.dfa_debug=!1,Q.retry_debug=!1,Q.STATE_ALT_SORT_COMPARATOR=(Et,C)=>{let R=Et.state.nonStopStateNumber-C.state.nonStopStateNumber;return R!==0||(R=Et.alt-C.alt,R!==0)?R:0},r([_.NotNull],Q.prototype,"predictionMode",void 0),r([_.NotNull],Q.prototype,"getPredictionMode",null),r([t(0,_.NotNull)],Q.prototype,"setPredictionMode",null),r([_.Override],Q.prototype,"reset",null),r([t(0,_.NotNull)],Q.prototype,"adaptivePredict",null),r([t(0,_.NotNull),t(1,_.NotNull),t(2,_.NotNull)],Q.prototype,"getStartState",null),r([t(0,_.NotNull),t(1,_.NotNull),t(3,_.NotNull)],Q.prototype,"execDFA",null),r([t(0,_.NotNull),t(1,_.NotNull),t(3,_.NotNull)],Q.prototype,"execATN",null),r([t(0,_.NotNull),t(2,_.NotNull)],Q.prototype,"handleNoViableAlt",null),r([t(0,_.NotNull)],Q.prototype,"getExistingTargetState",null),r([_.NotNull,t(0,_.NotNull),t(1,_.NotNull)],Q.prototype,"computeTargetState",null),r([_.NotNull,t(0,_.NotNull)],Q.prototype,"removeAllConfigsNotInRuleStopState",null),r([_.NotNull],Q.prototype,"computeStartState",null),r([_.NotNull,t(0,_.NotNull)],Q.prototype,"applyPrecedenceFilter",null),r([t(0,_.NotNull),t(1,_.NotNull)],Q.prototype,"getReachableTarget",null),r([t(0,_.NotNull),t(1,_.NotNull)],Q.prototype,"getPredsForAmbigAlts",null),r([t(0,_.NotNull)],Q.prototype,"evalSemanticContext",null),r([t(0,_.NotNull)],Q.prototype,"evalSemanticContextImpl",null),r([t(1,_.NotNull),t(4,_.Nullable)],Q.prototype,"closure",null),r([t(0,_.NotNull),t(1,_.NotNull),t(2,_.Nullable),t(3,_.NotNull),t(6,_.NotNull)],Q.prototype,"closureImpl",null),r([_.NotNull],Q.prototype,"getRuleName",null),r([t(0,_.NotNull),t(1,_.NotNull)],Q.prototype,"getEpsilonTarget",null),r([_.NotNull,t(0,_.NotNull),t(1,_.NotNull)],Q.prototype,"actionTransition",null),r([_.Nullable,t(0,_.NotNull),t(1,_.NotNull)],Q.prototype,"precedenceTransition",null),r([_.Nullable,t(0,_.NotNull),t(1,_.NotNull)],Q.prototype,"predTransition",null),r([_.NotNull,t(0,_.NotNull),t(1,_.NotNull),t(2,_.Nullable)],Q.prototype,"ruleTransition",null),r([t(0,_.NotNull)],Q.prototype,"isConflicted",null),r([_.NotNull],Q.prototype,"getTokenName",null),r([t(0,_.NotNull)],Q.prototype,"dumpDeadEndConfigs",null),r([_.NotNull,t(0,_.NotNull),t(1,_.NotNull),t(2,_.NotNull)],Q.prototype,"noViableAlt",null),r([t(0,_.NotNull)],Q.prototype,"getUniqueAlt",null),r([t(0,_.NotNull)],Q.prototype,"configWithAltAtStopState",null),r([_.NotNull,t(0,_.NotNull),t(1,_.NotNull),t(4,_.NotNull)],Q.prototype,"addDFAEdge",null),r([t(0,_.Nullable),t(2,_.Nullable)],Q.prototype,"setDFAEdge",null),r([_.NotNull,t(0,_.NotNull),t(1,_.NotNull)],Q.prototype,"addDFAContextState",null),r([_.NotNull,t(0,_.NotNull),t(1,_.NotNull)],Q.prototype,"addDFAState",null),r([_.NotNull,t(0,_.NotNull),t(1,_.NotNull)],Q.prototype,"createDFAState",null),r([t(0,_.NotNull),t(2,_.NotNull)],Q.prototype,"reportAttemptingFullContext",null),r([t(0,_.NotNull),t(2,_.NotNull)],Q.prototype,"reportContextSensitivity",null),r([t(0,_.NotNull),t(5,_.NotNull),t(6,_.NotNull)],Q.prototype,"reportAmbiguity",null),Q=r([t(0,_.NotNull)],Q),Bs.ParserATNSimulator=Q,Bs}var hu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var b2=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(hu,"__esModule",{value:!0});hu.PlusBlockStartState=void 0;const C2=ee,N2=cn,w2=z;class $x extends N2.BlockStartState{get stateType(){return C2.ATNStateType.PLUS_BLOCK_START}}b2([w2.Override],$x.prototype,"stateType",null);hu.PlusBlockStartState=$x;var cu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var R2=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(cu,"__esModule",{value:!0});cu.PlusLoopbackState=void 0;const I2=ee,P2=Sr,D2=z;class zx extends P2.DecisionState{get stateType(){return I2.ATNStateType.PLUS_LOOP_BACK}}R2([D2.Override],zx.prototype,"stateType",null);cu.PlusLoopbackState=zx;var du={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var _a=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},O2=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(du,"__esModule",{value:!0});du.PrecedencePredicateTransition=void 0;const F2=Qn,ma=z,L2=en;let Zi=class extends F2.AbstractPredicateTransition{constructor(t,e){super(t),this.precedence=e}get serializationType(){return 10}get isEpsilon(){return!0}matches(t,e,i){return!1}get predicate(){return new L2.SemanticContext.PrecedencePredicate(this.precedence)}toString(){return this.precedence+" >= _p"}};_a([ma.Override],Zi.prototype,"serializationType",null);_a([ma.Override],Zi.prototype,"isEpsilon",null);_a([ma.Override],Zi.prototype,"matches",null);_a([ma.Override],Zi.prototype,"toString",null);Zi=_a([O2(0,ma.NotNull)],Zi);du.PrecedencePredicateTransition=Zi;var fu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ga=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},B2=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(fu,"__esModule",{value:!0});fu.RangeTransition=void 0;const M2=hn(),Qi=z,k2=er;let Ji=class extends k2.Transition{constructor(t,e,i){super(t),this.from=e,this.to=i}get serializationType(){return 2}get label(){return M2.IntervalSet.of(this.from,this.to)}matches(t,e,i){return t>=this.from&&t<=this.to}toString(){return"'"+String.fromCodePoint(this.from)+"'..'"+String.fromCodePoint(this.to)+"'"}};ga([Qi.Override],Ji.prototype,"serializationType",null);ga([Qi.Override,Qi.NotNull],Ji.prototype,"label",null);ga([Qi.Override],Ji.prototype,"matches",null);ga([Qi.Override,Qi.NotNull],Ji.prototype,"toString",null);Ji=ga([B2(0,Qi.NotNull)],Ji);fu.RangeTransition=Ji;var pu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var U2=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(pu,"__esModule",{value:!0});pu.RuleStartState=void 0;const H2=Er,j2=ee,G2=z;class Xx extends H2.ATNState{constructor(){super(...arguments),this.isPrecedenceRule=!1,this.leftFactored=!1}get stateType(){return j2.ATNStateType.RULE_START}}U2([G2.Override],Xx.prototype,"stateType",null);pu.RuleStartState=Xx;var xu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var $2=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(xu,"__esModule",{value:!0});xu.StarBlockStartState=void 0;const z2=ee,X2=cn,V2=z;class Vx extends X2.BlockStartState{get stateType(){return z2.ATNStateType.STAR_BLOCK_START}}$2([V2.Override],Vx.prototype,"stateType",null);xu.StarBlockStartState=Vx;var _u={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var W2=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(_u,"__esModule",{value:!0});_u.StarLoopbackState=void 0;const q2=Er,Y2=ee,K2=z;class Wx extends q2.ATNState{get loopEntryState(){return this.transition(0).target}get stateType(){return Y2.ATNStateType.STAR_LOOP_BACK}}W2([K2.Override],Wx.prototype,"stateType",null);_u.StarLoopbackState=Wx;var mu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Z2=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(mu,"__esModule",{value:!0});mu.TokensStartState=void 0;const Q2=ee,J2=Sr,tb=z;class qx extends J2.DecisionState{get stateType(){return Q2.ATNStateType.TOKEN_START}}Z2([tb.Override],qx.prototype,"stateType",null);mu.TokensStartState=qx;var gu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(gu,"__esModule",{value:!0});gu.UUID=void 0;const eb=jt;class Il{constructor(t,e,i,n){this.data=new Uint32Array(4),this.data[0]=t,this.data[1]=e,this.data[2]=i,this.data[3]=n}static fromString(t){if(!/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/.test(t))throw new Error("Incorrectly formatted UUID");let e=t.split("-"),i=parseInt(e[0],16),n=(parseInt(e[1],16)<<16>>>0)+parseInt(e[2],16),s=(parseInt(e[3],16)<<16>>>0)+parseInt(e[4].substr(0,4),16),o=parseInt(e[4].substr(-8),16);return new Il(i,n,s,o)}hashCode(){return eb.MurmurHash.hashCode([this.data[0],this.data[1],this.data[2],this.data[3]])}equals(t){return t===this?!0:t instanceof Il?this.data[0]===t.data[0]&&this.data[1]===t.data[1]&&this.data[2]===t.data[2]&&this.data[3]===t.data[3]:!1}toString(){return("00000000"+this.data[0].toString(16)).substr(-8)+"-"+("0000"+(this.data[1]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[1].toString(16)).substr(-4)+"-"+("0000"+(this.data[2]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[2].toString(16)).substr(-4)+("00000000"+this.data[3].toString(16)).substr(-8)}}gu.UUID=Il;var kf;function zc(){if(kf)return Fs;kf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(q,F,O,G){var V=arguments.length,et=V<3?F:G===null?G=Object.getOwnPropertyDescriptor(F,O):G,it;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")et=Reflect.decorate(q,F,O,G);else for(var ht=q.length-1;ht>=0;ht--)(it=q[ht])&&(et=(V<3?it(et):V>3?it(F,O,et):it(F,O))||et);return V>3&&et&&Object.defineProperty(F,O,et),et},t=S&&S.__param||function(q,F){return function(O,G){F(O,G,q)}};Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.ATNDeserializer=void 0;const e=oa,i=rr,n=Cr(),s=sa,o=ee,a=ua,l=eu,u=ra,h=nr,c=ru,d=cn,f=Sr,p=Sx(),m=iu,x=hn(),v=ea,g=nu,_=su,y=ou,A=Ox,T=Fx,b=au,E=Lx,N=lu,D=fa,P=z,B=kc(),M=xa(),H=hu,Z=cu,at=du,nt=Wo,ut=fu,Rt=pu,Y=_i,Q=rs,Et=Mc(),C=xu,R=_u,I=es,k=St,U=mu,L=gu,$=na;var tt;(function(q){q[q.UNICODE_BMP=0]="UNICODE_BMP",q[q.UNICODE_SMP=1]="UNICODE_SMP"})(tt||(tt={}));let K=class dt{constructor(F){F===void 0&&(F=s.ATNDeserializationOptions.defaultOptions),this.deserializationOptions=F}static get SERIALIZED_VERSION(){return 3}static isFeatureSupported(F,O){let G=dt.SUPPORTED_UUIDS.findIndex(V=>V.equals(F));return G<0?!1:dt.SUPPORTED_UUIDS.findIndex(V=>V.equals(O))>=G}static getUnicodeDeserializer(F){return F===0?{readUnicode:(O,G)=>dt.toInt(O[G]),size:1}:{readUnicode:(O,G)=>dt.toInt32(O,G),size:2}}deserialize(F){F=F.slice(0);for(let W=1;W<F.length;W++)F[W]=F[W]-2&65535;let O=0,G=dt.toInt(F[O++]);if(G!==dt.SERIALIZED_VERSION){let W=`Could not deserialize ATN with version ${G} (expected ${dt.SERIALIZED_VERSION}).`;throw new Error(W)}let V=dt.toUUID(F,O);if(O+=8,dt.SUPPORTED_UUIDS.findIndex(W=>W.equals(V))<0){let W=`Could not deserialize ATN with UUID ${V} (expected ${dt.SERIALIZED_UUID} or a legacy UUID).`;throw new Error(W)}let et=dt.isFeatureSupported(dt.ADDED_LEXER_ACTIONS,V),it=dt.toInt(F[O++]),ht=dt.toInt(F[O++]),X=new n.ATN(it,ht),gt=[],Ft=[],Yt=dt.toInt(F[O++]);for(let W=0;W<Yt;W++){let vt=dt.toInt(F[O++]);if(vt===o.ATNStateType.INVALID_TYPE){X.addState(new v.InvalidState);continue}let Ct=dt.toInt(F[O++]);Ct===65535&&(Ct=-1);let Nt=this.stateFactory(vt,Ct);if(vt===o.ATNStateType.LOOP_END){let Vt=dt.toInt(F[O++]);gt.push([Nt,Vt])}else if(Nt instanceof d.BlockStartState){let Vt=dt.toInt(F[O++]);Ft.push([Nt,Vt])}X.addState(Nt)}for(let W of gt)W[0].loopBackState=X.states[W[1]];for(let W of Ft)W[0].endState=X.states[W[1]];let Lt=dt.toInt(F[O++]);for(let W=0;W<Lt;W++){let vt=dt.toInt(F[O++]);X.states[vt].nonGreedy=!0}let Pr=dt.toInt(F[O++]);for(let W=0;W<Pr;W++){let vt=dt.toInt(F[O++]);X.states[vt].sll=!0}let lr=dt.toInt(F[O++]);for(let W=0;W<lr;W++){let vt=dt.toInt(F[O++]);X.states[vt].isPrecedenceRule=!0}let Ra=dt.toInt(F[O++]);X.grammarType===0&&(X.ruleToTokenType=new Int32Array(Ra)),X.ruleToStartState=new Array(Ra);for(let W=0;W<Ra;W++){let vt=dt.toInt(F[O++]),Ct=X.states[vt];if(Ct.leftFactored=dt.toInt(F[O++])!==0,X.ruleToStartState[W]=Ct,X.grammarType===0){let Nt=dt.toInt(F[O++]);Nt===65535&&(Nt=k.Token.EOF),X.ruleToTokenType[W]=Nt,dt.isFeatureSupported(dt.ADDED_LEXER_ACTIONS,V)||dt.toInt(F[O++])}}X.ruleToStopState=new Array(Ra);for(let W of X.states)W instanceof Y.RuleStopState&&(X.ruleToStopState[W.ruleIndex]=W,X.ruleToStartState[W.ruleIndex].stopState=W);let ku=dt.toInt(F[O++]);for(let W=0;W<ku;W++){let vt=dt.toInt(F[O++]);X.modeToStartState.push(X.states[vt])}X.modeToDFA=new Array(ku);for(let W=0;W<ku;W++)X.modeToDFA[W]=new p.DFA(X.modeToStartState[W]);let Uu=[];O=this.deserializeSets(F,O,Uu,dt.getUnicodeDeserializer(0)),dt.isFeatureSupported(dt.ADDED_UNICODE_SMP,V)&&(O=this.deserializeSets(F,O,Uu,dt.getUnicodeDeserializer(1)));let N_=dt.toInt(F[O++]);for(let W=0;W<N_;W++){let vt=dt.toInt(F[O]),Ct=dt.toInt(F[O+1]),Nt=dt.toInt(F[O+2]),Vt=dt.toInt(F[O+3]),Qr=dt.toInt(F[O+4]),re=dt.toInt(F[O+5]),Fe=this.edgeFactory(X,Nt,vt,Ct,Vt,Qr,re,Uu);X.states[vt].addTransition(Fe),O+=6}let w_=new i.Array2DHashSet({hashCode:W=>W.stopState^W.returnState^W.outermostPrecedenceReturn,equals:(W,vt)=>W.stopState===vt.stopState&&W.returnState===vt.returnState&&W.outermostPrecedenceReturn===vt.outermostPrecedenceReturn}),Jc=[];for(let W of X.states){let vt=W.ruleIndex>=0&&X.ruleToStartState[W.ruleIndex].leftFactored;for(let Ct=0;Ct<W.numberOfTransitions;Ct++){let Nt=W.transition(Ct);if(!(Nt instanceof Q.RuleTransition))continue;let Vt=Nt;if(!X.ruleToStartState[Vt.target.ruleIndex].leftFactored&&vt)continue;let re=-1;X.ruleToStartState[Vt.target.ruleIndex].isPrecedenceRule&&Vt.precedence===0&&(re=Vt.target.ruleIndex);let Fe={stopState:Vt.target.ruleIndex,returnState:Vt.followState.stateNumber,outermostPrecedenceReturn:re};w_.add(Fe)&&Jc.push(Fe)}}for(let W of Jc){let vt=new m.EpsilonTransition(X.states[W.returnState],W.outermostPrecedenceReturn);X.ruleToStopState[W.stopState].addTransition(vt)}for(let W of X.states){if(W instanceof d.BlockStartState){if(W.endState===void 0)throw new Error("IllegalStateException");if(W.endState.startState!==void 0)throw new Error("IllegalStateException");W.endState.startState=W}if(W instanceof Z.PlusLoopbackState){let vt=W;for(let Ct=0;Ct<vt.numberOfTransitions;Ct++){let Nt=vt.transition(Ct).target;Nt instanceof H.PlusBlockStartState&&(Nt.loopBackState=vt)}}else if(W instanceof R.StarLoopbackState){let vt=W;for(let Ct=0;Ct<vt.numberOfTransitions;Ct++){let Nt=vt.transition(Ct).target;Nt instanceof I.StarLoopEntryState&&(Nt.loopBackState=vt)}}}let Hu=dt.toInt(F[O++]);for(let W=1;W<=Hu;W++){let vt=dt.toInt(F[O++]),Ct=X.states[vt];X.decisionToState.push(Ct),Ct.decision=W-1}if(X.grammarType===0)if(et){X.lexerActions=new Array(dt.toInt(F[O++]));for(let W=0;W<X.lexerActions.length;W++){let vt=dt.toInt(F[O++]),Ct=dt.toInt(F[O++]);Ct===65535&&(Ct=-1);let Nt=dt.toInt(F[O++]);Nt===65535&&(Nt=-1);let Vt=this.lexerActionFactory(vt,Ct,Nt);X.lexerActions[W]=Vt}}else{let W=[];for(let vt of X.states)for(let Ct=0;Ct<vt.numberOfTransitions;Ct++){let Nt=vt.transition(Ct);if(!(Nt instanceof e.ActionTransition))continue;let Vt=Nt.ruleIndex,Qr=Nt.actionIndex,re=new _.LexerCustomAction(Vt,Qr);vt.setTransition(Ct,new e.ActionTransition(Nt.target,Vt,W.length,!1)),W.push(re)}X.lexerActions=W}this.markPrecedenceDecisions(X),X.decisionToDFA=new Array(Hu);for(let W=0;W<Hu;W++)X.decisionToDFA[W]=new p.DFA(X.decisionToState[W],W);if(this.deserializationOptions.isVerifyATN&&this.verifyATN(X),this.deserializationOptions.isGenerateRuleBypassTransitions&&X.grammarType===1){X.ruleToTokenType=new Int32Array(X.ruleToStartState.length);for(let W=0;W<X.ruleToStartState.length;W++)X.ruleToTokenType[W]=X.maxTokenType+W+1;for(let W=0;W<X.ruleToStartState.length;W++){let vt=new l.BasicBlockStartState;vt.ruleIndex=W,X.addState(vt);let Ct=new c.BlockEndState;Ct.ruleIndex=W,X.addState(Ct),vt.endState=Ct,X.defineDecisionState(vt),Ct.startState=vt;let Nt,Vt;if(X.ruleToStartState[W].isPrecedenceRule){Nt=void 0;for(let re of X.states){if(re.ruleIndex!==W||!(re instanceof I.StarLoopEntryState))continue;let Fe=re.transition(re.numberOfTransitions-1).target;if(Fe instanceof D.LoopEndState&&Fe.epsilonOnlyTransitions&&Fe.transition(0).target instanceof Y.RuleStopState){Nt=re;break}}if(!Nt)throw new Error("Couldn't identify final state of the precedence rule prefix section.");Vt=Nt.loopBackState.transition(0)}else Nt=X.ruleToStopState[W];for(let re of X.states)for(let Fe=0;Fe<re.numberOfTransitions;Fe++){let Ia=re.transition(Fe);Ia!==Vt&&Ia.target===Nt&&(Ia.target=Ct)}for(;X.ruleToStartState[W].numberOfTransitions>0;){let re=X.ruleToStartState[W].removeTransition(X.ruleToStartState[W].numberOfTransitions-1);vt.addTransition(re)}X.ruleToStartState[W].addTransition(new m.EpsilonTransition(vt)),Ct.addTransition(new m.EpsilonTransition(Nt));let Qr=new u.BasicState;X.addState(Qr),Qr.addTransition(new a.AtomTransition(Ct,X.ruleToTokenType[W])),vt.addTransition(new m.EpsilonTransition(Qr))}this.deserializationOptions.isVerifyATN&&this.verifyATN(X)}if(this.deserializationOptions.isOptimize){for(;;){let W=0;W+=dt.inlineSetRules(X),W+=dt.combineChainedEpsilons(X);let vt=X.grammarType===0;if(W+=dt.optimizeSets(X,vt),W===0)break}this.deserializationOptions.isVerifyATN&&this.verifyATN(X)}return dt.identifyTailCalls(X),X}deserializeSets(F,O,G,V){let et=dt.toInt(F[O++]);for(let it=0;it<et;it++){let ht=dt.toInt(F[O]);O++;let X=new x.IntervalSet;G.push(X),dt.toInt(F[O++])!==0&&X.add(-1);for(let Ft=0;Ft<ht;Ft++){let Yt=V.readUnicode(F,O);O+=V.size;let Lt=V.readUnicode(F,O);O+=V.size,X.add(Yt,Lt)}}return O}markPrecedenceDecisions(F){let O=new Map;for(let G of F.states)if(G instanceof I.StarLoopEntryState&&F.ruleToStartState[G.ruleIndex].isPrecedenceRule){let V=G.transition(G.numberOfTransitions-1).target;V instanceof D.LoopEndState&&V.epsilonOnlyTransitions&&V.transition(0).target instanceof Y.RuleStopState&&(O.set(G.ruleIndex,G),G.precedenceRuleDecision=!0,G.precedenceLoopbackStates=new h.BitSet(F.states.length))}for(let G of O)for(let V of F.ruleToStopState[G[0]].getTransitions())V.serializationType!==1||V.outermostPrecedenceReturn!==-1||G[1].precedenceLoopbackStates.set(V.target.stateNumber)}verifyATN(F){for(let O of F.states)if(this.checkCondition(O!==void 0,"ATN states should not be undefined."),O.stateType!==o.ATNStateType.INVALID_TYPE){if(this.checkCondition(O.onlyHasEpsilonTransitions||O.numberOfTransitions<=1),O instanceof H.PlusBlockStartState&&this.checkCondition(O.loopBackState!==void 0),O instanceof I.StarLoopEntryState){let G=O;if(this.checkCondition(G.loopBackState!==void 0),this.checkCondition(G.numberOfTransitions===2),G.transition(0).target instanceof C.StarBlockStartState)this.checkCondition(G.transition(1).target instanceof D.LoopEndState),this.checkCondition(!G.nonGreedy);else if(G.transition(0).target instanceof D.LoopEndState)this.checkCondition(G.transition(1).target instanceof C.StarBlockStartState),this.checkCondition(G.nonGreedy);else throw new Error("IllegalStateException")}if(O instanceof R.StarLoopbackState&&(this.checkCondition(O.numberOfTransitions===1),this.checkCondition(O.transition(0).target instanceof I.StarLoopEntryState)),O instanceof D.LoopEndState&&this.checkCondition(O.loopBackState!==void 0),O instanceof Rt.RuleStartState&&this.checkCondition(O.stopState!==void 0),O instanceof d.BlockStartState&&this.checkCondition(O.endState!==void 0),O instanceof c.BlockEndState&&this.checkCondition(O.startState!==void 0),O instanceof f.DecisionState){let G=O;this.checkCondition(G.numberOfTransitions<=1||G.decision>=0)}else this.checkCondition(O.numberOfTransitions<=1||O instanceof Y.RuleStopState)}}checkCondition(F,O){if(!F)throw new Error("IllegalStateException: "+O)}static inlineSetRules(F){let O=0,G=new Array(F.ruleToStartState.length);for(let V=0;V<F.ruleToStartState.length;V++){let it=F.ruleToStartState[V];for(;it.onlyHasEpsilonTransitions&&it.numberOfOptimizedTransitions===1&&it.getOptimizedTransition(0).serializationType===1;)it=it.getOptimizedTransition(0).target;if(it.numberOfOptimizedTransitions!==1)continue;let ht=it.getOptimizedTransition(0),X=ht.target;if(!(ht.isEpsilon||!X.onlyHasEpsilonTransitions||X.numberOfOptimizedTransitions!==1||!(X.getOptimizedTransition(0).target instanceof Y.RuleStopState)))switch(ht.serializationType){case 5:case 2:case 7:G[V]=ht;break;case 8:case 9:continue;default:continue}}for(let V of F.states){if(V.ruleIndex<0)continue;let et;for(let it=0;it<V.numberOfOptimizedTransitions;it++){let ht=V.getOptimizedTransition(it);if(!(ht instanceof Q.RuleTransition)){et!==void 0&&et.push(ht);continue}let X=ht,gt=G[X.target.ruleIndex];if(gt===void 0){et!==void 0&&et.push(ht);continue}if(et===void 0){et=[];for(let Lt=0;Lt<it;Lt++)et.push(V.getOptimizedTransition(it))}O++;let Ft=X.followState,Yt=new u.BasicState;switch(Yt.setRuleIndex(Ft.ruleIndex),F.addState(Yt),et.push(new m.EpsilonTransition(Yt)),gt.serializationType){case 5:Yt.addTransition(new a.AtomTransition(Ft,gt._label));break;case 2:Yt.addTransition(new ut.RangeTransition(Ft,gt.from,gt.to));break;case 7:Yt.addTransition(new Et.SetTransition(Ft,gt.label));break;default:throw new Error("UnsupportedOperationException")}}if(et!==void 0){if(V.isOptimized)for(;V.numberOfOptimizedTransitions>0;)V.removeOptimizedTransition(V.numberOfOptimizedTransitions-1);for(let it of et)V.addOptimizedTransition(it)}}return M.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+O+" rule invocations by inlining sets."),O}static combineChainedEpsilons(F){let O=0;for(let G of F.states){if(!G.onlyHasEpsilonTransitions||G instanceof Y.RuleStopState)continue;let V;t:for(let et=0;et<G.numberOfOptimizedTransitions;et++){let it=G.getOptimizedTransition(et),ht=it.target;if(it.serializationType!==1||it.outermostPrecedenceReturn!==-1||ht.stateType!==o.ATNStateType.BASIC||!ht.onlyHasEpsilonTransitions){V!==void 0&&V.push(it);continue t}for(let X=0;X<ht.numberOfOptimizedTransitions;X++)if(ht.getOptimizedTransition(X).serializationType!==1||ht.getOptimizedTransition(X).outermostPrecedenceReturn!==-1){V!==void 0&&V.push(it);continue t}if(O++,V===void 0){V=[];for(let X=0;X<et;X++)V.push(G.getOptimizedTransition(X))}for(let X=0;X<ht.numberOfOptimizedTransitions;X++){let gt=ht.getOptimizedTransition(X).target;V.push(new m.EpsilonTransition(gt))}}if(V!==void 0){if(G.isOptimized)for(;G.numberOfOptimizedTransitions>0;)G.removeOptimizedTransition(G.numberOfOptimizedTransitions-1);for(let et of V)G.addOptimizedTransition(et)}}return M.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+O+" transitions by combining chained epsilon transitions."),O}static optimizeSets(F,O){if(O)return 0;let G=0,V=F.decisionToState;for(let et of V){let it=new x.IntervalSet;for(let Lt=0;Lt<et.numberOfOptimizedTransitions;Lt++){let Pr=et.getOptimizedTransition(Lt);if(!(Pr instanceof m.EpsilonTransition)||Pr.target.numberOfOptimizedTransitions!==1)continue;let lr=Pr.target.getOptimizedTransition(0);lr.target instanceof c.BlockEndState&&(lr instanceof B.NotSetTransition||(lr instanceof a.AtomTransition||lr instanceof ut.RangeTransition||lr instanceof Et.SetTransition)&&it.add(Lt))}if(it.size<=1)continue;let ht=[];for(let Lt=0;Lt<et.numberOfOptimizedTransitions;Lt++)it.contains(Lt)||ht.push(et.getOptimizedTransition(Lt));let X=et.getOptimizedTransition(it.minElement).target.getOptimizedTransition(0).target,gt=new x.IntervalSet;for(let Lt of it.intervals)for(let Pr=Lt.a;Pr<=Lt.b;Pr++){let lr=et.getOptimizedTransition(Pr).target.getOptimizedTransition(0);if(lr instanceof B.NotSetTransition)throw new Error("Not yet implemented.");gt.addAll(lr.label)}let Ft;if(gt.intervals.length===1)if(gt.size===1)Ft=new a.AtomTransition(X,gt.minElement);else{let Lt=gt.intervals[0];Ft=new ut.RangeTransition(X,Lt.a,Lt.b)}else Ft=new Et.SetTransition(X,gt);let Yt=new u.BasicState;if(Yt.setRuleIndex(et.ruleIndex),F.addState(Yt),Yt.addTransition(Ft),ht.push(new m.EpsilonTransition(Yt)),G+=et.numberOfOptimizedTransitions-ht.length,et.isOptimized)for(;et.numberOfOptimizedTransitions>0;)et.removeOptimizedTransition(et.numberOfOptimizedTransitions-1);for(let Lt of ht)et.addOptimizedTransition(Lt)}return M.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+G+" paths by collapsing sets."),G}static identifyTailCalls(F){for(let O of F.states){for(let G=0;G<O.numberOfTransitions;G++){let V=O.transition(G);V instanceof Q.RuleTransition&&(V.tailCall=this.testTailCall(F,V,!1),V.optimizedTailCall=this.testTailCall(F,V,!0))}if(O.isOptimized)for(let G=0;G<O.numberOfOptimizedTransitions;G++){let V=O.getOptimizedTransition(G);V instanceof Q.RuleTransition&&(V.tailCall=this.testTailCall(F,V,!1),V.optimizedTailCall=this.testTailCall(F,V,!0))}}}static testTailCall(F,O,G){if(!G&&O.tailCall||G&&O.optimizedTailCall)return!0;let V=new h.BitSet(F.states.length),et=[];for(et.push(O.followState);;){let it=et.pop();if(!it)break;if(V.get(it.stateNumber)||it instanceof Y.RuleStopState)continue;if(!it.onlyHasEpsilonTransitions)return!1;let ht=G?it.numberOfOptimizedTransitions:it.numberOfTransitions;for(let X=0;X<ht;X++){let gt=G?it.getOptimizedTransition(X):it.transition(X);if(gt.serializationType!==1)return!1;et.push(gt.target)}}return!0}static toInt(F){return F}static toInt32(F,O){return(F[O]|F[O+1]<<16)>>>0}static toUUID(F,O){let G=dt.toInt32(F,O),V=dt.toInt32(F,O+2),et=dt.toInt32(F,O+4),it=dt.toInt32(F,O+6);return new L.UUID(it,et,V,G)}edgeFactory(F,O,G,V,et,it,ht,X){let gt=F.states[V];switch(O){case 1:return new m.EpsilonTransition(gt);case 2:return ht!==0?new ut.RangeTransition(gt,k.Token.EOF,it):new ut.RangeTransition(gt,et,it);case 3:return new Q.RuleTransition(F.states[et],it,ht,gt);case 4:return new nt.PredicateTransition(gt,et,it,ht!==0);case 10:return new at.PrecedencePredicateTransition(gt,et);case 5:return ht!==0?new a.AtomTransition(gt,k.Token.EOF):new a.AtomTransition(gt,et);case 6:return new e.ActionTransition(gt,et,it,ht!==0);case 7:return new Et.SetTransition(gt,X[et]);case 8:return new B.NotSetTransition(gt,X[et]);case 9:return new $.WildcardTransition(gt)}throw new Error("The specified transition type is not valid.")}stateFactory(F,O){let G;switch(F){case o.ATNStateType.INVALID_TYPE:return new v.InvalidState;case o.ATNStateType.BASIC:G=new u.BasicState;break;case o.ATNStateType.RULE_START:G=new Rt.RuleStartState;break;case o.ATNStateType.BLOCK_START:G=new l.BasicBlockStartState;break;case o.ATNStateType.PLUS_BLOCK_START:G=new H.PlusBlockStartState;break;case o.ATNStateType.STAR_BLOCK_START:G=new C.StarBlockStartState;break;case o.ATNStateType.TOKEN_START:G=new U.TokensStartState;break;case o.ATNStateType.RULE_STOP:G=new Y.RuleStopState;break;case o.ATNStateType.BLOCK_END:G=new c.BlockEndState;break;case o.ATNStateType.STAR_LOOP_BACK:G=new R.StarLoopbackState;break;case o.ATNStateType.STAR_LOOP_ENTRY:G=new I.StarLoopEntryState;break;case o.ATNStateType.PLUS_LOOP_BACK:G=new Z.PlusLoopbackState;break;case o.ATNStateType.LOOP_END:G=new D.LoopEndState;break;default:let V=`The specified state type ${F} is not valid.`;throw new Error(V)}return G.ruleIndex=O,G}lexerActionFactory(F,O,G){switch(F){case 0:return new g.LexerChannelAction(O);case 1:return new _.LexerCustomAction(O,G);case 2:return new y.LexerModeAction(O);case 3:return A.LexerMoreAction.INSTANCE;case 4:return T.LexerPopModeAction.INSTANCE;case 5:return new b.LexerPushModeAction(O);case 6:return E.LexerSkipAction.INSTANCE;case 7:return new N.LexerTypeAction(O);default:let V=`The specified lexer action type ${F} is not valid.`;throw new Error(V)}}};return K.BASE_SERIALIZED_UUID=L.UUID.fromString("E4178468-DF95-44D0-AD87-F22A5D5FB6D3"),K.ADDED_LEXER_ACTIONS=L.UUID.fromString("AB35191A-1603-487E-B75A-479B831EAF6D"),K.ADDED_UNICODE_SMP=L.UUID.fromString("C23FEA89-0605-4f51-AFB8-058BCAB8C91B"),K.SUPPORTED_UUIDS=[K.BASE_SERIALIZED_UUID,K.ADDED_LEXER_ACTIONS,K.ADDED_UNICODE_SMP],K.SERIALIZED_UUID=K.ADDED_UNICODE_SMP,r([P.NotNull],K.prototype,"deserializationOptions",void 0),r([t(0,P.NotNull)],K.prototype,"deserialize",null),r([t(0,P.NotNull)],K.prototype,"markPrecedenceDecisions",null),r([P.NotNull,t(0,P.NotNull)],K.prototype,"edgeFactory",null),Fs.ATNDeserializer=K,Fs}var vu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Xc=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},rb=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(vu,"__esModule",{value:!0});vu.ParseInfo=void 0;const Vc=z;let Go=class{constructor(t){this.atnSimulator=t}getDecisionInfo(){return this.atnSimulator.getDecisionInfo()}getLLDecisions(){let t=this.atnSimulator.getDecisionInfo(),e=[];for(let i=0;i<t.length;i++)t[i].LL_Fallback>0&&e.push(i);return e}getTotalTimeInPrediction(){let t=this.atnSimulator.getDecisionInfo(),e=0;for(let i of t)e+=i.timeInPrediction;return e}getTotalSLLLookaheadOps(){let t=this.atnSimulator.getDecisionInfo(),e=0;for(let i of t)e+=i.SLL_TotalLook;return e}getTotalLLLookaheadOps(){let t=this.atnSimulator.getDecisionInfo(),e=0;for(let i of t)e+=i.LL_TotalLook;return e}getTotalSLLATNLookaheadOps(){let t=this.atnSimulator.getDecisionInfo(),e=0;for(let i of t)e+=i.SLL_ATNTransitions;return e}getTotalLLATNLookaheadOps(){let t=this.atnSimulator.getDecisionInfo(),e=0;for(let i of t)e+=i.LL_ATNTransitions;return e}getTotalATNLookaheadOps(){let t=this.atnSimulator.getDecisionInfo(),e=0;for(let i of t)e+=i.SLL_ATNTransitions,e+=i.LL_ATNTransitions;return e}getDFASize(t){if(t)return this.atnSimulator.atn.decisionToDFA[t].states.size;{let e=0,i=this.atnSimulator.atn.decisionToDFA;for(let n=0;n<i.length;n++)e+=this.getDFASize(n);return e}}};Xc([Vc.NotNull],Go.prototype,"getDecisionInfo",null);Xc([Vc.NotNull],Go.prototype,"getLLDecisions",null);Go=Xc([rb(0,Vc.NotNull)],Go);vu.ParseInfo=Go;var va={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Wc=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(va,"__esModule",{value:!0});va.ProxyParserErrorListener=void 0;const ib=ts,qc=z;class yu extends ib.ProxyErrorListener{constructor(t){super(t)}reportAmbiguity(t,e,i,n,s,o,a){this.getDelegates().forEach(l=>{l.reportAmbiguity&&l.reportAmbiguity(t,e,i,n,s,o,a)})}reportAttemptingFullContext(t,e,i,n,s,o){this.getDelegates().forEach(a=>{a.reportAttemptingFullContext&&a.reportAttemptingFullContext(t,e,i,n,s,o)})}reportContextSensitivity(t,e,i,n,s,o){this.getDelegates().forEach(a=>{a.reportContextSensitivity&&a.reportContextSensitivity(t,e,i,n,s,o)})}}Wc([qc.Override],yu.prototype,"reportAmbiguity",null);Wc([qc.Override],yu.prototype,"reportAttemptingFullContext",null);Wc([qc.Override],yu.prototype,"reportContextSensitivity",null);va.ProxyParserErrorListener=yu;var Ch={},Tu={},Yc={},ai={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(ai,"__esModule",{value:!0});ai.isSupplementaryCodePoint=ai.isLowSurrogate=ai.isHighSurrogate=void 0;function nb(r){return r>=55296&&r<=56319}ai.isHighSurrogate=nb;function sb(r){return r>=56320&&r<=57343}ai.isLowSurrogate=sb;function ob(r){return r>=65536}ai.isSupplementaryCodePoint=ob;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.CodePointBuffer=void 0;const t=Te,e=ai;class i{constructor(s,o){this.buffer=s,this._position=0,this._size=o}static withArray(s){return new i(s,s.length)}get position(){return this._position}set position(s){if(s<0||s>this._size)throw new RangeError;this._position=s}get remaining(){return this._size-this.position}get(s){return this.buffer[s]}array(){return this.buffer.slice(0,this._size)}static builder(s){return new i.Builder(s)}}r.CodePointBuffer=i,function(n){let s;(function(a){a[a.BYTE=0]="BYTE",a[a.CHAR=1]="CHAR",a[a.INT=2]="INT"})(s||(s={}));class o{constructor(l){this.type=0,this.buffer=new Uint8Array(l),this.prevHighSurrogate=-1,this.position=0}build(){return new n(this.buffer,this.position)}static roundUpToNextPowerOfTwo(l){let u=32-Math.clz32(l-1);return Math.pow(2,u)}ensureRemaining(l){switch(this.type){case 0:if(this.buffer.length-this.position<l){let u=o.roundUpToNextPowerOfTwo(this.buffer.length+l),h=new Uint8Array(u);h.set(this.buffer.subarray(0,this.position),0),this.buffer=h}break;case 1:if(this.buffer.length-this.position<l){let u=o.roundUpToNextPowerOfTwo(this.buffer.length+l),h=new Uint16Array(u);h.set(this.buffer.subarray(0,this.position),0),this.buffer=h}break;case 2:if(this.buffer.length-this.position<l){let u=o.roundUpToNextPowerOfTwo(this.buffer.length+l),h=new Int32Array(u);h.set(this.buffer.subarray(0,this.position),0),this.buffer=h}break}}append(l){this.ensureRemaining(l.length),this.appendArray(l)}appendArray(l){switch(this.type){case 0:this.appendArrayByte(l);break;case 1:this.appendArrayChar(l);break;case 2:this.appendArrayInt(l);break}}appendArrayByte(l){t(this.prevHighSurrogate===-1);let u=l,h=0,c=l.length,d=this.buffer,f=this.position;for(;h<c;){let p=u[h];if(p<=255)d[f]=p;else if(l=l.subarray(h,c),this.position=f,e.isHighSurrogate(p)){this.byteToIntBuffer(l.length),this.appendArrayInt(l);return}else{this.byteToCharBuffer(l.length),this.appendArrayChar(l);return}h++,f++}this.position=f}appendArrayChar(l){t(this.prevHighSurrogate===-1);let u=l,h=0,c=l.length,d=this.buffer,f=this.position;for(;h<c;){let p=u[h];if(!e.isHighSurrogate(p))d[f]=p;else{l=l.subarray(h,c),this.position=f,this.charToIntBuffer(l.length),this.appendArrayInt(l);return}h++,f++}this.position=f}appendArrayInt(l){let u=l,h=0,c=l.length,d=this.buffer,f=this.position;for(;h<c;){let p=u[h];h++,this.prevHighSurrogate!==-1?e.isLowSurrogate(p)?(d[f]=String.fromCharCode(this.prevHighSurrogate,p).codePointAt(0),f++,this.prevHighSurrogate=-1):(d[f]=this.prevHighSurrogate,f++,e.isHighSurrogate(p)?this.prevHighSurrogate=p:(d[f]=p,f++,this.prevHighSurrogate=-1)):e.isHighSurrogate(p)?this.prevHighSurrogate=p:(d[f]=p,f++)}this.prevHighSurrogate!==-1&&(d[f]=this.prevHighSurrogate,f++),this.position=f}byteToCharBuffer(l){let u=new Uint16Array(Math.max(this.position+l,this.buffer.length>>1));u.set(this.buffer.subarray(0,this.position),0),this.type=1,this.buffer=u}byteToIntBuffer(l){let u=new Int32Array(Math.max(this.position+l,this.buffer.length>>2));u.set(this.buffer.subarray(0,this.position),0),this.type=2,this.buffer=u}charToIntBuffer(l){let u=new Int32Array(Math.max(this.position+l,this.buffer.length>>1));u.set(this.buffer.subarray(0,this.position),0),this.type=2,this.buffer=u}}n.Builder=o}(i=r.CodePointBuffer||(r.CodePointBuffer={}))})(Yc);var ya={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Rr=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(ya,"__esModule",{value:!0});ya.CodePointCharStream=void 0;const Uf=Te,nl=Xr,ab=ce,Ir=z;class Oe{constructor(t,e,i,n){Uf(e===0),this._array=t,this._size=i,this._name=n,this._position=0}get internalStorage(){return this._array}static fromBuffer(t,e){return(e===void 0||e.length===0)&&(e=nl.IntStream.UNKNOWN_SOURCE_NAME),new Oe(t.array(),t.position,t.remaining,e)}consume(){if(this._size-this._position===0)throw Uf(this.LA(1)===nl.IntStream.EOF),new RangeError("cannot consume EOF");this._position++}get index(){return this._position}get size(){return this._size}mark(){return-1}release(t){}seek(t){this._position=t}get sourceName(){return this._name}toString(){return this.getText(ab.Interval.of(0,this.size-1))}LA(t){let e;switch(Math.sign(t)){case-1:return e=this.index+t,e<0?nl.IntStream.EOF:this._array[e];case 0:return 0;case 1:return e=this.index+t-1,e>=this.size?nl.IntStream.EOF:this._array[e]}throw new RangeError("Not reached")}getText(t){const e=Math.min(t.a,this.size),i=Math.min(t.b-t.a+1,this.size-e);return this._array instanceof Int32Array?String.fromCodePoint(...Array.from(this._array.subarray(e,e+i))):String.fromCharCode(...Array.from(this._array.subarray(e,e+i)))}}Rr([Ir.Override],Oe.prototype,"consume",null);Rr([Ir.Override],Oe.prototype,"index",null);Rr([Ir.Override],Oe.prototype,"size",null);Rr([Ir.Override],Oe.prototype,"mark",null);Rr([Ir.Override],Oe.prototype,"release",null);Rr([Ir.Override],Oe.prototype,"seek",null);Rr([Ir.Override],Oe.prototype,"sourceName",null);Rr([Ir.Override],Oe.prototype,"toString",null);Rr([Ir.Override],Oe.prototype,"LA",null);Rr([Ir.Override],Oe.prototype,"getText",null);ya.CodePointCharStream=Oe;(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.CharStreams=void 0;const t=Yc,e=ya,i=Xr;(function(n){function s(o,a){(a===void 0||a.length===0)&&(a=i.IntStream.UNKNOWN_SOURCE_NAME);let l=t.CodePointBuffer.builder(o.length),u=new Uint16Array(o.length);for(let h=0;h<o.length;h++)u[h]=o.charCodeAt(h);return l.append(u),e.CodePointCharStream.fromBuffer(l.build(),a)}n.fromString=s})(r.CharStreams||(r.CharStreams={}))})(Tu);var as={},Ta={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var me=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},lb=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.BufferedTokenStream=void 0;const Hf=Te,jf=fi,Nh=ce,wh=mi(),te=z,bi=St;let he=class{constructor(t){if(this.tokens=[],this.p=-1,this.fetchedEOF=!1,t==null)throw new Error("tokenSource cannot be null");this._tokenSource=t}get tokenSource(){return this._tokenSource}set tokenSource(t){this._tokenSource=t,this.tokens.length=0,this.p=-1,this.fetchedEOF=!1}get index(){return this.p}mark(){return 0}release(t){}seek(t){this.lazyInit(),this.p=this.adjustSeekIndex(t)}get size(){return this.tokens.length}consume(){let t;if(this.p>=0?this.fetchedEOF?t=this.p<this.tokens.length-1:t=this.p<this.tokens.length:t=!1,!t&&this.LA(1)===bi.Token.EOF)throw new Error("cannot consume EOF");this.sync(this.p+1)&&(this.p=this.adjustSeekIndex(this.p+1))}sync(t){Hf(t>=0);let e=t-this.tokens.length+1;return e>0?this.fetch(e)>=e:!0}fetch(t){if(this.fetchedEOF)return 0;for(let e=0;e<t;e++){let i=this.tokenSource.nextToken();if(this.isWritableToken(i)&&(i.tokenIndex=this.tokens.length),this.tokens.push(i),i.type===bi.Token.EOF)return this.fetchedEOF=!0,e+1}return t}get(t){if(t<0||t>=this.tokens.length)throw new RangeError("token index "+t+" out of range 0.."+(this.tokens.length-1));return this.tokens[t]}getRange(t,e){if(t<0||e<0)return[];this.lazyInit();let i=new Array;e>=this.tokens.length&&(e=this.tokens.length-1);for(let n=t;n<=e;n++){let s=this.tokens[n];if(s.type===bi.Token.EOF)break;i.push(s)}return i}LA(t){let e=this.LT(t);return e?e.type:bi.Token.INVALID_TYPE}tryLB(t){if(!(this.p-t<0))return this.tokens[this.p-t]}LT(t){let e=this.tryLT(t);if(e===void 0)throw new RangeError("requested lookback index out of range");return e}tryLT(t){if(this.lazyInit(),t===0)throw new RangeError("0 is not a valid lookahead index");if(t<0)return this.tryLB(-t);let e=this.p+t-1;return this.sync(e),e>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[e]}adjustSeekIndex(t){return t}lazyInit(){this.p===-1&&this.setup()}setup(){this.sync(0),this.p=this.adjustSeekIndex(0)}getTokens(t,e,i){if(this.lazyInit(),t===void 0)return Hf(e===void 0&&i===void 0),this.tokens;if(e===void 0&&(e=this.tokens.length-1),t<0||e>=this.tokens.length||e<0||t>=this.tokens.length)throw new RangeError("start "+t+" or stop "+e+" not in 0.."+(this.tokens.length-1));if(t>e)return[];if(i===void 0)return this.tokens.slice(t,e+1);typeof i=="number"&&(i=new Set().add(i));let n=i,s=this.tokens.slice(t,e+1);return s=s.filter(o=>n.has(o.type)),s}nextTokenOnChannel(t,e){if(this.sync(t),t>=this.size)return this.size-1;let i=this.tokens[t];for(;i.channel!==e;){if(i.type===bi.Token.EOF)return t;t++,this.sync(t),i=this.tokens[t]}return t}previousTokenOnChannel(t,e){if(this.sync(t),t>=this.size)return this.size-1;for(;t>=0;){let i=this.tokens[t];if(i.type===bi.Token.EOF||i.channel===e)return t;t--}return t}getHiddenTokensToRight(t,e=-1){if(this.lazyInit(),t<0||t>=this.tokens.length)throw new RangeError(t+" not in 0.."+(this.tokens.length-1));let i=this.nextTokenOnChannel(t+1,wh.Lexer.DEFAULT_TOKEN_CHANNEL),n,s=t+1;return i===-1?n=this.size-1:n=i,this.filterForChannel(s,n,e)}getHiddenTokensToLeft(t,e=-1){if(this.lazyInit(),t<0||t>=this.tokens.length)throw new RangeError(t+" not in 0.."+(this.tokens.length-1));if(t===0)return[];let i=this.previousTokenOnChannel(t-1,wh.Lexer.DEFAULT_TOKEN_CHANNEL);if(i===t-1)return[];let n=i+1,s=t-1;return this.filterForChannel(n,s,e)}filterForChannel(t,e,i){let n=new Array;for(let s=t;s<=e;s++){let o=this.tokens[s];i===-1?o.channel!==wh.Lexer.DEFAULT_TOKEN_CHANNEL&&n.push(o):o.channel===i&&n.push(o)}return n}get sourceName(){return this.tokenSource.sourceName}getText(t){t===void 0?t=Nh.Interval.of(0,this.size-1):t instanceof Nh.Interval||(t=t.sourceInterval);let e=t.a,i=t.b;if(e<0||i<0)return"";this.fill(),i>=this.tokens.length&&(i=this.tokens.length-1);let n="";for(let s=e;s<=i;s++){let o=this.tokens[s];if(o.type===bi.Token.EOF)break;n+=o.text}return n.toString()}getTextFromRange(t,e){return this.isToken(t)&&this.isToken(e)?this.getText(Nh.Interval.of(t.tokenIndex,e.tokenIndex)):""}fill(){this.lazyInit();const t=1e3;for(;;)if(this.fetch(t)<t)return}isWritableToken(t){return t instanceof jf.CommonToken}isToken(t){return t instanceof jf.CommonToken}};me([te.NotNull],he.prototype,"_tokenSource",void 0);me([te.Override],he.prototype,"tokenSource",null);me([te.Override],he.prototype,"index",null);me([te.Override],he.prototype,"mark",null);me([te.Override],he.prototype,"release",null);me([te.Override],he.prototype,"seek",null);me([te.Override],he.prototype,"size",null);me([te.Override],he.prototype,"consume",null);me([te.Override],he.prototype,"get",null);me([te.Override],he.prototype,"LA",null);me([te.NotNull,te.Override],he.prototype,"LT",null);me([te.Override],he.prototype,"sourceName",null);me([te.NotNull,te.Override],he.prototype,"getText",null);me([te.NotNull,te.Override],he.prototype,"getTextFromRange",null);he=me([lb(0,te.NotNull)],he);Ta.BufferedTokenStream=he;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Eu=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},ub=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(as,"__esModule",{value:!0});as.CommonTokenStream=void 0;const hb=Ta,Au=z,Gf=St;let Wn=class extends hb.BufferedTokenStream{constructor(t,e=Gf.Token.DEFAULT_CHANNEL){super(t),this.channel=e}adjustSeekIndex(t){return this.nextTokenOnChannel(t,this.channel)}tryLB(t){if(this.p-t<0)return;let e=this.p,i=1;for(;i<=t&&e>0;)e=this.previousTokenOnChannel(e-1,this.channel),i++;if(!(e<0))return this.tokens[e]}tryLT(t){if(this.lazyInit(),t===0)throw new RangeError("0 is not a valid lookahead index");if(t<0)return this.tryLB(-t);let e=this.p,i=1;for(;i<t;)this.sync(e+1)&&(e=this.nextTokenOnChannel(e+1,this.channel)),i++;return this.tokens[e]}getNumberOfOnChannelTokens(){let t=0;this.fill();for(let e of this.tokens)if(e.channel===this.channel&&t++,e.type===Gf.Token.EOF)break;return t}};Eu([Au.Override],Wn.prototype,"adjustSeekIndex",null);Eu([Au.Override],Wn.prototype,"tryLB",null);Eu([Au.Override],Wn.prototype,"tryLT",null);Wn=Eu([ub(0,Au.NotNull)],Wn);as.CommonTokenStream=Wn;var Ea={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var dn=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Yx=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.ListTokenSource=void 0;const cb=Wl,kr=z,Rh=St;let Gr=class{constructor(t,e){if(this.i=0,this._factory=cb.CommonTokenFactory.DEFAULT,t==null)throw new Error("tokens cannot be null");this.tokens=t,this._sourceName=e}get charPositionInLine(){if(this.i<this.tokens.length)return this.tokens[this.i].charPositionInLine;if(this.eofToken!=null)return this.eofToken.charPositionInLine;if(this.tokens.length>0){let t=this.tokens[this.tokens.length-1],e=t.text;if(e!=null){let i=e.lastIndexOf(`
`);if(i>=0)return e.length-i-1}return t.charPositionInLine+t.stopIndex-t.startIndex+1}return 0}nextToken(){if(this.i>=this.tokens.length){if(this.eofToken==null){let e=-1;if(this.tokens.length>0){let n=this.tokens[this.tokens.length-1].stopIndex;n!==-1&&(e=n+1)}let i=Math.max(-1,e-1);this.eofToken=this._factory.create({source:this,stream:this.inputStream},Rh.Token.EOF,"EOF",Rh.Token.DEFAULT_CHANNEL,e,i,this.line,this.charPositionInLine)}return this.eofToken}let t=this.tokens[this.i];return this.i===this.tokens.length-1&&t.type===Rh.Token.EOF&&(this.eofToken=t),this.i++,t}get line(){if(this.i<this.tokens.length)return this.tokens[this.i].line;if(this.eofToken!=null)return this.eofToken.line;if(this.tokens.length>0){let t=this.tokens[this.tokens.length-1],e=t.line,i=t.text;if(i!=null)for(let n=0;n<i.length;n++)i.charAt(n)===`
`&&e++;return e}return 1}get inputStream(){if(this.i<this.tokens.length)return this.tokens[this.i].inputStream;if(this.eofToken!=null)return this.eofToken.inputStream;if(this.tokens.length>0)return this.tokens[this.tokens.length-1].inputStream}get sourceName(){if(this._sourceName)return this._sourceName;let t=this.inputStream;return t!=null?t.sourceName:"List"}set tokenFactory(t){this._factory=t}get tokenFactory(){return this._factory}};dn([kr.Override],Gr.prototype,"charPositionInLine",null);dn([kr.Override],Gr.prototype,"nextToken",null);dn([kr.Override],Gr.prototype,"line",null);dn([kr.Override],Gr.prototype,"inputStream",null);dn([kr.Override],Gr.prototype,"sourceName",null);dn([kr.Override,kr.NotNull,Yx(0,kr.NotNull)],Gr.prototype,"tokenFactory",null);Gr=dn([Yx(0,kr.NotNull)],Gr);Ea.ListTokenSource=Gr;var js={},$f;function db(){if($f)return js;$f=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(js,"__esModule",{value:!0}),js.MultiMap=void 0;let r=class extends Map{constructor(){super()}map(e,i){let n=super.get(e);n||(n=[],super.set(e,n)),n.push(i)}getPairs(){let e=[];return this.forEach((i,n)=>{i.forEach(s=>{e.push([n,s])})}),e}};return js.MultiMap=r,js}var Aa={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Aa,"__esModule",{value:!0});Aa.ParseCancellationException=void 0;class fb extends Error{constructor(t){super(t.message),this.cause=t,this.stack=t.stack}getCause(){return this.cause}}Aa.ParseCancellationException=fb;var Gs={},Sa={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var pb=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.InterpreterRuleContext=void 0;const xb=z,_b=ar();class Kx extends _b.ParserRuleContext{constructor(t,e,i){i!==void 0?super(e,i):super(),this._ruleIndex=t}get ruleIndex(){return this._ruleIndex}}pb([xb.Override],Kx.prototype,"ruleIndex",null);Sa.InterpreterRuleContext=Kx;var zf;function Zx(){if(zf)return Gs;zf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(v,g,_,y){var A=arguments.length,T=A<3?g:y===null?y=Object.getOwnPropertyDescriptor(g,_):y,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(v,g,_,y);else for(var E=v.length-1;E>=0;E--)(b=v[E])&&(T=(A<3?b(T):A>3?b(g,_,T):b(g,_))||T);return A>3&&T&&Object.defineProperty(g,_,T),T},t=S&&S.__param||function(v,g){return function(_,y){g(_,y,v)}};Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.ParserInterpreter=void 0;const e=Er,i=ee,n=nr,s=Zn,o=nn,a=Sa,l=fa,u=z,h=z,c=Ca(),d=xa(),f=Ar,p=es,m=St;let x=class vc extends c.Parser{constructor(g,_,y,A,T){if(super(g instanceof vc?g.inputStream:T),this._parentContextStack=[],this.overrideDecision=-1,this.overrideDecisionInputIndex=-1,this.overrideDecisionAlt=-1,this.overrideDecisionReached=!1,this._overrideDecisionRoot=void 0,g instanceof vc){let b=g;this._grammarFileName=b._grammarFileName,this._atn=b._atn,this.pushRecursionContextStates=b.pushRecursionContextStates,this._ruleNames=b._ruleNames,this._vocabulary=b._vocabulary,this.interpreter=new d.ParserATNSimulator(this._atn,this)}else{_=_,y=y,A=A,this._grammarFileName=g,this._atn=A,this._ruleNames=y.slice(0),this._vocabulary=_,this.pushRecursionContextStates=new n.BitSet(A.states.length);for(let b of A.states)b instanceof p.StarLoopEntryState&&b.precedenceRuleDecision&&this.pushRecursionContextStates.set(b.stateNumber);this.interpreter=new d.ParserATNSimulator(A,this)}}reset(g){g===void 0?super.reset():super.reset(g),this.overrideDecisionReached=!1,this._overrideDecisionRoot=void 0}get atn(){return this._atn}get vocabulary(){return this._vocabulary}get ruleNames(){return this._ruleNames}get grammarFileName(){return this._grammarFileName}parse(g){let _=this._atn.ruleToStartState[g];for(this._rootContext=this.createInterpreterRuleContext(void 0,e.ATNState.INVALID_STATE_NUMBER,g),_.isPrecedenceRule?this.enterRecursionRule(this._rootContext,_.stateNumber,g,0):this.enterRule(this._rootContext,_.stateNumber,g);;){let y=this.atnState;switch(y.stateType){case i.ATNStateType.RULE_STOP:if(this._ctx.isEmpty)if(_.isPrecedenceRule){let A=this._ctx,T=this._parentContextStack.pop();return this.unrollRecursionContexts(T[0]),A}else return this.exitRule(),this._rootContext;this.visitRuleStopState(y);break;default:try{this.visitState(y)}catch(A){if(A instanceof f.RecognitionException)this.state=this._atn.ruleToStopState[y.ruleIndex].stateNumber,this.context.exception=A,this.errorHandler.reportError(this,A),this.recover(A);else throw A}break}}}enterRecursionRule(g,_,y,A){this._parentContextStack.push([this._ctx,g.invokingState]),super.enterRecursionRule(g,_,y,A)}get atnState(){return this._atn.states[this.state]}visitState(g){let _=1;g.numberOfTransitions>1&&(_=this.visitDecisionState(g));let y=g.transition(_-1);switch(y.serializationType){case 1:if(this.pushRecursionContextStates.get(g.stateNumber)&&!(y.target instanceof l.LoopEndState)){let D=this._parentContextStack[this._parentContextStack.length-1],P=this.createInterpreterRuleContext(D[0],D[1],this._ctx.ruleIndex);this.pushNewRecursionContext(P,this._atn.ruleToStartState[g.ruleIndex].stateNumber,this._ctx.ruleIndex)}break;case 5:this.match(y._label);break;case 2:case 7:case 8:y.matches(this._input.LA(1),m.Token.MIN_USER_TOKEN_TYPE,65535)||this.recoverInline(),this.matchWildcard();break;case 9:this.matchWildcard();break;case 3:let A=y.target,T=A.ruleIndex,b=this.createInterpreterRuleContext(this._ctx,g.stateNumber,T);A.isPrecedenceRule?this.enterRecursionRule(b,A.stateNumber,T,y.precedence):this.enterRule(b,y.target.stateNumber,T);break;case 4:let E=y;if(!this.sempred(this._ctx,E.ruleIndex,E.predIndex))throw new s.FailedPredicateException(this);break;case 6:let N=y;this.action(this._ctx,N.ruleIndex,N.actionIndex);break;case 10:if(!this.precpred(this._ctx,y.precedence)){let D=y.precedence;throw new s.FailedPredicateException(this,`precpred(_ctx, ${D})`)}break;default:throw new Error("UnsupportedOperationException: Unrecognized ATN transition type.")}this.state=y.target.stateNumber}visitDecisionState(g){let _;this.errorHandler.sync(this);let y=g.decision;return y===this.overrideDecision&&this._input.index===this.overrideDecisionInputIndex&&!this.overrideDecisionReached?(_=this.overrideDecisionAlt,this.overrideDecisionReached=!0):_=this.interpreter.adaptivePredict(this._input,y,this._ctx),_}createInterpreterRuleContext(g,_,y){return new a.InterpreterRuleContext(y,g,_)}visitRuleStopState(g){if(this._atn.ruleToStartState[g.ruleIndex].isPrecedenceRule){let A=this._parentContextStack.pop();this.unrollRecursionContexts(A[0]),this.state=A[1]}else this.exitRule();let y=this._atn.states[this.state].transition(0);this.state=y.followState.stateNumber}addDecisionOverride(g,_,y){this.overrideDecision=g,this.overrideDecisionInputIndex=_,this.overrideDecisionAlt=y}get overrideDecisionRoot(){return this._overrideDecisionRoot}recover(g){let _=this._input.index;if(this.errorHandler.recover(this,g),this._input.index===_){let y=g.getOffendingToken();if(!y)throw new Error("Expected exception to have an offending token");let A=y.tokenSource,T=A!==void 0?A.inputStream:void 0,b={source:A,stream:T};if(g instanceof o.InputMismatchException){let E=g.expectedTokens;if(E===void 0)throw new Error("Expected the exception to provide expected tokens");let N=m.Token.INVALID_TYPE;E.isNil||(N=E.minElement);let D=this.tokenFactory.create(b,N,y.text,m.Token.DEFAULT_CHANNEL,-1,-1,y.line,y.charPositionInLine);this._ctx.addErrorNode(this.createErrorNode(this._ctx,D))}else{y.tokenSource;let E=this.tokenFactory.create(b,m.Token.INVALID_TYPE,y.text,m.Token.DEFAULT_CHANNEL,-1,-1,y.line,y.charPositionInLine);this._ctx.addErrorNode(this.createErrorNode(this._ctx,E))}}}recoverInline(){return this._errHandler.recoverInline(this)}get rootContext(){return this._rootContext}};return r([u.NotNull],x.prototype,"_vocabulary",void 0),r([h.Override],x.prototype,"reset",null),r([h.Override],x.prototype,"atn",null),r([h.Override],x.prototype,"vocabulary",null),r([h.Override],x.prototype,"ruleNames",null),r([h.Override],x.prototype,"grammarFileName",null),r([h.Override],x.prototype,"enterRecursionRule",null),x=r([t(1,u.NotNull)],x),Gs.ParserInterpreter=x,Gs}var $s={},Xf;function mb(){if(Xf)return $s;Xf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(n,s,o,a){var l=arguments.length,u=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,s,o,a);else for(var c=n.length-1;c>=0;c--)(h=n[c])&&(u=(l<3?h(u):l>3?h(s,o,u):h(s,o))||u);return l>3&&u&&Object.defineProperty(s,o,u),u},t=S&&S.__param||function(n,s){return function(o,a){s(o,a,n)}};Object.defineProperty($s,"__esModule",{value:!0}),$s.ParseTreeMatch=void 0;const e=z;let i=class{constructor(s,o,a,l){if(!s)throw new Error("tree cannot be null");if(!o)throw new Error("pattern cannot be null");if(!a)throw new Error("labels cannot be null");this._tree=s,this._pattern=o,this._labels=a,this._mismatchedNode=l}get(s){let o=this._labels.get(s);if(!(!o||o.length===0))return o[o.length-1]}getAll(s){const o=this._labels.get(s);return o||[]}get labels(){return this._labels}get mismatchedNode(){return this._mismatchedNode}get succeeded(){return!this._mismatchedNode}get pattern(){return this._pattern}get tree(){return this._tree}toString(){return`Match ${this.succeeded?"succeeded":"failed"}; found ${this.labels.size} labels`}};return r([e.NotNull,t(0,e.NotNull)],i.prototype,"getAll",null),r([e.NotNull],i.prototype,"labels",null),r([e.NotNull],i.prototype,"pattern",null),r([e.NotNull],i.prototype,"tree",null),r([e.Override],i.prototype,"toString",null),i=r([t(0,e.NotNull),t(1,e.NotNull),t(2,e.NotNull)],i),$s.ParseTreeMatch=i,$s}var zs={},Xs={},Vs={},Vf;function gb(){if(Vf)return Vs;Vf=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.XPathLexer=void 0;const r=zc(),t=mi(),e=tu(),i=Wr,n=Qt;let s=class Ne extends t.Lexer{constructor(a){super(a),this._interp=new e.LexerATNSimulator(Ne._ATN,this)}get vocabulary(){return Ne.VOCABULARY}get grammarFileName(){return"XPathLexer.g4"}get ruleNames(){return Ne.ruleNames}get serializedATN(){return Ne._serializedATN}get channelNames(){return Ne.channelNames}get modeNames(){return Ne.modeNames}action(a,l,u){switch(l){case 4:this.ID_action(a,u);break}}ID_action(a,l){switch(l){case 0:let u=this.text;u.charAt(0)===u.charAt(0).toUpperCase()?this.type=Ne.TOKEN_REF:this.type=Ne.RULE_REF;break}}static get _ATN(){return Ne.__ATN||(Ne.__ATN=new r.ATNDeserializer().deserialize(n.toCharArray(Ne._serializedATN))),Ne.__ATN}};return Vs.XPathLexer=s,s.TOKEN_REF=1,s.RULE_REF=2,s.ANYWHERE=3,s.ROOT=4,s.WILDCARD=5,s.BANG=6,s.ID=7,s.STRING=8,s.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],s.modeNames=["DEFAULT_MODE"],s.ruleNames=["ANYWHERE","ROOT","WILDCARD","BANG","ID","NameChar","NameStartChar","STRING"],s._LITERAL_NAMES=[void 0,void 0,void 0,"'//'","'/'","'*'","'!'"],s._SYMBOLIC_NAMES=[void 0,"TOKEN_REF","RULE_REF","ANYWHERE","ROOT","WILDCARD","BANG","ID","STRING"],s.VOCABULARY=new i.VocabularyImpl(s._LITERAL_NAMES,s._SYMBOLIC_NAMES,[]),s._serializedATNSegments=2,s._serializedATNSegment0=`
2\b					\x07	\x07\b	\b			\x07
\f"\v\x07\x07\b\b		\x07	,
	\f		/\v			-
\x07\x07	\b\v	\r

2;C\\aac|\r(*<>?AOR_\uD801\uDA02\uDA38\uDA3D\uDA6E\uDA77\uDA77\uDA86\uDA86\uDA9D\uDAA1\uDAA3\uDAB1"C\\c|\r(*<>?AOR_`,s._serializedATNSegment1=`1\x07	\v\x07	\v\r%')\x071\x071\x071\x07,\b\x1B\x07#\x1B
 \b\r\x07"  !!#" #$\b$\f%&	&'(	()-\x07)*,\v+*,/-.-+.0/-01\x07)1 -`,s._serializedATN=n.join([s._serializedATNSegment0,s._serializedATNSegment1],""),Vs}var Ws={},Wf;function vb(){if(Wf)return Ws;Wf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(i,n,s,o){var a=arguments.length,l=a<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,s):o,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,n,s,o);else for(var h=i.length-1;h>=0;h--)(u=i[h])&&(l=(a<3?u(l):a>3?u(n,s,l):u(n,s))||l);return a>3&&l&&Object.defineProperty(n,s,l),l};Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.XPathLexerErrorListener=void 0;const t=z;let e=class{syntaxError(n,s,o,a,l,u){}};return r([t.Override],e.prototype,"syntaxError",null),Ws.XPathLexerErrorListener=e,Ws}var qs={},Ys={},qf;function ls(){if(qf)return Ys;qf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(i,n,s,o){var a=arguments.length,l=a<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,s):o,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,n,s,o);else for(var h=i.length-1;h>=0;h--)(u=i[h])&&(l=(a<3?u(l):a>3?u(n,s,l):u(n,s))||l);return a>3&&l&&Object.defineProperty(n,s,l),l};Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.XPathElement=void 0;const t=z;let e=class{constructor(n){this.nodeName=n,this.invert=!1}toString(){let n=this.invert?"!":"";return Object.constructor.name+"["+n+this.nodeName+"]"}};return r([t.Override],e.prototype,"toString",null),Ys.XPathElement=e,Ys}var Yf;function yb(){if(Yf)return qs;Yf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h};Object.defineProperty(qs,"__esModule",{value:!0}),qs.XPathRuleAnywhereElement=void 0;const t=z,e=Ti(),i=ls();let n=class extends i.XPathElement{constructor(o,a){super(o),this.ruleIndex=a}evaluate(o){return e.Trees.findAllRuleNodes(o,this.ruleIndex)}};return r([t.Override],n.prototype,"evaluate",null),qs.XPathRuleAnywhereElement=n,qs}var Ks={},Kf;function Tb(){if(Kf)return Ks;Kf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c};Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.XPathRuleElement=void 0;const t=ar(),e=z,i=Ti(),n=ls();let s=class extends n.XPathElement{constructor(a,l){super(a),this.ruleIndex=l}evaluate(a){let l=[];for(let u of i.Trees.getChildren(a))u instanceof t.ParserRuleContext&&(u.ruleIndex===this.ruleIndex&&!this.invert||u.ruleIndex!==this.ruleIndex&&this.invert)&&l.push(u);return l}};return r([e.Override],s.prototype,"evaluate",null),Ks.XPathRuleElement=s,Ks}var Zs={},Zf;function Eb(){if(Zf)return Zs;Zf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h};Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.XPathTokenAnywhereElement=void 0;const t=z,e=Ti(),i=ls();let n=class extends i.XPathElement{constructor(o,a){super(o),this.tokenType=a}evaluate(o){return e.Trees.findAllTokenNodes(o,this.tokenType)}};return r([t.Override],n.prototype,"evaluate",null),Zs.XPathTokenAnywhereElement=n,Zs}var Qs={},Qf;function Ab(){if(Qf)return Qs;Qf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c};Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.XPathTokenElement=void 0;const t=z,e=sr,i=Ti(),n=ls();let s=class extends n.XPathElement{constructor(a,l){super(a),this.tokenType=l}evaluate(a){let l=[];for(let u of i.Trees.getChildren(a))u instanceof e.TerminalNode&&(u.symbol.type===this.tokenType&&!this.invert||u.symbol.type!==this.tokenType&&this.invert)&&l.push(u);return l}};return r([t.Override],s.prototype,"evaluate",null),Qs.XPathTokenElement=s,Qs}var Js={},Jf;function Sb(){if(Jf)return Js;Jf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c};Object.defineProperty(Js,"__esModule",{value:!0}),Js.XPathWildcardAnywhereElement=void 0;const t=z,e=Ti(),i=Kc(),n=ls();let s=class extends n.XPathElement{constructor(){super(i.XPath.WILDCARD)}evaluate(a){return this.invert?[]:e.Trees.getDescendants(a)}};return r([t.Override],s.prototype,"evaluate",null),Js.XPathWildcardAnywhereElement=s,Js}var to={},tp;function bb(){if(tp)return to;tp=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c};Object.defineProperty(to,"__esModule",{value:!0}),to.XPathWildcardElement=void 0;const t=z,e=Ti(),i=Kc(),n=ls();let s=class extends n.XPathElement{constructor(){super(i.XPath.WILDCARD)}evaluate(a){let l=[];if(this.invert)return l;for(let u of e.Trees.getChildren(a))l.push(u);return l}};return r([t.Override],s.prototype,"evaluate",null),to.XPathWildcardElement=s,to}var ep;function Kc(){if(ep)return Xs;ep=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.XPath=void 0;const r=Tu,t=as,e=un,i=ar(),n=St,s=gb(),o=vb(),a=yb(),l=Tb(),u=Eb(),h=Ab(),c=Sb(),d=bb();let f=class Qx{constructor(m,x){this.parser=m,this.path=x,this.elements=this.split(x)}split(m){let x=new s.XPathLexer(r.CharStreams.fromString(m));x.recover=T=>{throw T},x.removeErrorListeners(),x.addErrorListener(new o.XPathLexerErrorListener);let v=new t.CommonTokenStream(x);try{v.fill()}catch(T){if(T instanceof e.LexerNoViableAltException){let E="Invalid tokens or characters at index "+x.charPositionInLine+" in path '"+m+"' -- "+T.message;throw new RangeError(E)}throw T}let g=v.getTokens(),_=[],y=g.length,A=0;t:for(;A<y;){let T=g[A],b;switch(T.type){case s.XPathLexer.ROOT:case s.XPathLexer.ANYWHERE:let E=T.type===s.XPathLexer.ANYWHERE;A++,b=g[A];let N=b.type===s.XPathLexer.BANG;N&&(A++,b=g[A]);let D=this.getXPathElement(b,E);D.invert=N,_.push(D),A++;break;case s.XPathLexer.TOKEN_REF:case s.XPathLexer.RULE_REF:case s.XPathLexer.WILDCARD:_.push(this.getXPathElement(T,!1)),A++;break;case n.Token.EOF:break t;default:throw new Error("Unknowth path element "+T)}}return _}getXPathElement(m,x){if(m.type===n.Token.EOF)throw new Error("Missing path element at end of path");let v=m.text;if(v==null)throw new Error("Expected wordToken to have text content.");let g=this.parser.getTokenType(v),_=this.parser.getRuleIndex(v);switch(m.type){case s.XPathLexer.WILDCARD:return x?new c.XPathWildcardAnywhereElement:new d.XPathWildcardElement;case s.XPathLexer.TOKEN_REF:case s.XPathLexer.STRING:if(g===n.Token.INVALID_TYPE)throw new Error(v+" at index "+m.startIndex+" isn't a valid token name");return x?new u.XPathTokenAnywhereElement(v,g):new h.XPathTokenElement(v,g);default:if(_===-1)throw new Error(v+" at index "+m.startIndex+" isn't a valid rule name");return x?new a.XPathRuleAnywhereElement(v,_):new l.XPathRuleElement(v,_)}}static findAll(m,x,v){return new Qx(v,x).evaluate(m)}evaluate(m){let x=new i.ParserRuleContext;x.addChild(m);let v=new Set([x]),g=0;for(;g<this.elements.length;){let _=new Set;for(let y of v)y.childCount>0&&this.elements[g].evaluate(y).forEach(_.add,_);g++,v=_}return v}};return Xs.XPath=f,f.WILDCARD="*",f.NOT="!",Xs}var rp;function Cb(){if(rp)return zs;rp=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=S&&S.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(zs,"__esModule",{value:!0}),zs.ParseTreePattern=void 0;const e=z,i=Kc();let n=class{constructor(o,a,l,u){this._matcher=o,this._patternRuleIndex=l,this._pattern=a,this._patternTree=u}match(o){return this._matcher.match(o,this)}matches(o){return this._matcher.match(o,this).succeeded}findAll(o,a){let l=i.XPath.findAll(o,a,this._matcher.parser),u=[];for(let h of l){let c=this.match(h);c.succeeded&&u.push(c)}return u}get matcher(){return this._matcher}get pattern(){return this._pattern}get patternRuleIndex(){return this._patternRuleIndex}get patternTree(){return this._patternTree}};return r([e.NotNull],n.prototype,"_pattern",void 0),r([e.NotNull],n.prototype,"_patternTree",void 0),r([e.NotNull],n.prototype,"_matcher",void 0),r([e.NotNull,t(0,e.NotNull)],n.prototype,"match",null),r([t(0,e.NotNull)],n.prototype,"matches",null),r([e.NotNull,t(0,e.NotNull),t(1,e.NotNull)],n.prototype,"findAll",null),r([e.NotNull],n.prototype,"matcher",null),r([e.NotNull],n.prototype,"pattern",null),r([e.NotNull],n.prototype,"patternTree",null),n=r([t(0,e.NotNull),t(1,e.NotNull),t(3,e.NotNull)],n),zs.ParseTreePattern=n,zs}var eo={},ip;function Nb(){if(ip)return eo;ip=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=S&&S.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(eo,"__esModule",{value:!0}),eo.RuleTagToken=void 0;const e=z,i=St;let n=class{constructor(o,a,l){if(o==null||o.length===0)throw new Error("ruleName cannot be null or empty.");this._ruleName=o,this.bypassTokenType=a,this._label=l}get ruleName(){return this._ruleName}get label(){return this._label}get channel(){return i.Token.DEFAULT_CHANNEL}get text(){return this._label!=null?"<"+this._label+":"+this._ruleName+">":"<"+this._ruleName+">"}get type(){return this.bypassTokenType}get line(){return 0}get charPositionInLine(){return-1}get tokenIndex(){return-1}get startIndex(){return-1}get stopIndex(){return-1}get tokenSource(){}get inputStream(){}toString(){return this._ruleName+":"+this.bypassTokenType}};return r([e.NotNull],n.prototype,"ruleName",null),r([e.Override],n.prototype,"channel",null),r([e.Override],n.prototype,"text",null),r([e.Override],n.prototype,"type",null),r([e.Override],n.prototype,"line",null),r([e.Override],n.prototype,"charPositionInLine",null),r([e.Override],n.prototype,"tokenIndex",null),r([e.Override],n.prototype,"startIndex",null),r([e.Override],n.prototype,"stopIndex",null),r([e.Override],n.prototype,"tokenSource",null),r([e.Override],n.prototype,"inputStream",null),r([e.Override],n.prototype,"toString",null),n=r([t(0,e.NotNull)],n),eo.RuleTagToken=n,eo}var ro={},io={},np;function Jx(){if(np)return io;np=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(io,"__esModule",{value:!0}),io.Chunk=void 0;let r=class{};return io.Chunk=r,io}var sp;function wb(){if(sp)return ro;sp=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(n,s,o,a){var l=arguments.length,u=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,s,o,a);else for(var c=n.length-1;c>=0;c--)(h=n[c])&&(u=(l<3?h(u):l>3?h(s,o,u):h(s,o))||u);return l>3&&u&&Object.defineProperty(s,o,u),u};Object.defineProperty(ro,"__esModule",{value:!0}),ro.TagChunk=void 0;const t=Jx(),e=z;let i=class extends t.Chunk{constructor(s,o){if(super(),s==null||s.length===0)throw new Error("tag cannot be null or empty");this._tag=s,this._label=o}get tag(){return this._tag}get label(){return this._label}toString(){return this._label!=null?this._label+":"+this._tag:this._tag}};return r([e.NotNull],i.prototype,"tag",null),r([e.Override],i.prototype,"toString",null),ro.TagChunk=i,ro}var no={},op;function Rb(){if(op)return no;op=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=S&&S.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(no,"__esModule",{value:!0}),no.TextChunk=void 0;const e=Jx(),i=z;let n=class extends e.Chunk{constructor(o){if(super(),o==null)throw new Error("text cannot be null");this._text=o}get text(){return this._text}toString(){return"'"+this._text+"'"}};return r([i.NotNull],n.prototype,"_text",void 0),r([i.NotNull],n.prototype,"text",null),r([i.Override],n.prototype,"toString",null),n=r([t(0,i.NotNull)],n),no.TextChunk=n,no}var so={},ap;function Ib(){if(ap)return so;ap=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=S&&S.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(so,"__esModule",{value:!0}),so.TokenTagToken=void 0;const e=fi,i=z;let n=class extends e.CommonToken{constructor(o,a,l){super(a),this._tokenName=o,this._label=l}get tokenName(){return this._tokenName}get label(){return this._label}get text(){return this._label!=null?"<"+this._label+":"+this._tokenName+">":"<"+this._tokenName+">"}toString(){return this._tokenName+":"+this.type}};return r([i.NotNull],n.prototype,"_tokenName",void 0),r([i.NotNull],n.prototype,"tokenName",null),r([i.Override],n.prototype,"text",null),r([i.Override],n.prototype,"toString",null),n=r([t(0,i.NotNull)],n),so.TokenTagToken=n,so}var lp;function Pb(){return lp||(lp=1,function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__decorate||function(b,E,N,D){var P=arguments.length,B=P<3?E:D===null?D=Object.getOwnPropertyDescriptor(E,N):D,M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(b,E,N,D);else for(var H=b.length-1;H>=0;H--)(M=b[H])&&(B=(P<3?M(B):P>3?M(E,N,B):M(E,N))||B);return P>3&&B&&Object.defineProperty(E,N,B),B},e=S&&S.__param||function(b,E){return function(N,D){E(N,D,b)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ParseTreePatternMatcher=void 0;const i=t_(),n=Tu,s=as,o=Ea,a=db(),l=z,u=Aa,h=Zx(),c=ar(),d=mb(),f=Cb(),p=Ar,m=yi,x=Nb(),v=wb(),g=sr,_=Rb(),y=St,A=Ib();class T{constructor(E,N){this.start="<",this.stop=">",this.escape="\\",this.escapeRE=/\\/g,this._lexer=E,this._parser=N}setDelimiters(E,N,D){if(!E)throw new Error("start cannot be null or empty");if(!N)throw new Error("stop cannot be null or empty");this.start=E,this.stop=N,this.escape=D,this.escapeRE=new RegExp(D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g")}matches(E,N,D=0){if(typeof N=="string"){let P=this.compile(N,D);return this.matches(E,P)}else{let P=new a.MultiMap;return!this.matchImpl(E,N.patternTree,P)}}match(E,N,D=0){if(typeof N=="string"){let P=this.compile(N,D);return this.match(E,P)}else{let P=new a.MultiMap,B=this.matchImpl(E,N.patternTree,P);return new d.ParseTreeMatch(E,N,P,B)}}compile(E,N){let D=this.tokenize(E),P=new o.ListTokenSource(D),B=new s.CommonTokenStream(P);const M=this._parser;let H=new h.ParserInterpreter(M.grammarFileName,M.vocabulary,M.ruleNames,M.getATNWithBypassAlts(),B),Z;try{H.errorHandler=new i.BailErrorStrategy,Z=H.parse(N)}catch(at){throw at instanceof u.ParseCancellationException?at.getCause():at instanceof p.RecognitionException?at:at instanceof Error?new T.CannotInvokeStartRule(at):at}if(B.LA(1)!==y.Token.EOF)throw new T.StartRuleDoesNotConsumeFullPattern;return new f.ParseTreePattern(this,E,N,Z)}get lexer(){return this._lexer}get parser(){return this._parser}matchImpl(E,N,D){if(!E)throw new TypeError("tree cannot be null");if(!N)throw new TypeError("patternTree cannot be null");if(E instanceof g.TerminalNode&&N instanceof g.TerminalNode){let P;if(E.symbol.type===N.symbol.type)if(N.symbol instanceof A.TokenTagToken){let B=N.symbol;D.map(B.tokenName,E);const M=B.label;M&&D.map(M,E)}else E.text===N.text||P||(P=E);else P||(P=E);return P}if(E instanceof c.ParserRuleContext&&N instanceof c.ParserRuleContext){let P,B=this.getRuleTagToken(N);if(B){if(E.ruleContext.ruleIndex===N.ruleContext.ruleIndex){D.map(B.ruleName,E);const H=B.label;H&&D.map(H,E)}else P||(P=E);return P}if(E.childCount!==N.childCount)return P||(P=E),P;let M=E.childCount;for(let H=0;H<M;H++){let Z=this.matchImpl(E.getChild(H),N.getChild(H),D);if(Z)return Z}return P}return E}getRuleTagToken(E){if(E instanceof m.RuleNode&&E.childCount===1&&E.getChild(0)instanceof g.TerminalNode){let N=E.getChild(0);if(N.symbol instanceof x.RuleTagToken)return N.symbol}}tokenize(E){let N=this.split(E),D=[];for(let P of N)if(P instanceof v.TagChunk){let B=P;const M=B.tag.substr(0,1);if(M===M.toUpperCase()){let H=this._parser.getTokenType(B.tag);if(H===y.Token.INVALID_TYPE)throw new Error("Unknown token "+B.tag+" in pattern: "+E);let Z=new A.TokenTagToken(B.tag,H,B.label);D.push(Z)}else if(M===M.toLowerCase()){let H=this._parser.getRuleIndex(B.tag);if(H===-1)throw new Error("Unknown rule "+B.tag+" in pattern: "+E);let Z=this._parser.getATNWithBypassAlts().ruleToTokenType[H];D.push(new x.RuleTagToken(B.tag,Z,B.label))}else throw new Error("invalid tag: "+B.tag+" in pattern: "+E)}else{let B=P;this._lexer.inputStream=n.CharStreams.fromString(B.text);let M=this._lexer.nextToken();for(;M.type!==y.Token.EOF;)D.push(M),M=this._lexer.nextToken()}return D}split(E){let N=0,D=E.length,P=[],B=[],M=[];for(;N<D;)N===E.indexOf(this.escape+this.start,N)?N+=this.escape.length+this.start.length:N===E.indexOf(this.escape+this.stop,N)?N+=this.escape.length+this.stop.length:N===E.indexOf(this.start,N)?(B.push(N),N+=this.start.length):N===E.indexOf(this.stop,N)?(M.push(N),N+=this.stop.length):N++;if(B.length>M.length)throw new Error("unterminated tag in pattern: "+E);if(B.length<M.length)throw new Error("missing start tag in pattern: "+E);let H=B.length;for(let Z=0;Z<H;Z++)if(B[Z]>=M[Z])throw new Error("tag delimiters out of order in pattern: "+E);if(H===0){let Z=E.substring(0,D);P.push(new _.TextChunk(Z))}if(H>0&&B[0]>0){let Z=E.substring(0,B[0]);P.push(new _.TextChunk(Z))}for(let Z=0;Z<H;Z++){let at=E.substring(B[Z]+this.start.length,M[Z]),nt=at,ut,Rt=at.indexOf(":");if(Rt>=0&&(ut=at.substring(0,Rt),nt=at.substring(Rt+1,at.length)),P.push(new v.TagChunk(nt,ut)),Z+1<H){let Y=E.substring(M[Z]+this.stop.length,B[Z+1]);P.push(new _.TextChunk(Y))}}if(H>0){let Z=M[H-1]+this.stop.length;if(Z<D){let at=E.substring(Z,D);P.push(new _.TextChunk(at))}}for(let Z=0;Z<P.length;Z++){let at=P[Z];if(at instanceof _.TextChunk){let nt=at.text.replace(this.escapeRE,"");nt.length<at.text.length&&(P[Z]=new _.TextChunk(nt))}}return P}}t([l.NotNull,e(1,l.NotNull)],T.prototype,"match",null),t([l.NotNull],T.prototype,"lexer",null),t([l.NotNull],T.prototype,"parser",null),t([e(0,l.NotNull),e(1,l.NotNull),e(2,l.NotNull)],T.prototype,"matchImpl",null),r.ParseTreePatternMatcher=T,function(b){class E extends Error{constructor(P){super(`CannotInvokeStartRule: ${P}`),this.error=P}}b.CannotInvokeStartRule=E;class N extends Error{constructor(){super("StartRuleDoesNotConsumeFullPattern")}}b.StartRuleDoesNotConsumeFullPattern=N}(T=r.ParseTreePatternMatcher||(r.ParseTreePatternMatcher={}))}(Ch)),Ch}var oo={},ao={},lo={},up;function ba(){if(up)return lo;up=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(n,s,o,a){var l=arguments.length,u=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,s,o,a);else for(var c=n.length-1;c>=0;c--)(h=n[c])&&(u=(l<3?h(u):l>3?h(s,o,u):h(s,o))||u);return l>3&&u&&Object.defineProperty(s,o,u),u},t=S&&S.__param||function(n,s){return function(o,a){s(o,a,n)}};Object.defineProperty(lo,"__esModule",{value:!0}),lo.DecisionEventInfo=void 0;const e=z;let i=class{constructor(s,o,a,l,u,h){this.decision=s,this.fullCtx=h,this.stopIndex=u,this.input=a,this.startIndex=l,this.state=o}};return r([e.NotNull],i.prototype,"input",void 0),i=r([t(2,e.NotNull)],i),lo.DecisionEventInfo=i,lo}var hp;function Db(){if(hp)return ao;hp=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=S&&S.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(ao,"__esModule",{value:!0}),ao.AmbiguityInfo=void 0;const e=ba(),i=z;let n=class extends e.DecisionEventInfo{constructor(o,a,l,u,h,c){super(o,a,u,h,c,a.useContext),this.ambigAlts=l}get ambiguousAlternatives(){return this.ambigAlts}};return r([i.NotNull],n.prototype,"ambigAlts",void 0),r([i.NotNull],n.prototype,"ambiguousAlternatives",null),n=r([t(1,i.NotNull),t(2,i.NotNull),t(3,i.NotNull)],n),ao.AmbiguityInfo=n,ao}var uo={},cp;function Ob(){if(cp)return uo;cp=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=S&&S.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(uo,"__esModule",{value:!0}),uo.ContextSensitivityInfo=void 0;const e=ba(),i=z;let n=class extends e.DecisionEventInfo{constructor(o,a,l,u,h){super(o,a,l,u,h,!0)}};return n=r([t(1,i.NotNull),t(2,i.NotNull)],n),uo.ContextSensitivityInfo=n,uo}var ho={},dp;function Fb(){if(dp)return ho;dp=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(i,n,s,o){var a=arguments.length,l=a<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,s):o,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,n,s,o);else for(var h=i.length-1;h>=0;h--)(u=i[h])&&(l=(a<3?u(l):a>3?u(n,s,l):u(n,s))||l);return a>3&&l&&Object.defineProperty(n,s,l),l};Object.defineProperty(ho,"__esModule",{value:!0}),ho.DecisionInfo=void 0;const t=z;let e=class{constructor(n){this.invocations=0,this.timeInPrediction=0,this.SLL_TotalLook=0,this.SLL_MinLook=0,this.SLL_MaxLook=0,this.LL_TotalLook=0,this.LL_MinLook=0,this.LL_MaxLook=0,this.contextSensitivities=[],this.errors=[],this.ambiguities=[],this.predicateEvals=[],this.SLL_ATNTransitions=0,this.SLL_DFATransitions=0,this.LL_Fallback=0,this.LL_ATNTransitions=0,this.LL_DFATransitions=0,this.decision=n}toString(){return"{decision="+this.decision+", contextSensitivities="+this.contextSensitivities.length+", errors="+this.errors.length+", ambiguities="+this.ambiguities.length+", SLL_lookahead="+this.SLL_TotalLook+", SLL_ATNTransitions="+this.SLL_ATNTransitions+", SLL_DFATransitions="+this.SLL_DFATransitions+", LL_Fallback="+this.LL_Fallback+", LL_lookahead="+this.LL_TotalLook+", LL_ATNTransitions="+this.LL_ATNTransitions+"}"}};return r([t.Override],e.prototype,"toString",null),ho.DecisionInfo=e,ho}var co={},fp;function Lb(){if(fp)return co;fp=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=S&&S.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(co,"__esModule",{value:!0}),co.ErrorInfo=void 0;const e=ba(),i=z;let n=class extends e.DecisionEventInfo{constructor(o,a,l,u,h){super(o,a,l,u,h,a.useContext)}};return n=r([t(1,i.NotNull),t(2,i.NotNull)],n),co.ErrorInfo=n,co}var fo={},pp;function Bb(){if(pp)return fo;pp=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=S&&S.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(fo,"__esModule",{value:!0}),fo.LookaheadEventInfo=void 0;const e=ba(),i=z;let n=class extends e.DecisionEventInfo{constructor(o,a,l,u,h,c,d){super(o,a,u,h,c,d),this.predictedAlt=l}};return n=r([t(3,i.NotNull)],n),fo.LookaheadEventInfo=n,fo}var po={},xp;function Mb(){if(xp)return po;xp=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h},t=S&&S.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(po,"__esModule",{value:!0}),po.PredicateEvalInfo=void 0;const e=ba(),i=z;let n=class extends e.DecisionEventInfo{constructor(o,a,l,u,h,c,d,f){super(a,o,l,u,h,o.useContext),this.semctx=c,this.evalResult=d,this.predictedAlt=f}};return n=r([t(0,i.NotNull),t(2,i.NotNull),t(5,i.NotNull)],n),po.PredicateEvalInfo=n,po}var _p;function mp(){if(_p)return oo;_p=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(m,x,v,g){var _=arguments.length,y=_<3?x:g===null?g=Object.getOwnPropertyDescriptor(x,v):g,A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(m,x,v,g);else for(var T=m.length-1;T>=0;T--)(A=m[T])&&(y=(_<3?A(y):_>3?A(x,v,y):A(x,v))||y);return _>3&&y&&Object.defineProperty(x,v,y),y},t=S&&S.__param||function(m,x){return function(v,g){x(v,g,m)}};Object.defineProperty(oo,"__esModule",{value:!0}),oo.ProfilingATNSimulator=void 0;const e=Db(),i=Cr(),n=Yl(),s=Ob(),o=Fb(),a=Lb(),l=z,u=Bb(),h=xa(),c=Mb(),d=en,f=Gx();let p=class extends h.ParserATNSimulator{constructor(x){super(x.interpreter.atn,x),this._startIndex=0,this._sllStopIndex=0,this._llStopIndex=0,this.currentDecision=0,this.conflictingAltResolvedBySLL=0,this.optimize_ll1=!1,this.reportAmbiguities=!0,this.numDecisions=this.atn.decisionToState.length,this.decisions=[];for(let v=0;v<this.numDecisions;v++)this.decisions.push(new o.DecisionInfo(v))}adaptivePredict(x,v,g,_){if(_!==void 0)return super.adaptivePredict(x,v,g,_);try{this._input=x,this._startIndex=x.index,this._sllStopIndex=this._startIndex-1,this._llStopIndex=-1,this.currentDecision=v,this.currentState=void 0,this.conflictingAltResolvedBySLL=i.ATN.INVALID_ALT_NUMBER;let y=Nl.hrtime(),A=super.adaptivePredict(x,v,g),T=Nl.hrtime(),b=(T[0]-y[0])*1e9;b===0?b=T[1]-y[1]:b+=1e9-y[1]+T[1],this.decisions[v].timeInPrediction+=b,this.decisions[v].invocations++;let E=this._sllStopIndex-this._startIndex+1;if(this.decisions[v].SLL_TotalLook+=E,this.decisions[v].SLL_MinLook=this.decisions[v].SLL_MinLook===0?E:Math.min(this.decisions[v].SLL_MinLook,E),E>this.decisions[v].SLL_MaxLook&&(this.decisions[v].SLL_MaxLook=E,this.decisions[v].SLL_MaxLookEvent=new u.LookaheadEventInfo(v,void 0,A,x,this._startIndex,this._sllStopIndex,!1)),this._llStopIndex>=0){let N=this._llStopIndex-this._startIndex+1;this.decisions[v].LL_TotalLook+=N,this.decisions[v].LL_MinLook=this.decisions[v].LL_MinLook===0?N:Math.min(this.decisions[v].LL_MinLook,N),N>this.decisions[v].LL_MaxLook&&(this.decisions[v].LL_MaxLook=N,this.decisions[v].LL_MaxLookEvent=new u.LookaheadEventInfo(v,void 0,A,x,this._startIndex,this._llStopIndex,!0))}return A}finally{this._input=void 0,this.currentDecision=-1}}getStartState(x,v,g,_){let y=super.getStartState(x,v,g,_);return this.currentState=y,y}computeStartState(x,v,g){let _=super.computeStartState(x,v,g);return this.currentState=_,_}computeReachSet(x,v,g,_){if(this._input===void 0)throw new Error("Invalid state");let y=super.computeReachSet(x,v,g,_);return y==null&&this.decisions[this.currentDecision].errors.push(new a.ErrorInfo(this.currentDecision,v,this._input,this._startIndex,this._input.index)),this.currentState=y,y}getExistingTargetState(x,v){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");this.currentState.useContext?this._llStopIndex=this._input.index:this._sllStopIndex=this._input.index;let g=super.getExistingTargetState(x,v);if(g!=null&&(this.currentState=new f.SimulatorState(this.currentState.outerContext,g,this.currentState.useContext,this.currentState.remainingOuterContext),this.currentState.useContext?this.decisions[this.currentDecision].LL_DFATransitions++:this.decisions[this.currentDecision].SLL_DFATransitions++,g===n.ATNSimulator.ERROR)){let _=new f.SimulatorState(this.currentState.outerContext,x,this.currentState.useContext,this.currentState.remainingOuterContext);this.decisions[this.currentDecision].errors.push(new a.ErrorInfo(this.currentDecision,_,this._input,this._startIndex,this._input.index))}return g}computeTargetState(x,v,g,_,y,A){let T=super.computeTargetState(x,v,g,_,y,A);return y?this.decisions[this.currentDecision].LL_ATNTransitions++:this.decisions[this.currentDecision].SLL_ATNTransitions++,T}evalSemanticContextImpl(x,v,g){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");let _=super.evalSemanticContextImpl(x,v,g);if(!(x instanceof d.SemanticContext.PrecedencePredicate)){let A=this._llStopIndex>=0?this._llStopIndex:this._sllStopIndex;this.decisions[this.currentDecision].predicateEvals.push(new c.PredicateEvalInfo(this.currentState,this.currentDecision,this._input,this._startIndex,A,x,_,g))}return _}reportContextSensitivity(x,v,g,_,y){if(this._input===void 0)throw new Error("Invalid state");v!==this.conflictingAltResolvedBySLL&&this.decisions[this.currentDecision].contextSensitivities.push(new s.ContextSensitivityInfo(this.currentDecision,g,this._input,_,y)),super.reportContextSensitivity(x,v,g,_,y)}reportAttemptingFullContext(x,v,g,_,y){v!=null?this.conflictingAltResolvedBySLL=v.nextSetBit(0):this.conflictingAltResolvedBySLL=g.s0.configs.getRepresentedAlternatives().nextSetBit(0),this.decisions[this.currentDecision].LL_Fallback++,super.reportAttemptingFullContext(x,v,g,_,y)}reportAmbiguity(x,v,g,_,y,A,T){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");let b;A!=null?b=A.nextSetBit(0):b=T.getRepresentedAlternatives().nextSetBit(0),this.conflictingAltResolvedBySLL!==i.ATN.INVALID_ALT_NUMBER&&b!==this.conflictingAltResolvedBySLL&&this.decisions[this.currentDecision].contextSensitivities.push(new s.ContextSensitivityInfo(this.currentDecision,this.currentState,this._input,g,_)),this.decisions[this.currentDecision].ambiguities.push(new e.AmbiguityInfo(this.currentDecision,this.currentState,A,this._input,g,_)),super.reportAmbiguity(x,v,g,_,y,A,T)}getDecisionInfo(){return this.decisions}getCurrentState(){return this.currentState}};return r([l.Override,t(0,l.NotNull)],p.prototype,"adaptivePredict",null),r([l.Override],p.prototype,"getStartState",null),r([l.Override],p.prototype,"computeStartState",null),r([l.Override],p.prototype,"computeReachSet",null),r([l.Override],p.prototype,"getExistingTargetState",null),r([l.Override],p.prototype,"computeTargetState",null),r([l.Override],p.prototype,"evalSemanticContextImpl",null),r([l.Override],p.prototype,"reportContextSensitivity",null),r([l.Override],p.prototype,"reportAttemptingFullContext",null),r([l.Override,t(0,l.NotNull),t(5,l.NotNull),t(6,l.NotNull)],p.prototype,"reportAmbiguity",null),oo.ProfilingATNSimulator=p,oo}var gp;function Ca(){if(gp)return Os;gp=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(_,y,A,T){var b=arguments.length,E=b<3?y:T===null?T=Object.getOwnPropertyDescriptor(y,A):T,N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(_,y,A,T);else for(var D=_.length-1;D>=0;D--)(N=_[D])&&(E=(b<3?N(E):b>3?N(y,A,E):N(y,A))||E);return b>3&&E&&Object.defineProperty(y,A,E),E},t=S&&S.__param||function(_,y){return function(A,T){y(A,T,_)}},e=S&&S.__awaiter||function(_,y,A,T){function b(E){return E instanceof A?E:new A(function(N){N(E)})}return new(A||(A=Promise))(function(E,N){function D(M){try{B(T.next(M))}catch(H){N(H)}}function P(M){try{B(T.throw(M))}catch(H){N(H)}}function B(M){M.done?E(M.value):b(M.value).then(D,P)}B((T=T.apply(_,y||[])).next())})};Object.defineProperty(Os,"__esModule",{value:!0}),Os.Parser=void 0;const i=Qt,n=sa,s=zc(),o=Zc(),a=vi,l=Ko,u=mi(),h=z,c=vu,d=xa(),f=va,p=pi,m=sr,x=St;class v{constructor(y,A){this.ruleNames=y,this.tokenStream=A}enterEveryRule(y){console.log("enter   "+this.ruleNames[y.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}exitEveryRule(y){console.log("exit    "+this.ruleNames[y.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}visitErrorNode(y){}visitTerminal(y){let A=y.parent.ruleContext,T=y.symbol;console.log("consume "+T+" rule "+this.ruleNames[A.ruleIndex])}}r([h.Override],v.prototype,"enterEveryRule",null),r([h.Override],v.prototype,"exitEveryRule",null),r([h.Override],v.prototype,"visitErrorNode",null),r([h.Override],v.prototype,"visitTerminal",null);let g=class fl extends p.Recognizer{constructor(y){super(),this._errHandler=new o.DefaultErrorStrategy,this._precedenceStack=new l.IntegerStack,this._buildParseTrees=!0,this._parseListeners=[],this._syntaxErrors=0,this.matchedEOF=!1,this._precedenceStack.push(0),this.inputStream=y}reset(y){(y===void 0||y)&&this.inputStream.seek(0),this._errHandler.reset(this),this._ctx=void 0,this._syntaxErrors=0,this.matchedEOF=!1,this.isTrace=!1,this._precedenceStack.clear(),this._precedenceStack.push(0);let A=this.interpreter;A!=null&&A.reset()}match(y){let A=this.currentToken;return A.type===y?(y===x.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):(A=this._errHandler.recoverInline(this),this._buildParseTrees&&A.tokenIndex===-1&&this._ctx.addErrorNode(this.createErrorNode(this._ctx,A))),A}matchWildcard(){let y=this.currentToken;return y.type>0?(this._errHandler.reportMatch(this),this.consume()):(y=this._errHandler.recoverInline(this),this._buildParseTrees&&y.tokenIndex===-1&&this._ctx.addErrorNode(this.createErrorNode(this._ctx,y))),y}set buildParseTree(y){this._buildParseTrees=y}get buildParseTree(){return this._buildParseTrees}getParseListeners(){return this._parseListeners}addParseListener(y){if(y==null)throw new TypeError("listener cannot be null");this._parseListeners.push(y)}removeParseListener(y){let A=this._parseListeners.findIndex(T=>T===y);A!==-1&&this._parseListeners.splice(A,1)}removeParseListeners(){this._parseListeners.length=0}triggerEnterRuleEvent(){for(let y of this._parseListeners)y.enterEveryRule&&y.enterEveryRule(this._ctx),this._ctx.enterRule(y)}triggerExitRuleEvent(){for(let y=this._parseListeners.length-1;y>=0;y--){let A=this._parseListeners[y];this._ctx.exitRule(A),A.exitEveryRule&&A.exitEveryRule(this._ctx)}}get numberOfSyntaxErrors(){return this._syntaxErrors}get tokenFactory(){return this._input.tokenSource.tokenFactory}getATNWithBypassAlts(){let y=this.serializedATN;if(y==null)throw new Error("The current parser does not support an ATN with bypass alternatives.");let A=fl.bypassAltsAtnCache.get(y);if(A==null){let T=new n.ATNDeserializationOptions;T.isGenerateRuleBypassTransitions=!0,A=new s.ATNDeserializer(T).deserialize(i.toCharArray(y)),fl.bypassAltsAtnCache.set(y,A)}return A}compileParseTreePattern(y,A,T){return e(this,void 0,void 0,function*(){if(!T){if(this.inputStream){let D=this.inputStream.tokenSource;D instanceof u.Lexer&&(T=D)}if(!T)throw new Error("Parser can't discover a lexer to use")}let b=T,E=yield Promise.resolve().then(()=>Pb());return new E.ParseTreePatternMatcher(b,this).compile(y,A)})}get errorHandler(){return this._errHandler}set errorHandler(y){this._errHandler=y}get inputStream(){return this._input}set inputStream(y){this.reset(!1),this._input=y}get currentToken(){return this._input.LT(1)}notifyErrorListeners(y,A,T){A===void 0?A=this.currentToken:A===null&&(A=void 0),this._syntaxErrors++;let b=-1,E=-1;A!=null&&(b=A.line,E=A.charPositionInLine);let N=this.getErrorListenerDispatch();N.syntaxError&&N.syntaxError(this,A,b,E,y,T)}consume(){let y=this.currentToken;y.type!==fl.EOF&&this.inputStream.consume();let A=this._parseListeners.length!==0;if(this._buildParseTrees||A)if(this._errHandler.inErrorRecoveryMode(this)){let T=this._ctx.addErrorNode(this.createErrorNode(this._ctx,y));if(A)for(let b of this._parseListeners)b.visitErrorNode&&b.visitErrorNode(T)}else{let T=this.createTerminalNode(this._ctx,y);if(this._ctx.addChild(T),A)for(let b of this._parseListeners)b.visitTerminal&&b.visitTerminal(T)}return y}createTerminalNode(y,A){return new m.TerminalNode(A)}createErrorNode(y,A){return new a.ErrorNode(A)}addContextToParseTree(){let y=this._ctx._parent;y!=null&&y.addChild(this._ctx)}enterRule(y,A,T){this.state=A,this._ctx=y,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}enterLeftFactoredRule(y,A,T){if(this.state=A,this._buildParseTrees){let b=this._ctx.getChild(this._ctx.childCount-1);this._ctx.removeLastChild(),b._parent=y,y.addChild(b)}this._ctx=y,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}exitRule(){this.matchedEOF?this._ctx._stop=this._input.LT(1):this._ctx._stop=this._input.tryLT(-1),this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx._parent}enterOuterAlt(y,A){if(y.altNumber=A,this._buildParseTrees&&this._ctx!==y){let T=this._ctx._parent;T!=null&&(T.removeLastChild(),T.addChild(y))}this._ctx=y}get precedence(){return this._precedenceStack.isEmpty?-1:this._precedenceStack.peek()}enterRecursionRule(y,A,T,b){this.state=A,this._precedenceStack.push(b),this._ctx=y,this._ctx._start=this._input.LT(1),this.triggerEnterRuleEvent()}pushNewRecursionContext(y,A,T){let b=this._ctx;b._parent=y,b.invokingState=A,b._stop=this._input.tryLT(-1),this._ctx=y,this._ctx._start=b._start,this._buildParseTrees&&this._ctx.addChild(b),this.triggerEnterRuleEvent()}unrollRecursionContexts(y){this._precedenceStack.pop(),this._ctx._stop=this._input.tryLT(-1);let A=this._ctx;if(this._parseListeners.length>0)for(;this._ctx!==y;)this.triggerExitRuleEvent(),this._ctx=this._ctx._parent;else this._ctx=y;A._parent=y,this._buildParseTrees&&y!=null&&y.addChild(A)}getInvokingContext(y){let A=this._ctx;for(;A&&A.ruleIndex!==y;)A=A._parent;return A}get context(){return this._ctx}set context(y){this._ctx=y}precpred(y,A){return A>=this._precedenceStack.peek()}getErrorListenerDispatch(){return new f.ProxyParserErrorListener(this.getErrorListeners())}inContext(y){return!1}isExpectedToken(y){let A=this.interpreter.atn,T=this._ctx,b=A.states[this.state],E=A.nextTokens(b);if(E.contains(y))return!0;if(!E.contains(x.Token.EPSILON))return!1;for(;T!=null&&T.invokingState>=0&&E.contains(x.Token.EPSILON);){let D=A.states[T.invokingState].transition(0);if(E=A.nextTokens(D.followState),E.contains(y))return!0;T=T._parent}return!!(E.contains(x.Token.EPSILON)&&y===x.Token.EOF)}get isMatchedEOF(){return this.matchedEOF}getExpectedTokens(){return this.atn.getExpectedTokens(this.state,this.context)}getExpectedTokensWithinCurrentRule(){let y=this.interpreter.atn,A=y.states[this.state];return y.nextTokens(A)}getRuleIndex(y){let A=this.getRuleIndexMap().get(y);return A??-1}get ruleContext(){return this._ctx}getRuleInvocationStack(y=this._ctx){let A=y,T=this.ruleNames,b=[];for(;A!=null;){let E=A.ruleIndex;E<0?b.push("n/a"):b.push(T[E]),A=A._parent}return b}getDFAStrings(){let y=[];for(let A of this._interp.atn.decisionToDFA)y.push(A.toString(this.vocabulary,this.ruleNames));return y}dumpDFA(){let y=!1;for(let A of this._interp.atn.decisionToDFA)A.isEmpty||(y&&console.log(),console.log("Decision "+A.decision+":"),Nl.stdout.write(A.toString(this.vocabulary,this.ruleNames)),y=!0)}get sourceName(){return this._input.sourceName}get parseInfo(){return Promise.resolve().then(()=>mp()).then(y=>{let A=this.interpreter;if(A instanceof y.ProfilingATNSimulator)return new c.ParseInfo(A)})}setProfile(y){return e(this,void 0,void 0,function*(){let A=yield Promise.resolve().then(()=>mp()),T=this.interpreter;y?T instanceof A.ProfilingATNSimulator||(this.interpreter=new A.ProfilingATNSimulator(this)):T instanceof A.ProfilingATNSimulator&&(this.interpreter=new d.ParserATNSimulator(this.atn,this)),this.interpreter.setPredictionMode(T.getPredictionMode())})}set isTrace(y){y?(this._tracer?this.removeParseListener(this._tracer):this._tracer=new v(this.ruleNames,this._input),this.addParseListener(this._tracer)):this._tracer&&(this.removeParseListener(this._tracer),this._tracer=void 0)}get isTrace(){return this._tracer!=null}};return g.bypassAltsAtnCache=new Map,r([h.NotNull],g.prototype,"_errHandler",void 0),r([h.NotNull],g.prototype,"match",null),r([h.NotNull],g.prototype,"matchWildcard",null),r([h.NotNull],g.prototype,"getParseListeners",null),r([t(0,h.NotNull)],g.prototype,"addParseListener",null),r([h.NotNull],g.prototype,"getATNWithBypassAlts",null),r([h.NotNull,t(0,h.NotNull)],g.prototype,"errorHandler",null),r([h.Override],g.prototype,"inputStream",null),r([h.NotNull],g.prototype,"currentToken",null),r([t(0,h.NotNull)],g.prototype,"enterRule",null),r([h.Override,t(0,h.Nullable)],g.prototype,"precpred",null),r([h.Override],g.prototype,"getErrorListenerDispatch",null),r([h.NotNull],g.prototype,"getExpectedTokens",null),r([h.NotNull],g.prototype,"getExpectedTokensWithinCurrentRule",null),r([h.Override],g.prototype,"parseInfo",null),Os.Parser=g,Os}var vp;function Su(){if(vp)return Ds;vp=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(s,o,a,l){var u=arguments.length,h=u<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var d=s.length-1;d>=0;d--)(c=s[d])&&(h=(u<3?c(h):u>3?c(o,a,h):c(o,a))||h);return u>3&&h&&Object.defineProperty(o,a,h),h};Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.NoViableAltException=void 0;const t=Ca(),e=Ar,i=z;let n=class extends e.RecognitionException{constructor(o,a,l,u,h,c){o instanceof t.Parser&&(a===void 0&&(a=o.inputStream),l===void 0&&(l=o.currentToken),u===void 0&&(u=o.currentToken),c===void 0&&(c=o.context)),super(o,a,c),this._deadEndConfigs=h,this._startToken=l,this.setOffendingToken(o,u)}get startToken(){return this._startToken}get deadEndConfigs(){return this._deadEndConfigs}};return r([i.NotNull],n.prototype,"_startToken",void 0),Ds.NoViableAltException=n,Ds}var yp;function Zc(){if(yp)return ys;yp=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(d,f,p,m){var x=arguments.length,v=x<3?f:m===null?m=Object.getOwnPropertyDescriptor(f,p):m,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(d,f,p,m);else for(var _=d.length-1;_>=0;_--)(g=d[_])&&(v=(x<3?g(v):x>3?g(f,p,v):g(f,p))||v);return x>3&&v&&Object.defineProperty(f,p,v),v},t=S&&S.__param||function(d,f){return function(p,m){f(p,m,d)}};Object.defineProperty(ys,"__esModule",{value:!0}),ys.DefaultErrorStrategy=void 0;const e=Er,i=ee,n=Zn,s=nn,o=hn(),a=Su(),l=ir(),u=St,h=z;let c=class{constructor(){this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.nextTokensState=e.ATNState.INVALID_STATE_NUMBER}reset(f){this.endErrorCondition(f)}beginErrorCondition(f){this.errorRecoveryMode=!0}inErrorRecoveryMode(f){return this.errorRecoveryMode}endErrorCondition(f){this.errorRecoveryMode=!1,this.lastErrorStates=void 0,this.lastErrorIndex=-1}reportMatch(f){this.endErrorCondition(f)}reportError(f,p){this.inErrorRecoveryMode(f)||(this.beginErrorCondition(f),p instanceof a.NoViableAltException?this.reportNoViableAlternative(f,p):p instanceof s.InputMismatchException?this.reportInputMismatch(f,p):p instanceof n.FailedPredicateException?this.reportFailedPredicate(f,p):(console.error(`unknown recognition error type: ${p}`),this.notifyErrorListeners(f,p.toString(),p)))}notifyErrorListeners(f,p,m){let x=m.getOffendingToken(f);x===void 0&&(x=null),f.notifyErrorListeners(p,x,m)}recover(f,p){this.lastErrorIndex===f.inputStream.index&&this.lastErrorStates&&this.lastErrorStates.contains(f.state)&&f.consume(),this.lastErrorIndex=f.inputStream.index,this.lastErrorStates||(this.lastErrorStates=new o.IntervalSet),this.lastErrorStates.add(f.state);let m=this.getErrorRecoverySet(f);this.consumeUntil(f,m)}sync(f){let p=f.interpreter.atn.states[f.state];if(this.inErrorRecoveryMode(f))return;let x=f.inputStream.LA(1),v=f.atn.nextTokens(p);if(v.contains(x)){this.nextTokensContext=void 0,this.nextTokensState=e.ATNState.INVALID_STATE_NUMBER;return}if(v.contains(u.Token.EPSILON)){this.nextTokensContext===void 0&&(this.nextTokensContext=f.context,this.nextTokensState=f.state);return}switch(p.stateType){case i.ATNStateType.BLOCK_START:case i.ATNStateType.STAR_BLOCK_START:case i.ATNStateType.PLUS_BLOCK_START:case i.ATNStateType.STAR_LOOP_ENTRY:if(this.singleTokenDeletion(f))return;throw new s.InputMismatchException(f);case i.ATNStateType.PLUS_LOOP_BACK:case i.ATNStateType.STAR_LOOP_BACK:this.reportUnwantedToken(f);let _=f.getExpectedTokens().or(this.getErrorRecoverySet(f));this.consumeUntil(f,_);break}}reportNoViableAlternative(f,p){let m=f.inputStream,x;m?p.startToken.type===u.Token.EOF?x="<EOF>":x=m.getTextFromRange(p.startToken,p.getOffendingToken()):x="<unknown input>";let v="no viable alternative at input "+this.escapeWSAndQuote(x);this.notifyErrorListeners(f,v,p)}reportInputMismatch(f,p){let m=p.expectedTokens,x=m?m.toStringVocabulary(f.vocabulary):"",v="mismatched input "+this.getTokenErrorDisplay(p.getOffendingToken(f))+" expecting "+x;this.notifyErrorListeners(f,v,p)}reportFailedPredicate(f,p){let x="rule "+f.ruleNames[f.context.ruleIndex]+" "+p.message;this.notifyErrorListeners(f,x,p)}reportUnwantedToken(f){if(this.inErrorRecoveryMode(f))return;this.beginErrorCondition(f);let p=f.currentToken,m=this.getTokenErrorDisplay(p),x=this.getExpectedTokens(f),v="extraneous input "+m+" expecting "+x.toStringVocabulary(f.vocabulary);f.notifyErrorListeners(v,p,void 0)}reportMissingToken(f){if(this.inErrorRecoveryMode(f))return;this.beginErrorCondition(f);let p=f.currentToken,x="missing "+this.getExpectedTokens(f).toStringVocabulary(f.vocabulary)+" at "+this.getTokenErrorDisplay(p);f.notifyErrorListeners(x,p,void 0)}recoverInline(f){let p=this.singleTokenDeletion(f);if(p)return f.consume(),p;if(this.singleTokenInsertion(f))return this.getMissingSymbol(f);throw this.nextTokensContext===void 0?new s.InputMismatchException(f):new s.InputMismatchException(f,this.nextTokensState,this.nextTokensContext)}singleTokenInsertion(f){let p=f.inputStream.LA(1),x=f.interpreter.atn.states[f.state].transition(0).target,v=f.interpreter.atn;return v.nextTokens(x,l.PredictionContext.fromRuleContext(v,f.context)).contains(p)?(this.reportMissingToken(f),!0):!1}singleTokenDeletion(f){let p=f.inputStream.LA(2);if(this.getExpectedTokens(f).contains(p)){this.reportUnwantedToken(f),f.consume();let x=f.currentToken;return this.reportMatch(f),x}}getMissingSymbol(f){let p=f.currentToken,m=this.getExpectedTokens(f),x=u.Token.INVALID_TYPE;m.isNil||(x=m.minElement);let v;x===u.Token.EOF?v="<missing EOF>":v="<missing "+f.vocabulary.getDisplayName(x)+">";let g=p,_=f.inputStream.tryLT(-1);return g.type===u.Token.EOF&&_!=null&&(g=_),this.constructToken(f.inputStream.tokenSource,x,v,g)}constructToken(f,p,m,x){let v=f.tokenFactory,g=x.tokenSource,_=g?g.inputStream:void 0;return v.create({source:f,stream:_},p,m,u.Token.DEFAULT_CHANNEL,-1,-1,x.line,x.charPositionInLine)}getExpectedTokens(f){return f.getExpectedTokens()}getTokenErrorDisplay(f){if(!f)return"<no token>";let p=this.getSymbolText(f);return p||(this.getSymbolType(f)===u.Token.EOF?p="<EOF>":p=`<${this.getSymbolType(f)}>`),this.escapeWSAndQuote(p)}getSymbolText(f){return f.text}getSymbolType(f){return f.type}escapeWSAndQuote(f){return f=f.replace(`
`,"\\n"),f=f.replace("\r","\\r"),f=f.replace("	","\\t"),"'"+f+"'"}getErrorRecoverySet(f){let p=f.interpreter.atn,m=f.context,x=new o.IntervalSet;for(;m&&m.invokingState>=0;){let g=p.states[m.invokingState].transition(0),_=p.nextTokens(g.followState);x.addAll(_),m=m._parent}return x.remove(u.Token.EPSILON),x}consumeUntil(f,p){let m=f.inputStream.LA(1);for(;m!==u.Token.EOF&&!p.contains(m);)f.consume(),m=f.inputStream.LA(1)}};return r([h.Override],c.prototype,"reset",null),r([t(0,h.NotNull)],c.prototype,"beginErrorCondition",null),r([h.Override],c.prototype,"inErrorRecoveryMode",null),r([t(0,h.NotNull)],c.prototype,"endErrorCondition",null),r([h.Override],c.prototype,"reportMatch",null),r([h.Override],c.prototype,"reportError",null),r([t(0,h.NotNull)],c.prototype,"notifyErrorListeners",null),r([h.Override],c.prototype,"recover",null),r([h.Override],c.prototype,"sync",null),r([t(0,h.NotNull),t(1,h.NotNull)],c.prototype,"reportNoViableAlternative",null),r([t(0,h.NotNull),t(1,h.NotNull)],c.prototype,"reportInputMismatch",null),r([t(0,h.NotNull),t(1,h.NotNull)],c.prototype,"reportFailedPredicate",null),r([t(0,h.NotNull)],c.prototype,"reportUnwantedToken",null),r([t(0,h.NotNull)],c.prototype,"reportMissingToken",null),r([h.Override],c.prototype,"recoverInline",null),r([t(0,h.NotNull)],c.prototype,"singleTokenInsertion",null),r([t(0,h.NotNull)],c.prototype,"singleTokenDeletion",null),r([h.NotNull,t(0,h.NotNull)],c.prototype,"getMissingSymbol",null),r([h.NotNull,t(0,h.NotNull)],c.prototype,"getExpectedTokens",null),r([t(0,h.NotNull)],c.prototype,"getSymbolText",null),r([t(0,h.NotNull)],c.prototype,"getSymbolType",null),r([h.NotNull,t(0,h.NotNull)],c.prototype,"escapeWSAndQuote",null),r([h.NotNull,t(0,h.NotNull)],c.prototype,"getErrorRecoverySet",null),r([t(0,h.NotNull),t(1,h.NotNull)],c.prototype,"consumeUntil",null),ys.DefaultErrorStrategy=c,ys}var Tp;function t_(){if(Tp)return vs;Tp=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var r=S&&S.__decorate||function(o,a,l,u){var h=arguments.length,c=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,l):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,a,l,u);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(c=(h<3?d(c):h>3?d(a,l,c):d(a,l))||c);return h>3&&c&&Object.defineProperty(a,l,c),c};Object.defineProperty(vs,"__esModule",{value:!0}),vs.BailErrorStrategy=void 0;const t=Zc(),e=nn,i=z,n=Aa;let s=class extends t.DefaultErrorStrategy{recover(a,l){for(let u=a.context;u;u=u.parent)u.exception=l;throw new n.ParseCancellationException(l)}recoverInline(a){let l=new e.InputMismatchException(a);for(let u=a.context;u;u=u.parent)u.exception=l;throw new n.ParseCancellationException(l)}sync(a){}};return r([i.Override],s.prototype,"recover",null),r([i.Override],s.prototype,"recoverInline",null),r([i.Override],s.prototype,"sync",null),vs.BailErrorStrategy=s,vs}var e_={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(e_,"__esModule",{value:!0});var r_={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.Dependents=void 0,function(t){t[t.SELF=0]="SELF",t[t.PARENTS=1]="PARENTS",t[t.CHILDREN=2]="CHILDREN",t[t.ANCESTORS=3]="ANCESTORS",t[t.DESCENDANTS=4]="DESCENDANTS",t[t.SIBLINGS=5]="SIBLINGS",t[t.PRECEEDING_SIBLINGS=6]="PRECEEDING_SIBLINGS",t[t.FOLLOWING_SIBLINGS=7]="FOLLOWING_SIBLINGS",t[t.PRECEEDING=8]="PRECEEDING",t[t.FOLLOWING=9]="FOLLOWING"}(r.Dependents||(r.Dependents={}))})(r_);var bu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var us=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Me=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(bu,"__esModule",{value:!0});bu.DiagnosticErrorListener=void 0;const kb=nr,ae=z,Ih=ce;class fn{constructor(t=!0){this.exactOnly=t,this.exactOnly=t}syntaxError(t,e,i,n,s,o){}reportAmbiguity(t,e,i,n,s,o,a){if(this.exactOnly&&!s)return;let l=this.getDecisionDescription(t,e),u=this.getConflictingAlts(o,a),h=t.inputStream.getText(Ih.Interval.of(i,n)),c=`reportAmbiguity d=${l}: ambigAlts=${u}, input='${h}'`;t.notifyErrorListeners(c)}reportAttemptingFullContext(t,e,i,n,s,o){let a=this.getDecisionDescription(t,e),l=t.inputStream.getText(Ih.Interval.of(i,n)),u=`reportAttemptingFullContext d=${a}, input='${l}'`;t.notifyErrorListeners(u)}reportContextSensitivity(t,e,i,n,s,o){let a=this.getDecisionDescription(t,e),l=t.inputStream.getText(Ih.Interval.of(i,n)),u=`reportContextSensitivity d=${a}, input='${l}'`;t.notifyErrorListeners(u)}getDecisionDescription(t,e){let i=e.decision,n=e.atnStartState.ruleIndex,s=t.ruleNames;if(n<0||n>=s.length)return i.toString();let o=s[n];return o?`${i} (${o})`:i.toString()}getConflictingAlts(t,e){if(t!=null)return t;let i=new kb.BitSet;for(let n of e)i.set(n.alt);return i}}us([ae.Override],fn.prototype,"syntaxError",null);us([ae.Override,Me(0,ae.NotNull),Me(1,ae.NotNull),Me(6,ae.NotNull)],fn.prototype,"reportAmbiguity",null);us([ae.Override,Me(0,ae.NotNull),Me(1,ae.NotNull),Me(5,ae.NotNull)],fn.prototype,"reportAttemptingFullContext",null);us([ae.Override,Me(0,ae.NotNull),Me(1,ae.NotNull),Me(5,ae.NotNull)],fn.prototype,"reportContextSensitivity",null);us([Me(0,ae.NotNull),Me(1,ae.NotNull)],fn.prototype,"getDecisionDescription",null);us([ae.NotNull,Me(1,ae.NotNull)],fn.prototype,"getConflictingAlts",null);bu.DiagnosticErrorListener=fn;var Cu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ei=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Ub=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.LexerInterpreter=void 0;const Hb=mi(),jb=tu(),i_=z,hs=z;let gr=class extends Hb.Lexer{constructor(t,e,i,n,s,o,a){if(super(a),o.grammarType!==0)throw new Error("IllegalArgumentException: The ATN must be a lexer ATN.");this._grammarFileName=t,this._atn=o,this._ruleNames=i.slice(0),this._channelNames=n.slice(0),this._modeNames=s.slice(0),this._vocabulary=e,this._interp=new jb.LexerATNSimulator(o,this)}get atn(){return this._atn}get grammarFileName(){return this._grammarFileName}get ruleNames(){return this._ruleNames}get channelNames(){return this._channelNames}get modeNames(){return this._modeNames}get vocabulary(){return this._vocabulary}};Ei([i_.NotNull],gr.prototype,"_vocabulary",void 0);Ei([hs.Override],gr.prototype,"atn",null);Ei([hs.Override],gr.prototype,"grammarFileName",null);Ei([hs.Override],gr.prototype,"ruleNames",null);Ei([hs.Override],gr.prototype,"channelNames",null);Ei([hs.Override],gr.prototype,"modeNames",null);Ei([hs.Override],gr.prototype,"vocabulary",null);gr=Ei([Ub(1,i_.NotNull)],gr);Cu.LexerInterpreter=gr;var n_={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(n_,"__esModule",{value:!0});var Nu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Gb=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.RuleContextWithAltNum=void 0;const $b=Cr(),zb=z,Xb=ar();class s_ extends Xb.ParserRuleContext{constructor(t,e){e!==void 0?super(t,e):super(),this._altNumber=$b.ATN.INVALID_ALT_NUMBER}get altNumber(){return this._altNumber}set altNumber(t){this._altNumber=t}}Gb([zb.Override],s_.prototype,"altNumber",null);Nu.RuleContextWithAltNum=s_;var wu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(wu,"__esModule",{value:!0});wu.RuleDependency=void 0;function Vb(r){return(t,e,i)=>{}}wu.RuleDependency=Vb;var Ru={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ru,"__esModule",{value:!0});Ru.RuleVersion=void 0;function Wb(r){return(t,e,i)=>{}}Ru.RuleVersion=Wb;var o_={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(o_,"__esModule",{value:!0});var a_={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(a_,"__esModule",{value:!0});var l_={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(l_,"__esModule",{value:!0});var qn={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Iu=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Object.defineProperty(qn,"__esModule",{value:!0});qn.RewriteOperation=qn.TokenStreamRewriter=void 0;const Ep=ce,Pu=z,u_=St;class de{constructor(t){this.tokens=t,this.programs=new Map,this.programs.set(de.DEFAULT_PROGRAM_NAME,[]),this.lastRewriteTokenIndexes=new Map}getTokenStream(){return this.tokens}rollback(t,e=de.DEFAULT_PROGRAM_NAME){let i=this.programs.get(e);i!=null&&this.programs.set(e,i.slice(de.MIN_TOKEN_INDEX,t))}deleteProgram(t=de.DEFAULT_PROGRAM_NAME){this.rollback(de.MIN_TOKEN_INDEX,t)}insertAfter(t,e,i=de.DEFAULT_PROGRAM_NAME){let n;typeof t=="number"?n=t:n=t.tokenIndex;let s=this.getProgram(i),o=new Ap(this.tokens,n,s.length,e);s.push(o)}insertBefore(t,e,i=de.DEFAULT_PROGRAM_NAME){let n;typeof t=="number"?n=t:n=t.tokenIndex;let s=this.getProgram(i),o=new Di(this.tokens,n,s.length,e);s.push(o)}replaceSingle(t,e){typeof t=="number"?this.replace(t,t,e):this.replace(t,t,e)}replace(t,e,i,n=de.DEFAULT_PROGRAM_NAME){if(typeof t!="number"&&(t=t.tokenIndex),typeof e!="number"&&(e=e.tokenIndex),t>e||t<0||e<0||e>=this.tokens.size)throw new RangeError(`replace: range invalid: ${t}..${e}(size=${this.tokens.size})`);let s=this.getProgram(n),o=new Rn(this.tokens,t,e,s.length,i);s.push(o)}delete(t,e,i=de.DEFAULT_PROGRAM_NAME){e===void 0&&(e=t),typeof t=="number"?this.replace(t,e,"",i):this.replace(t,e,"",i)}getLastRewriteTokenIndex(t=de.DEFAULT_PROGRAM_NAME){let e=this.lastRewriteTokenIndexes.get(t);return e??-1}setLastRewriteTokenIndex(t,e){this.lastRewriteTokenIndexes.set(t,e)}getProgram(t){let e=this.programs.get(t);return e==null&&(e=this.initializeProgram(t)),e}initializeProgram(t){let e=[];return this.programs.set(t,e),e}getText(t,e=de.DEFAULT_PROGRAM_NAME){let i;t instanceof Ep.Interval?i=t:i=Ep.Interval.of(0,this.tokens.size-1),typeof t=="string"&&(e=t);let n=this.programs.get(e),s=i.a,o=i.b;if(o>this.tokens.size-1&&(o=this.tokens.size-1),s<0&&(s=0),n==null||n.length===0)return this.tokens.getText(i);let a=[],l=this.reduceToSingleOperationPerIndex(n),u=s;for(;u<=o&&u<this.tokens.size;){let h=l.get(u);l.delete(u);let c=this.tokens.get(u);h==null?(c.type!==u_.Token.EOF&&a.push(String(c.text)),u++):u=h.execute(a)}if(o===this.tokens.size-1)for(let h of l.values())h.index>=this.tokens.size-1&&a.push(h.text.toString());return a.join("")}reduceToSingleOperationPerIndex(t){for(let i=0;i<t.length;i++){let n=t[i];if(n==null||!(n instanceof Rn))continue;let s=n,o=this.getKindOfOps(t,Di,i);for(let l of o)l.index===s.index?(t[l.instructionIndex]=void 0,s.text=l.text.toString()+(s.text!=null?s.text.toString():"")):l.index>s.index&&l.index<=s.lastIndex&&(t[l.instructionIndex]=void 0);let a=this.getKindOfOps(t,Rn,i);for(let l of a){if(l.index>=s.index&&l.lastIndex<=s.lastIndex){t[l.instructionIndex]=void 0;continue}let u=l.lastIndex<s.index||l.index>s.lastIndex;if(l.text==null&&s.text==null&&!u)t[l.instructionIndex]=void 0,s.index=Math.min(l.index,s.index),s.lastIndex=Math.max(l.lastIndex,s.lastIndex);else if(!u)throw new Error(`replace op boundaries of ${s} overlap with previous ${l}`)}}for(let i=0;i<t.length;i++){let n=t[i];if(n==null||!(n instanceof Di))continue;let s=n,o=this.getKindOfOps(t,Di,i);for(let l of o)l.index===s.index&&(l instanceof Ap?(s.text=this.catOpText(l.text,s.text),t[l.instructionIndex]=void 0):l instanceof Di&&(s.text=this.catOpText(s.text,l.text),t[l.instructionIndex]=void 0));let a=this.getKindOfOps(t,Rn,i);for(let l of a){if(s.index===l.index){l.text=this.catOpText(s.text,l.text),t[i]=void 0;continue}if(s.index>=l.index&&s.index<=l.lastIndex)throw new Error(`insert op ${s} within boundaries of previous ${l}`)}}let e=new Map;for(let i of t)if(i!=null){if(e.get(i.index)!=null)throw new Error("should only be one op per index");e.set(i.index,i)}return e}catOpText(t,e){let i="",n="";return t!=null&&(i=t.toString()),e!=null&&(n=e.toString()),i+n}getKindOfOps(t,e,i){let n=[];for(let s=0;s<i&&s<t.length;s++){let o=t[s];o!=null&&o instanceof e&&n.push(o)}return n}}qn.TokenStreamRewriter=de;de.DEFAULT_PROGRAM_NAME="default";de.PROGRAM_INIT_SIZE=100;de.MIN_TOKEN_INDEX=0;class Du{constructor(t,e,i,n){this.tokens=t,this.instructionIndex=i,this.index=e,this.text=n===void 0?"":n}execute(t){return this.index}toString(){let t=this.constructor.name,e=t.indexOf("$");return t=t.substring(e+1,t.length),"<"+t+"@"+this.tokens.get(this.index)+':"'+this.text+'">'}}Iu([Pu.Override],Du.prototype,"toString",null);qn.RewriteOperation=Du;class Di extends Du{constructor(t,e,i,n){super(t,e,i,n)}execute(t){return t.push(this.text.toString()),this.tokens.get(this.index).type!==u_.Token.EOF&&t.push(String(this.tokens.get(this.index).text)),this.index+1}}Iu([Pu.Override],Di.prototype,"execute",null);class Ap extends Di{constructor(t,e,i,n){super(t,e+1,i,n)}}class Rn extends Du{constructor(t,e,i,n,s){super(t,e,n,s),this.lastIndex=i}execute(t){return this.text!=null&&t.push(this.text.toString()),this.lastIndex+1}toString(){return this.text==null?"<DeleteOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+">":"<ReplaceOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+':"'+this.text+'">'}}Iu([Pu.Override],Rn.prototype,"execute",null);Iu([Pu.Override],Rn.prototype,"toString",null);var h_={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(h_,"__esModule",{value:!0});var c_={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(c_,"__esModule",{value:!0});(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s),Object.defineProperty(i,o,{enumerable:!0,get:function(){return n[s]}})}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),e=S&&S.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&t(n,i,s)};Object.defineProperty(r,"__esModule",{value:!0}),e(sx,r),e(ox,r),e(Gl,r),e(t_(),r),e(Ta,r),e(e_,r),e(Tu,r),e(Yc,r),e(ya,r),e(fi,r),e(Wl,r),e(as,r),e(Jo,r),e(Zc(),r),e(r_,r),e(bu,r),e(Zn,r),e(nn,r),e(Sa,r),e(Xr,r),e(mi(),r),e(Cu,r),e(un,r),e(Ea,r),e(Su(),r),e(Ca(),r),e(n_,r),e(Zx(),r),e(ar(),r),e(ts,r),e(va,r),e(Ar,r),e(pi,r),e($c(),r),e(Nu,r),e(wu,r),e(Ru,r),e(St,r),e(o_,r),e(a_,r),e(l_,r),e(qn,r),e(h_,r),e(Wr,r),e(c_,r)})(To);var d_=Cr(),Ou=zc(),f_=mi(),p_=tu();$c();var ct;let qb=(ct=class extends f_.Lexer{get vocabulary(){return ct.VOCABULARY}constructor(t){super(t),this._interp=new p_.LexerATNSimulator(ct._ATN,this)}get grammarFileName(){return"ScriptGrammar.g4"}get ruleNames(){return ct.ruleNames}get serializedATN(){return ct._serializedATN}get channelNames(){return ct.channelNames}get modeNames(){return ct.modeNames}static get _ATN(){return ct.__ATN||(ct.__ATN=new Ou.ATNDeserializer().deserialize(qo(ct._serializedATN))),ct.__ATN}},w(ct,"T__0",1),w(ct,"T__1",2),w(ct,"T__2",3),w(ct,"T__3",4),w(ct,"T__4",5),w(ct,"T__5",6),w(ct,"T__6",7),w(ct,"T__7",8),w(ct,"T__8",9),w(ct,"T__9",10),w(ct,"T__10",11),w(ct,"INT",12),w(ct,"TAKE",13),w(ct,"STEPS",14),w(ct,"STEP",15),w(ct,"TO",16),w(ct,"THE",17),w(ct,"RIGHT",18),w(ct,"LEFT",19),w(ct,"UP",20),w(ct,"DOWN",21),w(ct,"IF",22),w(ct,"THEN",23),w(ct,"END",24),w(ct,"MULTIPLY",25),w(ct,"DIVIDE",26),w(ct,"BY",27),w(ct,"PLUS",28),w(ct,"MINUS",29),w(ct,"SET",30),w(ct,"REMAIND",31),w(ct,"CAN",32),w(ct,"GO",33),w(ct,"EQUAL",34),w(ct,"NOT",35),w(ct,"LESS",36),w(ct,"GREATER",37),w(ct,"THAN",38),w(ct,"OR",39),w(ct,"ID",40),w(ct,"WS",41),w(ct,"channelNames",["DEFAULT_TOKEN_CHANNEL","HIDDEN"]),w(ct,"modeNames",["DEFAULT_MODE"]),w(ct,"ruleNames",["T__0","T__1","T__2","T__3","T__4","T__5","T__6","T__7","T__8","T__9","T__10","INT","TAKE","STEPS","STEP","TO","THE","RIGHT","LEFT","UP","DOWN","IF","THEN","END","MULTIPLY","DIVIDE","BY","PLUS","MINUS","SET","REMAIND","CAN","GO","EQUAL","NOT","LESS","GREATER","THAN","OR","ID","WS"]),w(ct,"_LITERAL_NAMES",[void 0,"'*'","'/'","'%'","'+'","'-'","'=='","'!='","'>'","'<'","'>='","'<='",void 0,"'take'","'steps'","'step'","'to'","'the'","'right'","'left'","'up'","'down'","'if'","'then'","'end'","'multiply'","'divide'","'by'","'plus'","'minus'","'set'","'remaind'","'can'","'go'","'equal'","'not'","'less'","'greater'","'than'","'or'"]),w(ct,"_SYMBOLIC_NAMES",[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"INT","TAKE","STEPS","STEP","TO","THE","RIGHT","LEFT","UP","DOWN","IF","THEN","END","MULTIPLY","DIVIDE","BY","PLUS","MINUS","SET","REMAIND","CAN","GO","EQUAL","NOT","LESS","GREATER","THAN","OR","ID","WS"]),w(ct,"VOCABULARY",new ta(ct._LITERAL_NAMES,ct._SYMBOLIC_NAMES,[])),w(ct,"_serializedATN",`+\b					\x07	\x07\b	\b			
	
\v	\v\f	\f\r	\r													\x1B	\x1B				 	 !	!"	"#	#$	$%	%&	&'	'(	()	)*	*\x07\x07\x07\b\b\b		

\v\v\v\f\f\f\r\rq
\r\r\r\rr\x1B\x1B\x1B\x1B\x1B\x1B\x1B        !!!!"""######$$$$%%%%%&&&&&&&&'''''((())\x07)
)\f))\v)**
*\r****+\x07	\v\x07\r\b	
\v\f\r\x1B!#%')+-/13\x1B579;= ?!A"C#E$G%I&K'M(O)Q*S+2;C\\aac|2;C\\aac|\v\f""\x07	\v\r\x1B!#%')+-/13579;=?ACEGIKMOQSUW\x07Y	[\v]\r_begilp\x1Bty!#%')+-/13579;=?ACEGIKMOQSUV\x07,VWX\x071XYZ\x07'Z\b[\\\x07-\\
]^\x07/^\f_\`\x07?\`a\x07?abc\x07#cd\x07?def\x07@fgh\x07>hij\x07@jk\x07?klm\x07>mn\x07?noq	poqrrprsstu\x07vuv\x07cvw\x07mwx\x07gxyz\x07uz{\x07v{|\x07g|}\x07r}~\x07u~\x07u\x07v\x07g\x07r \x07v\x07q"\x07v\x07j\x07g$\x07t\x07k\x07i\x07j\x07v&\x07n\x07g\x07h\x07v(\x07w\x07r*\x07f\x07q\x07y\x07p,\x07k\x07h.\x07v\x07j\x07g\x07p0\x07g\x07p\x07f2\x07o\x07w\x07n\x07v\x07k\x07r\x07n\x07{4\x07f\x07k\x07x\x07k\x07f\x07g6\x07d\x07{8\x07r\x07n\x07w\x07u:\x07o\x07k\x07p\x07w\x07u<\x07u\x07g\x07v>\x07t\x07g\x07o\x07c\x07k\x07p\x07f@\x07e\x07c\x07pB\x07i\x07qD\x07g\x07s\x07w\x07c\x07nF\x07p\x07q\x07vH\x07n\x07g\x07u\x07uJ\x07i\x07t\x07g\x07c\x07v\x07g\x07tL\x07v\x07j\x07c\x07pN\x07q\x07tP		R	\b*Tr\b`),w(ct,"__ATN"),ct);var Pl=Su(),x_=Ca(),Ue=ar(),__=xa(),m_={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(m_,"__esModule",{value:!0});var g_={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(g_,"__esModule",{value:!0});var j;let mt=(j=class extends x_.Parser{get vocabulary(){return j.VOCABULARY}get grammarFileName(){return"ScriptGrammar.g4"}get ruleNames(){return j.ruleNames}get serializedATN(){return j._serializedATN}createFailedPredicateException(t,e){return new Oc(this,t,e)}constructor(t){super(t),this._interp=new __.ParserATNSimulator(j._ATN,this)}program(){let t=new Yb(this._ctx,this.state);this.enterRule(t,0,j.RULE_program);let e;try{for(this.enterOuterAlt(t,1),this.state=15,this._errHandler.sync(this),e=this._input.LA(1);!(e&-32)&&1<<e&(1<<j.TAKE|1<<j.IF|1<<j.SET);)this.state=12,this.statement(),this.state=17,this._errHandler.sync(this),e=this._input.LA(1)}catch(i){if(i instanceof Re)t.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return t}statement(){let t=new $o(this._ctx,this.state);this.enterRule(t,2,j.RULE_statement);try{switch(this.state=21,this._errHandler.sync(this),this._input.LA(1)){case j.TAKE:this.enterOuterAlt(t,1),this.state=18,this.takeSteps();break;case j.IF:this.enterOuterAlt(t,2),this.state=19,this.condition();break;case j.SET:this.enterOuterAlt(t,3),this.state=20,this.local();break;default:throw new Pl.NoViableAltException(this)}}catch(e){if(e instanceof Re)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t}takeSteps(){let t=new Fu(this._ctx,this.state);this.enterRule(t,4,j.RULE_takeSteps);let e;try{switch(this.state=35,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,2,this._ctx)){case 1:t=new Kb(t),this.enterOuterAlt(t,1),this.state=23,this.match(j.TAKE),this.state=24,t._num=this.expression(0),this.state=25,this.match(j.STEPS),this.state=26,this.match(j.TO),this.state=27,this.match(j.THE),this.state=28,t._direction=this._input.LT(1),e=this._input.LA(1),!(e&-32)&&1<<e&(1<<j.RIGHT|1<<j.LEFT|1<<j.UP|1<<j.DOWN)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):t._direction=this._errHandler.recoverInline(this);break;case 2:t=new Zb(t),this.enterOuterAlt(t,2),this.state=30,this.match(j.TAKE),this.state=31,this.match(j.STEP),this.state=32,this.match(j.TO),this.state=33,this.match(j.THE),this.state=34,t._direction=this._input.LT(1),e=this._input.LA(1),!(e&-32)&&1<<e&(1<<j.RIGHT|1<<j.LEFT|1<<j.UP|1<<j.DOWN)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):t._direction=this._errHandler.recoverInline(this);break}}catch(i){if(i instanceof Re)t.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return t}condition(){let t=new v_(this._ctx,this.state);this.enterRule(t,6,j.RULE_condition);let e;try{this.enterOuterAlt(t,1);{for(this.state=37,this.match(j.IF),this.state=38,this.expression(0),this.state=39,this.match(j.THEN),this.state=43,this._errHandler.sync(this),e=this._input.LA(1);!(e&-32)&&1<<e&(1<<j.TAKE|1<<j.IF|1<<j.SET);)this.state=40,this.statement(),this.state=45,this._errHandler.sync(this),e=this._input.LA(1);this.state=46,this.match(j.END)}}catch(i){if(i instanceof Re)t.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return t}expression(t){t===void 0&&(t=0);let e=this._ctx,i=this.state,n=new Gt(this._ctx,i),s=n,o=8;this.enterRecursionRule(n,8,j.RULE_expression,t);let a;try{let l;this.enterOuterAlt(n,1);{switch(this.state=56,this._errHandler.sync(this),this._input.LA(1)){case j.CAN:n=new Qb(n),this._ctx=n,s=n,this.state=49,this.match(j.CAN),this.state=50,this.match(j.GO),this.state=51,this.match(j.TO),this.state=52,this.match(j.THE),this.state=53,n._direction=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<j.RIGHT|1<<j.LEFT|1<<j.UP|1<<j.DOWN)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._direction=this._errHandler.recoverInline(this);break;case j.ID:n=new Jb(n),this._ctx=n,s=n,this.state=54,this.match(j.ID);break;case j.INT:n=new tC(n),this._ctx=n,s=n,this.state=55,this.match(j.INT);break;default:throw new Pl.NoViableAltException(this)}for(this._ctx._stop=this._input.tryLT(-1),this.state=93,this._errHandler.sync(this),l=this.interpreter.adaptivePredict(this._input,6,this._ctx);l!==2&&l!==d_.ATN.INVALID_ALT_NUMBER;){if(l===1)switch(this._parseListeners!=null&&this.triggerExitRuleEvent(),s=n,this.state=91,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,5,this._ctx)){case 1:{if(n=new Ph(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,j.RULE_expression),this.state=58,!this.precpred(this._ctx,11))throw this.createFailedPredicateException("this.precpred(this._ctx, 11)");this.state=59,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<j.T__0|1<<j.T__1|1<<j.T__2)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=60,n._right=this.expression(12)}break;case 2:{if(n=new Ph(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,j.RULE_expression),this.state=61,!this.precpred(this._ctx,10))throw this.createFailedPredicateException("this.precpred(this._ctx, 10)");this.state=62,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<j.MULTIPLY|1<<j.DIVIDE|1<<j.REMAIND)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=63,this.match(j.BY),this.state=64,n._right=this.expression(11)}break;case 3:{if(n=new Ph(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,j.RULE_expression),this.state=65,!this.precpred(this._ctx,9))throw this.createFailedPredicateException("this.precpred(this._ctx, 9)");this.state=66,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<j.T__3|1<<j.T__4|1<<j.PLUS|1<<j.MINUS)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=67,n._right=this.expression(10)}break;case 4:{if(n=new xo(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,j.RULE_expression),this.state=68,!this.precpred(this._ctx,8))throw this.createFailedPredicateException("this.precpred(this._ctx, 8)");this.state=69,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<j.T__5|1<<j.T__6|1<<j.T__7|1<<j.T__8|1<<j.T__9|1<<j.T__10)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=70,n._right=this.expression(9)}break;case 5:{if(n=new xo(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,j.RULE_expression),this.state=71,!this.precpred(this._ctx,7))throw this.createFailedPredicateException("this.precpred(this._ctx, 7)");this.state=72,n._op=this.match(j.NOT),this.state=73,this.match(j.EQUAL),this.state=74,this.match(j.TO),this.state=75,n._right=this.expression(8)}break;case 6:{if(n=new xo(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,j.RULE_expression),this.state=76,!this.precpred(this._ctx,6))throw this.createFailedPredicateException("this.precpred(this._ctx, 6)");this.state=77,n._op=this.match(j.EQUAL),this.state=78,this.match(j.TO),this.state=79,n._right=this.expression(7)}break;case 7:{if(n=new xo(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,j.RULE_expression),this.state=80,!this.precpred(this._ctx,5))throw this.createFailedPredicateException("this.precpred(this._ctx, 5)");this.state=81,n._op=this._input.LT(1),a=this._input.LA(1),a===j.LESS||a===j.GREATER?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=82,this.match(j.THAN),this.state=83,n._right=this.expression(6)}break;case 8:{if(n=new xo(new Gt(e,i)),n._left=s,this.pushNewRecursionContext(n,o,j.RULE_expression),this.state=84,!this.precpred(this._ctx,4))throw this.createFailedPredicateException("this.precpred(this._ctx, 4)");this.state=85,n._op=this._input.LT(1),a=this._input.LA(1),a===j.LESS||a===j.GREATER?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=86,this.match(j.THAN),this.state=87,this.match(j.OR),this.state=88,n._eq=this.match(j.EQUAL),this.state=89,this.match(j.TO),this.state=90,n._right=this.expression(5)}break}this.state=95,this._errHandler.sync(this),l=this.interpreter.adaptivePredict(this._input,6,this._ctx)}}}catch(l){if(l instanceof Re)n.exception=l,this._errHandler.reportError(this,l),this._errHandler.recover(this,l);else throw l}finally{this.unrollRecursionContexts(e)}return n}local(){let t=new y_(this._ctx,this.state);this.enterRule(t,10,j.RULE_local);try{this.enterOuterAlt(t,1),this.state=96,this.match(j.SET),this.state=97,t._id=this.match(j.ID),this.state=98,this.match(j.TO),this.state=99,this.expression(0)}catch(e){if(e instanceof Re)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t}sempred(t,e,i){switch(e){case 4:return this.expression_sempred(t,i)}return!0}expression_sempred(t,e){switch(e){case 0:return this.precpred(this._ctx,11);case 1:return this.precpred(this._ctx,10);case 2:return this.precpred(this._ctx,9);case 3:return this.precpred(this._ctx,8);case 4:return this.precpred(this._ctx,7);case 5:return this.precpred(this._ctx,6);case 6:return this.precpred(this._ctx,5);case 7:return this.precpred(this._ctx,4)}return!0}static get _ATN(){return j.__ATN||(j.__ATN=new Ou.ATNDeserializer().deserialize(qo(j._serializedATN))),j.__ATN}},w(j,"T__0",1),w(j,"T__1",2),w(j,"T__2",3),w(j,"T__3",4),w(j,"T__4",5),w(j,"T__5",6),w(j,"T__6",7),w(j,"T__7",8),w(j,"T__8",9),w(j,"T__9",10),w(j,"T__10",11),w(j,"INT",12),w(j,"TAKE",13),w(j,"STEPS",14),w(j,"STEP",15),w(j,"TO",16),w(j,"THE",17),w(j,"RIGHT",18),w(j,"LEFT",19),w(j,"UP",20),w(j,"DOWN",21),w(j,"IF",22),w(j,"THEN",23),w(j,"END",24),w(j,"MULTIPLY",25),w(j,"DIVIDE",26),w(j,"BY",27),w(j,"PLUS",28),w(j,"MINUS",29),w(j,"SET",30),w(j,"REMAIND",31),w(j,"CAN",32),w(j,"GO",33),w(j,"EQUAL",34),w(j,"NOT",35),w(j,"LESS",36),w(j,"GREATER",37),w(j,"THAN",38),w(j,"OR",39),w(j,"ID",40),w(j,"WS",41),w(j,"RULE_program",0),w(j,"RULE_statement",1),w(j,"RULE_takeSteps",2),w(j,"RULE_condition",3),w(j,"RULE_expression",4),w(j,"RULE_local",5),w(j,"ruleNames",["program","statement","takeSteps","condition","expression","local"]),w(j,"_LITERAL_NAMES",[void 0,"'*'","'/'","'%'","'+'","'-'","'=='","'!='","'>'","'<'","'>='","'<='",void 0,"'take'","'steps'","'step'","'to'","'the'","'right'","'left'","'up'","'down'","'if'","'then'","'end'","'multiply'","'divide'","'by'","'plus'","'minus'","'set'","'remaind'","'can'","'go'","'equal'","'not'","'less'","'greater'","'than'","'or'"]),w(j,"_SYMBOLIC_NAMES",[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"INT","TAKE","STEPS","STEP","TO","THE","RIGHT","LEFT","UP","DOWN","IF","THEN","END","MULTIPLY","DIVIDE","BY","PLUS","MINUS","SET","REMAIND","CAN","GO","EQUAL","NOT","LESS","GREATER","THAN","OR","ID","WS"]),w(j,"VOCABULARY",new ta(j._LITERAL_NAMES,j._SYMBOLIC_NAMES,[])),w(j,"_serializedATN",`+h					\x07	\x07\x07
\f\v
&
\x07,
\f/\v;
\x07^
\fa\v\x07\x07\x07\x07\x07\x07
\b\b
\f\b\x1B!!\x07\b\r&'p%\b'
:\fb\b\f\x07\x07\x1B
\x1B\x07\x07\x07	& !\x07!"\x07"#\x07#$\x07$&	%% &\x07'(\x07()
)-\x07*,+*,/-+-..0/-01\x071	23\b34\x07"45\x07#56\x0767\x077;	8;\x07*9;\x07:2:8:9;_<=\f\r=>	>^
?@\f\f@A	AB\x07B^
\rCD\f\vDE	E^
\fFG\f
GH	H^
\vIJ\f	JK\x07%KL\x07$LM\x07M^

NO\f\bOP\x07$PQ\x07Q^
	RS\f\x07ST	\x07TU\x07(U^
\bVW\fWX	\x07XY\x07(YZ\x07)Z[\x07$[\\\x07\\^
\x07]<]?]C]F]I]N]R]V^a_]_\`\`\va_bc\x07 cd\x07*de\x07ef
f\r	%-:]_`),w(j,"__ATN"),j),Yb=class extends Ue.ParserRuleContext{statement(t){return t===void 0?this.getRuleContexts($o):this.getRuleContext(t,$o)}constructor(t,e){super(t,e)}get ruleIndex(){return mt.RULE_program}enterRule(t){t.enterProgram&&t.enterProgram(this)}exitRule(t){t.exitProgram&&t.exitProgram(this)}accept(t){return t.visitProgram?t.visitProgram(this):t.visitChildren(this)}},$o=class extends Ue.ParserRuleContext{takeSteps(){return this.tryGetRuleContext(0,Fu)}condition(){return this.tryGetRuleContext(0,v_)}local(){return this.tryGetRuleContext(0,y_)}constructor(t,e){super(t,e)}get ruleIndex(){return mt.RULE_statement}enterRule(t){t.enterStatement&&t.enterStatement(this)}exitRule(t){t.exitStatement&&t.exitStatement(this)}accept(t){return t.visitStatement?t.visitStatement(this):t.visitChildren(this)}},Fu=class extends Ue.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return mt.RULE_takeSteps}copyFrom(t){super.copyFrom(t)}},Kb=class extends Fu{constructor(e){super(e.parent,e.invokingState);w(this,"_num");w(this,"_direction");this.copyFrom(e)}TAKE(){return this.getToken(mt.TAKE,0)}STEPS(){return this.getToken(mt.STEPS,0)}TO(){return this.getToken(mt.TO,0)}THE(){return this.getToken(mt.THE,0)}expression(){return this.getRuleContext(0,Gt)}RIGHT(){return this.tryGetToken(mt.RIGHT,0)}LEFT(){return this.tryGetToken(mt.LEFT,0)}UP(){return this.tryGetToken(mt.UP,0)}DOWN(){return this.tryGetToken(mt.DOWN,0)}enterRule(e){e.enterManySteps&&e.enterManySteps(this)}exitRule(e){e.exitManySteps&&e.exitManySteps(this)}accept(e){return e.visitManySteps?e.visitManySteps(this):e.visitChildren(this)}},Zb=class extends Fu{constructor(e){super(e.parent,e.invokingState);w(this,"_direction");this.copyFrom(e)}TAKE(){return this.getToken(mt.TAKE,0)}STEP(){return this.getToken(mt.STEP,0)}TO(){return this.getToken(mt.TO,0)}THE(){return this.getToken(mt.THE,0)}RIGHT(){return this.tryGetToken(mt.RIGHT,0)}LEFT(){return this.tryGetToken(mt.LEFT,0)}UP(){return this.tryGetToken(mt.UP,0)}DOWN(){return this.tryGetToken(mt.DOWN,0)}enterRule(e){e.enterOneStep&&e.enterOneStep(this)}exitRule(e){e.exitOneStep&&e.exitOneStep(this)}accept(e){return e.visitOneStep?e.visitOneStep(this):e.visitChildren(this)}},v_=class extends Ue.ParserRuleContext{IF(){return this.getToken(mt.IF,0)}expression(){return this.getRuleContext(0,Gt)}THEN(){return this.getToken(mt.THEN,0)}END(){return this.getToken(mt.END,0)}statement(t){return t===void 0?this.getRuleContexts($o):this.getRuleContext(t,$o)}constructor(t,e){super(t,e)}get ruleIndex(){return mt.RULE_condition}enterRule(t){t.enterCondition&&t.enterCondition(this)}exitRule(t){t.exitCondition&&t.exitCondition(this)}accept(t){return t.visitCondition?t.visitCondition(this):t.visitChildren(this)}},Gt=class extends Ue.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return mt.RULE_expression}copyFrom(t){super.copyFrom(t)}},Ph=class extends Gt{constructor(e){super(e.parent,e.invokingState);w(this,"_left");w(this,"_op");w(this,"_right");this.copyFrom(e)}expression(e){return e===void 0?this.getRuleContexts(Gt):this.getRuleContext(e,Gt)}BY(){return this.tryGetToken(mt.BY,0)}MULTIPLY(){return this.tryGetToken(mt.MULTIPLY,0)}DIVIDE(){return this.tryGetToken(mt.DIVIDE,0)}REMAIND(){return this.tryGetToken(mt.REMAIND,0)}PLUS(){return this.tryGetToken(mt.PLUS,0)}MINUS(){return this.tryGetToken(mt.MINUS,0)}enterRule(e){e.enterBinaryExpression&&e.enterBinaryExpression(this)}exitRule(e){e.exitBinaryExpression&&e.exitBinaryExpression(this)}accept(e){return e.visitBinaryExpression?e.visitBinaryExpression(this):e.visitChildren(this)}},xo=class extends Gt{constructor(e){super(e.parent,e.invokingState);w(this,"_left");w(this,"_op");w(this,"_right");w(this,"_eq");this.copyFrom(e)}expression(e){return e===void 0?this.getRuleContexts(Gt):this.getRuleContext(e,Gt)}EQUAL(){return this.tryGetToken(mt.EQUAL,0)}TO(){return this.tryGetToken(mt.TO,0)}NOT(){return this.tryGetToken(mt.NOT,0)}THAN(){return this.tryGetToken(mt.THAN,0)}GREATER(){return this.tryGetToken(mt.GREATER,0)}LESS(){return this.tryGetToken(mt.LESS,0)}OR(){return this.tryGetToken(mt.OR,0)}enterRule(e){e.enterLogicalExpression&&e.enterLogicalExpression(this)}exitRule(e){e.exitLogicalExpression&&e.exitLogicalExpression(this)}accept(e){return e.visitLogicalExpression?e.visitLogicalExpression(this):e.visitChildren(this)}},Qb=class extends Gt{constructor(e){super(e.parent,e.invokingState);w(this,"_direction");this.copyFrom(e)}CAN(){return this.getToken(mt.CAN,0)}GO(){return this.getToken(mt.GO,0)}TO(){return this.getToken(mt.TO,0)}THE(){return this.getToken(mt.THE,0)}RIGHT(){return this.tryGetToken(mt.RIGHT,0)}LEFT(){return this.tryGetToken(mt.LEFT,0)}UP(){return this.tryGetToken(mt.UP,0)}DOWN(){return this.tryGetToken(mt.DOWN,0)}enterRule(e){e.enterCanExpr&&e.enterCanExpr(this)}exitRule(e){e.exitCanExpr&&e.exitCanExpr(this)}accept(e){return e.visitCanExpr?e.visitCanExpr(this):e.visitChildren(this)}},Jb=class extends Gt{ID(){return this.getToken(mt.ID,0)}constructor(t){super(t.parent,t.invokingState),this.copyFrom(t)}enterRule(t){t.enterIdExpr&&t.enterIdExpr(this)}exitRule(t){t.exitIdExpr&&t.exitIdExpr(this)}accept(t){return t.visitIdExpr?t.visitIdExpr(this):t.visitChildren(this)}},tC=class extends Gt{INT(){return this.getToken(mt.INT,0)}constructor(t){super(t.parent,t.invokingState),this.copyFrom(t)}enterRule(t){t.enterIntExpr&&t.enterIntExpr(this)}exitRule(t){t.exitIntExpr&&t.exitIntExpr(this)}accept(t){return t.visitIntExpr?t.visitIntExpr(this):t.visitChildren(this)}},y_=class extends Ue.ParserRuleContext{constructor(e,i){super(e,i);w(this,"_id")}SET(){return this.getToken(mt.SET,0)}TO(){return this.getToken(mt.TO,0)}expression(){return this.getRuleContext(0,Gt)}ID(){return this.getToken(mt.ID,0)}get ruleIndex(){return mt.RULE_local}enterRule(e){e.enterLocal&&e.enterLocal(this)}exitRule(e){e.exitLocal&&e.exitLocal(this)}accept(e){return e.visitLocal?e.visitLocal(this):e.visitChildren(this)}};var Qc={},Lu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Na=S&&S.__decorate||function(r,t,e,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},wa=S&&S.__param||function(r,t){return function(e,i){t(e,i,r)}};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.AbstractParseTreeVisitor=void 0;const $r=z;class cs{visit(t){return t.accept(this)}visitChildren(t){let e=this.defaultResult(),i=t.childCount;for(let n=0;n<i&&this.shouldVisitNextChild(t,e);n++){let o=t.getChild(n).accept(this);e=this.aggregateResult(e,o)}return e}visitTerminal(t){return this.defaultResult()}visitErrorNode(t){return this.defaultResult()}aggregateResult(t,e){return e}shouldVisitNextChild(t,e){return!0}}Na([$r.Override,wa(0,$r.NotNull)],cs.prototype,"visit",null);Na([$r.Override,wa(0,$r.NotNull)],cs.prototype,"visitChildren",null);Na([$r.Override,wa(0,$r.NotNull)],cs.prototype,"visitTerminal",null);Na([$r.Override,wa(0,$r.NotNull)],cs.prototype,"visitErrorNode",null);Na([wa(0,$r.NotNull)],cs.prototype,"shouldVisitNextChild",null);Lu.AbstractParseTreeVisitor=cs;var T_={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(T_,"__esModule",{value:!0});var Bu={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Bu,"__esModule",{value:!0});Bu.ParseTreeProperty=void 0;class eC{constructor(t="ParseTreeProperty"){this._symbol=Symbol(t)}get(t){return t[this._symbol]}set(t,e){t[this._symbol]=e}removeFrom(t){let e=t[this._symbol];return delete t[this._symbol],e}}Bu.ParseTreeProperty=eC;var E_={};(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.ParseTreeWalker=void 0;const t=vi,e=sr,i=yi;class n{walk(o,a){let l=[],u=[],h=a,c=0;for(;h;){if(h instanceof t.ErrorNode?o.visitErrorNode&&o.visitErrorNode(h):h instanceof e.TerminalNode?o.visitTerminal&&o.visitTerminal(h):this.enterRule(o,h),h.childCount>0){l.push(h),u.push(c),c=0,h=h.getChild(0);continue}do{if(h instanceof i.RuleNode&&this.exitRule(o,h),l.length===0){h=void 0,c=0;break}let d=l[l.length-1];if(c++,h=c<d.childCount?d.getChild(c):void 0,h)break;h=l.pop(),c=u.pop()}while(h)}}enterRule(o,a){let l=a.ruleContext;o.enterEveryRule&&o.enterEveryRule(l),l.enterRule(o)}exitRule(o,a){let l=a.ruleContext;l.exitRule(o),o.exitEveryRule&&o.exitEveryRule(l)}}r.ParseTreeWalker=n,function(s){s.DEFAULT=new s}(n=r.ParseTreeWalker||(r.ParseTreeWalker={}))})(E_);var A_={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(A_,"__esModule",{value:!0});var S_={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(S_,"__esModule",{value:!0});(function(r){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var t=S&&S.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s),Object.defineProperty(i,o,{enumerable:!0,get:function(){return n[s]}})}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),e=S&&S.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&t(n,i,s)};Object.defineProperty(r,"__esModule",{value:!0}),e(Lu,r),e(vi,r),e(T_,r),e(m_,r),e(Bu,r),e(g_,r),e(E_,r),e(yi,r),e(A_,r),e(sr,r),e(S_,r),e(Ti(),r)})(Qc);let rC=class extends Qc.AbstractParseTreeVisitor{constructor(){super(...arguments);w(this,"names",[]);w(this,"code",[])}defaultResult(){return{}}getCode(){return this.code}visitBinaryExpression(e){const i=e._op.text;switch(this.visit(e._right),this.visit(e._left),i){case"*":case"multiply":this.code.push(new Y0);break;case"/":case"divide":this.code.push(new q0);break;case"+":case"plus":this.code.push(new V0);break;case"-":case"minus":this.code.push(new W0);break}}visitLogicalExpression(e){const i=e._op.text,n=e._eq;if(this.visit(e._right),this.visit(e._left),n)switch(i){case">":case"greater":this.code.push(new ex);break;case"<":case"less":this.code.push(new tx);break}else switch(i){case"==":case"equal":this.code.push(new K0);break;case"!=":case"not":this.code.push(new Z0);break;case">":case"greater":this.code.push(new J0);break;case"<":case"less":this.code.push(new Q0);break}}visitCanExpr(e){let i=this.getDirectionIdx(e);this.code.push(new si(i)),this.code.push(new Mn(_r.Can))}visitCondition(e){this.visit(e.expression());const i=new rx(0);this.code.push(i);for(const n of e.statement())this.visit(n);i.to=this.code.length}visitExpression(e){this.visit(e)}visitIdExpr(e){const i=e.ID().text;if(!this.hasName(i))throw new Error("The name doesn't exist");this.code.push(new nx(this.nameIdx(i)))}visitIntExpr(e){this.code.push(new si(Number(e.INT().text)))}visitLocal(e){const i=e._id.text;this.hasName(i)||this.names.push(i);const n=this.nameIdx(i);this.visit(e.expression()),this.code.push(new ix(n))}visitManySteps(e){let i=this.getDirectionIdx(e);this.visit(e.expression()),this.code.push(new si(i)),this.code.push(new Mn(_r.Step))}visitOneStep(e){let i=this.getDirectionIdx(e);this.code.push(new si(i)),this.code.push(new Mn(_r.OneStep))}visitProgram(e){return this.visitChildren(e)}visitStatement(e){return this.visitChildren(e)}visitTakeSteps(e){return this.visitChildren(e)}hasName(e){return this.nameIdx(e)!=-1}nameIdx(e){return this.names.findIndex(i=>i===e)}getDirectionIdx(e){const i=e._direction.text;let n=0;switch(i){case"up":n=ie.Up;break;case"down":n=ie.Down;break;case"left":n=ie.Left;break;case"right":n=ie.Right;break}return n}};const ge=class extends f_.Lexer{get vocabulary(){return ge.VOCABULARY}constructor(t){super(t),this._interp=new p_.LexerATNSimulator(ge._ATN,this)}get grammarFileName(){return"ScriptGrammar.g4"}get ruleNames(){return ge.ruleNames}get serializedATN(){return ge._serializedATN}get channelNames(){return ge.channelNames}get modeNames(){return ge.modeNames}static get _ATN(){return ge.__ATN||(ge.__ATN=new Ou.ATNDeserializer().deserialize(qo(ge._serializedATN))),ge.__ATN}};let yt=ge;w(yt,"T__0",1),w(yt,"T__1",2),w(yt,"T__2",3),w(yt,"T__3",4),w(yt,"T__4",5),w(yt,"T__5",6),w(yt,"T__6",7),w(yt,"T__7",8),w(yt,"T__8",9),w(yt,"T__9",10),w(yt,"T__10",11),w(yt,"T__11",12),w(yt,"INT",13),w(yt,"TAKE",14),w(yt,"STEP",15),w(yt,"STEPS",16),w(yt,"RIGHT",17),w(yt,"LEFT",18),w(yt,"UP",19),w(yt,"DOWN",20),w(yt,"IF",21),w(yt,"THEN",22),w(yt,"END",23),w(yt,"MULTIPLY",24),w(yt,"DIVIDE",25),w(yt,"BY",26),w(yt,"PLUS",27),w(yt,"MINUS",28),w(yt,"SET",29),w(yt,"REMAIND",30),w(yt,"CAN",31),w(yt,"GO",32),w(yt,"EQUAL",33),w(yt,"NOT",34),w(yt,"LESS",35),w(yt,"GREATER",36),w(yt,"THAN",37),w(yt,"OR",38),w(yt,"ID",39),w(yt,"WS",40),w(yt,"channelNames",["DEFAULT_TOKEN_CHANNEL","HIDDEN"]),w(yt,"modeNames",["DEFAULT_MODE"]),w(yt,"ruleNames",["T__0","T__1","T__2","T__3","T__4","T__5","T__6","T__7","T__8","T__9","T__10","T__11","INT","TAKE","STEP","STEPS","RIGHT","LEFT","UP","DOWN","IF","THEN","END","MULTIPLY","DIVIDE","BY","PLUS","MINUS","SET","REMAIND","CAN","GO","EQUAL","NOT","LESS","GREATER","THAN","OR","ID","WS"]),w(yt,"_LITERAL_NAMES",[void 0,"'*'","'/'","'%'","'+'","'-'","'=='","'!='","'>'","'<'","'>='","'<='","''",void 0,"''","''",void 0,"''","''","''","''","''",void 0,"''","''","''","''","''","''","''","''","''","''",void 0,"''","''","''","''","''"]),w(yt,"_SYMBOLIC_NAMES",[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"INT","TAKE","STEP","STEPS","RIGHT","LEFT","UP","DOWN","IF","THEN","END","MULTIPLY","DIVIDE","BY","PLUS","MINUS","SET","REMAIND","CAN","GO","EQUAL","NOT","LESS","GREATER","THAN","OR","ID","WS"]),w(yt,"VOCABULARY",new ta(ge._LITERAL_NAMES,ge._SYMBOLIC_NAMES,[])),w(yt,"_serializedATN",`*\b					\x07	\x07\b	\b			
	
\v	\v\f	\f\r	\r													\x1B	\x1B				 	 !	!"	"#	#$	$%	%&	&'	'(	()	)\x07\x07\x07\b\b\b		

\v\v\v\f\f\f\r\rq
\rr

\x1B\x1B\x1B      !!!!!!!"""""""""""
"###$$$$$$$%%%%%%%&&&&''''((\x07(
(\f((\v())
)\r))))*\x07	\v\x07\r\b	
\v\f\r\x1B!#%')+-/13\x1B579;= ?!A"C#E$G%I&K'M(O)Q*2;C\\aac|\x072;C\\aac|\v\f""\x07	\v\r\x1B!#%')+-/13579;=?ACEGIKMOQSU\x07W	Y\v[\r]\`cegjm\x1Bpt|!#%')+-/13579;=?ACEGIKMOQST\x07,TUV\x071VWX\x07'X\bYZ\x07-Z
[\\\x07/\\\f]^\x07?^_\x07?_\`a\x07#ab\x07?bcd\x07@def\x07>fgh\x07@hi\x07?ijk\x07>kl\x07?lmn\x07noq	poqrrprsstu\x07uv\x07vw\x07wx\x07xy\x07yz\x07z{\x07{|}\x07}~\x07~\x07 \x07\x07\x07\x07\x07\x07\x07\x07\x07"\x07\x07\x07\x07\x07\x07$\x07\x07\x07\x07\x07&\x07\x07\x07\x07\x07(\x07\x07\x07\x07*\x07\x07\x07\x07,\x07\x07\x07\x07\x07\x07\x07.\x07\x07\x07\x07\x070\x07\x07\x07\x07\x07\x07\x07\x072\x07\x07\x07\x07\x07\x074\x07\x076\x07\x07\x07\x078\x07\x07\x07\x07\x07:\x07\x07\x07\x07\x07\x07\x07\x07\x07\x07<\x07\x07\x07\x07\x07\x07\x07>\x07\x07\x07\x07\x07@\x07\x07\x07\x07\x07\x07B\x07\x07\x07\x07\x07\x07\x07\x07\x07\x07D\x07\x07F\x07\x07\x07\x07\x07\x07H\x07\x07\x07\x07\x07\x07J\x07\x07\x07L\x07\x07\x07N		P	\b)R	r\b`),w(yt,"__ATN");const rt=class extends x_.Parser{get vocabulary(){return rt.VOCABULARY}get grammarFileName(){return"ScriptGrammar.g4"}get ruleNames(){return rt.ruleNames}get serializedATN(){return rt._serializedATN}createFailedPredicateException(t,e){return new Oc(this,t,e)}constructor(t){super(t),this._interp=new __.ParserATNSimulator(rt._ATN,this)}program(){let t=new iC(this._ctx,this.state);this.enterRule(t,0,rt.RULE_program);let e;try{for(this.enterOuterAlt(t,1),this.state=15,this._errHandler.sync(this),e=this._input.LA(1);!(e&-32)&&1<<e&(1<<rt.TAKE|1<<rt.IF|1<<rt.SET);)this.state=12,this.statement(),this.state=17,this._errHandler.sync(this),e=this._input.LA(1)}catch(i){if(i instanceof Re)t.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return t}statement(){let t=new zo(this._ctx,this.state);this.enterRule(t,2,rt.RULE_statement);try{switch(this.state=21,this._errHandler.sync(this),this._input.LA(1)){case rt.TAKE:this.enterOuterAlt(t,1),this.state=18,this.takeSteps();break;case rt.IF:this.enterOuterAlt(t,2),this.state=19,this.condition();break;case rt.SET:this.enterOuterAlt(t,3),this.state=20,this.local();break;default:throw new Pl.NoViableAltException(this)}}catch(e){if(e instanceof Re)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t}takeSteps(){let t=new Mu(this._ctx,this.state);this.enterRule(t,4,rt.RULE_takeSteps);let e;try{switch(this.state=31,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,2,this._ctx)){case 1:t=new nC(t),this.enterOuterAlt(t,1),this.state=23,this.match(rt.TAKE),this.state=24,t._num=this.expression(0),this.state=25,e=this._input.LA(1),e===rt.STEP||e===rt.STEPS?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=26,t._direction=this._input.LT(1),e=this._input.LA(1),!(e&-32)&&1<<e&(1<<rt.RIGHT|1<<rt.LEFT|1<<rt.UP|1<<rt.DOWN)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):t._direction=this._errHandler.recoverInline(this);break;case 2:t=new sC(t),this.enterOuterAlt(t,2),this.state=28,this.match(rt.TAKE),this.state=29,this.match(rt.STEP),this.state=30,t._direction=this._input.LT(1),e=this._input.LA(1),!(e&-32)&&1<<e&(1<<rt.RIGHT|1<<rt.LEFT|1<<rt.UP|1<<rt.DOWN)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):t._direction=this._errHandler.recoverInline(this);break}}catch(i){if(i instanceof Re)t.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return t}condition(){let t=new b_(this._ctx,this.state);this.enterRule(t,6,rt.RULE_condition);let e;try{this.enterOuterAlt(t,1);{for(this.state=33,this.match(rt.IF),this.state=34,this.expression(0),this.state=35,this.match(rt.THEN),this.state=39,this._errHandler.sync(this),e=this._input.LA(1);!(e&-32)&&1<<e&(1<<rt.TAKE|1<<rt.IF|1<<rt.SET);)this.state=36,this.statement(),this.state=41,this._errHandler.sync(this),e=this._input.LA(1);this.state=42,this.match(rt.END)}}catch(i){if(i instanceof Re)t.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i);else throw i}finally{this.exitRule()}return t}expression(t){t===void 0&&(t=0);let e=this._ctx,i=this.state,n=new $t(this._ctx,i),s=n,o=8;this.enterRecursionRule(n,8,rt.RULE_expression,t);let a;try{let l;this.enterOuterAlt(n,1);{switch(this.state=50,this._errHandler.sync(this),this._input.LA(1)){case rt.CAN:n=new oC(n),this._ctx=n,s=n,this.state=45,this.match(rt.CAN),this.state=46,this.match(rt.GO),this.state=47,n._direction=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<rt.RIGHT|1<<rt.LEFT|1<<rt.UP|1<<rt.DOWN)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._direction=this._errHandler.recoverInline(this);break;case rt.ID:n=new aC(n),this._ctx=n,s=n,this.state=48,this.match(rt.ID);break;case rt.INT:n=new lC(n),this._ctx=n,s=n,this.state=49,this.match(rt.INT);break;default:throw new Pl.NoViableAltException(this)}for(this._ctx._stop=this._input.tryLT(-1),this.state=84,this._errHandler.sync(this),l=this.interpreter.adaptivePredict(this._input,6,this._ctx);l!==2&&l!==d_.ATN.INVALID_ALT_NUMBER;){if(l===1)switch(this._parseListeners!=null&&this.triggerExitRuleEvent(),s=n,this.state=82,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,5,this._ctx)){case 1:{if(n=new Dh(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,rt.RULE_expression),this.state=52,!this.precpred(this._ctx,11))throw this.createFailedPredicateException("this.precpred(this._ctx, 11)");this.state=53,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<rt.T__0|1<<rt.T__1|1<<rt.T__2)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=54,n._right=this.expression(12)}break;case 2:{if(n=new Dh(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,rt.RULE_expression),this.state=55,!this.precpred(this._ctx,10))throw this.createFailedPredicateException("this.precpred(this._ctx, 10)");this.state=56,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<rt.MULTIPLY|1<<rt.DIVIDE|1<<rt.REMAIND)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=57,this.match(rt.BY),this.state=58,n._right=this.expression(11)}break;case 3:{if(n=new Dh(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,rt.RULE_expression),this.state=59,!this.precpred(this._ctx,9))throw this.createFailedPredicateException("this.precpred(this._ctx, 9)");this.state=60,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<rt.T__3|1<<rt.T__4|1<<rt.PLUS|1<<rt.MINUS)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=61,n._right=this.expression(10)}break;case 4:{if(n=new _o(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,rt.RULE_expression),this.state=62,!this.precpred(this._ctx,8))throw this.createFailedPredicateException("this.precpred(this._ctx, 8)");this.state=63,n._op=this._input.LT(1),a=this._input.LA(1),!(a&-32)&&1<<a&(1<<rt.T__5|1<<rt.T__6|1<<rt.T__7|1<<rt.T__8|1<<rt.T__9|1<<rt.T__10)?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=64,n._right=this.expression(9)}break;case 5:{if(n=new _o(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,rt.RULE_expression),this.state=65,!this.precpred(this._ctx,7))throw this.createFailedPredicateException("this.precpred(this._ctx, 7)");this.state=66,n._op=this.match(rt.NOT),this.state=67,this.match(rt.EQUAL),this.state=68,n._right=this.expression(8)}break;case 6:{if(n=new _o(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,rt.RULE_expression),this.state=69,!this.precpred(this._ctx,6))throw this.createFailedPredicateException("this.precpred(this._ctx, 6)");this.state=70,n._op=this.match(rt.EQUAL),this.state=71,n._right=this.expression(7)}break;case 7:{if(n=new _o(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,rt.RULE_expression),this.state=72,!this.precpred(this._ctx,5))throw this.createFailedPredicateException("this.precpred(this._ctx, 5)");this.state=73,n._op=this._input.LT(1),a=this._input.LA(1),a===rt.LESS||a===rt.GREATER?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=74,this.match(rt.THAN),this.state=75,n._right=this.expression(6)}break;case 8:{if(n=new _o(new $t(e,i)),n._left=s,this.pushNewRecursionContext(n,o,rt.RULE_expression),this.state=76,!this.precpred(this._ctx,4))throw this.createFailedPredicateException("this.precpred(this._ctx, 4)");this.state=77,n._op=this._input.LT(1),a=this._input.LA(1),a===rt.LESS||a===rt.GREATER?(this._input.LA(1)===St.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):n._op=this._errHandler.recoverInline(this),this.state=78,this.match(rt.THAN),this.state=79,this.match(rt.OR),this.state=80,n._eq=this.match(rt.EQUAL),this.state=81,n._right=this.expression(5)}break}this.state=86,this._errHandler.sync(this),l=this.interpreter.adaptivePredict(this._input,6,this._ctx)}}}catch(l){if(l instanceof Re)n.exception=l,this._errHandler.reportError(this,l),this._errHandler.recover(this,l);else throw l}finally{this.unrollRecursionContexts(e)}return n}local(){let t=new C_(this._ctx,this.state);this.enterRule(t,10,rt.RULE_local);try{this.enterOuterAlt(t,1),this.state=87,this.match(rt.SET),this.state=88,t._id=this.match(rt.ID),this.state=89,this.match(rt.T__11),this.state=90,this.expression(0)}catch(e){if(e instanceof Re)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t}sempred(t,e,i){switch(e){case 4:return this.expression_sempred(t,i)}return!0}expression_sempred(t,e){switch(e){case 0:return this.precpred(this._ctx,11);case 1:return this.precpred(this._ctx,10);case 2:return this.precpred(this._ctx,9);case 3:return this.precpred(this._ctx,8);case 4:return this.precpred(this._ctx,7);case 5:return this.precpred(this._ctx,6);case 6:return this.precpred(this._ctx,5);case 7:return this.precpred(this._ctx,4)}return!0}static get _ATN(){return rt.__ATN||(rt.__ATN=new Ou.ATNDeserializer().deserialize(qo(rt._serializedATN))),rt.__ATN}};let J=rt;w(J,"T__0",1),w(J,"T__1",2),w(J,"T__2",3),w(J,"T__3",4),w(J,"T__4",5),w(J,"T__5",6),w(J,"T__6",7),w(J,"T__7",8),w(J,"T__8",9),w(J,"T__9",10),w(J,"T__10",11),w(J,"T__11",12),w(J,"INT",13),w(J,"TAKE",14),w(J,"STEP",15),w(J,"STEPS",16),w(J,"RIGHT",17),w(J,"LEFT",18),w(J,"UP",19),w(J,"DOWN",20),w(J,"IF",21),w(J,"THEN",22),w(J,"END",23),w(J,"MULTIPLY",24),w(J,"DIVIDE",25),w(J,"BY",26),w(J,"PLUS",27),w(J,"MINUS",28),w(J,"SET",29),w(J,"REMAIND",30),w(J,"CAN",31),w(J,"GO",32),w(J,"EQUAL",33),w(J,"NOT",34),w(J,"LESS",35),w(J,"GREATER",36),w(J,"THAN",37),w(J,"OR",38),w(J,"ID",39),w(J,"WS",40),w(J,"RULE_program",0),w(J,"RULE_statement",1),w(J,"RULE_takeSteps",2),w(J,"RULE_condition",3),w(J,"RULE_expression",4),w(J,"RULE_local",5),w(J,"ruleNames",["program","statement","takeSteps","condition","expression","local"]),w(J,"_LITERAL_NAMES",[void 0,"'*'","'/'","'%'","'+'","'-'","'=='","'!='","'>'","'<'","'>='","'<='","''",void 0,"''","''",void 0,"''","''","''","''","''",void 0,"''","''","''","''","''","''","''","''","''","''",void 0,"''","''","''","''","''"]),w(J,"_SYMBOLIC_NAMES",[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"INT","TAKE","STEP","STEPS","RIGHT","LEFT","UP","DOWN","IF","THEN","END","MULTIPLY","DIVIDE","BY","PLUS","MINUS","SET","REMAIND","CAN","GO","EQUAL","NOT","LESS","GREATER","THAN","OR","ID","WS"]),w(J,"VOCABULARY",new ta(rt._LITERAL_NAMES,rt._SYMBOLIC_NAMES,[])),w(J,"_serializedATN",`*_					\x07	\x07\x07
\f\v
"
\x07(
\f+\v5
\x07U
\fX\v\x07\x07\x07\x07\x07\x07
\b\b
\f	\x1B  \x07\b\r%&g!\b#
4\fY\b\f\x07\x07\x1B
\x1B		"\x07 \x07 "	!!"\x07#$\x07$%
%)\x07&('&(+)')**,+),-\x07-	./\b/0\x07!01\x07"15	25\x07)35\x074.42435V67\f\r78	8U
9:\f\f:;	;<\x07<U
\r=>\f\v>?	?U
\f@A\f
AB	\x07BU
\vCD\f	DE\x07$EF\x07#FU

GH\f\bHI\x07#IU
	JK\f\x07KL	\bLM\x07'MU
\bNO\fOP	\bPQ\x07'QR\x07(RS\x07#SU
\x07T6T9T=T@TCTGTJTNUXVTVWW\vXVYZ\x07Z[\x07)[\\\x07\\]
]\r	!)4TV`),w(J,"__ATN");class iC extends Ue.ParserRuleContext{statement(t){return t===void 0?this.getRuleContexts(zo):this.getRuleContext(t,zo)}constructor(t,e){super(t,e)}get ruleIndex(){return J.RULE_program}enterRule(t){t.enterProgram&&t.enterProgram(this)}exitRule(t){t.exitProgram&&t.exitProgram(this)}accept(t){return t.visitProgram?t.visitProgram(this):t.visitChildren(this)}}class zo extends Ue.ParserRuleContext{takeSteps(){return this.tryGetRuleContext(0,Mu)}condition(){return this.tryGetRuleContext(0,b_)}local(){return this.tryGetRuleContext(0,C_)}constructor(t,e){super(t,e)}get ruleIndex(){return J.RULE_statement}enterRule(t){t.enterStatement&&t.enterStatement(this)}exitRule(t){t.exitStatement&&t.exitStatement(this)}accept(t){return t.visitStatement?t.visitStatement(this):t.visitChildren(this)}}class Mu extends Ue.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return J.RULE_takeSteps}copyFrom(t){super.copyFrom(t)}}class nC extends Mu{constructor(e){super(e.parent,e.invokingState);w(this,"_num");w(this,"_direction");this.copyFrom(e)}TAKE(){return this.getToken(J.TAKE,0)}expression(){return this.getRuleContext(0,$t)}STEPS(){return this.tryGetToken(J.STEPS,0)}STEP(){return this.tryGetToken(J.STEP,0)}RIGHT(){return this.tryGetToken(J.RIGHT,0)}LEFT(){return this.tryGetToken(J.LEFT,0)}UP(){return this.tryGetToken(J.UP,0)}DOWN(){return this.tryGetToken(J.DOWN,0)}enterRule(e){e.enterManySteps&&e.enterManySteps(this)}exitRule(e){e.exitManySteps&&e.exitManySteps(this)}accept(e){return e.visitManySteps?e.visitManySteps(this):e.visitChildren(this)}}class sC extends Mu{constructor(e){super(e.parent,e.invokingState);w(this,"_direction");this.copyFrom(e)}TAKE(){return this.getToken(J.TAKE,0)}STEP(){return this.getToken(J.STEP,0)}RIGHT(){return this.tryGetToken(J.RIGHT,0)}LEFT(){return this.tryGetToken(J.LEFT,0)}UP(){return this.tryGetToken(J.UP,0)}DOWN(){return this.tryGetToken(J.DOWN,0)}enterRule(e){e.enterOneStep&&e.enterOneStep(this)}exitRule(e){e.exitOneStep&&e.exitOneStep(this)}accept(e){return e.visitOneStep?e.visitOneStep(this):e.visitChildren(this)}}class b_ extends Ue.ParserRuleContext{IF(){return this.getToken(J.IF,0)}expression(){return this.getRuleContext(0,$t)}THEN(){return this.getToken(J.THEN,0)}END(){return this.getToken(J.END,0)}statement(t){return t===void 0?this.getRuleContexts(zo):this.getRuleContext(t,zo)}constructor(t,e){super(t,e)}get ruleIndex(){return J.RULE_condition}enterRule(t){t.enterCondition&&t.enterCondition(this)}exitRule(t){t.exitCondition&&t.exitCondition(this)}accept(t){return t.visitCondition?t.visitCondition(this):t.visitChildren(this)}}class $t extends Ue.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return J.RULE_expression}copyFrom(t){super.copyFrom(t)}}class Dh extends $t{constructor(e){super(e.parent,e.invokingState);w(this,"_left");w(this,"_op");w(this,"_right");this.copyFrom(e)}expression(e){return e===void 0?this.getRuleContexts($t):this.getRuleContext(e,$t)}BY(){return this.tryGetToken(J.BY,0)}MULTIPLY(){return this.tryGetToken(J.MULTIPLY,0)}DIVIDE(){return this.tryGetToken(J.DIVIDE,0)}REMAIND(){return this.tryGetToken(J.REMAIND,0)}PLUS(){return this.tryGetToken(J.PLUS,0)}MINUS(){return this.tryGetToken(J.MINUS,0)}enterRule(e){e.enterBinaryExpression&&e.enterBinaryExpression(this)}exitRule(e){e.exitBinaryExpression&&e.exitBinaryExpression(this)}accept(e){return e.visitBinaryExpression?e.visitBinaryExpression(this):e.visitChildren(this)}}class _o extends $t{constructor(e){super(e.parent,e.invokingState);w(this,"_left");w(this,"_op");w(this,"_right");w(this,"_eq");this.copyFrom(e)}expression(e){return e===void 0?this.getRuleContexts($t):this.getRuleContext(e,$t)}EQUAL(){return this.tryGetToken(J.EQUAL,0)}NOT(){return this.tryGetToken(J.NOT,0)}THAN(){return this.tryGetToken(J.THAN,0)}GREATER(){return this.tryGetToken(J.GREATER,0)}LESS(){return this.tryGetToken(J.LESS,0)}OR(){return this.tryGetToken(J.OR,0)}enterRule(e){e.enterLogicalExpression&&e.enterLogicalExpression(this)}exitRule(e){e.exitLogicalExpression&&e.exitLogicalExpression(this)}accept(e){return e.visitLogicalExpression?e.visitLogicalExpression(this):e.visitChildren(this)}}class oC extends $t{constructor(e){super(e.parent,e.invokingState);w(this,"_direction");this.copyFrom(e)}CAN(){return this.getToken(J.CAN,0)}GO(){return this.getToken(J.GO,0)}RIGHT(){return this.tryGetToken(J.RIGHT,0)}LEFT(){return this.tryGetToken(J.LEFT,0)}UP(){return this.tryGetToken(J.UP,0)}DOWN(){return this.tryGetToken(J.DOWN,0)}enterRule(e){e.enterCanExpr&&e.enterCanExpr(this)}exitRule(e){e.exitCanExpr&&e.exitCanExpr(this)}accept(e){return e.visitCanExpr?e.visitCanExpr(this):e.visitChildren(this)}}class aC extends $t{ID(){return this.getToken(J.ID,0)}constructor(t){super(t.parent,t.invokingState),this.copyFrom(t)}enterRule(t){t.enterIdExpr&&t.enterIdExpr(this)}exitRule(t){t.exitIdExpr&&t.exitIdExpr(this)}accept(t){return t.visitIdExpr?t.visitIdExpr(this):t.visitChildren(this)}}class lC extends $t{INT(){return this.getToken(J.INT,0)}constructor(t){super(t.parent,t.invokingState),this.copyFrom(t)}enterRule(t){t.enterIntExpr&&t.enterIntExpr(this)}exitRule(t){t.exitIntExpr&&t.exitIntExpr(this)}accept(t){return t.visitIntExpr?t.visitIntExpr(this):t.visitChildren(this)}}class C_ extends Ue.ParserRuleContext{constructor(e,i){super(e,i);w(this,"_id")}SET(){return this.getToken(J.SET,0)}expression(){return this.getRuleContext(0,$t)}ID(){return this.getToken(J.ID,0)}get ruleIndex(){return J.RULE_local}enterRule(e){e.enterLocal&&e.enterLocal(this)}exitRule(e){e.exitLocal&&e.exitLocal(this)}accept(e){return e.visitLocal?e.visitLocal(this):e.visitChildren(this)}}class uC extends Qc.AbstractParseTreeVisitor{constructor(){super(...arguments);w(this,"names",[]);w(this,"code",[])}defaultResult(){return{}}getCode(){return this.code}visitBinaryExpression(e){const i=e._op.text;switch(this.visit(e._right),this.visit(e._left),i){case"*":case"":this.code.push(new Y0);break;case"/":case"":this.code.push(new q0);break;case"+":case"":this.code.push(new V0);break;case"-":case"":this.code.push(new W0);break}}visitLogicalExpression(e){const i=e._op.text,n=e._eq;if(this.visit(e._right),this.visit(e._left),n)switch(i){case">":case"":this.code.push(new ex);break;case"<":case"":this.code.push(new tx);break}else switch(i){case"==":case"":this.code.push(new K0);break;case"!=":case"":this.code.push(new Z0);break;case">":case"":this.code.push(new J0);break;case"<":case"":this.code.push(new Q0);break}}visitCanExpr(e){let i=this.getDirectionIdx(e);this.code.push(new si(i)),this.code.push(new Mn(_r.Can))}visitCondition(e){this.visit(e.expression());const i=new rx(0);this.code.push(i);for(const n of e.statement())this.visit(n);i.to=this.code.length}visitExpression(e){this.visit(e)}visitIdExpr(e){const i=e.ID().text;if(!this.hasName(i))throw new Error("The name doesn't exist");this.code.push(new nx(this.nameIdx(i)))}visitIntExpr(e){this.code.push(new si(Number(e.INT().text)))}visitLocal(e){const i=e._id.text;this.hasName(i)||this.names.push(i);const n=this.nameIdx(i);this.visit(e.expression()),this.code.push(new ix(n))}visitManySteps(e){let i=this.getDirectionIdx(e);this.visit(e.expression()),this.code.push(new si(i)),this.code.push(new Mn(_r.Step))}visitOneStep(e){let i=this.getDirectionIdx(e);this.code.push(new si(i)),this.code.push(new Mn(_r.OneStep))}visitProgram(e){return this.visitChildren(e)}visitStatement(e){return this.visitChildren(e)}visitTakeSteps(e){return this.visitChildren(e)}hasName(e){return this.nameIdx(e)!=-1}nameIdx(e){return this.names.findIndex(i=>i===e)}getDirectionIdx(e){const i=e._direction.text;let n=0;switch(i){case"":n=ie.Up;break;case"":n=ie.Down;break;case"":n=ie.Left;break;case"":n=ie.Right;break}return n}}function hC(r){let t,e,i,n,s,o,a,l,u;return{c(){t=ds("main"),e=ds("div"),i=ed(),n=ds("div"),s=ds("div"),o=ed(),a=ds("button"),a.textContent="compile & run",xn(e,"id","game"),xn(s,"id","editor_text"),xn(s,"class","svelte-1wgc70b"),xn(n,"id","editor"),xn(n,"class","svelte-1wgc70b"),xn(t,"class","svelte-1wgc70b")},m(h,c){O_(h,t,c),pn(t,e),pn(t,i),pn(t,n),pn(n,s),pn(n,o),pn(n,a),l||(u=L_(a,"click",r[0]),l=!0)},p:In,i:In,o:In,d(h){h&&Cp(t),l=!1,u()}}}const ti=10,cC=1;function dC(r){const t=new wc({});t.ticker.speed=1e-4;let e;lt.SCALE_MODE=fr.NEAREST,k_(()=>{e=ace.edit("editor_text"),e.setTheme("ace/theme/monokai"),e.session.setMode("ace/mode/plain_text");const a=document.querySelector("#game");a.children.length===0&&a.appendChild(t.view)});const i=Kn.from(gA);i.x=40,i.y=40,i.anchor.x=.5,i.anchor.y=.5,i.scale.set(5),t.stage.addChild(i);let n=[];n[_r.Step]=function(){const a=this.stack.pop(),l=this.stack.pop();let u=0;switch(a){case ie.Up:{const h=()=>{u>=l&&(t.ticker.remove(h),this.canExecute=!0),i.y-=ti,u++};t.ticker.add(h)}break;case ie.Down:{const h=()=>{u>=l&&(t.ticker.remove(h),this.canExecute=!0),i.y+=ti,u++};t.ticker.add(h)}break;case ie.Left:{const h=()=>{u>=l&&(t.ticker.remove(h),this.canExecute=!0),i.x-=ti,u++};t.ticker.add(h)}break;case ie.Right:{const h=()=>{u>=l&&(t.ticker.remove(h),this.canExecute=!0),i.x+=ti,u++};t.ticker.add(h)}break}},n[_r.Can]=function(){this.stack.pop(),this.stack.push(1),this.canExecute=!0},n[_r.OneStep]=function(){switch(this.stack.pop()){case ie.Up:i.y=i.y-ti;break;case ie.Down:i.y=i.y+ti;break;case ie.Left:i.x=i.x-ti;break;case ie.Right:i.x=i.x+ti;break}this.canExecute=!0};let s=new vA;return s.SetTraps(n),t.ticker.add(()=>{}),t.ticker.add(()=>{for(let a=0;a<cC;a++)s.ExecuteOneInstruction()},{},ki.HIGH),[()=>{let a=e.getValue();if(document.documentElement.lang=="en"){let l=To.CharStreams.fromString(a),u=new qb(l),h=new To.CommonTokenStream(u),d=new mt(h).program(),f=new rC;f.visit(d);const p=f.getCode();i.x=40,i.y=40,console.log(p),s.LoadCode(p),s.SetIP(0)}else if(document.documentElement.lang=="ru"){let l=To.CharStreams.fromString(a),u=new yt(l),h=new To.CommonTokenStream(u),d=new J(h).program(),f=new uC;f.visit(d);const p=f.getCode();i.x=40,i.y=40,console.log(p),s.LoadCode(p),s.SetIP(0)}}]}class fC extends Y_{constructor(t){super(),q_(this,t,dC,hC,P_,{})}}new fC({target:document.getElementById("app")});
